var bx=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var tL=bx((rL,yx)=>{(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const A of document.querySelectorAll('link[rel="modulepreload"]'))r(A);new MutationObserver(A=>{for(const o of A)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(A){const o={};return A.integrity&&(o.integrity=A.integrity),A.referrerPolicy&&(o.referrerPolicy=A.referrerPolicy),A.crossOrigin==="use-credentials"?o.credentials="include":A.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(A){if(A.ep)return;A.ep=!0;const o=n(A);fetch(A.href,o)}})();function Ex(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Vw={exports:{}},xl={},Ww={exports:{}},ge={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Oa=Symbol.for("react.element"),Qx=Symbol.for("react.portal"),Ux=Symbol.for("react.fragment"),Ix=Symbol.for("react.strict_mode"),Sx=Symbol.for("react.profiler"),_x=Symbol.for("react.provider"),kx=Symbol.for("react.context"),Dx=Symbol.for("react.forward_ref"),Rx=Symbol.for("react.suspense"),Tx=Symbol.for("react.memo"),Hx=Symbol.for("react.lazy"),Ug=Symbol.iterator;function Nx(e){return e===null||typeof e!="object"?null:(e=Ug&&e[Ug]||e["@@iterator"],typeof e=="function"?e:null)}var Gw={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},zw=Object.assign,Xw={};function vi(e,t,n){this.props=e,this.context=t,this.refs=Xw,this.updater=n||Gw}vi.prototype.isReactComponent={};vi.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};vi.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function $w(){}$w.prototype=vi.prototype;function Fd(e,t,n){this.props=e,this.context=t,this.refs=Xw,this.updater=n||Gw}var bd=Fd.prototype=new $w;bd.constructor=Fd;zw(bd,vi.prototype);bd.isPureReactComponent=!0;var Ig=Array.isArray,jw=Object.prototype.hasOwnProperty,Ed={current:null},Yw={key:!0,ref:!0,__self:!0,__source:!0};function qw(e,t,n){var r,A={},o=null,i=null;if(t!=null)for(r in t.ref!==void 0&&(i=t.ref),t.key!==void 0&&(o=""+t.key),t)jw.call(t,r)&&!Yw.hasOwnProperty(r)&&(A[r]=t[r]);var a=arguments.length-2;if(a===1)A.children=n;else if(1<a){for(var s=Array(a),u=0;u<a;u++)s[u]=arguments[u+2];A.children=s}if(e&&e.defaultProps)for(r in a=e.defaultProps,a)A[r]===void 0&&(A[r]=a[r]);return{$$typeof:Oa,type:e,key:o,ref:i,props:A,_owner:Ed.current}}function Lx(e,t){return{$$typeof:Oa,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Qd(e){return typeof e=="object"&&e!==null&&e.$$typeof===Oa}function Mx(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Sg=/\/+/g;function gc(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Mx(""+e.key):t.toString(36)}function ru(e,t,n,r,A){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var i=!1;if(e===null)i=!0;else switch(o){case"string":case"number":i=!0;break;case"object":switch(e.$$typeof){case Oa:case Qx:i=!0}}if(i)return i=e,A=A(i),e=r===""?"."+gc(i,0):r,Ig(A)?(n="",e!=null&&(n=e.replace(Sg,"$&/")+"/"),ru(A,t,n,"",function(u){return u})):A!=null&&(Qd(A)&&(A=Lx(A,n+(!A.key||i&&i.key===A.key?"":(""+A.key).replace(Sg,"$&/")+"/")+e)),t.push(A)),1;if(i=0,r=r===""?".":r+":",Ig(e))for(var a=0;a<e.length;a++){o=e[a];var s=r+gc(o,a);i+=ru(o,t,n,s,A)}else if(s=Nx(e),typeof s=="function")for(e=s.call(e),a=0;!(o=e.next()).done;)o=o.value,s=r+gc(o,a++),i+=ru(o,t,n,s,A);else if(o==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return i}function rs(e,t,n){if(e==null)return e;var r=[],A=0;return ru(e,r,"","",function(o){return t.call(n,o,A++)}),r}function Ox(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Vt={current:null},Au={transition:null},Px={ReactCurrentDispatcher:Vt,ReactCurrentBatchConfig:Au,ReactCurrentOwner:Ed};function Jw(){throw Error("act(...) is not supported in production builds of React.")}ge.Children={map:rs,forEach:function(e,t,n){rs(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return rs(e,function(){t++}),t},toArray:function(e){return rs(e,function(t){return t})||[]},only:function(e){if(!Qd(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};ge.Component=vi;ge.Fragment=Ux;ge.Profiler=Sx;ge.PureComponent=Fd;ge.StrictMode=Ix;ge.Suspense=Rx;ge.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Px;ge.act=Jw;ge.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=zw({},e.props),A=e.key,o=e.ref,i=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,i=Ed.current),t.key!==void 0&&(A=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(s in t)jw.call(t,s)&&!Yw.hasOwnProperty(s)&&(r[s]=t[s]===void 0&&a!==void 0?a[s]:t[s])}var s=arguments.length-2;if(s===1)r.children=n;else if(1<s){a=Array(s);for(var u=0;u<s;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:Oa,type:e.type,key:A,ref:o,props:r,_owner:i}};ge.createContext=function(e){return e={$$typeof:kx,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:_x,_context:e},e.Consumer=e};ge.createElement=qw;ge.createFactory=function(e){var t=qw.bind(null,e);return t.type=e,t};ge.createRef=function(){return{current:null}};ge.forwardRef=function(e){return{$$typeof:Dx,render:e}};ge.isValidElement=Qd;ge.lazy=function(e){return{$$typeof:Hx,_payload:{_status:-1,_result:e},_init:Ox}};ge.memo=function(e,t){return{$$typeof:Tx,type:e,compare:t===void 0?null:t}};ge.startTransition=function(e){var t=Au.transition;Au.transition={};try{e()}finally{Au.transition=t}};ge.unstable_act=Jw;ge.useCallback=function(e,t){return Vt.current.useCallback(e,t)};ge.useContext=function(e){return Vt.current.useContext(e)};ge.useDebugValue=function(){};ge.useDeferredValue=function(e){return Vt.current.useDeferredValue(e)};ge.useEffect=function(e,t){return Vt.current.useEffect(e,t)};ge.useId=function(){return Vt.current.useId()};ge.useImperativeHandle=function(e,t,n){return Vt.current.useImperativeHandle(e,t,n)};ge.useInsertionEffect=function(e,t){return Vt.current.useInsertionEffect(e,t)};ge.useLayoutEffect=function(e,t){return Vt.current.useLayoutEffect(e,t)};ge.useMemo=function(e,t){return Vt.current.useMemo(e,t)};ge.useReducer=function(e,t,n){return Vt.current.useReducer(e,t,n)};ge.useRef=function(e){return Vt.current.useRef(e)};ge.useState=function(e){return Vt.current.useState(e)};ge.useSyncExternalStore=function(e,t,n){return Vt.current.useSyncExternalStore(e,t,n)};ge.useTransition=function(){return Vt.current.useTransition()};ge.version="18.3.1";Ww.exports=ge;var Gt=Ww.exports;const Kx=Ex(Gt);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vx=Gt,Wx=Symbol.for("react.element"),Gx=Symbol.for("react.fragment"),zx=Object.prototype.hasOwnProperty,Xx=Vx.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,$x={key:!0,ref:!0,__self:!0,__source:!0};function Zw(e,t,n){var r,A={},o=null,i=null;n!==void 0&&(o=""+n),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(i=t.ref);for(r in t)zx.call(t,r)&&!$x.hasOwnProperty(r)&&(A[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)A[r]===void 0&&(A[r]=t[r]);return{$$typeof:Wx,type:e,key:o,ref:i,props:A,_owner:Xx.current}}xl.Fragment=Gx;xl.jsx=Zw;xl.jsxs=Zw;Vw.exports=xl;var Ce=Vw.exports,Mf={},eB={exports:{}},gn={},tB={exports:{}},nB={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(D,R){var L=D.length;D.push(R);e:for(;0<L;){var G=L-1>>>1,X=D[G];if(0<A(X,R))D[G]=R,D[L]=X,L=G;else break e}}function n(D){return D.length===0?null:D[0]}function r(D){if(D.length===0)return null;var R=D[0],L=D.pop();if(L!==R){D[0]=L;e:for(var G=0,X=D.length,q=X>>>1;G<q;){var ie=2*(G+1)-1,ae=D[ie],se=ie+1,le=D[se];if(0>A(ae,L))se<X&&0>A(le,ae)?(D[G]=le,D[se]=L,G=se):(D[G]=ae,D[ie]=L,G=ie);else if(se<X&&0>A(le,L))D[G]=le,D[se]=L,G=se;else break e}}return R}function A(D,R){var L=D.sortIndex-R.sortIndex;return L!==0?L:D.id-R.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var i=Date,a=i.now();e.unstable_now=function(){return i.now()-a}}var s=[],u=[],l=1,c=null,f=3,h=!1,d=!1,g=!1,m=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(D){for(var R=n(u);R!==null;){if(R.callback===null)r(u);else if(R.startTime<=D)r(u),R.sortIndex=R.expirationTime,t(s,R);else break;R=n(u)}}function B(D){if(g=!1,w(D),!d)if(n(s)!==null)d=!0,K(y);else{var R=n(u);R!==null&&P(B,R.startTime-D)}}function y(D,R){d=!1,g&&(g=!1,p(x),x=-1),h=!0;var L=f;try{for(w(R),c=n(s);c!==null&&(!(c.expirationTime>R)||D&&!I());){var G=c.callback;if(typeof G=="function"){c.callback=null,f=c.priorityLevel;var X=G(c.expirationTime<=R);R=e.unstable_now(),typeof X=="function"?c.callback=X:c===n(s)&&r(s),w(R)}else r(s);c=n(s)}if(c!==null)var q=!0;else{var ie=n(u);ie!==null&&P(B,ie.startTime-R),q=!1}return q}finally{c=null,f=L,h=!1}}var C=!1,b=null,x=-1,F=5,E=-1;function I(){return!(e.unstable_now()-E<F)}function S(){if(b!==null){var D=e.unstable_now();E=D;var R=!0;try{R=b(!0,D)}finally{R?T():(C=!1,b=null)}}else C=!1}var T;if(typeof v=="function")T=function(){v(S)};else if(typeof MessageChannel<"u"){var N=new MessageChannel,O=N.port2;N.port1.onmessage=S,T=function(){O.postMessage(null)}}else T=function(){m(S,0)};function K(D){b=D,C||(C=!0,T())}function P(D,R){x=m(function(){D(e.unstable_now())},R)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(D){D.callback=null},e.unstable_continueExecution=function(){d||h||(d=!0,K(y))},e.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):F=0<D?Math.floor(1e3/D):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return n(s)},e.unstable_next=function(D){switch(f){case 1:case 2:case 3:var R=3;break;default:R=f}var L=f;f=R;try{return D()}finally{f=L}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(D,R){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var L=f;f=D;try{return R()}finally{f=L}},e.unstable_scheduleCallback=function(D,R,L){var G=e.unstable_now();switch(typeof L=="object"&&L!==null?(L=L.delay,L=typeof L=="number"&&0<L?G+L:G):L=G,D){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=L+X,D={id:l++,callback:R,priorityLevel:D,startTime:L,expirationTime:X,sortIndex:-1},L>G?(D.sortIndex=L,t(u,D),n(s)===null&&D===n(u)&&(g?(p(x),x=-1):g=!0,P(B,L-G))):(D.sortIndex=X,t(s,D),d||h||(d=!0,K(y))),D},e.unstable_shouldYield=I,e.unstable_wrapCallback=function(D){var R=f;return function(){var L=f;f=R;try{return D.apply(this,arguments)}finally{f=L}}}})(nB);tB.exports=nB;var jx=tB.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yx=Gt,pn=jx;function z(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var rB=new Set,ha={};function ro(e,t){oi(e,t),oi(e+"Capture",t)}function oi(e,t){for(ha[e]=t,e=0;e<t.length;e++)rB.add(t[e])}var _r=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Of=Object.prototype.hasOwnProperty,qx=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,_g={},kg={};function Jx(e){return Of.call(kg,e)?!0:Of.call(_g,e)?!1:qx.test(e)?kg[e]=!0:(_g[e]=!0,!1)}function Zx(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function eF(e,t,n,r){if(t===null||typeof t>"u"||Zx(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Wt(e,t,n,r,A,o,i){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=A,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=i}var Et={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Et[e]=new Wt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Et[t]=new Wt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Et[e]=new Wt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Et[e]=new Wt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Et[e]=new Wt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Et[e]=new Wt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Et[e]=new Wt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Et[e]=new Wt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Et[e]=new Wt(e,5,!1,e.toLowerCase(),null,!1,!1)});var Ud=/[\-:]([a-z])/g;function Id(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Ud,Id);Et[t]=new Wt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Ud,Id);Et[t]=new Wt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Ud,Id);Et[t]=new Wt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Et[e]=new Wt(e,1,!1,e.toLowerCase(),null,!1,!1)});Et.xlinkHref=new Wt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Et[e]=new Wt(e,1,!1,e.toLowerCase(),null,!0,!0)});function Sd(e,t,n,r){var A=Et.hasOwnProperty(t)?Et[t]:null;(A!==null?A.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(eF(t,n,A,r)&&(n=null),r||A===null?Jx(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):A.mustUseProperty?e[A.propertyName]=n===null?A.type===3?!1:"":n:(t=A.attributeName,r=A.attributeNamespace,n===null?e.removeAttribute(t):(A=A.type,n=A===3||A===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Hr=Yx.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,As=Symbol.for("react.element"),_o=Symbol.for("react.portal"),ko=Symbol.for("react.fragment"),_d=Symbol.for("react.strict_mode"),Pf=Symbol.for("react.profiler"),AB=Symbol.for("react.provider"),oB=Symbol.for("react.context"),kd=Symbol.for("react.forward_ref"),Kf=Symbol.for("react.suspense"),Vf=Symbol.for("react.suspense_list"),Dd=Symbol.for("react.memo"),jr=Symbol.for("react.lazy"),iB=Symbol.for("react.offscreen"),Dg=Symbol.iterator;function xi(e){return e===null||typeof e!="object"?null:(e=Dg&&e[Dg]||e["@@iterator"],typeof e=="function"?e:null)}var Ge=Object.assign,vc;function Mi(e){if(vc===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);vc=t&&t[1]||""}return`
`+vc+e}var mc=!1;function wc(e,t){if(!e||mc)return"";mc=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var A=u.stack.split(`
`),o=r.stack.split(`
`),i=A.length-1,a=o.length-1;1<=i&&0<=a&&A[i]!==o[a];)a--;for(;1<=i&&0<=a;i--,a--)if(A[i]!==o[a]){if(i!==1||a!==1)do if(i--,a--,0>a||A[i]!==o[a]){var s=`
`+A[i].replace(" at new "," at ");return e.displayName&&s.includes("<anonymous>")&&(s=s.replace("<anonymous>",e.displayName)),s}while(1<=i&&0<=a);break}}}finally{mc=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Mi(e):""}function tF(e){switch(e.tag){case 5:return Mi(e.type);case 16:return Mi("Lazy");case 13:return Mi("Suspense");case 19:return Mi("SuspenseList");case 0:case 2:case 15:return e=wc(e.type,!1),e;case 11:return e=wc(e.type.render,!1),e;case 1:return e=wc(e.type,!0),e;default:return""}}function Wf(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ko:return"Fragment";case _o:return"Portal";case Pf:return"Profiler";case _d:return"StrictMode";case Kf:return"Suspense";case Vf:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case oB:return(e.displayName||"Context")+".Consumer";case AB:return(e._context.displayName||"Context")+".Provider";case kd:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Dd:return t=e.displayName||null,t!==null?t:Wf(e.type)||"Memo";case jr:t=e._payload,e=e._init;try{return Wf(e(t))}catch{}}return null}function nF(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Wf(t);case 8:return t===_d?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function BA(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function aB(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function rF(e){var t=aB(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var A=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return A.call(this)},set:function(i){r=""+i,o.call(this,i)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(i){r=""+i},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function os(e){e._valueTracker||(e._valueTracker=rF(e))}function sB(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=aB(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Bu(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Gf(e,t){var n=t.checked;return Ge({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Rg(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=BA(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function uB(e,t){t=t.checked,t!=null&&Sd(e,"checked",t,!1)}function zf(e,t){uB(e,t);var n=BA(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Xf(e,t.type,n):t.hasOwnProperty("defaultValue")&&Xf(e,t.type,BA(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Tg(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Xf(e,t,n){(t!=="number"||Bu(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Oi=Array.isArray;function Wo(e,t,n,r){if(e=e.options,t){t={};for(var A=0;A<n.length;A++)t["$"+n[A]]=!0;for(n=0;n<e.length;n++)A=t.hasOwnProperty("$"+e[n].value),e[n].selected!==A&&(e[n].selected=A),A&&r&&(e[n].defaultSelected=!0)}else{for(n=""+BA(n),t=null,A=0;A<e.length;A++){if(e[A].value===n){e[A].selected=!0,r&&(e[A].defaultSelected=!0);return}t!==null||e[A].disabled||(t=e[A])}t!==null&&(t.selected=!0)}}function $f(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(z(91));return Ge({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Hg(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(z(92));if(Oi(n)){if(1<n.length)throw Error(z(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:BA(n)}}function lB(e,t){var n=BA(t.value),r=BA(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Ng(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function cB(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function jf(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?cB(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var is,fB=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,A){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,A)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(is=is||document.createElement("div"),is.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=is.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function da(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Yi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},AF=["Webkit","ms","Moz","O"];Object.keys(Yi).forEach(function(e){AF.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Yi[t]=Yi[e]})});function hB(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Yi.hasOwnProperty(e)&&Yi[e]?(""+t).trim():t+"px"}function dB(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,A=hB(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,A):e[n]=A}}var oF=Ge({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Yf(e,t){if(t){if(oF[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(z(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(z(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(z(61))}if(t.style!=null&&typeof t.style!="object")throw Error(z(62))}}function qf(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Jf=null;function Rd(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Zf=null,Go=null,zo=null;function Lg(e){if(e=Va(e)){if(typeof Zf!="function")throw Error(z(280));var t=e.stateNode;t&&(t=Ul(t),Zf(e.stateNode,e.type,t))}}function pB(e){Go?zo?zo.push(e):zo=[e]:Go=e}function gB(){if(Go){var e=Go,t=zo;if(zo=Go=null,Lg(e),t)for(e=0;e<t.length;e++)Lg(t[e])}}function vB(e,t){return e(t)}function mB(){}var Bc=!1;function wB(e,t,n){if(Bc)return e(t,n);Bc=!0;try{return vB(e,t,n)}finally{Bc=!1,(Go!==null||zo!==null)&&(mB(),gB())}}function pa(e,t){var n=e.stateNode;if(n===null)return null;var r=Ul(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(z(231,t,typeof n));return n}var eh=!1;if(_r)try{var Fi={};Object.defineProperty(Fi,"passive",{get:function(){eh=!0}}),window.addEventListener("test",Fi,Fi),window.removeEventListener("test",Fi,Fi)}catch{eh=!1}function iF(e,t,n,r,A,o,i,a,s){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(l){this.onError(l)}}var qi=!1,yu=null,Cu=!1,th=null,aF={onError:function(e){qi=!0,yu=e}};function sF(e,t,n,r,A,o,i,a,s){qi=!1,yu=null,iF.apply(aF,arguments)}function uF(e,t,n,r,A,o,i,a,s){if(sF.apply(this,arguments),qi){if(qi){var u=yu;qi=!1,yu=null}else throw Error(z(198));Cu||(Cu=!0,th=u)}}function Ao(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function BB(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Mg(e){if(Ao(e)!==e)throw Error(z(188))}function lF(e){var t=e.alternate;if(!t){if(t=Ao(e),t===null)throw Error(z(188));return t!==e?null:e}for(var n=e,r=t;;){var A=n.return;if(A===null)break;var o=A.alternate;if(o===null){if(r=A.return,r!==null){n=r;continue}break}if(A.child===o.child){for(o=A.child;o;){if(o===n)return Mg(A),e;if(o===r)return Mg(A),t;o=o.sibling}throw Error(z(188))}if(n.return!==r.return)n=A,r=o;else{for(var i=!1,a=A.child;a;){if(a===n){i=!0,n=A,r=o;break}if(a===r){i=!0,r=A,n=o;break}a=a.sibling}if(!i){for(a=o.child;a;){if(a===n){i=!0,n=o,r=A;break}if(a===r){i=!0,r=o,n=A;break}a=a.sibling}if(!i)throw Error(z(189))}}if(n.alternate!==r)throw Error(z(190))}if(n.tag!==3)throw Error(z(188));return n.stateNode.current===n?e:t}function yB(e){return e=lF(e),e!==null?CB(e):null}function CB(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=CB(e);if(t!==null)return t;e=e.sibling}return null}var xB=pn.unstable_scheduleCallback,Og=pn.unstable_cancelCallback,cF=pn.unstable_shouldYield,fF=pn.unstable_requestPaint,Ze=pn.unstable_now,hF=pn.unstable_getCurrentPriorityLevel,Td=pn.unstable_ImmediatePriority,FB=pn.unstable_UserBlockingPriority,xu=pn.unstable_NormalPriority,dF=pn.unstable_LowPriority,bB=pn.unstable_IdlePriority,Fl=null,or=null;function pF(e){if(or&&typeof or.onCommitFiberRoot=="function")try{or.onCommitFiberRoot(Fl,e,void 0,(e.current.flags&128)===128)}catch{}}var Mn=Math.clz32?Math.clz32:mF,gF=Math.log,vF=Math.LN2;function mF(e){return e>>>=0,e===0?32:31-(gF(e)/vF|0)|0}var as=64,ss=4194304;function Pi(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Fu(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,A=e.suspendedLanes,o=e.pingedLanes,i=n&268435455;if(i!==0){var a=i&~A;a!==0?r=Pi(a):(o&=i,o!==0&&(r=Pi(o)))}else i=n&~A,i!==0?r=Pi(i):o!==0&&(r=Pi(o));if(r===0)return 0;if(t!==0&&t!==r&&!(t&A)&&(A=r&-r,o=t&-t,A>=o||A===16&&(o&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Mn(t),A=1<<n,r|=e[n],t&=~A;return r}function wF(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function BF(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,A=e.expirationTimes,o=e.pendingLanes;0<o;){var i=31-Mn(o),a=1<<i,s=A[i];s===-1?(!(a&n)||a&r)&&(A[i]=wF(a,t)):s<=t&&(e.expiredLanes|=a),o&=~a}}function nh(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function EB(){var e=as;return as<<=1,!(as&4194240)&&(as=64),e}function yc(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Pa(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Mn(t),e[t]=n}function yF(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var A=31-Mn(n),o=1<<A;t[A]=0,r[A]=-1,e[A]=-1,n&=~o}}function Hd(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Mn(n),A=1<<r;A&t|e[r]&t&&(e[r]|=t),n&=~A}}var Ue=0;function QB(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var UB,Nd,IB,SB,_B,rh=!1,us=[],aA=null,sA=null,uA=null,ga=new Map,va=new Map,Jr=[],CF="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Pg(e,t){switch(e){case"focusin":case"focusout":aA=null;break;case"dragenter":case"dragleave":sA=null;break;case"mouseover":case"mouseout":uA=null;break;case"pointerover":case"pointerout":ga.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":va.delete(t.pointerId)}}function bi(e,t,n,r,A,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[A]},t!==null&&(t=Va(t),t!==null&&Nd(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,A!==null&&t.indexOf(A)===-1&&t.push(A),e)}function xF(e,t,n,r,A){switch(t){case"focusin":return aA=bi(aA,e,t,n,r,A),!0;case"dragenter":return sA=bi(sA,e,t,n,r,A),!0;case"mouseover":return uA=bi(uA,e,t,n,r,A),!0;case"pointerover":var o=A.pointerId;return ga.set(o,bi(ga.get(o)||null,e,t,n,r,A)),!0;case"gotpointercapture":return o=A.pointerId,va.set(o,bi(va.get(o)||null,e,t,n,r,A)),!0}return!1}function kB(e){var t=MA(e.target);if(t!==null){var n=Ao(t);if(n!==null){if(t=n.tag,t===13){if(t=BB(n),t!==null){e.blockedOn=t,_B(e.priority,function(){IB(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ou(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Ah(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Jf=r,n.target.dispatchEvent(r),Jf=null}else return t=Va(n),t!==null&&Nd(t),e.blockedOn=n,!1;t.shift()}return!0}function Kg(e,t,n){ou(e)&&n.delete(t)}function FF(){rh=!1,aA!==null&&ou(aA)&&(aA=null),sA!==null&&ou(sA)&&(sA=null),uA!==null&&ou(uA)&&(uA=null),ga.forEach(Kg),va.forEach(Kg)}function Ei(e,t){e.blockedOn===t&&(e.blockedOn=null,rh||(rh=!0,pn.unstable_scheduleCallback(pn.unstable_NormalPriority,FF)))}function ma(e){function t(A){return Ei(A,e)}if(0<us.length){Ei(us[0],e);for(var n=1;n<us.length;n++){var r=us[n];r.blockedOn===e&&(r.blockedOn=null)}}for(aA!==null&&Ei(aA,e),sA!==null&&Ei(sA,e),uA!==null&&Ei(uA,e),ga.forEach(t),va.forEach(t),n=0;n<Jr.length;n++)r=Jr[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Jr.length&&(n=Jr[0],n.blockedOn===null);)kB(n),n.blockedOn===null&&Jr.shift()}var Xo=Hr.ReactCurrentBatchConfig,bu=!0;function bF(e,t,n,r){var A=Ue,o=Xo.transition;Xo.transition=null;try{Ue=1,Ld(e,t,n,r)}finally{Ue=A,Xo.transition=o}}function EF(e,t,n,r){var A=Ue,o=Xo.transition;Xo.transition=null;try{Ue=4,Ld(e,t,n,r)}finally{Ue=A,Xo.transition=o}}function Ld(e,t,n,r){if(bu){var A=Ah(e,t,n,r);if(A===null)_c(e,t,r,Eu,n),Pg(e,r);else if(xF(A,e,t,n,r))r.stopPropagation();else if(Pg(e,r),t&4&&-1<CF.indexOf(e)){for(;A!==null;){var o=Va(A);if(o!==null&&UB(o),o=Ah(e,t,n,r),o===null&&_c(e,t,r,Eu,n),o===A)break;A=o}A!==null&&r.stopPropagation()}else _c(e,t,r,null,n)}}var Eu=null;function Ah(e,t,n,r){if(Eu=null,e=Rd(r),e=MA(e),e!==null)if(t=Ao(e),t===null)e=null;else if(n=t.tag,n===13){if(e=BB(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Eu=e,null}function DB(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(hF()){case Td:return 1;case FB:return 4;case xu:case dF:return 16;case bB:return 536870912;default:return 16}default:return 16}}var eA=null,Md=null,iu=null;function RB(){if(iu)return iu;var e,t=Md,n=t.length,r,A="value"in eA?eA.value:eA.textContent,o=A.length;for(e=0;e<n&&t[e]===A[e];e++);var i=n-e;for(r=1;r<=i&&t[n-r]===A[o-r];r++);return iu=A.slice(e,1<r?1-r:void 0)}function au(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ls(){return!0}function Vg(){return!1}function vn(e){function t(n,r,A,o,i){this._reactName=n,this._targetInst=A,this.type=r,this.nativeEvent=o,this.target=i,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(o):o[a]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?ls:Vg,this.isPropagationStopped=Vg,this}return Ge(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ls)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ls)},persist:function(){},isPersistent:ls}),t}var mi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Od=vn(mi),Ka=Ge({},mi,{view:0,detail:0}),QF=vn(Ka),Cc,xc,Qi,bl=Ge({},Ka,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Pd,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Qi&&(Qi&&e.type==="mousemove"?(Cc=e.screenX-Qi.screenX,xc=e.screenY-Qi.screenY):xc=Cc=0,Qi=e),Cc)},movementY:function(e){return"movementY"in e?e.movementY:xc}}),Wg=vn(bl),UF=Ge({},bl,{dataTransfer:0}),IF=vn(UF),SF=Ge({},Ka,{relatedTarget:0}),Fc=vn(SF),_F=Ge({},mi,{animationName:0,elapsedTime:0,pseudoElement:0}),kF=vn(_F),DF=Ge({},mi,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),RF=vn(DF),TF=Ge({},mi,{data:0}),Gg=vn(TF),HF={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},NF={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},LF={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function MF(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=LF[e])?!!t[e]:!1}function Pd(){return MF}var OF=Ge({},Ka,{key:function(e){if(e.key){var t=HF[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=au(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?NF[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Pd,charCode:function(e){return e.type==="keypress"?au(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?au(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),PF=vn(OF),KF=Ge({},bl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),zg=vn(KF),VF=Ge({},Ka,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Pd}),WF=vn(VF),GF=Ge({},mi,{propertyName:0,elapsedTime:0,pseudoElement:0}),zF=vn(GF),XF=Ge({},bl,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),$F=vn(XF),jF=[9,13,27,32],Kd=_r&&"CompositionEvent"in window,Ji=null;_r&&"documentMode"in document&&(Ji=document.documentMode);var YF=_r&&"TextEvent"in window&&!Ji,TB=_r&&(!Kd||Ji&&8<Ji&&11>=Ji),Xg=" ",$g=!1;function HB(e,t){switch(e){case"keyup":return jF.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function NB(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Do=!1;function qF(e,t){switch(e){case"compositionend":return NB(t);case"keypress":return t.which!==32?null:($g=!0,Xg);case"textInput":return e=t.data,e===Xg&&$g?null:e;default:return null}}function JF(e,t){if(Do)return e==="compositionend"||!Kd&&HB(e,t)?(e=RB(),iu=Md=eA=null,Do=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return TB&&t.locale!=="ko"?null:t.data;default:return null}}var ZF={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function jg(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!ZF[e.type]:t==="textarea"}function LB(e,t,n,r){pB(r),t=Qu(t,"onChange"),0<t.length&&(n=new Od("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Zi=null,wa=null;function eb(e){jB(e,0)}function El(e){var t=Ho(e);if(sB(t))return e}function tb(e,t){if(e==="change")return t}var MB=!1;if(_r){var bc;if(_r){var Ec="oninput"in document;if(!Ec){var Yg=document.createElement("div");Yg.setAttribute("oninput","return;"),Ec=typeof Yg.oninput=="function"}bc=Ec}else bc=!1;MB=bc&&(!document.documentMode||9<document.documentMode)}function qg(){Zi&&(Zi.detachEvent("onpropertychange",OB),wa=Zi=null)}function OB(e){if(e.propertyName==="value"&&El(wa)){var t=[];LB(t,wa,e,Rd(e)),wB(eb,t)}}function nb(e,t,n){e==="focusin"?(qg(),Zi=t,wa=n,Zi.attachEvent("onpropertychange",OB)):e==="focusout"&&qg()}function rb(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return El(wa)}function Ab(e,t){if(e==="click")return El(t)}function ob(e,t){if(e==="input"||e==="change")return El(t)}function ib(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Kn=typeof Object.is=="function"?Object.is:ib;function Ba(e,t){if(Kn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var A=n[r];if(!Of.call(t,A)||!Kn(e[A],t[A]))return!1}return!0}function Jg(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Zg(e,t){var n=Jg(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Jg(n)}}function PB(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?PB(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function KB(){for(var e=window,t=Bu();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Bu(e.document)}return t}function Vd(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function ab(e){var t=KB(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&PB(n.ownerDocument.documentElement,n)){if(r!==null&&Vd(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var A=n.textContent.length,o=Math.min(r.start,A);r=r.end===void 0?o:Math.min(r.end,A),!e.extend&&o>r&&(A=r,r=o,o=A),A=Zg(n,o);var i=Zg(n,r);A&&i&&(e.rangeCount!==1||e.anchorNode!==A.node||e.anchorOffset!==A.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&(t=t.createRange(),t.setStart(A.node,A.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var sb=_r&&"documentMode"in document&&11>=document.documentMode,Ro=null,oh=null,ea=null,ih=!1;function ev(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;ih||Ro==null||Ro!==Bu(r)||(r=Ro,"selectionStart"in r&&Vd(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ea&&Ba(ea,r)||(ea=r,r=Qu(oh,"onSelect"),0<r.length&&(t=new Od("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Ro)))}function cs(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var To={animationend:cs("Animation","AnimationEnd"),animationiteration:cs("Animation","AnimationIteration"),animationstart:cs("Animation","AnimationStart"),transitionend:cs("Transition","TransitionEnd")},Qc={},VB={};_r&&(VB=document.createElement("div").style,"AnimationEvent"in window||(delete To.animationend.animation,delete To.animationiteration.animation,delete To.animationstart.animation),"TransitionEvent"in window||delete To.transitionend.transition);function Ql(e){if(Qc[e])return Qc[e];if(!To[e])return e;var t=To[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in VB)return Qc[e]=t[n];return e}var WB=Ql("animationend"),GB=Ql("animationiteration"),zB=Ql("animationstart"),XB=Ql("transitionend"),$B=new Map,tv="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function bA(e,t){$B.set(e,t),ro(t,[e])}for(var Uc=0;Uc<tv.length;Uc++){var Ic=tv[Uc],ub=Ic.toLowerCase(),lb=Ic[0].toUpperCase()+Ic.slice(1);bA(ub,"on"+lb)}bA(WB,"onAnimationEnd");bA(GB,"onAnimationIteration");bA(zB,"onAnimationStart");bA("dblclick","onDoubleClick");bA("focusin","onFocus");bA("focusout","onBlur");bA(XB,"onTransitionEnd");oi("onMouseEnter",["mouseout","mouseover"]);oi("onMouseLeave",["mouseout","mouseover"]);oi("onPointerEnter",["pointerout","pointerover"]);oi("onPointerLeave",["pointerout","pointerover"]);ro("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ro("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ro("onBeforeInput",["compositionend","keypress","textInput","paste"]);ro("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ro("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ro("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ki="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),cb=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ki));function nv(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,uF(r,t,void 0,e),e.currentTarget=null}function jB(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],A=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var i=r.length-1;0<=i;i--){var a=r[i],s=a.instance,u=a.currentTarget;if(a=a.listener,s!==o&&A.isPropagationStopped())break e;nv(A,a,u),o=s}else for(i=0;i<r.length;i++){if(a=r[i],s=a.instance,u=a.currentTarget,a=a.listener,s!==o&&A.isPropagationStopped())break e;nv(A,a,u),o=s}}}if(Cu)throw e=th,Cu=!1,th=null,e}function Re(e,t){var n=t[ch];n===void 0&&(n=t[ch]=new Set);var r=e+"__bubble";n.has(r)||(YB(t,e,2,!1),n.add(r))}function Sc(e,t,n){var r=0;t&&(r|=4),YB(n,e,r,t)}var fs="_reactListening"+Math.random().toString(36).slice(2);function ya(e){if(!e[fs]){e[fs]=!0,rB.forEach(function(n){n!=="selectionchange"&&(cb.has(n)||Sc(n,!1,e),Sc(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[fs]||(t[fs]=!0,Sc("selectionchange",!1,t))}}function YB(e,t,n,r){switch(DB(t)){case 1:var A=bF;break;case 4:A=EF;break;default:A=Ld}n=A.bind(null,t,n,e),A=void 0,!eh||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(A=!0),r?A!==void 0?e.addEventListener(t,n,{capture:!0,passive:A}):e.addEventListener(t,n,!0):A!==void 0?e.addEventListener(t,n,{passive:A}):e.addEventListener(t,n,!1)}function _c(e,t,n,r,A){var o=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var i=r.tag;if(i===3||i===4){var a=r.stateNode.containerInfo;if(a===A||a.nodeType===8&&a.parentNode===A)break;if(i===4)for(i=r.return;i!==null;){var s=i.tag;if((s===3||s===4)&&(s=i.stateNode.containerInfo,s===A||s.nodeType===8&&s.parentNode===A))return;i=i.return}for(;a!==null;){if(i=MA(a),i===null)return;if(s=i.tag,s===5||s===6){r=o=i;continue e}a=a.parentNode}}r=r.return}wB(function(){var u=o,l=Rd(n),c=[];e:{var f=$B.get(e);if(f!==void 0){var h=Od,d=e;switch(e){case"keypress":if(au(n)===0)break e;case"keydown":case"keyup":h=PF;break;case"focusin":d="focus",h=Fc;break;case"focusout":d="blur",h=Fc;break;case"beforeblur":case"afterblur":h=Fc;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=Wg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=IF;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=WF;break;case WB:case GB:case zB:h=kF;break;case XB:h=zF;break;case"scroll":h=QF;break;case"wheel":h=$F;break;case"copy":case"cut":case"paste":h=RF;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=zg}var g=(t&4)!==0,m=!g&&e==="scroll",p=g?f!==null?f+"Capture":null:f;g=[];for(var v=u,w;v!==null;){w=v;var B=w.stateNode;if(w.tag===5&&B!==null&&(w=B,p!==null&&(B=pa(v,p),B!=null&&g.push(Ca(v,B,w)))),m)break;v=v.return}0<g.length&&(f=new h(f,d,null,n,l),c.push({event:f,listeners:g}))}}if(!(t&7)){e:{if(f=e==="mouseover"||e==="pointerover",h=e==="mouseout"||e==="pointerout",f&&n!==Jf&&(d=n.relatedTarget||n.fromElement)&&(MA(d)||d[kr]))break e;if((h||f)&&(f=l.window===l?l:(f=l.ownerDocument)?f.defaultView||f.parentWindow:window,h?(d=n.relatedTarget||n.toElement,h=u,d=d?MA(d):null,d!==null&&(m=Ao(d),d!==m||d.tag!==5&&d.tag!==6)&&(d=null)):(h=null,d=u),h!==d)){if(g=Wg,B="onMouseLeave",p="onMouseEnter",v="mouse",(e==="pointerout"||e==="pointerover")&&(g=zg,B="onPointerLeave",p="onPointerEnter",v="pointer"),m=h==null?f:Ho(h),w=d==null?f:Ho(d),f=new g(B,v+"leave",h,n,l),f.target=m,f.relatedTarget=w,B=null,MA(l)===u&&(g=new g(p,v+"enter",d,n,l),g.target=w,g.relatedTarget=m,B=g),m=B,h&&d)t:{for(g=h,p=d,v=0,w=g;w;w=ho(w))v++;for(w=0,B=p;B;B=ho(B))w++;for(;0<v-w;)g=ho(g),v--;for(;0<w-v;)p=ho(p),w--;for(;v--;){if(g===p||p!==null&&g===p.alternate)break t;g=ho(g),p=ho(p)}g=null}else g=null;h!==null&&rv(c,f,h,g,!1),d!==null&&m!==null&&rv(c,m,d,g,!0)}}e:{if(f=u?Ho(u):window,h=f.nodeName&&f.nodeName.toLowerCase(),h==="select"||h==="input"&&f.type==="file")var y=tb;else if(jg(f))if(MB)y=ob;else{y=rb;var C=nb}else(h=f.nodeName)&&h.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(y=Ab);if(y&&(y=y(e,u))){LB(c,y,n,l);break e}C&&C(e,f,u),e==="focusout"&&(C=f._wrapperState)&&C.controlled&&f.type==="number"&&Xf(f,"number",f.value)}switch(C=u?Ho(u):window,e){case"focusin":(jg(C)||C.contentEditable==="true")&&(Ro=C,oh=u,ea=null);break;case"focusout":ea=oh=Ro=null;break;case"mousedown":ih=!0;break;case"contextmenu":case"mouseup":case"dragend":ih=!1,ev(c,n,l);break;case"selectionchange":if(sb)break;case"keydown":case"keyup":ev(c,n,l)}var b;if(Kd)e:{switch(e){case"compositionstart":var x="onCompositionStart";break e;case"compositionend":x="onCompositionEnd";break e;case"compositionupdate":x="onCompositionUpdate";break e}x=void 0}else Do?HB(e,n)&&(x="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(x="onCompositionStart");x&&(TB&&n.locale!=="ko"&&(Do||x!=="onCompositionStart"?x==="onCompositionEnd"&&Do&&(b=RB()):(eA=l,Md="value"in eA?eA.value:eA.textContent,Do=!0)),C=Qu(u,x),0<C.length&&(x=new Gg(x,e,null,n,l),c.push({event:x,listeners:C}),b?x.data=b:(b=NB(n),b!==null&&(x.data=b)))),(b=YF?qF(e,n):JF(e,n))&&(u=Qu(u,"onBeforeInput"),0<u.length&&(l=new Gg("onBeforeInput","beforeinput",null,n,l),c.push({event:l,listeners:u}),l.data=b))}jB(c,t)})}function Ca(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Qu(e,t){for(var n=t+"Capture",r=[];e!==null;){var A=e,o=A.stateNode;A.tag===5&&o!==null&&(A=o,o=pa(e,n),o!=null&&r.unshift(Ca(e,o,A)),o=pa(e,t),o!=null&&r.push(Ca(e,o,A))),e=e.return}return r}function ho(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function rv(e,t,n,r,A){for(var o=t._reactName,i=[];n!==null&&n!==r;){var a=n,s=a.alternate,u=a.stateNode;if(s!==null&&s===r)break;a.tag===5&&u!==null&&(a=u,A?(s=pa(n,o),s!=null&&i.unshift(Ca(n,s,a))):A||(s=pa(n,o),s!=null&&i.push(Ca(n,s,a)))),n=n.return}i.length!==0&&e.push({event:t,listeners:i})}var fb=/\r\n?/g,hb=/\u0000|\uFFFD/g;function Av(e){return(typeof e=="string"?e:""+e).replace(fb,`
`).replace(hb,"")}function hs(e,t,n){if(t=Av(t),Av(e)!==t&&n)throw Error(z(425))}function Uu(){}var ah=null,sh=null;function uh(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var lh=typeof setTimeout=="function"?setTimeout:void 0,db=typeof clearTimeout=="function"?clearTimeout:void 0,ov=typeof Promise=="function"?Promise:void 0,pb=typeof queueMicrotask=="function"?queueMicrotask:typeof ov<"u"?function(e){return ov.resolve(null).then(e).catch(gb)}:lh;function gb(e){setTimeout(function(){throw e})}function kc(e,t){var n=t,r=0;do{var A=n.nextSibling;if(e.removeChild(n),A&&A.nodeType===8)if(n=A.data,n==="/$"){if(r===0){e.removeChild(A),ma(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=A}while(n);ma(t)}function lA(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function iv(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var wi=Math.random().toString(36).slice(2),tr="__reactFiber$"+wi,xa="__reactProps$"+wi,kr="__reactContainer$"+wi,ch="__reactEvents$"+wi,vb="__reactListeners$"+wi,mb="__reactHandles$"+wi;function MA(e){var t=e[tr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[kr]||n[tr]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=iv(e);e!==null;){if(n=e[tr])return n;e=iv(e)}return t}e=n,n=e.parentNode}return null}function Va(e){return e=e[tr]||e[kr],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Ho(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(z(33))}function Ul(e){return e[xa]||null}var fh=[],No=-1;function EA(e){return{current:e}}function He(e){0>No||(e.current=fh[No],fh[No]=null,No--)}function ke(e,t){No++,fh[No]=e.current,e.current=t}var yA={},Nt=EA(yA),qt=EA(!1),YA=yA;function ii(e,t){var n=e.type.contextTypes;if(!n)return yA;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var A={},o;for(o in n)A[o]=t[o];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=A),A}function Jt(e){return e=e.childContextTypes,e!=null}function Iu(){He(qt),He(Nt)}function av(e,t,n){if(Nt.current!==yA)throw Error(z(168));ke(Nt,t),ke(qt,n)}function qB(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var A in r)if(!(A in t))throw Error(z(108,nF(e)||"Unknown",A));return Ge({},n,r)}function Su(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||yA,YA=Nt.current,ke(Nt,e),ke(qt,qt.current),!0}function sv(e,t,n){var r=e.stateNode;if(!r)throw Error(z(169));n?(e=qB(e,t,YA),r.__reactInternalMemoizedMergedChildContext=e,He(qt),He(Nt),ke(Nt,e)):He(qt),ke(qt,n)}var br=null,Il=!1,Dc=!1;function JB(e){br===null?br=[e]:br.push(e)}function wb(e){Il=!0,JB(e)}function QA(){if(!Dc&&br!==null){Dc=!0;var e=0,t=Ue;try{var n=br;for(Ue=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}br=null,Il=!1}catch(A){throw br!==null&&(br=br.slice(e+1)),xB(Td,QA),A}finally{Ue=t,Dc=!1}}return null}var Lo=[],Mo=0,_u=null,ku=0,wn=[],Bn=0,qA=null,Qr=1,Ur="";function DA(e,t){Lo[Mo++]=ku,Lo[Mo++]=_u,_u=e,ku=t}function ZB(e,t,n){wn[Bn++]=Qr,wn[Bn++]=Ur,wn[Bn++]=qA,qA=e;var r=Qr;e=Ur;var A=32-Mn(r)-1;r&=~(1<<A),n+=1;var o=32-Mn(t)+A;if(30<o){var i=A-A%5;o=(r&(1<<i)-1).toString(32),r>>=i,A-=i,Qr=1<<32-Mn(t)+A|n<<A|r,Ur=o+e}else Qr=1<<o|n<<A|r,Ur=e}function Wd(e){e.return!==null&&(DA(e,1),ZB(e,1,0))}function Gd(e){for(;e===_u;)_u=Lo[--Mo],Lo[Mo]=null,ku=Lo[--Mo],Lo[Mo]=null;for(;e===qA;)qA=wn[--Bn],wn[Bn]=null,Ur=wn[--Bn],wn[Bn]=null,Qr=wn[--Bn],wn[Bn]=null}var hn=null,un=null,Le=!1,Hn=null;function e0(e,t){var n=Fn(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function uv(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,hn=e,un=lA(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,hn=e,un=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=qA!==null?{id:Qr,overflow:Ur}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Fn(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,hn=e,un=null,!0):!1;default:return!1}}function hh(e){return(e.mode&1)!==0&&(e.flags&128)===0}function dh(e){if(Le){var t=un;if(t){var n=t;if(!uv(e,t)){if(hh(e))throw Error(z(418));t=lA(n.nextSibling);var r=hn;t&&uv(e,t)?e0(r,n):(e.flags=e.flags&-4097|2,Le=!1,hn=e)}}else{if(hh(e))throw Error(z(418));e.flags=e.flags&-4097|2,Le=!1,hn=e}}}function lv(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;hn=e}function ds(e){if(e!==hn)return!1;if(!Le)return lv(e),Le=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!uh(e.type,e.memoizedProps)),t&&(t=un)){if(hh(e))throw t0(),Error(z(418));for(;t;)e0(e,t),t=lA(t.nextSibling)}if(lv(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(z(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){un=lA(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}un=null}}else un=hn?lA(e.stateNode.nextSibling):null;return!0}function t0(){for(var e=un;e;)e=lA(e.nextSibling)}function ai(){un=hn=null,Le=!1}function zd(e){Hn===null?Hn=[e]:Hn.push(e)}var Bb=Hr.ReactCurrentBatchConfig;function Ui(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(z(309));var r=n.stateNode}if(!r)throw Error(z(147,e));var A=r,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(i){var a=A.refs;i===null?delete a[o]:a[o]=i},t._stringRef=o,t)}if(typeof e!="string")throw Error(z(284));if(!n._owner)throw Error(z(290,e))}return e}function ps(e,t){throw e=Object.prototype.toString.call(t),Error(z(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function cv(e){var t=e._init;return t(e._payload)}function n0(e){function t(p,v){if(e){var w=p.deletions;w===null?(p.deletions=[v],p.flags|=16):w.push(v)}}function n(p,v){if(!e)return null;for(;v!==null;)t(p,v),v=v.sibling;return null}function r(p,v){for(p=new Map;v!==null;)v.key!==null?p.set(v.key,v):p.set(v.index,v),v=v.sibling;return p}function A(p,v){return p=dA(p,v),p.index=0,p.sibling=null,p}function o(p,v,w){return p.index=w,e?(w=p.alternate,w!==null?(w=w.index,w<v?(p.flags|=2,v):w):(p.flags|=2,v)):(p.flags|=1048576,v)}function i(p){return e&&p.alternate===null&&(p.flags|=2),p}function a(p,v,w,B){return v===null||v.tag!==6?(v=Oc(w,p.mode,B),v.return=p,v):(v=A(v,w),v.return=p,v)}function s(p,v,w,B){var y=w.type;return y===ko?l(p,v,w.props.children,B,w.key):v!==null&&(v.elementType===y||typeof y=="object"&&y!==null&&y.$$typeof===jr&&cv(y)===v.type)?(B=A(v,w.props),B.ref=Ui(p,v,w),B.return=p,B):(B=du(w.type,w.key,w.props,null,p.mode,B),B.ref=Ui(p,v,w),B.return=p,B)}function u(p,v,w,B){return v===null||v.tag!==4||v.stateNode.containerInfo!==w.containerInfo||v.stateNode.implementation!==w.implementation?(v=Pc(w,p.mode,B),v.return=p,v):(v=A(v,w.children||[]),v.return=p,v)}function l(p,v,w,B,y){return v===null||v.tag!==7?(v=zA(w,p.mode,B,y),v.return=p,v):(v=A(v,w),v.return=p,v)}function c(p,v,w){if(typeof v=="string"&&v!==""||typeof v=="number")return v=Oc(""+v,p.mode,w),v.return=p,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case As:return w=du(v.type,v.key,v.props,null,p.mode,w),w.ref=Ui(p,null,v),w.return=p,w;case _o:return v=Pc(v,p.mode,w),v.return=p,v;case jr:var B=v._init;return c(p,B(v._payload),w)}if(Oi(v)||xi(v))return v=zA(v,p.mode,w,null),v.return=p,v;ps(p,v)}return null}function f(p,v,w,B){var y=v!==null?v.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return y!==null?null:a(p,v,""+w,B);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case As:return w.key===y?s(p,v,w,B):null;case _o:return w.key===y?u(p,v,w,B):null;case jr:return y=w._init,f(p,v,y(w._payload),B)}if(Oi(w)||xi(w))return y!==null?null:l(p,v,w,B,null);ps(p,w)}return null}function h(p,v,w,B,y){if(typeof B=="string"&&B!==""||typeof B=="number")return p=p.get(w)||null,a(v,p,""+B,y);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case As:return p=p.get(B.key===null?w:B.key)||null,s(v,p,B,y);case _o:return p=p.get(B.key===null?w:B.key)||null,u(v,p,B,y);case jr:var C=B._init;return h(p,v,w,C(B._payload),y)}if(Oi(B)||xi(B))return p=p.get(w)||null,l(v,p,B,y,null);ps(v,B)}return null}function d(p,v,w,B){for(var y=null,C=null,b=v,x=v=0,F=null;b!==null&&x<w.length;x++){b.index>x?(F=b,b=null):F=b.sibling;var E=f(p,b,w[x],B);if(E===null){b===null&&(b=F);break}e&&b&&E.alternate===null&&t(p,b),v=o(E,v,x),C===null?y=E:C.sibling=E,C=E,b=F}if(x===w.length)return n(p,b),Le&&DA(p,x),y;if(b===null){for(;x<w.length;x++)b=c(p,w[x],B),b!==null&&(v=o(b,v,x),C===null?y=b:C.sibling=b,C=b);return Le&&DA(p,x),y}for(b=r(p,b);x<w.length;x++)F=h(b,p,x,w[x],B),F!==null&&(e&&F.alternate!==null&&b.delete(F.key===null?x:F.key),v=o(F,v,x),C===null?y=F:C.sibling=F,C=F);return e&&b.forEach(function(I){return t(p,I)}),Le&&DA(p,x),y}function g(p,v,w,B){var y=xi(w);if(typeof y!="function")throw Error(z(150));if(w=y.call(w),w==null)throw Error(z(151));for(var C=y=null,b=v,x=v=0,F=null,E=w.next();b!==null&&!E.done;x++,E=w.next()){b.index>x?(F=b,b=null):F=b.sibling;var I=f(p,b,E.value,B);if(I===null){b===null&&(b=F);break}e&&b&&I.alternate===null&&t(p,b),v=o(I,v,x),C===null?y=I:C.sibling=I,C=I,b=F}if(E.done)return n(p,b),Le&&DA(p,x),y;if(b===null){for(;!E.done;x++,E=w.next())E=c(p,E.value,B),E!==null&&(v=o(E,v,x),C===null?y=E:C.sibling=E,C=E);return Le&&DA(p,x),y}for(b=r(p,b);!E.done;x++,E=w.next())E=h(b,p,x,E.value,B),E!==null&&(e&&E.alternate!==null&&b.delete(E.key===null?x:E.key),v=o(E,v,x),C===null?y=E:C.sibling=E,C=E);return e&&b.forEach(function(S){return t(p,S)}),Le&&DA(p,x),y}function m(p,v,w,B){if(typeof w=="object"&&w!==null&&w.type===ko&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case As:e:{for(var y=w.key,C=v;C!==null;){if(C.key===y){if(y=w.type,y===ko){if(C.tag===7){n(p,C.sibling),v=A(C,w.props.children),v.return=p,p=v;break e}}else if(C.elementType===y||typeof y=="object"&&y!==null&&y.$$typeof===jr&&cv(y)===C.type){n(p,C.sibling),v=A(C,w.props),v.ref=Ui(p,C,w),v.return=p,p=v;break e}n(p,C);break}else t(p,C);C=C.sibling}w.type===ko?(v=zA(w.props.children,p.mode,B,w.key),v.return=p,p=v):(B=du(w.type,w.key,w.props,null,p.mode,B),B.ref=Ui(p,v,w),B.return=p,p=B)}return i(p);case _o:e:{for(C=w.key;v!==null;){if(v.key===C)if(v.tag===4&&v.stateNode.containerInfo===w.containerInfo&&v.stateNode.implementation===w.implementation){n(p,v.sibling),v=A(v,w.children||[]),v.return=p,p=v;break e}else{n(p,v);break}else t(p,v);v=v.sibling}v=Pc(w,p.mode,B),v.return=p,p=v}return i(p);case jr:return C=w._init,m(p,v,C(w._payload),B)}if(Oi(w))return d(p,v,w,B);if(xi(w))return g(p,v,w,B);ps(p,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,v!==null&&v.tag===6?(n(p,v.sibling),v=A(v,w),v.return=p,p=v):(n(p,v),v=Oc(w,p.mode,B),v.return=p,p=v),i(p)):n(p,v)}return m}var si=n0(!0),r0=n0(!1),Du=EA(null),Ru=null,Oo=null,Xd=null;function $d(){Xd=Oo=Ru=null}function jd(e){var t=Du.current;He(Du),e._currentValue=t}function ph(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function $o(e,t){Ru=e,Xd=Oo=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Yt=!0),e.firstContext=null)}function In(e){var t=e._currentValue;if(Xd!==e)if(e={context:e,memoizedValue:t,next:null},Oo===null){if(Ru===null)throw Error(z(308));Oo=e,Ru.dependencies={lanes:0,firstContext:e}}else Oo=Oo.next=e;return t}var OA=null;function Yd(e){OA===null?OA=[e]:OA.push(e)}function A0(e,t,n,r){var A=t.interleaved;return A===null?(n.next=n,Yd(t)):(n.next=A.next,A.next=n),t.interleaved=n,Dr(e,r)}function Dr(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Yr=!1;function qd(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function o0(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ir(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function cA(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,xe&2){var A=r.pending;return A===null?t.next=t:(t.next=A.next,A.next=t),r.pending=t,Dr(e,n)}return A=r.interleaved,A===null?(t.next=t,Yd(r)):(t.next=A.next,A.next=t),r.interleaved=t,Dr(e,n)}function su(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Hd(e,n)}}function fv(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var A=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var i={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?A=o=i:o=o.next=i,n=n.next}while(n!==null);o===null?A=o=t:o=o.next=t}else A=o=t;n={baseState:r.baseState,firstBaseUpdate:A,lastBaseUpdate:o,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Tu(e,t,n,r){var A=e.updateQueue;Yr=!1;var o=A.firstBaseUpdate,i=A.lastBaseUpdate,a=A.shared.pending;if(a!==null){A.shared.pending=null;var s=a,u=s.next;s.next=null,i===null?o=u:i.next=u,i=s;var l=e.alternate;l!==null&&(l=l.updateQueue,a=l.lastBaseUpdate,a!==i&&(a===null?l.firstBaseUpdate=u:a.next=u,l.lastBaseUpdate=s))}if(o!==null){var c=A.baseState;i=0,l=u=s=null,a=o;do{var f=a.lane,h=a.eventTime;if((r&f)===f){l!==null&&(l=l.next={eventTime:h,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var d=e,g=a;switch(f=t,h=n,g.tag){case 1:if(d=g.payload,typeof d=="function"){c=d.call(h,c,f);break e}c=d;break e;case 3:d.flags=d.flags&-65537|128;case 0:if(d=g.payload,f=typeof d=="function"?d.call(h,c,f):d,f==null)break e;c=Ge({},c,f);break e;case 2:Yr=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,f=A.effects,f===null?A.effects=[a]:f.push(a))}else h={eventTime:h,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},l===null?(u=l=h,s=c):l=l.next=h,i|=f;if(a=a.next,a===null){if(a=A.shared.pending,a===null)break;f=a,a=f.next,f.next=null,A.lastBaseUpdate=f,A.shared.pending=null}}while(!0);if(l===null&&(s=c),A.baseState=s,A.firstBaseUpdate=u,A.lastBaseUpdate=l,t=A.shared.interleaved,t!==null){A=t;do i|=A.lane,A=A.next;while(A!==t)}else o===null&&(A.shared.lanes=0);ZA|=i,e.lanes=i,e.memoizedState=c}}function hv(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],A=r.callback;if(A!==null){if(r.callback=null,r=n,typeof A!="function")throw Error(z(191,A));A.call(r)}}}var Wa={},ir=EA(Wa),Fa=EA(Wa),ba=EA(Wa);function PA(e){if(e===Wa)throw Error(z(174));return e}function Jd(e,t){switch(ke(ba,t),ke(Fa,e),ke(ir,Wa),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:jf(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=jf(t,e)}He(ir),ke(ir,t)}function ui(){He(ir),He(Fa),He(ba)}function i0(e){PA(ba.current);var t=PA(ir.current),n=jf(t,e.type);t!==n&&(ke(Fa,e),ke(ir,n))}function Zd(e){Fa.current===e&&(He(ir),He(Fa))}var Pe=EA(0);function Hu(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Rc=[];function ep(){for(var e=0;e<Rc.length;e++)Rc[e]._workInProgressVersionPrimary=null;Rc.length=0}var uu=Hr.ReactCurrentDispatcher,Tc=Hr.ReactCurrentBatchConfig,JA=0,We=null,ot=null,pt=null,Nu=!1,ta=!1,Ea=0,yb=0;function Qt(){throw Error(z(321))}function tp(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Kn(e[n],t[n]))return!1;return!0}function np(e,t,n,r,A,o){if(JA=o,We=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,uu.current=e===null||e.memoizedState===null?bb:Eb,e=n(r,A),ta){o=0;do{if(ta=!1,Ea=0,25<=o)throw Error(z(301));o+=1,pt=ot=null,t.updateQueue=null,uu.current=Qb,e=n(r,A)}while(ta)}if(uu.current=Lu,t=ot!==null&&ot.next!==null,JA=0,pt=ot=We=null,Nu=!1,t)throw Error(z(300));return e}function rp(){var e=Ea!==0;return Ea=0,e}function Jn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return pt===null?We.memoizedState=pt=e:pt=pt.next=e,pt}function Sn(){if(ot===null){var e=We.alternate;e=e!==null?e.memoizedState:null}else e=ot.next;var t=pt===null?We.memoizedState:pt.next;if(t!==null)pt=t,ot=e;else{if(e===null)throw Error(z(310));ot=e,e={memoizedState:ot.memoizedState,baseState:ot.baseState,baseQueue:ot.baseQueue,queue:ot.queue,next:null},pt===null?We.memoizedState=pt=e:pt=pt.next=e}return pt}function Qa(e,t){return typeof t=="function"?t(e):t}function Hc(e){var t=Sn(),n=t.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=e;var r=ot,A=r.baseQueue,o=n.pending;if(o!==null){if(A!==null){var i=A.next;A.next=o.next,o.next=i}r.baseQueue=A=o,n.pending=null}if(A!==null){o=A.next,r=r.baseState;var a=i=null,s=null,u=o;do{var l=u.lane;if((JA&l)===l)s!==null&&(s=s.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var c={lane:l,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};s===null?(a=s=c,i=r):s=s.next=c,We.lanes|=l,ZA|=l}u=u.next}while(u!==null&&u!==o);s===null?i=r:s.next=a,Kn(r,t.memoizedState)||(Yt=!0),t.memoizedState=r,t.baseState=i,t.baseQueue=s,n.lastRenderedState=r}if(e=n.interleaved,e!==null){A=e;do o=A.lane,We.lanes|=o,ZA|=o,A=A.next;while(A!==e)}else A===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Nc(e){var t=Sn(),n=t.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=e;var r=n.dispatch,A=n.pending,o=t.memoizedState;if(A!==null){n.pending=null;var i=A=A.next;do o=e(o,i.action),i=i.next;while(i!==A);Kn(o,t.memoizedState)||(Yt=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function a0(){}function s0(e,t){var n=We,r=Sn(),A=t(),o=!Kn(r.memoizedState,A);if(o&&(r.memoizedState=A,Yt=!0),r=r.queue,Ap(c0.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||pt!==null&&pt.memoizedState.tag&1){if(n.flags|=2048,Ua(9,l0.bind(null,n,r,A,t),void 0,null),gt===null)throw Error(z(349));JA&30||u0(n,t,A)}return A}function u0(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=We.updateQueue,t===null?(t={lastEffect:null,stores:null},We.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function l0(e,t,n,r){t.value=n,t.getSnapshot=r,f0(t)&&h0(e)}function c0(e,t,n){return n(function(){f0(t)&&h0(e)})}function f0(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Kn(e,n)}catch{return!0}}function h0(e){var t=Dr(e,1);t!==null&&On(t,e,1,-1)}function dv(e){var t=Jn();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Qa,lastRenderedState:e},t.queue=e,e=e.dispatch=Fb.bind(null,We,e),[t.memoizedState,e]}function Ua(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=We.updateQueue,t===null?(t={lastEffect:null,stores:null},We.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function d0(){return Sn().memoizedState}function lu(e,t,n,r){var A=Jn();We.flags|=e,A.memoizedState=Ua(1|t,n,void 0,r===void 0?null:r)}function Sl(e,t,n,r){var A=Sn();r=r===void 0?null:r;var o=void 0;if(ot!==null){var i=ot.memoizedState;if(o=i.destroy,r!==null&&tp(r,i.deps)){A.memoizedState=Ua(t,n,o,r);return}}We.flags|=e,A.memoizedState=Ua(1|t,n,o,r)}function pv(e,t){return lu(8390656,8,e,t)}function Ap(e,t){return Sl(2048,8,e,t)}function p0(e,t){return Sl(4,2,e,t)}function g0(e,t){return Sl(4,4,e,t)}function v0(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function m0(e,t,n){return n=n!=null?n.concat([e]):null,Sl(4,4,v0.bind(null,t,e),n)}function op(){}function w0(e,t){var n=Sn();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&tp(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function B0(e,t){var n=Sn();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&tp(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function y0(e,t,n){return JA&21?(Kn(n,t)||(n=EB(),We.lanes|=n,ZA|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Yt=!0),e.memoizedState=n)}function Cb(e,t){var n=Ue;Ue=n!==0&&4>n?n:4,e(!0);var r=Tc.transition;Tc.transition={};try{e(!1),t()}finally{Ue=n,Tc.transition=r}}function C0(){return Sn().memoizedState}function xb(e,t,n){var r=hA(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},x0(e))F0(t,n);else if(n=A0(e,t,n,r),n!==null){var A=Kt();On(n,e,r,A),b0(n,t,r)}}function Fb(e,t,n){var r=hA(e),A={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(x0(e))F0(t,A);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var i=t.lastRenderedState,a=o(i,n);if(A.hasEagerState=!0,A.eagerState=a,Kn(a,i)){var s=t.interleaved;s===null?(A.next=A,Yd(t)):(A.next=s.next,s.next=A),t.interleaved=A;return}}catch{}finally{}n=A0(e,t,A,r),n!==null&&(A=Kt(),On(n,e,r,A),b0(n,t,r))}}function x0(e){var t=e.alternate;return e===We||t!==null&&t===We}function F0(e,t){ta=Nu=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function b0(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Hd(e,n)}}var Lu={readContext:In,useCallback:Qt,useContext:Qt,useEffect:Qt,useImperativeHandle:Qt,useInsertionEffect:Qt,useLayoutEffect:Qt,useMemo:Qt,useReducer:Qt,useRef:Qt,useState:Qt,useDebugValue:Qt,useDeferredValue:Qt,useTransition:Qt,useMutableSource:Qt,useSyncExternalStore:Qt,useId:Qt,unstable_isNewReconciler:!1},bb={readContext:In,useCallback:function(e,t){return Jn().memoizedState=[e,t===void 0?null:t],e},useContext:In,useEffect:pv,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,lu(4194308,4,v0.bind(null,t,e),n)},useLayoutEffect:function(e,t){return lu(4194308,4,e,t)},useInsertionEffect:function(e,t){return lu(4,2,e,t)},useMemo:function(e,t){var n=Jn();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Jn();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=xb.bind(null,We,e),[r.memoizedState,e]},useRef:function(e){var t=Jn();return e={current:e},t.memoizedState=e},useState:dv,useDebugValue:op,useDeferredValue:function(e){return Jn().memoizedState=e},useTransition:function(){var e=dv(!1),t=e[0];return e=Cb.bind(null,e[1]),Jn().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=We,A=Jn();if(Le){if(n===void 0)throw Error(z(407));n=n()}else{if(n=t(),gt===null)throw Error(z(349));JA&30||u0(r,t,n)}A.memoizedState=n;var o={value:n,getSnapshot:t};return A.queue=o,pv(c0.bind(null,r,o,e),[e]),r.flags|=2048,Ua(9,l0.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=Jn(),t=gt.identifierPrefix;if(Le){var n=Ur,r=Qr;n=(r&~(1<<32-Mn(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Ea++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=yb++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Eb={readContext:In,useCallback:w0,useContext:In,useEffect:Ap,useImperativeHandle:m0,useInsertionEffect:p0,useLayoutEffect:g0,useMemo:B0,useReducer:Hc,useRef:d0,useState:function(){return Hc(Qa)},useDebugValue:op,useDeferredValue:function(e){var t=Sn();return y0(t,ot.memoizedState,e)},useTransition:function(){var e=Hc(Qa)[0],t=Sn().memoizedState;return[e,t]},useMutableSource:a0,useSyncExternalStore:s0,useId:C0,unstable_isNewReconciler:!1},Qb={readContext:In,useCallback:w0,useContext:In,useEffect:Ap,useImperativeHandle:m0,useInsertionEffect:p0,useLayoutEffect:g0,useMemo:B0,useReducer:Nc,useRef:d0,useState:function(){return Nc(Qa)},useDebugValue:op,useDeferredValue:function(e){var t=Sn();return ot===null?t.memoizedState=e:y0(t,ot.memoizedState,e)},useTransition:function(){var e=Nc(Qa)[0],t=Sn().memoizedState;return[e,t]},useMutableSource:a0,useSyncExternalStore:s0,useId:C0,unstable_isNewReconciler:!1};function Rn(e,t){if(e&&e.defaultProps){t=Ge({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function gh(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Ge({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var _l={isMounted:function(e){return(e=e._reactInternals)?Ao(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Kt(),A=hA(e),o=Ir(r,A);o.payload=t,n!=null&&(o.callback=n),t=cA(e,o,A),t!==null&&(On(t,e,A,r),su(t,e,A))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Kt(),A=hA(e),o=Ir(r,A);o.tag=1,o.payload=t,n!=null&&(o.callback=n),t=cA(e,o,A),t!==null&&(On(t,e,A,r),su(t,e,A))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Kt(),r=hA(e),A=Ir(n,r);A.tag=2,t!=null&&(A.callback=t),t=cA(e,A,r),t!==null&&(On(t,e,r,n),su(t,e,r))}};function gv(e,t,n,r,A,o,i){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,o,i):t.prototype&&t.prototype.isPureReactComponent?!Ba(n,r)||!Ba(A,o):!0}function E0(e,t,n){var r=!1,A=yA,o=t.contextType;return typeof o=="object"&&o!==null?o=In(o):(A=Jt(t)?YA:Nt.current,r=t.contextTypes,o=(r=r!=null)?ii(e,A):yA),t=new t(n,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=_l,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=A,e.__reactInternalMemoizedMaskedChildContext=o),t}function vv(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&_l.enqueueReplaceState(t,t.state,null)}function vh(e,t,n,r){var A=e.stateNode;A.props=n,A.state=e.memoizedState,A.refs={},qd(e);var o=t.contextType;typeof o=="object"&&o!==null?A.context=In(o):(o=Jt(t)?YA:Nt.current,A.context=ii(e,o)),A.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(gh(e,t,o,n),A.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof A.getSnapshotBeforeUpdate=="function"||typeof A.UNSAFE_componentWillMount!="function"&&typeof A.componentWillMount!="function"||(t=A.state,typeof A.componentWillMount=="function"&&A.componentWillMount(),typeof A.UNSAFE_componentWillMount=="function"&&A.UNSAFE_componentWillMount(),t!==A.state&&_l.enqueueReplaceState(A,A.state,null),Tu(e,n,A,r),A.state=e.memoizedState),typeof A.componentDidMount=="function"&&(e.flags|=4194308)}function li(e,t){try{var n="",r=t;do n+=tF(r),r=r.return;while(r);var A=n}catch(o){A=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:A,digest:null}}function Lc(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function mh(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var Ub=typeof WeakMap=="function"?WeakMap:Map;function Q0(e,t,n){n=Ir(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Ou||(Ou=!0,Uh=r),mh(e,t)},n}function U0(e,t,n){n=Ir(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var A=t.value;n.payload=function(){return r(A)},n.callback=function(){mh(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){mh(e,t),typeof r!="function"&&(fA===null?fA=new Set([this]):fA.add(this));var i=t.stack;this.componentDidCatch(t.value,{componentStack:i!==null?i:""})}),n}function mv(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new Ub;var A=new Set;r.set(t,A)}else A=r.get(t),A===void 0&&(A=new Set,r.set(t,A));A.has(n)||(A.add(n),e=Kb.bind(null,e,t,n),t.then(e,e))}function wv(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Bv(e,t,n,r,A){return e.mode&1?(e.flags|=65536,e.lanes=A,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Ir(-1,1),t.tag=2,cA(n,t,1))),n.lanes|=1),e)}var Ib=Hr.ReactCurrentOwner,Yt=!1;function Ot(e,t,n,r){t.child=e===null?r0(t,null,n,r):si(t,e.child,n,r)}function yv(e,t,n,r,A){n=n.render;var o=t.ref;return $o(t,A),r=np(e,t,n,r,o,A),n=rp(),e!==null&&!Yt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~A,Rr(e,t,A)):(Le&&n&&Wd(t),t.flags|=1,Ot(e,t,r,A),t.child)}function Cv(e,t,n,r,A){if(e===null){var o=n.type;return typeof o=="function"&&!hp(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=o,I0(e,t,o,r,A)):(e=du(n.type,null,r,t,t.mode,A),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!(e.lanes&A)){var i=o.memoizedProps;if(n=n.compare,n=n!==null?n:Ba,n(i,r)&&e.ref===t.ref)return Rr(e,t,A)}return t.flags|=1,e=dA(o,r),e.ref=t.ref,e.return=t,t.child=e}function I0(e,t,n,r,A){if(e!==null){var o=e.memoizedProps;if(Ba(o,r)&&e.ref===t.ref)if(Yt=!1,t.pendingProps=r=o,(e.lanes&A)!==0)e.flags&131072&&(Yt=!0);else return t.lanes=e.lanes,Rr(e,t,A)}return wh(e,t,n,r,A)}function S0(e,t,n){var r=t.pendingProps,A=r.children,o=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ke(Ko,on),on|=n;else{if(!(n&1073741824))return e=o!==null?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ke(Ko,on),on|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,ke(Ko,on),on|=r}else o!==null?(r=o.baseLanes|n,t.memoizedState=null):r=n,ke(Ko,on),on|=r;return Ot(e,t,A,n),t.child}function _0(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function wh(e,t,n,r,A){var o=Jt(n)?YA:Nt.current;return o=ii(t,o),$o(t,A),n=np(e,t,n,r,o,A),r=rp(),e!==null&&!Yt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~A,Rr(e,t,A)):(Le&&r&&Wd(t),t.flags|=1,Ot(e,t,n,A),t.child)}function xv(e,t,n,r,A){if(Jt(n)){var o=!0;Su(t)}else o=!1;if($o(t,A),t.stateNode===null)cu(e,t),E0(t,n,r),vh(t,n,r,A),r=!0;else if(e===null){var i=t.stateNode,a=t.memoizedProps;i.props=a;var s=i.context,u=n.contextType;typeof u=="object"&&u!==null?u=In(u):(u=Jt(n)?YA:Nt.current,u=ii(t,u));var l=n.getDerivedStateFromProps,c=typeof l=="function"||typeof i.getSnapshotBeforeUpdate=="function";c||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(a!==r||s!==u)&&vv(t,i,r,u),Yr=!1;var f=t.memoizedState;i.state=f,Tu(t,r,i,A),s=t.memoizedState,a!==r||f!==s||qt.current||Yr?(typeof l=="function"&&(gh(t,n,l,r),s=t.memoizedState),(a=Yr||gv(t,n,a,r,f,s,u))?(c||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(t.flags|=4194308)):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=s),i.props=r,i.state=s,i.context=u,r=a):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{i=t.stateNode,o0(e,t),a=t.memoizedProps,u=t.type===t.elementType?a:Rn(t.type,a),i.props=u,c=t.pendingProps,f=i.context,s=n.contextType,typeof s=="object"&&s!==null?s=In(s):(s=Jt(n)?YA:Nt.current,s=ii(t,s));var h=n.getDerivedStateFromProps;(l=typeof h=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(a!==c||f!==s)&&vv(t,i,r,s),Yr=!1,f=t.memoizedState,i.state=f,Tu(t,r,i,A);var d=t.memoizedState;a!==c||f!==d||qt.current||Yr?(typeof h=="function"&&(gh(t,n,h,r),d=t.memoizedState),(u=Yr||gv(t,n,u,r,f,d,s)||!1)?(l||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(r,d,s),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(r,d,s)),typeof i.componentDidUpdate=="function"&&(t.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof i.componentDidUpdate!="function"||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=d),i.props=r,i.state=d,i.context=s,r=u):(typeof i.componentDidUpdate!="function"||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),r=!1)}return Bh(e,t,n,r,o,A)}function Bh(e,t,n,r,A,o){_0(e,t);var i=(t.flags&128)!==0;if(!r&&!i)return A&&sv(t,n,!1),Rr(e,t,o);r=t.stateNode,Ib.current=t;var a=i&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&i?(t.child=si(t,e.child,null,o),t.child=si(t,null,a,o)):Ot(e,t,a,o),t.memoizedState=r.state,A&&sv(t,n,!0),t.child}function k0(e){var t=e.stateNode;t.pendingContext?av(e,t.pendingContext,t.pendingContext!==t.context):t.context&&av(e,t.context,!1),Jd(e,t.containerInfo)}function Fv(e,t,n,r,A){return ai(),zd(A),t.flags|=256,Ot(e,t,n,r),t.child}var yh={dehydrated:null,treeContext:null,retryLane:0};function Ch(e){return{baseLanes:e,cachePool:null,transitions:null}}function D0(e,t,n){var r=t.pendingProps,A=Pe.current,o=!1,i=(t.flags&128)!==0,a;if((a=i)||(a=e!==null&&e.memoizedState===null?!1:(A&2)!==0),a?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(A|=1),ke(Pe,A&1),e===null)return dh(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(i=r.children,e=r.fallback,o?(r=t.mode,o=t.child,i={mode:"hidden",children:i},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=i):o=Rl(i,r,0,null),e=zA(e,r,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Ch(n),t.memoizedState=yh,e):ip(t,i));if(A=e.memoizedState,A!==null&&(a=A.dehydrated,a!==null))return Sb(e,t,i,r,a,A,n);if(o){o=r.fallback,i=t.mode,A=e.child,a=A.sibling;var s={mode:"hidden",children:r.children};return!(i&1)&&t.child!==A?(r=t.child,r.childLanes=0,r.pendingProps=s,t.deletions=null):(r=dA(A,s),r.subtreeFlags=A.subtreeFlags&14680064),a!==null?o=dA(a,o):(o=zA(o,i,n,null),o.flags|=2),o.return=t,r.return=t,r.sibling=o,t.child=r,r=o,o=t.child,i=e.child.memoizedState,i=i===null?Ch(n):{baseLanes:i.baseLanes|n,cachePool:null,transitions:i.transitions},o.memoizedState=i,o.childLanes=e.childLanes&~n,t.memoizedState=yh,r}return o=e.child,e=o.sibling,r=dA(o,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function ip(e,t){return t=Rl({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function gs(e,t,n,r){return r!==null&&zd(r),si(t,e.child,null,n),e=ip(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Sb(e,t,n,r,A,o,i){if(n)return t.flags&256?(t.flags&=-257,r=Lc(Error(z(422))),gs(e,t,i,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=r.fallback,A=t.mode,r=Rl({mode:"visible",children:r.children},A,0,null),o=zA(o,A,i,null),o.flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,t.mode&1&&si(t,e.child,null,i),t.child.memoizedState=Ch(i),t.memoizedState=yh,o);if(!(t.mode&1))return gs(e,t,i,null);if(A.data==="$!"){if(r=A.nextSibling&&A.nextSibling.dataset,r)var a=r.dgst;return r=a,o=Error(z(419)),r=Lc(o,r,void 0),gs(e,t,i,r)}if(a=(i&e.childLanes)!==0,Yt||a){if(r=gt,r!==null){switch(i&-i){case 4:A=2;break;case 16:A=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:A=32;break;case 536870912:A=268435456;break;default:A=0}A=A&(r.suspendedLanes|i)?0:A,A!==0&&A!==o.retryLane&&(o.retryLane=A,Dr(e,A),On(r,e,A,-1))}return fp(),r=Lc(Error(z(421))),gs(e,t,i,r)}return A.data==="$?"?(t.flags|=128,t.child=e.child,t=Vb.bind(null,e),A._reactRetry=t,null):(e=o.treeContext,un=lA(A.nextSibling),hn=t,Le=!0,Hn=null,e!==null&&(wn[Bn++]=Qr,wn[Bn++]=Ur,wn[Bn++]=qA,Qr=e.id,Ur=e.overflow,qA=t),t=ip(t,r.children),t.flags|=4096,t)}function bv(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),ph(e.return,t,n)}function Mc(e,t,n,r,A){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:A}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=A)}function R0(e,t,n){var r=t.pendingProps,A=r.revealOrder,o=r.tail;if(Ot(e,t,r.children,n),r=Pe.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&bv(e,n,t);else if(e.tag===19)bv(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(ke(Pe,r),!(t.mode&1))t.memoizedState=null;else switch(A){case"forwards":for(n=t.child,A=null;n!==null;)e=n.alternate,e!==null&&Hu(e)===null&&(A=n),n=n.sibling;n=A,n===null?(A=t.child,t.child=null):(A=n.sibling,n.sibling=null),Mc(t,!1,A,n,o);break;case"backwards":for(n=null,A=t.child,t.child=null;A!==null;){if(e=A.alternate,e!==null&&Hu(e)===null){t.child=A;break}e=A.sibling,A.sibling=n,n=A,A=e}Mc(t,!0,n,null,o);break;case"together":Mc(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function cu(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Rr(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),ZA|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(z(153));if(t.child!==null){for(e=t.child,n=dA(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=dA(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function _b(e,t,n){switch(t.tag){case 3:k0(t),ai();break;case 5:i0(t);break;case 1:Jt(t.type)&&Su(t);break;case 4:Jd(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,A=t.memoizedProps.value;ke(Du,r._currentValue),r._currentValue=A;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(ke(Pe,Pe.current&1),t.flags|=128,null):n&t.child.childLanes?D0(e,t,n):(ke(Pe,Pe.current&1),e=Rr(e,t,n),e!==null?e.sibling:null);ke(Pe,Pe.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return R0(e,t,n);t.flags|=128}if(A=t.memoizedState,A!==null&&(A.rendering=null,A.tail=null,A.lastEffect=null),ke(Pe,Pe.current),r)break;return null;case 22:case 23:return t.lanes=0,S0(e,t,n)}return Rr(e,t,n)}var T0,xh,H0,N0;T0=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};xh=function(){};H0=function(e,t,n,r){var A=e.memoizedProps;if(A!==r){e=t.stateNode,PA(ir.current);var o=null;switch(n){case"input":A=Gf(e,A),r=Gf(e,r),o=[];break;case"select":A=Ge({},A,{value:void 0}),r=Ge({},r,{value:void 0}),o=[];break;case"textarea":A=$f(e,A),r=$f(e,r),o=[];break;default:typeof A.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Uu)}Yf(n,r);var i;n=null;for(u in A)if(!r.hasOwnProperty(u)&&A.hasOwnProperty(u)&&A[u]!=null)if(u==="style"){var a=A[u];for(i in a)a.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(ha.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in r){var s=r[u];if(a=A!=null?A[u]:void 0,r.hasOwnProperty(u)&&s!==a&&(s!=null||a!=null))if(u==="style")if(a){for(i in a)!a.hasOwnProperty(i)||s&&s.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in s)s.hasOwnProperty(i)&&a[i]!==s[i]&&(n||(n={}),n[i]=s[i])}else n||(o||(o=[]),o.push(u,n)),n=s;else u==="dangerouslySetInnerHTML"?(s=s?s.__html:void 0,a=a?a.__html:void 0,s!=null&&a!==s&&(o=o||[]).push(u,s)):u==="children"?typeof s!="string"&&typeof s!="number"||(o=o||[]).push(u,""+s):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(ha.hasOwnProperty(u)?(s!=null&&u==="onScroll"&&Re("scroll",e),o||a===s||(o=[])):(o=o||[]).push(u,s))}n&&(o=o||[]).push("style",n);var u=o;(t.updateQueue=u)&&(t.flags|=4)}};N0=function(e,t,n,r){n!==r&&(t.flags|=4)};function Ii(e,t){if(!Le)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ut(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var A=e.child;A!==null;)n|=A.lanes|A.childLanes,r|=A.subtreeFlags&14680064,r|=A.flags&14680064,A.return=e,A=A.sibling;else for(A=e.child;A!==null;)n|=A.lanes|A.childLanes,r|=A.subtreeFlags,r|=A.flags,A.return=e,A=A.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function kb(e,t,n){var r=t.pendingProps;switch(Gd(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ut(t),null;case 1:return Jt(t.type)&&Iu(),Ut(t),null;case 3:return r=t.stateNode,ui(),He(qt),He(Nt),ep(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(ds(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Hn!==null&&(_h(Hn),Hn=null))),xh(e,t),Ut(t),null;case 5:Zd(t);var A=PA(ba.current);if(n=t.type,e!==null&&t.stateNode!=null)H0(e,t,n,r,A),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(z(166));return Ut(t),null}if(e=PA(ir.current),ds(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[tr]=t,r[xa]=o,e=(t.mode&1)!==0,n){case"dialog":Re("cancel",r),Re("close",r);break;case"iframe":case"object":case"embed":Re("load",r);break;case"video":case"audio":for(A=0;A<Ki.length;A++)Re(Ki[A],r);break;case"source":Re("error",r);break;case"img":case"image":case"link":Re("error",r),Re("load",r);break;case"details":Re("toggle",r);break;case"input":Rg(r,o),Re("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Re("invalid",r);break;case"textarea":Hg(r,o),Re("invalid",r)}Yf(n,o),A=null;for(var i in o)if(o.hasOwnProperty(i)){var a=o[i];i==="children"?typeof a=="string"?r.textContent!==a&&(o.suppressHydrationWarning!==!0&&hs(r.textContent,a,e),A=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(o.suppressHydrationWarning!==!0&&hs(r.textContent,a,e),A=["children",""+a]):ha.hasOwnProperty(i)&&a!=null&&i==="onScroll"&&Re("scroll",r)}switch(n){case"input":os(r),Tg(r,o,!0);break;case"textarea":os(r),Ng(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=Uu)}r=A,t.updateQueue=r,r!==null&&(t.flags|=4)}else{i=A.nodeType===9?A:A.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=cB(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=i.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=i.createElement(n,{is:r.is}):(e=i.createElement(n),n==="select"&&(i=e,r.multiple?i.multiple=!0:r.size&&(i.size=r.size))):e=i.createElementNS(e,n),e[tr]=t,e[xa]=r,T0(e,t,!1,!1),t.stateNode=e;e:{switch(i=qf(n,r),n){case"dialog":Re("cancel",e),Re("close",e),A=r;break;case"iframe":case"object":case"embed":Re("load",e),A=r;break;case"video":case"audio":for(A=0;A<Ki.length;A++)Re(Ki[A],e);A=r;break;case"source":Re("error",e),A=r;break;case"img":case"image":case"link":Re("error",e),Re("load",e),A=r;break;case"details":Re("toggle",e),A=r;break;case"input":Rg(e,r),A=Gf(e,r),Re("invalid",e);break;case"option":A=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},A=Ge({},r,{value:void 0}),Re("invalid",e);break;case"textarea":Hg(e,r),A=$f(e,r),Re("invalid",e);break;default:A=r}Yf(n,A),a=A;for(o in a)if(a.hasOwnProperty(o)){var s=a[o];o==="style"?dB(e,s):o==="dangerouslySetInnerHTML"?(s=s?s.__html:void 0,s!=null&&fB(e,s)):o==="children"?typeof s=="string"?(n!=="textarea"||s!=="")&&da(e,s):typeof s=="number"&&da(e,""+s):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(ha.hasOwnProperty(o)?s!=null&&o==="onScroll"&&Re("scroll",e):s!=null&&Sd(e,o,s,i))}switch(n){case"input":os(e),Tg(e,r,!1);break;case"textarea":os(e),Ng(e);break;case"option":r.value!=null&&e.setAttribute("value",""+BA(r.value));break;case"select":e.multiple=!!r.multiple,o=r.value,o!=null?Wo(e,!!r.multiple,o,!1):r.defaultValue!=null&&Wo(e,!!r.multiple,r.defaultValue,!0);break;default:typeof A.onClick=="function"&&(e.onclick=Uu)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Ut(t),null;case 6:if(e&&t.stateNode!=null)N0(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(z(166));if(n=PA(ba.current),PA(ir.current),ds(t)){if(r=t.stateNode,n=t.memoizedProps,r[tr]=t,(o=r.nodeValue!==n)&&(e=hn,e!==null))switch(e.tag){case 3:hs(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&hs(r.nodeValue,n,(e.mode&1)!==0)}o&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[tr]=t,t.stateNode=r}return Ut(t),null;case 13:if(He(Pe),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Le&&un!==null&&t.mode&1&&!(t.flags&128))t0(),ai(),t.flags|=98560,o=!1;else if(o=ds(t),r!==null&&r.dehydrated!==null){if(e===null){if(!o)throw Error(z(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(z(317));o[tr]=t}else ai(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ut(t),o=!1}else Hn!==null&&(_h(Hn),Hn=null),o=!0;if(!o)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Pe.current&1?at===0&&(at=3):fp())),t.updateQueue!==null&&(t.flags|=4),Ut(t),null);case 4:return ui(),xh(e,t),e===null&&ya(t.stateNode.containerInfo),Ut(t),null;case 10:return jd(t.type._context),Ut(t),null;case 17:return Jt(t.type)&&Iu(),Ut(t),null;case 19:if(He(Pe),o=t.memoizedState,o===null)return Ut(t),null;if(r=(t.flags&128)!==0,i=o.rendering,i===null)if(r)Ii(o,!1);else{if(at!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(i=Hu(e),i!==null){for(t.flags|=128,Ii(o,!1),r=i.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)o=n,e=r,o.flags&=14680066,i=o.alternate,i===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=i.childLanes,o.lanes=i.lanes,o.child=i.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=i.memoizedProps,o.memoizedState=i.memoizedState,o.updateQueue=i.updateQueue,o.type=i.type,e=i.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return ke(Pe,Pe.current&1|2),t.child}e=e.sibling}o.tail!==null&&Ze()>ci&&(t.flags|=128,r=!0,Ii(o,!1),t.lanes=4194304)}else{if(!r)if(e=Hu(i),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Ii(o,!0),o.tail===null&&o.tailMode==="hidden"&&!i.alternate&&!Le)return Ut(t),null}else 2*Ze()-o.renderingStartTime>ci&&n!==1073741824&&(t.flags|=128,r=!0,Ii(o,!1),t.lanes=4194304);o.isBackwards?(i.sibling=t.child,t.child=i):(n=o.last,n!==null?n.sibling=i:t.child=i,o.last=i)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Ze(),t.sibling=null,n=Pe.current,ke(Pe,r?n&1|2:n&1),t):(Ut(t),null);case 22:case 23:return cp(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?on&1073741824&&(Ut(t),t.subtreeFlags&6&&(t.flags|=8192)):Ut(t),null;case 24:return null;case 25:return null}throw Error(z(156,t.tag))}function Db(e,t){switch(Gd(t),t.tag){case 1:return Jt(t.type)&&Iu(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ui(),He(qt),He(Nt),ep(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Zd(t),null;case 13:if(He(Pe),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(z(340));ai()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return He(Pe),null;case 4:return ui(),null;case 10:return jd(t.type._context),null;case 22:case 23:return cp(),null;case 24:return null;default:return null}}var vs=!1,kt=!1,Rb=typeof WeakSet=="function"?WeakSet:Set,Z=null;function Po(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){je(e,t,r)}else n.current=null}function Fh(e,t,n){try{n()}catch(r){je(e,t,r)}}var Ev=!1;function Tb(e,t){if(ah=bu,e=KB(),Vd(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var A=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var i=0,a=-1,s=-1,u=0,l=0,c=e,f=null;t:for(;;){for(var h;c!==n||A!==0&&c.nodeType!==3||(a=i+A),c!==o||r!==0&&c.nodeType!==3||(s=i+r),c.nodeType===3&&(i+=c.nodeValue.length),(h=c.firstChild)!==null;)f=c,c=h;for(;;){if(c===e)break t;if(f===n&&++u===A&&(a=i),f===o&&++l===r&&(s=i),(h=c.nextSibling)!==null)break;c=f,f=c.parentNode}c=h}n=a===-1||s===-1?null:{start:a,end:s}}else n=null}n=n||{start:0,end:0}}else n=null;for(sh={focusedElem:e,selectionRange:n},bu=!1,Z=t;Z!==null;)if(t=Z,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Z=e;else for(;Z!==null;){t=Z;try{var d=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(d!==null){var g=d.memoizedProps,m=d.memoizedState,p=t.stateNode,v=p.getSnapshotBeforeUpdate(t.elementType===t.type?g:Rn(t.type,g),m);p.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var w=t.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(z(163))}}catch(B){je(t,t.return,B)}if(e=t.sibling,e!==null){e.return=t.return,Z=e;break}Z=t.return}return d=Ev,Ev=!1,d}function na(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var A=r=r.next;do{if((A.tag&e)===e){var o=A.destroy;A.destroy=void 0,o!==void 0&&Fh(t,n,o)}A=A.next}while(A!==r)}}function kl(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function bh(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function L0(e){var t=e.alternate;t!==null&&(e.alternate=null,L0(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[tr],delete t[xa],delete t[ch],delete t[vb],delete t[mb])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function M0(e){return e.tag===5||e.tag===3||e.tag===4}function Qv(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||M0(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Eh(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Uu));else if(r!==4&&(e=e.child,e!==null))for(Eh(e,t,n),e=e.sibling;e!==null;)Eh(e,t,n),e=e.sibling}function Qh(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Qh(e,t,n),e=e.sibling;e!==null;)Qh(e,t,n),e=e.sibling}var wt=null,Tn=!1;function Wr(e,t,n){for(n=n.child;n!==null;)O0(e,t,n),n=n.sibling}function O0(e,t,n){if(or&&typeof or.onCommitFiberUnmount=="function")try{or.onCommitFiberUnmount(Fl,n)}catch{}switch(n.tag){case 5:kt||Po(n,t);case 6:var r=wt,A=Tn;wt=null,Wr(e,t,n),wt=r,Tn=A,wt!==null&&(Tn?(e=wt,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):wt.removeChild(n.stateNode));break;case 18:wt!==null&&(Tn?(e=wt,n=n.stateNode,e.nodeType===8?kc(e.parentNode,n):e.nodeType===1&&kc(e,n),ma(e)):kc(wt,n.stateNode));break;case 4:r=wt,A=Tn,wt=n.stateNode.containerInfo,Tn=!0,Wr(e,t,n),wt=r,Tn=A;break;case 0:case 11:case 14:case 15:if(!kt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){A=r=r.next;do{var o=A,i=o.destroy;o=o.tag,i!==void 0&&(o&2||o&4)&&Fh(n,t,i),A=A.next}while(A!==r)}Wr(e,t,n);break;case 1:if(!kt&&(Po(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){je(n,t,a)}Wr(e,t,n);break;case 21:Wr(e,t,n);break;case 22:n.mode&1?(kt=(r=kt)||n.memoizedState!==null,Wr(e,t,n),kt=r):Wr(e,t,n);break;default:Wr(e,t,n)}}function Uv(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Rb),t.forEach(function(r){var A=Wb.bind(null,e,r);n.has(r)||(n.add(r),r.then(A,A))})}}function kn(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var A=n[r];try{var o=e,i=t,a=i;e:for(;a!==null;){switch(a.tag){case 5:wt=a.stateNode,Tn=!1;break e;case 3:wt=a.stateNode.containerInfo,Tn=!0;break e;case 4:wt=a.stateNode.containerInfo,Tn=!0;break e}a=a.return}if(wt===null)throw Error(z(160));O0(o,i,A),wt=null,Tn=!1;var s=A.alternate;s!==null&&(s.return=null),A.return=null}catch(u){je(A,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)P0(t,e),t=t.sibling}function P0(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(kn(t,e),jn(e),r&4){try{na(3,e,e.return),kl(3,e)}catch(g){je(e,e.return,g)}try{na(5,e,e.return)}catch(g){je(e,e.return,g)}}break;case 1:kn(t,e),jn(e),r&512&&n!==null&&Po(n,n.return);break;case 5:if(kn(t,e),jn(e),r&512&&n!==null&&Po(n,n.return),e.flags&32){var A=e.stateNode;try{da(A,"")}catch(g){je(e,e.return,g)}}if(r&4&&(A=e.stateNode,A!=null)){var o=e.memoizedProps,i=n!==null?n.memoizedProps:o,a=e.type,s=e.updateQueue;if(e.updateQueue=null,s!==null)try{a==="input"&&o.type==="radio"&&o.name!=null&&uB(A,o),qf(a,i);var u=qf(a,o);for(i=0;i<s.length;i+=2){var l=s[i],c=s[i+1];l==="style"?dB(A,c):l==="dangerouslySetInnerHTML"?fB(A,c):l==="children"?da(A,c):Sd(A,l,c,u)}switch(a){case"input":zf(A,o);break;case"textarea":lB(A,o);break;case"select":var f=A._wrapperState.wasMultiple;A._wrapperState.wasMultiple=!!o.multiple;var h=o.value;h!=null?Wo(A,!!o.multiple,h,!1):f!==!!o.multiple&&(o.defaultValue!=null?Wo(A,!!o.multiple,o.defaultValue,!0):Wo(A,!!o.multiple,o.multiple?[]:"",!1))}A[xa]=o}catch(g){je(e,e.return,g)}}break;case 6:if(kn(t,e),jn(e),r&4){if(e.stateNode===null)throw Error(z(162));A=e.stateNode,o=e.memoizedProps;try{A.nodeValue=o}catch(g){je(e,e.return,g)}}break;case 3:if(kn(t,e),jn(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{ma(t.containerInfo)}catch(g){je(e,e.return,g)}break;case 4:kn(t,e),jn(e);break;case 13:kn(t,e),jn(e),A=e.child,A.flags&8192&&(o=A.memoizedState!==null,A.stateNode.isHidden=o,!o||A.alternate!==null&&A.alternate.memoizedState!==null||(up=Ze())),r&4&&Uv(e);break;case 22:if(l=n!==null&&n.memoizedState!==null,e.mode&1?(kt=(u=kt)||l,kn(t,e),kt=u):kn(t,e),jn(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!l&&e.mode&1)for(Z=e,l=e.child;l!==null;){for(c=Z=l;Z!==null;){switch(f=Z,h=f.child,f.tag){case 0:case 11:case 14:case 15:na(4,f,f.return);break;case 1:Po(f,f.return);var d=f.stateNode;if(typeof d.componentWillUnmount=="function"){r=f,n=f.return;try{t=r,d.props=t.memoizedProps,d.state=t.memoizedState,d.componentWillUnmount()}catch(g){je(r,n,g)}}break;case 5:Po(f,f.return);break;case 22:if(f.memoizedState!==null){Sv(c);continue}}h!==null?(h.return=f,Z=h):Sv(c)}l=l.sibling}e:for(l=null,c=e;;){if(c.tag===5){if(l===null){l=c;try{A=c.stateNode,u?(o=A.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(a=c.stateNode,s=c.memoizedProps.style,i=s!=null&&s.hasOwnProperty("display")?s.display:null,a.style.display=hB("display",i))}catch(g){je(e,e.return,g)}}}else if(c.tag===6){if(l===null)try{c.stateNode.nodeValue=u?"":c.memoizedProps}catch(g){je(e,e.return,g)}}else if((c.tag!==22&&c.tag!==23||c.memoizedState===null||c===e)&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===e)break e;for(;c.sibling===null;){if(c.return===null||c.return===e)break e;l===c&&(l=null),c=c.return}l===c&&(l=null),c.sibling.return=c.return,c=c.sibling}}break;case 19:kn(t,e),jn(e),r&4&&Uv(e);break;case 21:break;default:kn(t,e),jn(e)}}function jn(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(M0(n)){var r=n;break e}n=n.return}throw Error(z(160))}switch(r.tag){case 5:var A=r.stateNode;r.flags&32&&(da(A,""),r.flags&=-33);var o=Qv(e);Qh(e,o,A);break;case 3:case 4:var i=r.stateNode.containerInfo,a=Qv(e);Eh(e,a,i);break;default:throw Error(z(161))}}catch(s){je(e,e.return,s)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Hb(e,t,n){Z=e,K0(e)}function K0(e,t,n){for(var r=(e.mode&1)!==0;Z!==null;){var A=Z,o=A.child;if(A.tag===22&&r){var i=A.memoizedState!==null||vs;if(!i){var a=A.alternate,s=a!==null&&a.memoizedState!==null||kt;a=vs;var u=kt;if(vs=i,(kt=s)&&!u)for(Z=A;Z!==null;)i=Z,s=i.child,i.tag===22&&i.memoizedState!==null?_v(A):s!==null?(s.return=i,Z=s):_v(A);for(;o!==null;)Z=o,K0(o),o=o.sibling;Z=A,vs=a,kt=u}Iv(e)}else A.subtreeFlags&8772&&o!==null?(o.return=A,Z=o):Iv(e)}}function Iv(e){for(;Z!==null;){var t=Z;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:kt||kl(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!kt)if(n===null)r.componentDidMount();else{var A=t.elementType===t.type?n.memoizedProps:Rn(t.type,n.memoizedProps);r.componentDidUpdate(A,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&hv(t,o,r);break;case 3:var i=t.updateQueue;if(i!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}hv(t,i,n)}break;case 5:var a=t.stateNode;if(n===null&&t.flags&4){n=a;var s=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":s.autoFocus&&n.focus();break;case"img":s.src&&(n.src=s.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var l=u.memoizedState;if(l!==null){var c=l.dehydrated;c!==null&&ma(c)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(z(163))}kt||t.flags&512&&bh(t)}catch(f){je(t,t.return,f)}}if(t===e){Z=null;break}if(n=t.sibling,n!==null){n.return=t.return,Z=n;break}Z=t.return}}function Sv(e){for(;Z!==null;){var t=Z;if(t===e){Z=null;break}var n=t.sibling;if(n!==null){n.return=t.return,Z=n;break}Z=t.return}}function _v(e){for(;Z!==null;){var t=Z;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{kl(4,t)}catch(s){je(t,n,s)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var A=t.return;try{r.componentDidMount()}catch(s){je(t,A,s)}}var o=t.return;try{bh(t)}catch(s){je(t,o,s)}break;case 5:var i=t.return;try{bh(t)}catch(s){je(t,i,s)}}}catch(s){je(t,t.return,s)}if(t===e){Z=null;break}var a=t.sibling;if(a!==null){a.return=t.return,Z=a;break}Z=t.return}}var Nb=Math.ceil,Mu=Hr.ReactCurrentDispatcher,ap=Hr.ReactCurrentOwner,Un=Hr.ReactCurrentBatchConfig,xe=0,gt=null,nt=null,bt=0,on=0,Ko=EA(0),at=0,Ia=null,ZA=0,Dl=0,sp=0,ra=null,Xt=null,up=0,ci=1/0,Fr=null,Ou=!1,Uh=null,fA=null,ms=!1,tA=null,Pu=0,Aa=0,Ih=null,fu=-1,hu=0;function Kt(){return xe&6?Ze():fu!==-1?fu:fu=Ze()}function hA(e){return e.mode&1?xe&2&&bt!==0?bt&-bt:Bb.transition!==null?(hu===0&&(hu=EB()),hu):(e=Ue,e!==0||(e=window.event,e=e===void 0?16:DB(e.type)),e):1}function On(e,t,n,r){if(50<Aa)throw Aa=0,Ih=null,Error(z(185));Pa(e,n,r),(!(xe&2)||e!==gt)&&(e===gt&&(!(xe&2)&&(Dl|=n),at===4&&Zr(e,bt)),Zt(e,r),n===1&&xe===0&&!(t.mode&1)&&(ci=Ze()+500,Il&&QA()))}function Zt(e,t){var n=e.callbackNode;BF(e,t);var r=Fu(e,e===gt?bt:0);if(r===0)n!==null&&Og(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Og(n),t===1)e.tag===0?wb(kv.bind(null,e)):JB(kv.bind(null,e)),pb(function(){!(xe&6)&&QA()}),n=null;else{switch(QB(r)){case 1:n=Td;break;case 4:n=FB;break;case 16:n=xu;break;case 536870912:n=bB;break;default:n=xu}n=Y0(n,V0.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function V0(e,t){if(fu=-1,hu=0,xe&6)throw Error(z(327));var n=e.callbackNode;if(jo()&&e.callbackNode!==n)return null;var r=Fu(e,e===gt?bt:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Ku(e,r);else{t=r;var A=xe;xe|=2;var o=G0();(gt!==e||bt!==t)&&(Fr=null,ci=Ze()+500,GA(e,t));do try{Ob();break}catch(a){W0(e,a)}while(!0);$d(),Mu.current=o,xe=A,nt!==null?t=0:(gt=null,bt=0,t=at)}if(t!==0){if(t===2&&(A=nh(e),A!==0&&(r=A,t=Sh(e,A))),t===1)throw n=Ia,GA(e,0),Zr(e,r),Zt(e,Ze()),n;if(t===6)Zr(e,r);else{if(A=e.current.alternate,!(r&30)&&!Lb(A)&&(t=Ku(e,r),t===2&&(o=nh(e),o!==0&&(r=o,t=Sh(e,o))),t===1))throw n=Ia,GA(e,0),Zr(e,r),Zt(e,Ze()),n;switch(e.finishedWork=A,e.finishedLanes=r,t){case 0:case 1:throw Error(z(345));case 2:RA(e,Xt,Fr);break;case 3:if(Zr(e,r),(r&130023424)===r&&(t=up+500-Ze(),10<t)){if(Fu(e,0)!==0)break;if(A=e.suspendedLanes,(A&r)!==r){Kt(),e.pingedLanes|=e.suspendedLanes&A;break}e.timeoutHandle=lh(RA.bind(null,e,Xt,Fr),t);break}RA(e,Xt,Fr);break;case 4:if(Zr(e,r),(r&4194240)===r)break;for(t=e.eventTimes,A=-1;0<r;){var i=31-Mn(r);o=1<<i,i=t[i],i>A&&(A=i),r&=~o}if(r=A,r=Ze()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Nb(r/1960))-r,10<r){e.timeoutHandle=lh(RA.bind(null,e,Xt,Fr),r);break}RA(e,Xt,Fr);break;case 5:RA(e,Xt,Fr);break;default:throw Error(z(329))}}}return Zt(e,Ze()),e.callbackNode===n?V0.bind(null,e):null}function Sh(e,t){var n=ra;return e.current.memoizedState.isDehydrated&&(GA(e,t).flags|=256),e=Ku(e,t),e!==2&&(t=Xt,Xt=n,t!==null&&_h(t)),e}function _h(e){Xt===null?Xt=e:Xt.push.apply(Xt,e)}function Lb(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var A=n[r],o=A.getSnapshot;A=A.value;try{if(!Kn(o(),A))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Zr(e,t){for(t&=~sp,t&=~Dl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Mn(t),r=1<<n;e[n]=-1,t&=~r}}function kv(e){if(xe&6)throw Error(z(327));jo();var t=Fu(e,0);if(!(t&1))return Zt(e,Ze()),null;var n=Ku(e,t);if(e.tag!==0&&n===2){var r=nh(e);r!==0&&(t=r,n=Sh(e,r))}if(n===1)throw n=Ia,GA(e,0),Zr(e,t),Zt(e,Ze()),n;if(n===6)throw Error(z(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,RA(e,Xt,Fr),Zt(e,Ze()),null}function lp(e,t){var n=xe;xe|=1;try{return e(t)}finally{xe=n,xe===0&&(ci=Ze()+500,Il&&QA())}}function eo(e){tA!==null&&tA.tag===0&&!(xe&6)&&jo();var t=xe;xe|=1;var n=Un.transition,r=Ue;try{if(Un.transition=null,Ue=1,e)return e()}finally{Ue=r,Un.transition=n,xe=t,!(xe&6)&&QA()}}function cp(){on=Ko.current,He(Ko)}function GA(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,db(n)),nt!==null)for(n=nt.return;n!==null;){var r=n;switch(Gd(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Iu();break;case 3:ui(),He(qt),He(Nt),ep();break;case 5:Zd(r);break;case 4:ui();break;case 13:He(Pe);break;case 19:He(Pe);break;case 10:jd(r.type._context);break;case 22:case 23:cp()}n=n.return}if(gt=e,nt=e=dA(e.current,null),bt=on=t,at=0,Ia=null,sp=Dl=ZA=0,Xt=ra=null,OA!==null){for(t=0;t<OA.length;t++)if(n=OA[t],r=n.interleaved,r!==null){n.interleaved=null;var A=r.next,o=n.pending;if(o!==null){var i=o.next;o.next=A,r.next=i}n.pending=r}OA=null}return e}function W0(e,t){do{var n=nt;try{if($d(),uu.current=Lu,Nu){for(var r=We.memoizedState;r!==null;){var A=r.queue;A!==null&&(A.pending=null),r=r.next}Nu=!1}if(JA=0,pt=ot=We=null,ta=!1,Ea=0,ap.current=null,n===null||n.return===null){at=1,Ia=t,nt=null;break}e:{var o=e,i=n.return,a=n,s=t;if(t=bt,a.flags|=32768,s!==null&&typeof s=="object"&&typeof s.then=="function"){var u=s,l=a,c=l.tag;if(!(l.mode&1)&&(c===0||c===11||c===15)){var f=l.alternate;f?(l.updateQueue=f.updateQueue,l.memoizedState=f.memoizedState,l.lanes=f.lanes):(l.updateQueue=null,l.memoizedState=null)}var h=wv(i);if(h!==null){h.flags&=-257,Bv(h,i,a,o,t),h.mode&1&&mv(o,u,t),t=h,s=u;var d=t.updateQueue;if(d===null){var g=new Set;g.add(s),t.updateQueue=g}else d.add(s);break e}else{if(!(t&1)){mv(o,u,t),fp();break e}s=Error(z(426))}}else if(Le&&a.mode&1){var m=wv(i);if(m!==null){!(m.flags&65536)&&(m.flags|=256),Bv(m,i,a,o,t),zd(li(s,a));break e}}o=s=li(s,a),at!==4&&(at=2),ra===null?ra=[o]:ra.push(o),o=i;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var p=Q0(o,s,t);fv(o,p);break e;case 1:a=s;var v=o.type,w=o.stateNode;if(!(o.flags&128)&&(typeof v.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(fA===null||!fA.has(w)))){o.flags|=65536,t&=-t,o.lanes|=t;var B=U0(o,a,t);fv(o,B);break e}}o=o.return}while(o!==null)}X0(n)}catch(y){t=y,nt===n&&n!==null&&(nt=n=n.return);continue}break}while(!0)}function G0(){var e=Mu.current;return Mu.current=Lu,e===null?Lu:e}function fp(){(at===0||at===3||at===2)&&(at=4),gt===null||!(ZA&268435455)&&!(Dl&268435455)||Zr(gt,bt)}function Ku(e,t){var n=xe;xe|=2;var r=G0();(gt!==e||bt!==t)&&(Fr=null,GA(e,t));do try{Mb();break}catch(A){W0(e,A)}while(!0);if($d(),xe=n,Mu.current=r,nt!==null)throw Error(z(261));return gt=null,bt=0,at}function Mb(){for(;nt!==null;)z0(nt)}function Ob(){for(;nt!==null&&!cF();)z0(nt)}function z0(e){var t=j0(e.alternate,e,on);e.memoizedProps=e.pendingProps,t===null?X0(e):nt=t,ap.current=null}function X0(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=Db(n,t),n!==null){n.flags&=32767,nt=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{at=6,nt=null;return}}else if(n=kb(n,t,on),n!==null){nt=n;return}if(t=t.sibling,t!==null){nt=t;return}nt=t=e}while(t!==null);at===0&&(at=5)}function RA(e,t,n){var r=Ue,A=Un.transition;try{Un.transition=null,Ue=1,Pb(e,t,n,r)}finally{Un.transition=A,Ue=r}return null}function Pb(e,t,n,r){do jo();while(tA!==null);if(xe&6)throw Error(z(327));n=e.finishedWork;var A=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(z(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(yF(e,o),e===gt&&(nt=gt=null,bt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ms||(ms=!0,Y0(xu,function(){return jo(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=Un.transition,Un.transition=null;var i=Ue;Ue=1;var a=xe;xe|=4,ap.current=null,Tb(e,n),P0(n,e),ab(sh),bu=!!ah,sh=ah=null,e.current=n,Hb(n),fF(),xe=a,Ue=i,Un.transition=o}else e.current=n;if(ms&&(ms=!1,tA=e,Pu=A),o=e.pendingLanes,o===0&&(fA=null),pF(n.stateNode),Zt(e,Ze()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)A=t[n],r(A.value,{componentStack:A.stack,digest:A.digest});if(Ou)throw Ou=!1,e=Uh,Uh=null,e;return Pu&1&&e.tag!==0&&jo(),o=e.pendingLanes,o&1?e===Ih?Aa++:(Aa=0,Ih=e):Aa=0,QA(),null}function jo(){if(tA!==null){var e=QB(Pu),t=Un.transition,n=Ue;try{if(Un.transition=null,Ue=16>e?16:e,tA===null)var r=!1;else{if(e=tA,tA=null,Pu=0,xe&6)throw Error(z(331));var A=xe;for(xe|=4,Z=e.current;Z!==null;){var o=Z,i=o.child;if(Z.flags&16){var a=o.deletions;if(a!==null){for(var s=0;s<a.length;s++){var u=a[s];for(Z=u;Z!==null;){var l=Z;switch(l.tag){case 0:case 11:case 15:na(8,l,o)}var c=l.child;if(c!==null)c.return=l,Z=c;else for(;Z!==null;){l=Z;var f=l.sibling,h=l.return;if(L0(l),l===u){Z=null;break}if(f!==null){f.return=h,Z=f;break}Z=h}}}var d=o.alternate;if(d!==null){var g=d.child;if(g!==null){d.child=null;do{var m=g.sibling;g.sibling=null,g=m}while(g!==null)}}Z=o}}if(o.subtreeFlags&2064&&i!==null)i.return=o,Z=i;else e:for(;Z!==null;){if(o=Z,o.flags&2048)switch(o.tag){case 0:case 11:case 15:na(9,o,o.return)}var p=o.sibling;if(p!==null){p.return=o.return,Z=p;break e}Z=o.return}}var v=e.current;for(Z=v;Z!==null;){i=Z;var w=i.child;if(i.subtreeFlags&2064&&w!==null)w.return=i,Z=w;else e:for(i=v;Z!==null;){if(a=Z,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:kl(9,a)}}catch(y){je(a,a.return,y)}if(a===i){Z=null;break e}var B=a.sibling;if(B!==null){B.return=a.return,Z=B;break e}Z=a.return}}if(xe=A,QA(),or&&typeof or.onPostCommitFiberRoot=="function")try{or.onPostCommitFiberRoot(Fl,e)}catch{}r=!0}return r}finally{Ue=n,Un.transition=t}}return!1}function Dv(e,t,n){t=li(n,t),t=Q0(e,t,1),e=cA(e,t,1),t=Kt(),e!==null&&(Pa(e,1,t),Zt(e,t))}function je(e,t,n){if(e.tag===3)Dv(e,e,n);else for(;t!==null;){if(t.tag===3){Dv(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(fA===null||!fA.has(r))){e=li(n,e),e=U0(t,e,1),t=cA(t,e,1),e=Kt(),t!==null&&(Pa(t,1,e),Zt(t,e));break}}t=t.return}}function Kb(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Kt(),e.pingedLanes|=e.suspendedLanes&n,gt===e&&(bt&n)===n&&(at===4||at===3&&(bt&130023424)===bt&&500>Ze()-up?GA(e,0):sp|=n),Zt(e,t)}function $0(e,t){t===0&&(e.mode&1?(t=ss,ss<<=1,!(ss&130023424)&&(ss=4194304)):t=1);var n=Kt();e=Dr(e,t),e!==null&&(Pa(e,t,n),Zt(e,n))}function Vb(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),$0(e,n)}function Wb(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,A=e.memoizedState;A!==null&&(n=A.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(z(314))}r!==null&&r.delete(t),$0(e,n)}var j0;j0=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||qt.current)Yt=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Yt=!1,_b(e,t,n);Yt=!!(e.flags&131072)}else Yt=!1,Le&&t.flags&1048576&&ZB(t,ku,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;cu(e,t),e=t.pendingProps;var A=ii(t,Nt.current);$o(t,n),A=np(null,t,r,e,A,n);var o=rp();return t.flags|=1,typeof A=="object"&&A!==null&&typeof A.render=="function"&&A.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Jt(r)?(o=!0,Su(t)):o=!1,t.memoizedState=A.state!==null&&A.state!==void 0?A.state:null,qd(t),A.updater=_l,t.stateNode=A,A._reactInternals=t,vh(t,r,e,n),t=Bh(null,t,r,!0,o,n)):(t.tag=0,Le&&o&&Wd(t),Ot(null,t,A,n),t=t.child),t;case 16:r=t.elementType;e:{switch(cu(e,t),e=t.pendingProps,A=r._init,r=A(r._payload),t.type=r,A=t.tag=zb(r),e=Rn(r,e),A){case 0:t=wh(null,t,r,e,n);break e;case 1:t=xv(null,t,r,e,n);break e;case 11:t=yv(null,t,r,e,n);break e;case 14:t=Cv(null,t,r,Rn(r.type,e),n);break e}throw Error(z(306,r,""))}return t;case 0:return r=t.type,A=t.pendingProps,A=t.elementType===r?A:Rn(r,A),wh(e,t,r,A,n);case 1:return r=t.type,A=t.pendingProps,A=t.elementType===r?A:Rn(r,A),xv(e,t,r,A,n);case 3:e:{if(k0(t),e===null)throw Error(z(387));r=t.pendingProps,o=t.memoizedState,A=o.element,o0(e,t),Tu(t,r,null,n);var i=t.memoizedState;if(r=i.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){A=li(Error(z(423)),t),t=Fv(e,t,r,n,A);break e}else if(r!==A){A=li(Error(z(424)),t),t=Fv(e,t,r,n,A);break e}else for(un=lA(t.stateNode.containerInfo.firstChild),hn=t,Le=!0,Hn=null,n=r0(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ai(),r===A){t=Rr(e,t,n);break e}Ot(e,t,r,n)}t=t.child}return t;case 5:return i0(t),e===null&&dh(t),r=t.type,A=t.pendingProps,o=e!==null?e.memoizedProps:null,i=A.children,uh(r,A)?i=null:o!==null&&uh(r,o)&&(t.flags|=32),_0(e,t),Ot(e,t,i,n),t.child;case 6:return e===null&&dh(t),null;case 13:return D0(e,t,n);case 4:return Jd(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=si(t,null,r,n):Ot(e,t,r,n),t.child;case 11:return r=t.type,A=t.pendingProps,A=t.elementType===r?A:Rn(r,A),yv(e,t,r,A,n);case 7:return Ot(e,t,t.pendingProps,n),t.child;case 8:return Ot(e,t,t.pendingProps.children,n),t.child;case 12:return Ot(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,A=t.pendingProps,o=t.memoizedProps,i=A.value,ke(Du,r._currentValue),r._currentValue=i,o!==null)if(Kn(o.value,i)){if(o.children===A.children&&!qt.current){t=Rr(e,t,n);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var a=o.dependencies;if(a!==null){i=o.child;for(var s=a.firstContext;s!==null;){if(s.context===r){if(o.tag===1){s=Ir(-1,n&-n),s.tag=2;var u=o.updateQueue;if(u!==null){u=u.shared;var l=u.pending;l===null?s.next=s:(s.next=l.next,l.next=s),u.pending=s}}o.lanes|=n,s=o.alternate,s!==null&&(s.lanes|=n),ph(o.return,n,t),a.lanes|=n;break}s=s.next}}else if(o.tag===10)i=o.type===t.type?null:o.child;else if(o.tag===18){if(i=o.return,i===null)throw Error(z(341));i.lanes|=n,a=i.alternate,a!==null&&(a.lanes|=n),ph(i,n,t),i=o.sibling}else i=o.child;if(i!==null)i.return=o;else for(i=o;i!==null;){if(i===t){i=null;break}if(o=i.sibling,o!==null){o.return=i.return,i=o;break}i=i.return}o=i}Ot(e,t,A.children,n),t=t.child}return t;case 9:return A=t.type,r=t.pendingProps.children,$o(t,n),A=In(A),r=r(A),t.flags|=1,Ot(e,t,r,n),t.child;case 14:return r=t.type,A=Rn(r,t.pendingProps),A=Rn(r.type,A),Cv(e,t,r,A,n);case 15:return I0(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,A=t.pendingProps,A=t.elementType===r?A:Rn(r,A),cu(e,t),t.tag=1,Jt(r)?(e=!0,Su(t)):e=!1,$o(t,n),E0(t,r,A),vh(t,r,A,n),Bh(null,t,r,!0,e,n);case 19:return R0(e,t,n);case 22:return S0(e,t,n)}throw Error(z(156,t.tag))};function Y0(e,t){return xB(e,t)}function Gb(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Fn(e,t,n,r){return new Gb(e,t,n,r)}function hp(e){return e=e.prototype,!(!e||!e.isReactComponent)}function zb(e){if(typeof e=="function")return hp(e)?1:0;if(e!=null){if(e=e.$$typeof,e===kd)return 11;if(e===Dd)return 14}return 2}function dA(e,t){var n=e.alternate;return n===null?(n=Fn(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function du(e,t,n,r,A,o){var i=2;if(r=e,typeof e=="function")hp(e)&&(i=1);else if(typeof e=="string")i=5;else e:switch(e){case ko:return zA(n.children,A,o,t);case _d:i=8,A|=8;break;case Pf:return e=Fn(12,n,t,A|2),e.elementType=Pf,e.lanes=o,e;case Kf:return e=Fn(13,n,t,A),e.elementType=Kf,e.lanes=o,e;case Vf:return e=Fn(19,n,t,A),e.elementType=Vf,e.lanes=o,e;case iB:return Rl(n,A,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case AB:i=10;break e;case oB:i=9;break e;case kd:i=11;break e;case Dd:i=14;break e;case jr:i=16,r=null;break e}throw Error(z(130,e==null?e:typeof e,""))}return t=Fn(i,n,t,A),t.elementType=e,t.type=r,t.lanes=o,t}function zA(e,t,n,r){return e=Fn(7,e,r,t),e.lanes=n,e}function Rl(e,t,n,r){return e=Fn(22,e,r,t),e.elementType=iB,e.lanes=n,e.stateNode={isHidden:!1},e}function Oc(e,t,n){return e=Fn(6,e,null,t),e.lanes=n,e}function Pc(e,t,n){return t=Fn(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Xb(e,t,n,r,A){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=yc(0),this.expirationTimes=yc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yc(0),this.identifierPrefix=r,this.onRecoverableError=A,this.mutableSourceEagerHydrationData=null}function dp(e,t,n,r,A,o,i,a,s){return e=new Xb(e,t,n,a,s),t===1?(t=1,o===!0&&(t|=8)):t=0,o=Fn(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},qd(o),e}function $b(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:_o,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function q0(e){if(!e)return yA;e=e._reactInternals;e:{if(Ao(e)!==e||e.tag!==1)throw Error(z(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Jt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(z(171))}if(e.tag===1){var n=e.type;if(Jt(n))return qB(e,n,t)}return t}function J0(e,t,n,r,A,o,i,a,s){return e=dp(n,r,!0,e,A,o,i,a,s),e.context=q0(null),n=e.current,r=Kt(),A=hA(n),o=Ir(r,A),o.callback=t??null,cA(n,o,A),e.current.lanes=A,Pa(e,A,r),Zt(e,r),e}function Tl(e,t,n,r){var A=t.current,o=Kt(),i=hA(A);return n=q0(n),t.context===null?t.context=n:t.pendingContext=n,t=Ir(o,i),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=cA(A,t,i),e!==null&&(On(e,A,i,o),su(e,A,i)),i}function Vu(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Rv(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function pp(e,t){Rv(e,t),(e=e.alternate)&&Rv(e,t)}function jb(){return null}var Z0=typeof reportError=="function"?reportError:function(e){console.error(e)};function gp(e){this._internalRoot=e}Hl.prototype.render=gp.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(z(409));Tl(e,t,null,null)};Hl.prototype.unmount=gp.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;eo(function(){Tl(null,e,null,null)}),t[kr]=null}};function Hl(e){this._internalRoot=e}Hl.prototype.unstable_scheduleHydration=function(e){if(e){var t=SB();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Jr.length&&t!==0&&t<Jr[n].priority;n++);Jr.splice(n,0,e),n===0&&kB(e)}};function vp(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Nl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Tv(){}function Yb(e,t,n,r,A){if(A){if(typeof r=="function"){var o=r;r=function(){var u=Vu(i);o.call(u)}}var i=J0(t,r,e,0,null,!1,!1,"",Tv);return e._reactRootContainer=i,e[kr]=i.current,ya(e.nodeType===8?e.parentNode:e),eo(),i}for(;A=e.lastChild;)e.removeChild(A);if(typeof r=="function"){var a=r;r=function(){var u=Vu(s);a.call(u)}}var s=dp(e,0,!1,null,null,!1,!1,"",Tv);return e._reactRootContainer=s,e[kr]=s.current,ya(e.nodeType===8?e.parentNode:e),eo(function(){Tl(t,s,n,r)}),s}function Ll(e,t,n,r,A){var o=n._reactRootContainer;if(o){var i=o;if(typeof A=="function"){var a=A;A=function(){var s=Vu(i);a.call(s)}}Tl(t,i,e,A)}else i=Yb(n,t,e,A,r);return Vu(i)}UB=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Pi(t.pendingLanes);n!==0&&(Hd(t,n|1),Zt(t,Ze()),!(xe&6)&&(ci=Ze()+500,QA()))}break;case 13:eo(function(){var r=Dr(e,1);if(r!==null){var A=Kt();On(r,e,1,A)}}),pp(e,1)}};Nd=function(e){if(e.tag===13){var t=Dr(e,134217728);if(t!==null){var n=Kt();On(t,e,134217728,n)}pp(e,134217728)}};IB=function(e){if(e.tag===13){var t=hA(e),n=Dr(e,t);if(n!==null){var r=Kt();On(n,e,t,r)}pp(e,t)}};SB=function(){return Ue};_B=function(e,t){var n=Ue;try{return Ue=e,t()}finally{Ue=n}};Zf=function(e,t,n){switch(t){case"input":if(zf(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var A=Ul(r);if(!A)throw Error(z(90));sB(r),zf(r,A)}}}break;case"textarea":lB(e,n);break;case"select":t=n.value,t!=null&&Wo(e,!!n.multiple,t,!1)}};vB=lp;mB=eo;var qb={usingClientEntryPoint:!1,Events:[Va,Ho,Ul,pB,gB,lp]},Si={findFiberByHostInstance:MA,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Jb={bundleType:Si.bundleType,version:Si.version,rendererPackageName:Si.rendererPackageName,rendererConfig:Si.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Hr.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=yB(e),e===null?null:e.stateNode},findFiberByHostInstance:Si.findFiberByHostInstance||jb,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ws=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ws.isDisabled&&ws.supportsFiber)try{Fl=ws.inject(Jb),or=ws}catch{}}gn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=qb;gn.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!vp(t))throw Error(z(200));return $b(e,t,null,n)};gn.createRoot=function(e,t){if(!vp(e))throw Error(z(299));var n=!1,r="",A=Z0;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(A=t.onRecoverableError)),t=dp(e,1,!1,null,null,n,!1,r,A),e[kr]=t.current,ya(e.nodeType===8?e.parentNode:e),new gp(t)};gn.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(z(188)):(e=Object.keys(e).join(","),Error(z(268,e)));return e=yB(t),e=e===null?null:e.stateNode,e};gn.flushSync=function(e){return eo(e)};gn.hydrate=function(e,t,n){if(!Nl(t))throw Error(z(200));return Ll(null,e,t,!0,n)};gn.hydrateRoot=function(e,t,n){if(!vp(e))throw Error(z(405));var r=n!=null&&n.hydratedSources||null,A=!1,o="",i=Z0;if(n!=null&&(n.unstable_strictMode===!0&&(A=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(i=n.onRecoverableError)),t=J0(t,null,e,1,n??null,A,!1,o,i),e[kr]=t.current,ya(e),r)for(e=0;e<r.length;e++)n=r[e],A=n._getVersion,A=A(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,A]:t.mutableSourceEagerHydrationData.push(n,A);return new Hl(t)};gn.render=function(e,t,n){if(!Nl(t))throw Error(z(200));return Ll(null,e,t,!1,n)};gn.unmountComponentAtNode=function(e){if(!Nl(e))throw Error(z(40));return e._reactRootContainer?(eo(function(){Ll(null,null,e,!1,function(){e._reactRootContainer=null,e[kr]=null})}),!0):!1};gn.unstable_batchedUpdates=lp;gn.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Nl(n))throw Error(z(200));if(e==null||e._reactInternals===void 0)throw Error(z(38));return Ll(e,t,n,!1,r)};gn.version="18.3.1-next-f1338f8080-20240426";function ey(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(ey)}catch(e){console.error(e)}}ey(),eB.exports=gn;var Zb=eB.exports,Hv=Zb;Mf.createRoot=Hv.createRoot,Mf.hydrateRoot=Hv.hydrateRoot;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var ty=function(e,t){return(ty=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var A in r)r.hasOwnProperty(A)&&(n[A]=r[A])})(e,t)};function Vn(e,t){function n(){this.constructor=e}ty(e,t),e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}function ee(e,t,n,r){return new(n||(n=Promise))(function(A,o){function i(u){try{s(r.next(u))}catch(l){o(l)}}function a(u){try{s(r.throw(u))}catch(l){o(l)}}function s(u){u.done?A(u.value):new n(function(l){l(u.value)}).then(i,a)}s((r=r.apply(e,[])).next())})}function te(e,t){var n,r,A,o,i={label:0,sent:function(){if(1&A[0])throw A[1];return A[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(s){return function(u){return function(l){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(A=2&l[0]?r.return:l[0]?r.throw||((A=r.return)&&A.call(r),0):r.next)&&!(A=A.call(r,l[1])).done)return A;switch(r=0,A&&(l=[2&l[0],A.value]),l[0]){case 0:case 1:A=l;break;case 4:return i.label++,{value:l[1],done:!1};case 5:i.label++,r=l[1],l=[0];continue;case 7:l=i.ops.pop(),i.trys.pop();continue;default:if(!(A=(A=i.trys).length>0&&A[A.length-1])&&(l[0]===6||l[0]===2)){i=0;continue}if(l[0]===3&&(!A||l[1]>A[0]&&l[1]<A[3])){i.label=l[1];break}if(l[0]===6&&i.label<A[1]){i.label=A[1],A=l;break}if(A&&i.label<A[2]){i.label=A[2],i.ops.push(l);break}A[2]&&i.ops.pop(),i.trys.pop();continue}l=t.call(e,i)}catch(c){l=[6,c],r=0}finally{n=A=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([s,u])}}}var eE=function(){function e(t){this.global=t,this.flags={},this.flagRegistry={},this.urlFlags={},this.populateURLFlags()}return e.prototype.setPlatform=function(t,n){this.platform!=null&&console.warn("Platform "+this.platformName+" has already been set. Overwriting the platform with "+n+"."),this.platformName=t,this.platform=n},e.prototype.registerFlag=function(t,n,r){if(this.flagRegistry[t]={evaluationFn:n,setHook:r},this.urlFlags[t]!=null){var A=this.urlFlags[t];console.warn("Setting feature override from URL "+t+": "+A+"."),this.set(t,A)}},e.prototype.get=function(t){return t in this.flags?this.flags[t]:(this.flags[t]=this.evaluateFlag(t),this.flags[t])},e.prototype.getNumber=function(t){return this.get(t)},e.prototype.getBool=function(t){return this.get(t)},e.prototype.getFlags=function(){return this.flags},Object.defineProperty(e.prototype,"features",{get:function(){return this.flags},enumerable:!0,configurable:!0}),e.prototype.set=function(t,n){if(this.flagRegistry[t]==null)throw new Error("Cannot set flag "+t+" as it has not been registered.");this.flags[t]=n,this.flagRegistry[t].setHook!=null&&this.flagRegistry[t].setHook(n)},e.prototype.evaluateFlag=function(t){if(this.flagRegistry[t]==null)throw new Error("Cannot evaluate flag '"+t+"': no evaluation function found.");return this.flagRegistry[t].evaluationFn()},e.prototype.setFlags=function(t){this.flags=Object.assign({},t)},e.prototype.reset=function(){this.flags={},this.urlFlags={},this.populateURLFlags()},e.prototype.populateURLFlags=function(){var t=this;if(this.global!==void 0&&this.global.location!==void 0&&this.global.location.search!==void 0){var n,r,A=(n=this.global.location.search,r={},n.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,function(o){for(var i=[],a=1;a<arguments.length;a++)i[a-1]=arguments[a];return tE(r,i[0],i[1]),i.join("=")}),r);"tfjsflags"in A&&A.tfjsflags.split(",").forEach(function(o){var i=o.split(":"),a=i[0],s=i[1];t.urlFlags[a]=function(u,l){if((l=l.toLowerCase())==="true"||l==="false")return l==="true";if(""+ +l===l)return+l;throw new Error("Could not parse value flag value "+l+" for flag "+u+".")}(a,s)})}},e}();function tE(e,t,n){e[decodeURIComponent(t)]=decodeURIComponent(n||"")}function V(){return ny}var ny=null,Wu=new Map,kh=new Map;function ry(e,t){var n=oy(e,t);return Wu.get(n)}function nE(e){return kh.get(e)}function Nv(e){for(var t=Wu.entries(),n=[];;){var r=t.next(),A=r.done,o=r.value;if(A)break;var i=o[0],a=o[1];i.split("_")[0]===e&&n.push(a)}return n}function Ay(e){var t=e.kernelName,n=e.backendName,r=oy(t,n);if(Wu.has(r))throw new Error("The kernel '"+t+"' for backend '"+n+"' is already registered");Wu.set(r,e)}function rE(e){var t=e.kernelName;kh.has(t)&&console.warn("Overriding the gradient for '"+t+"'"),kh.set(t,e)}function oy(e,t){return t+"_"+e}function Dh(e,t,n){return Math.max(e,Math.min(t,n))}function iy(e){return e%2==0?e:e+1}function AE(e){for(var t=0,n=0;n<e.length;n++)t+=e[n];return t}function U(e,t){if(!e)throw new Error(typeof t=="string"?t:t())}function Qe(e,t,n){n===void 0&&(n=""),U(vt(e,t),function(){return n+" Shapes "+e+" and "+t+" must match"})}function Bi(e){U(e!=null,function(){return"The input to the tensor constructor must be a non-null value."})}function fi(e,t,n){if(t===void 0&&(t=[]),n===void 0&&(n=!1),t==null&&(t=[]),Array.isArray(e)||ar(e)&&!n)for(var r=0;r<e.length;++r)fi(e[r],t,n);else t.push(e);return t}function ne(e){if(e.length===0)return 1;for(var t=e[0],n=1;n<e.length;n++)t*=e[n];return t}function vt(e,t){if(e===t)return!0;if(e==null||t==null||e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function et(e){return e%1==0}function oE(e){if(Math.tanh!=null)return Math.tanh(e);if(e===1/0)return 1;if(e===-1/0)return-1;var t=Math.exp(2*e);return(t-1)/(t+1)}function Rh(e){var t=Math.ceil(Math.sqrt(e));return[t,Math.ceil(e/t)]}function Yo(e,t){return t<=e.length?e:e+" ".repeat(t-e.length)}function Lv(e,t,n){return t===void 0&&(t=function(r){return 0}),new Promise(function(r,A){var o=0,i=function(){if(e())r();else{o++;var a=t(o);n!=null&&o>=n?A():setTimeout(i,a)}};i()})}function iE(e,t){for(var n=1,r=-1,A=0;A<e.length;++A)if(e[A]>=0)n*=e[A];else if(e[A]===-1){if(r!==-1)throw Error("Shapes can only have 1 implicit size. Found -1 at dim "+r+" and dim "+A);r=A}else if(e[A]<0)throw Error("Shapes can not be < 0. Found "+e[A]+" at dim "+A);if(r===-1){if(t>0&&t!==n)throw Error("Size("+t+") must match the product of shape "+e);return e}if(n===0)throw Error("Cannot infer the missing size in ["+e+"] when there are 0 elements");if(t%n!=0)throw Error("The implicit shape can't be a fractional number. Got "+t+" / "+n);var o=e.slice();return o[r]=t/n,o}function ft(e,t){var n=t.length;return U((e=e==null?t.map(function(r,A){return A}):[].concat(e)).every(function(r){return r>=-n&&r<n}),function(){return"All values in axis param must be in range [-"+n+", "+n+") but got axis "+e}),U(e.every(function(r){return et(r)}),function(){return"All values in axis param must be integers but got axis "+e}),e.map(function(r){return r<0?n+r:r})}function NA(e,t){for(var n=[],r=[],A=t!=null&&Array.isArray(t)&&t.length===0,o=t==null||A?null:ft(t,e).sort(),i=0,a=0;a<e.length;++a){if(o!=null){if(o[i]===a&&e[a]!==1)throw new Error("Can't squeeze axis "+a+" since its dim '"+e[a]+"' is not 1");(o[i]==null||o[i]>a)&&e[a]===1&&(n.push(e[a]),r.push(a)),o[i]<=a&&i++}e[a]!==1&&(n.push(e[a]),r.push(a))}return{newShape:n,keptDims:r}}function Sa(e,t){var n=null;if(e==null||e==="float32")n=new Float32Array(t);else if(e==="int32")n=new Int32Array(t);else{if(e!=="bool")throw new Error("Unknown data type "+e);n=new Uint8Array(t)}return n}function Gu(e,t){var n=null;if(e==null||e==="float32")n=new Float32Array(t);else if(e==="int32")n=new Int32Array(t);else if(e==="bool")n=new Uint8Array(t);else{if(e!=="string")throw new Error("Unknown data type "+e);n=new Array(t)}return n}function aE(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(isNaN(r)||!isFinite(r))throw Error("A tensor of type "+t+" being uploaded contains "+r+".")}}function sE(e){return e==="bool"||e==="complex64"||e==="float32"||e==="int32"||e==="string"}function uE(e,t){return t!=="complex64"&&(t!=="float32"||e==="complex64")&&(t!=="int32"||e==="float32"||e==="complex64")&&(t!=="bool"||e!=="bool")}function ar(e){return e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array}function ay(e){if(e==="float32"||e==="int32")return 4;if(e==="complex64")return 8;if(e==="bool")return 1;throw new Error("Unknown dtype "+e)}function lE(e){if(e==null)return 0;var t=0;return e.forEach(function(n){return t+=n.length}),t}function mp(e){return typeof e=="string"||e instanceof String}function cE(e){return typeof e=="boolean"}function fE(e){return typeof e=="number"}function Ga(e){return Array.isArray(e)?Ga(e[0]):e instanceof Float32Array?"float32":e instanceof Int32Array||e instanceof Uint8Array?"int32":fE(e)?"float32":mp(e)?"string":cE(e)?"bool":"float32"}function Th(e){return!!(e&&e.constructor&&e.call&&e.apply)}function Hh(e,t){for(var n=t;n<e;++n)if(e%n==0)return n;return e}function sr(e){var t=e.length;if(t<2)return[];var n=new Array(t-1);n[t-2]=e[t-1];for(var r=t-3;r>=0;--r)n[r]=n[r+1]*e[r+1];return n}function sy(e,t,n){if(t==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(e)&&(e=fi(e)),n&&aE(e,t),function(o,i){return o instanceof Float32Array&&i==="float32"||o instanceof Int32Array&&i==="int32"||o instanceof Uint8Array&&i==="bool"}(e,t))return e;if(t==null||t==="float32"||t==="complex64")return new Float32Array(e);if(t==="int32")return new Int32Array(e);if(t==="bool"){for(var r=new Uint8Array(e.length),A=0;A<r.length;++A)Math.round(e[A])!==0&&(r[A]=1);return r}throw new Error("Unknown data type "+t)}function Mv(e,t){if(e.length===0)return t[0];var n=e.reduce(function(r,A){return r*A});if(n===0)return[];if(n!==t.length)throw new Error("["+e+"] does not match the input size.");return function r(A,o,i){var a=new Array;if(o.length===1)for(var s=o[0],u=0;u<s;u++)a[u]=i[A+u];else{s=o[0];var l=o.slice(1),c=l.reduce(function(f,h){return f*h});for(u=0;u<s;u++)a[u]=r(A+u*c,l,i)}return a}(0,e,t)}function uy(e,t){for(var n=za(e,t),r=0;r<n.length;r++)n[r]=1;return n}function za(e,t){if(t==null||t==="float32"||t==="complex64")return new Float32Array(e);if(t==="int32")return new Int32Array(e);if(t==="bool")return new Uint8Array(e);throw new Error("Unknown data type "+t)}function er(){return V().platform.now()}function ly(e){e.forEach(function(t){U(Number.isInteger(t)&&t>=0,function(){return"Tensor must have a shape comprised of positive integers but got shape ["+e+"]."})})}function hE(e,t){return t===void 0&&(t="utf-8"),t=t||"utf-8",V().platform.encode(e,t)}function zu(e,t){return t===void 0&&(t="utf-8"),t=t||"utf-8",V().platform.decode(e,t)}function Ov(e,t,n){if(t===0)return 0;if(t===1)return e[0];for(var r=e[e.length-1],A=0;A<e.length-1;++A)r+=n[A]*e[A];return r}function dE(e,t,n){if(t===0)return[];if(t===1)return[e];for(var r=new Array(t),A=0;A<r.length-1;++A)r[A]=Math.floor(e/n[A]),e-=r[A]*n[A];return r[r.length-1]=e,r}var pE=function(){function e(t,n){this.backendTimer=t,this.logger=n,n==null&&(this.logger=new gE)}return e.prototype.profileKernel=function(t,n,r){var A,o=this,i=this.backendTimer.time(function(){A=r()});return A.forEach(function(a){a.data().then(function(s){(function(u,l,c){if(l!=="float32")return!1;for(var f=0;f<u.length;f++){var h=u[f];if(isNaN(h)||!isFinite(h))return console.warn("Found "+h+" in the result of '"+c+"'"),!0}})(s,a.dtype,t),i.then(function(u){var l="";u.getExtraProfileInfo!=null&&(l=u.getExtraProfileInfo()),o.logger.logKernelProfile(t,a,s,u.kernelMs,n,l)})})}),A},e}(),gE=function(){function e(){}return e.prototype.logKernelProfile=function(t,n,r,A,o,i){var a=typeof A=="number"?Yo(A+"ms",9):A.error,s=Yo(t,25),u=n.rank,l=n.size,c=Yo(n.shape.toString(),14),f="";for(var h in o){var d=o[h].shape||n.shape,g=d.length;f+=h+": "+g+"D "+(g>0?d:"")+" "}console.log("%c"+s+"	%c"+a+"	%c"+u+"D "+c+"	%c"+l+"	%c"+f+"	%c"+i,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")},e}(),Pv=20,_i=3,Kc=7;function vE(e,t,n,r){var A=sr(t),o=function(u,l,c,f){var h=ne(l),d=f[f.length-1],g=new Array(d).fill(0),m=l.length,p=c==="complex64"?Di(u):u;if(m>1)for(var v=0;v<h/d;v++)for(var w=v*d,B=0;B<d;B++)g[B]=Math.max(g[B],ki(p[w+B],0,c).length);return g}(e,t,n,A),i=t.length,a=function u(l,c,f,h,d,g){g===void 0&&(g=!0);var m=f==="complex64"?2:1,p=c[0],v=c.length;if(v===0)return f==="complex64"?[ki(Di(l)[0],0,f)]:f==="bool"?[cy(l[0])]:[l[0].toString()];if(v===1){if(p>Pv){var w=_i*m,B=Array.from(l.slice(0,w)),y=Array.from(l.slice((p-_i)*m,p*m));return f==="complex64"&&(B=Di(B),y=Di(y)),["["+B.map(function(O,K){return ki(O,d[K],f)}).join(", ")+", ..., "+y.map(function(O,K){return ki(O,d[p-_i+K],f)}).join(", ")+"]"]}return["["+(f==="complex64"?Di(l):Array.from(l)).map(function(O,K){return ki(O,d[K],f)}).join(", ")+"]"]}var C=c.slice(1),b=h.slice(1),x=h[0]*m,F=[];if(p>Pv){for(var E=0;E<_i;E++){var I=(S=E*x)+x;F.push.apply(F,u(l.slice(S,I),C,f,b,d,!1))}for(F.push("..."),E=p-_i;E<p;E++)I=(S=E*x)+x,F.push.apply(F,u(l.slice(S,I),C,f,b,d,E===p-1))}else for(E=0;E<p;E++){var S;I=(S=E*x)+x,F.push.apply(F,u(l.slice(S,I),C,f,b,d,E===p-1))}var T=v===2?",":"";for(F[0]="["+F[0]+T,E=1;E<F.length-1;E++)F[E]=" "+F[E]+T;var N=`,
`;for(E=2;E<v;E++)N+=`
`;return F[F.length-1]=" "+F[F.length-1]+"]"+(g?"":N),F}(e,t,n,A,o),s=["Tensor"];return r&&(s.push("  dtype: "+n),s.push("  rank: "+i),s.push("  shape: ["+t+"]"),s.push("  values:")),s.push(a.map(function(u){return"    "+u}).join(`
`)),s.join(`
`)}function ki(e,t,n){return Yo(Array.isArray(e)?parseFloat(e[0].toFixed(Kc))+" + "+parseFloat(e[1].toFixed(Kc))+"j":mp(e)?"'"+e+"'":n==="bool"?cy(e):parseFloat(e.toFixed(Kc)).toString(),t)}function cy(e){return e===0?"false":"true"}function Di(e){for(var t=[],n=0;n<e.length;n+=2)t.push([e[n],e[n+1]]);return t}var _a=function(){function e(t,n,r){var A=this;if(this.dtype=n,this.shape=t.slice(),this.size=ne(t),r!=null){var o=r.length;U(o===this.size,function(){return"Length of values '"+o+"' does not match the size inferred by the shape '"+A.size+"'."})}if(n==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=r||Gu(n,this.size),this.strides=sr(t)}return e.prototype.set=function(t){for(var n=this,r=[],A=1;A<arguments.length;A++)r[A-1]=arguments[A];r.length===0&&(r=[0]),U(r.length===this.rank,function(){return"The number of provided coordinates ("+r.length+") must match the rank ("+n.rank+")"});var o=this.locToIndex(r);this.values[o]=t},e.prototype.get=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];t.length===0&&(t=[0]);for(var r=0,A=0,o=t;A<o.length;A++){var i=o[A];if(i<0||i>=this.shape[r]){var a="Requested out of range element at "+t+".   Buffer shape="+this.shape;throw new Error(a)}r++}for(var s=t[t.length-1],u=0;u<t.length-1;++u)s+=this.strides[u]*t[u];return this.values[s]},e.prototype.locToIndex=function(t){if(this.rank===0)return 0;if(this.rank===1)return t[0];for(var n=t[t.length-1],r=0;r<t.length-1;++r)n+=this.strides[r]*t[r];return n},e.prototype.indexToLoc=function(t){if(this.rank===0)return[];if(this.rank===1)return[t];for(var n=new Array(this.shape.length),r=0;r<n.length-1;++r)n[r]=Math.floor(t/this.strides[r]),t-=n[r]*this.strides[r];return n[n.length-1]=t,n},Object.defineProperty(e.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),e.prototype.toTensor=function(){return nr().makeTensor(this.values,this.shape,this.dtype)},e}(),nr=null,M=null,fy=null,Ke=function(){function e(t,n,r,A){this.kept=!1,this.isDisposedInternal=!1,this.shape=t.slice(),this.dtype=n||"float32",this.size=ne(t),this.strides=sr(t),this.dataId=r,this.id=A,this.rankType=this.rank<5?this.rank.toString():"higher"}return e.prototype.flatten=function(){return this.throwIfDisposed(),this.as1D()},e.prototype.asScalar=function(){return this.throwIfDisposed(),U(this.size===1,function(){return"The array must have only 1 element."}),this.reshape([])},e.prototype.as1D=function(){return this.throwIfDisposed(),this.reshape([this.size])},e.prototype.as2D=function(t,n){return this.throwIfDisposed(),this.reshape([t,n])},e.prototype.as3D=function(t,n,r){return this.throwIfDisposed(),this.reshape([t,n,r])},e.prototype.as4D=function(t,n,r,A){return this.throwIfDisposed(),this.reshape([t,n,r,A])},e.prototype.as5D=function(t,n,r,A,o){return this.throwIfDisposed(),this.reshape([t,n,r,A,o])},e.prototype.asType=function(t){return this.throwIfDisposed(),M.cast(this,t)},Object.defineProperty(e.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),e.prototype.buffer=function(){return ee(this,void 0,void 0,function(){var t;return te(this,function(n){switch(n.label){case 0:return[4,this.data()];case 1:return t=n.sent(),[2,M.buffer(this.shape,this.dtype,t)]}})})},e.prototype.bufferSync=function(){return M.buffer(this.shape,this.dtype,this.dataSync())},e.prototype.array=function(){return ee(this,void 0,void 0,function(){var t;return te(this,function(n){switch(n.label){case 0:return[4,this.data()];case 1:return t=n.sent(),[2,Mv(this.shape,t)]}})})},e.prototype.arraySync=function(){return Mv(this.shape,this.dataSync())},e.prototype.data=function(){return ee(this,void 0,void 0,function(){var t,n;return te(this,function(r){switch(r.label){case 0:return this.throwIfDisposed(),t=nr().read(this.dataId),this.dtype!=="string"?[3,2]:[4,t];case 1:n=r.sent();try{return[2,n.map(function(A){return zu(A)})]}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}r.label=2;case 2:return[2,t]}})})},e.prototype.dataSync=function(){this.throwIfDisposed();var t=nr().readSync(this.dataId);if(this.dtype==="string")try{return t.map(function(n){return zu(n)})}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return t},e.prototype.bytes=function(){return ee(this,void 0,void 0,function(){var t;return te(this,function(n){switch(n.label){case 0:return this.throwIfDisposed(),[4,nr().read(this.dataId)];case 1:return t=n.sent(),this.dtype==="string"?[2,t]:[2,new Uint8Array(t.buffer)]}})})},e.prototype.dispose=function(){this.isDisposed||(nr().disposeTensor(this),this.isDisposedInternal=!0)},Object.defineProperty(e.prototype,"isDisposed",{get:function(){return this.isDisposedInternal},enumerable:!0,configurable:!0}),e.prototype.throwIfDisposed=function(){if(this.isDisposed)throw new Error("Tensor is disposed.")},e.prototype.toFloat=function(){return this.asType("float32")},e.prototype.toInt=function(){return this.asType("int32")},e.prototype.toBool=function(){return this.asType("bool")},e.prototype.print=function(t){return t===void 0&&(t=!1),M.print(this,t)},e.prototype.reshape=function(t){return this.throwIfDisposed(),M.reshape(this,t)},e.prototype.reshapeAs=function(t){return this.throwIfDisposed(),this.reshape(t.shape)},e.prototype.expandDims=function(t){return t===void 0&&(t=0),M.expandDims(this,t)},e.prototype.cumsum=function(t,n,r){return t===void 0&&(t=0),n===void 0&&(n=!1),r===void 0&&(r=!1),M.cumsum(this,t,n,r)},e.prototype.squeeze=function(t){return this.throwIfDisposed(),M.squeeze(this,t)},e.prototype.clone=function(){return this.throwIfDisposed(),M.clone(this)},e.prototype.oneHot=function(t,n,r){return this.throwIfDisposed(),M.oneHot(this,t,n,r)},e.prototype.toString=function(t){return t===void 0&&(t=!1),vE(this.dataSync(),this.shape,this.dtype,t)},e.prototype.tile=function(t){return this.throwIfDisposed(),M.tile(this,t)},e.prototype.gather=function(t,n){return n===void 0&&(n=0),this.throwIfDisposed(),M.gather(this,t,n)},e.prototype.matMul=function(t,n,r){return n===void 0&&(n=!1),r===void 0&&(r=!1),this.throwIfDisposed(),M.matMul(this,t,n,r)},e.prototype.dot=function(t){return this.throwIfDisposed(),M.dot(this,t)},e.prototype.norm=function(t,n,r){return t===void 0&&(t="euclidean"),n===void 0&&(n=null),r===void 0&&(r=!1),this.throwIfDisposed(),M.norm(this,t,n,r)},e.prototype.slice=function(t,n){return this.throwIfDisposed(),M.slice(this,t,n)},e.prototype.reverse=function(t){return this.throwIfDisposed(),M.reverse(this,t)},e.prototype.concat=function(t,n){return n===void 0&&(n=0),this.throwIfDisposed(),t instanceof e&&(t=[t]),M.concat([this].concat(t),n)},e.prototype.split=function(t,n){return n===void 0&&(n=0),this.throwIfDisposed(),M.split(this,t,n)},e.prototype.stack=function(t,n){return n===void 0&&(n=0),M.stack([this,t],n)},e.prototype.unstack=function(t){return t===void 0&&(t=0),M.unstack(this,t)},e.prototype.pad=function(t,n){return n===void 0&&(n=0),M.pad(this,t,n)},e.prototype.batchNormalization=function(t,n,r,A,o){return r===void 0&&(r=.001),fy("tf.batchNormalization() is going away. Use tf.batchNorm() instead, and note the positional argument change of scale, offset, and varianceEpsilon"),this.batchNorm(t,n,o,A,r)},e.prototype.batchNorm=function(t,n,r,A,o){return o===void 0&&(o=.001),this.throwIfDisposed(),M.batchNorm(this,t,n,r,A,o)},e.prototype.all=function(t,n){return t===void 0&&(t=null),n===void 0&&(n=!1),this.throwIfDisposed(),M.all(this,t,n)},e.prototype.any=function(t,n){return t===void 0&&(t=null),n===void 0&&(n=!1),this.throwIfDisposed(),M.any(this,t,n)},e.prototype.logSumExp=function(t,n){return t===void 0&&(t=null),n===void 0&&(n=!1),this.throwIfDisposed(),M.logSumExp(this,t,n)},e.prototype.sum=function(t,n){return t===void 0&&(t=null),n===void 0&&(n=!1),this.throwIfDisposed(),M.sum(this,t,n)},e.prototype.prod=function(t,n){return t===void 0&&(t=null),n===void 0&&(n=!1),this.throwIfDisposed(),M.prod(this,t,n)},e.prototype.mean=function(t,n){return t===void 0&&(t=null),n===void 0&&(n=!1),this.throwIfDisposed(),M.mean(this,t,n)},e.prototype.min=function(t,n){return t===void 0&&(t=null),n===void 0&&(n=!1),this.throwIfDisposed(),M.min(this,t,n)},e.prototype.max=function(t,n){return t===void 0&&(t=null),n===void 0&&(n=!1),this.throwIfDisposed(),M.max(this,t,n)},e.prototype.argMin=function(t){return t===void 0&&(t=null),this.throwIfDisposed(),M.argMin(this,t)},e.prototype.argMax=function(t){return t===void 0&&(t=null),this.throwIfDisposed(),M.argMax(this,t)},e.prototype.cast=function(t){return this.throwIfDisposed(),M.cast(this,t)},e.prototype.add=function(t){return this.throwIfDisposed(),M.add(this,t)},e.prototype.addStrict=function(t){return this.throwIfDisposed(),M.addStrict(this,t)},e.prototype.atan2=function(t){return this.throwIfDisposed(),M.atan2(this,t)},e.prototype.sub=function(t){return this.throwIfDisposed(),M.sub(this,t)},e.prototype.subStrict=function(t){return this.throwIfDisposed(),M.subStrict(this,t)},e.prototype.pow=function(t){return this.throwIfDisposed(),M.pow(this,t)},e.prototype.powStrict=function(t){return this.throwIfDisposed(),M.powStrict(this,t)},e.prototype.mul=function(t){return this.throwIfDisposed(),M.mul(this,t)},e.prototype.mulStrict=function(t){return this.throwIfDisposed(),M.mulStrict(this,t)},e.prototype.div=function(t){return this.throwIfDisposed(),M.div(this,t)},e.prototype.divNoNan=function(t){return this.throwIfDisposed(),M.divNoNan(this,t)},e.prototype.floorDiv=function(t){return this.throwIfDisposed(),M.floorDiv(this,t)},e.prototype.divStrict=function(t){return this.throwIfDisposed(),M.divStrict(this,t)},e.prototype.minimum=function(t){return this.throwIfDisposed(),M.minimum(this,t)},e.prototype.minimumStrict=function(t){return this.throwIfDisposed(),M.minimumStrict(this,t)},e.prototype.maximum=function(t){return this.throwIfDisposed(),M.maximum(this,t)},e.prototype.maximumStrict=function(t){return this.throwIfDisposed(),M.maximumStrict(this,t)},e.prototype.mod=function(t){return this.throwIfDisposed(),M.mod(this,t)},e.prototype.modStrict=function(t){return this.throwIfDisposed(),M.modStrict(this,t)},e.prototype.squaredDifferenceStrict=function(t){return this.throwIfDisposed(),M.squaredDifferenceStrict(this,t)},e.prototype.transpose=function(t){return this.throwIfDisposed(),M.transpose(this,t)},e.prototype.notEqual=function(t){return this.throwIfDisposed(),M.notEqual(this,t)},e.prototype.notEqualStrict=function(t){return this.throwIfDisposed(),M.notEqualStrict(this,t)},e.prototype.less=function(t){return this.throwIfDisposed(),M.less(this,t)},e.prototype.lessStrict=function(t){return this.throwIfDisposed(),M.lessStrict(this,t)},e.prototype.equal=function(t){return this.throwIfDisposed(),M.equal(this,t)},e.prototype.equalStrict=function(t){return this.throwIfDisposed(),M.equalStrict(this,t)},e.prototype.lessEqual=function(t){return this.throwIfDisposed(),M.lessEqual(this,t)},e.prototype.lessEqualStrict=function(t){return this.throwIfDisposed(),M.lessEqualStrict(this,t)},e.prototype.greater=function(t){return this.throwIfDisposed(),M.greater(this,t)},e.prototype.greaterStrict=function(t){return this.throwIfDisposed(),M.greaterStrict(this,t)},e.prototype.greaterEqual=function(t){return this.throwIfDisposed(),M.greaterEqual(this,t)},e.prototype.greaterEqualStrict=function(t){return this.throwIfDisposed(),M.greaterEqualStrict(this,t)},e.prototype.logicalAnd=function(t){return this.throwIfDisposed(),M.logicalAnd(this,t)},e.prototype.logicalOr=function(t){return this.throwIfDisposed(),M.logicalOr(this,t)},e.prototype.logicalNot=function(){return this.throwIfDisposed(),M.logicalNot(this)},e.prototype.logicalXor=function(t){return this.throwIfDisposed(),M.logicalXor(this,t)},e.prototype.where=function(t,n){return this.throwIfDisposed(),M.where(t,this,n)},e.prototype.neg=function(){return this.throwIfDisposed(),M.neg(this)},e.prototype.ceil=function(){return this.throwIfDisposed(),M.ceil(this)},e.prototype.floor=function(){return this.throwIfDisposed(),M.floor(this)},e.prototype.sign=function(){return this.throwIfDisposed(),M.sign(this)},e.prototype.isNaN=function(){return this.throwIfDisposed(),M.isNaN(this)},e.prototype.isInf=function(){return this.throwIfDisposed(),M.isInf(this)},e.prototype.isFinite=function(){return this.throwIfDisposed(),M.isFinite(this)},e.prototype.exp=function(){return this.throwIfDisposed(),M.exp(this)},e.prototype.expm1=function(){return this.throwIfDisposed(),M.expm1(this)},e.prototype.log=function(){return this.throwIfDisposed(),M.log(this)},e.prototype.log1p=function(){return this.throwIfDisposed(),M.log1p(this)},e.prototype.sqrt=function(){return this.throwIfDisposed(),M.sqrt(this)},e.prototype.rsqrt=function(){return this.throwIfDisposed(),M.rsqrt(this)},e.prototype.square=function(){return this.throwIfDisposed(),M.square(this)},e.prototype.reciprocal=function(){return this.throwIfDisposed(),M.reciprocal(this)},e.prototype.abs=function(){return this.throwIfDisposed(),M.abs(this)},e.prototype.clipByValue=function(t,n){return this.throwIfDisposed(),M.clipByValue(this,t,n)},e.prototype.relu=function(){return this.throwIfDisposed(),M.relu(this)},e.prototype.relu6=function(){return this.throwIfDisposed(),M.relu6(this)},e.prototype.elu=function(){return this.throwIfDisposed(),M.elu(this)},e.prototype.selu=function(){return this.throwIfDisposed(),M.selu(this)},e.prototype.leakyRelu=function(t){return t===void 0&&(t=.2),this.throwIfDisposed(),M.leakyRelu(this,t)},e.prototype.prelu=function(t){return this.throwIfDisposed(),M.prelu(this,t)},e.prototype.sigmoid=function(){return this.throwIfDisposed(),M.sigmoid(this)},e.prototype.logSigmoid=function(){return this.throwIfDisposed(),M.logSigmoid(this)},e.prototype.softplus=function(){return this.throwIfDisposed(),M.softplus(this)},e.prototype.zerosLike=function(){return this.throwIfDisposed(),M.zerosLike(this)},e.prototype.onesLike=function(){return this.throwIfDisposed(),M.onesLike(this)},e.prototype.sin=function(){return this.throwIfDisposed(),M.sin(this)},e.prototype.cos=function(){return this.throwIfDisposed(),M.cos(this)},e.prototype.tan=function(){return this.throwIfDisposed(),M.tan(this)},e.prototype.asin=function(){return this.throwIfDisposed(),M.asin(this)},e.prototype.acos=function(){return this.throwIfDisposed(),M.acos(this)},e.prototype.atan=function(){return this.throwIfDisposed(),M.atan(this)},e.prototype.sinh=function(){return this.throwIfDisposed(),M.sinh(this)},e.prototype.cosh=function(){return this.throwIfDisposed(),M.cosh(this)},e.prototype.tanh=function(){return this.throwIfDisposed(),M.tanh(this)},e.prototype.asinh=function(){return this.throwIfDisposed(),M.asinh(this)},e.prototype.acosh=function(){return this.throwIfDisposed(),M.acosh(this)},e.prototype.atanh=function(){return this.throwIfDisposed(),M.atanh(this)},e.prototype.erf=function(){return this.throwIfDisposed(),M.erf(this)},e.prototype.round=function(){return this.throwIfDisposed(),M.round(this)},e.prototype.step=function(t){return t===void 0&&(t=0),this.throwIfDisposed(),M.step(this,t)},e.prototype.softmax=function(t){return t===void 0&&(t=-1),this.throwIfDisposed(),M.softmax(this,t)},e.prototype.logSoftmax=function(t){return t===void 0&&(t=-1),this.throwIfDisposed(),M.logSoftmax(this,t)},e.prototype.resizeBilinear=function(t,n){return n===void 0&&(n=!1),this.throwIfDisposed(),M.image.resizeBilinear(this,t,n)},e.prototype.resizeNearestNeighbor=function(t,n){return n===void 0&&(n=!1),this.throwIfDisposed(),M.image.resizeNearestNeighbor(this,t,n)},e.prototype.conv1d=function(t,n,r,A,o,i){return A===void 0&&(A="NWC"),o===void 0&&(o=1),this.throwIfDisposed(),M.conv1d(this,t,n,r,A,o,i)},e.prototype.conv2d=function(t,n,r,A,o,i){return A===void 0&&(A="NHWC"),o===void 0&&(o=[1,1]),this.throwIfDisposed(),M.conv2d(this,t,n,r,A,o,i)},e.prototype.conv2dTranspose=function(t,n,r,A,o){return this.throwIfDisposed(),M.conv2dTranspose(this,t,n,r,A,o)},e.prototype.depthwiseConv2D=function(t,n,r,A,o,i){return A===void 0&&(A="NHWC"),o===void 0&&(o=[1,1]),this.throwIfDisposed(),M.depthwiseConv2d(this,t,n,r,A,o,i)},e.prototype.separableConv2d=function(t,n,r,A,o,i){return o===void 0&&(o=[1,1]),i===void 0&&(i="NHWC"),this.throwIfDisposed(),M.separableConv2d(this,t,n,r,A,o,i)},e.prototype.avgPool=function(t,n,r,A){return this.throwIfDisposed(),M.avgPool(this,t,n,r,A)},e.prototype.maxPool=function(t,n,r,A){return this.throwIfDisposed(),M.maxPool(this,t,n,r,A)},e.prototype.localResponseNormalization=function(t,n,r,A){return t===void 0&&(t=5),n===void 0&&(n=1),r===void 0&&(r=1),A===void 0&&(A=.5),M.localResponseNormalization(this,t,n,r,A)},e.prototype.pool=function(t,n,r,A,o){return this.throwIfDisposed(),M.pool(this,t,n,r,A,o)},e.prototype.variable=function(t,n,r){return t===void 0&&(t=!0),this.throwIfDisposed(),nr().makeVariable(this,t,n,r)},e.prototype.unsortedSegmentSum=function(t,n){return this.throwIfDisposed(),M.unsortedSegmentSum(this,t,n)},e.prototype.batchToSpaceND=function(t,n){return this.throwIfDisposed(),M.batchToSpaceND(this,t,n)},e.prototype.spaceToBatchND=function(t,n){return this.throwIfDisposed(),M.spaceToBatchND(this,t,n)},e.prototype.topk=function(t,n){return t===void 0&&(t=1),n===void 0&&(n=!0),this.throwIfDisposed(),M.topk(this,t,n)},e.prototype.stridedSlice=function(t,n,r,A,o,i,a,s){return A===void 0&&(A=0),o===void 0&&(o=0),i===void 0&&(i=0),a===void 0&&(a=0),s===void 0&&(s=0),this.throwIfDisposed(),M.stridedSlice(this,t,n,r,A,o,i,a,s)},e.prototype.depthToSpace=function(t,n){return this.throwIfDisposed(),M.depthToSpace(this,t,n)},e.prototype.fft=function(){return this.throwIfDisposed(),M.spectral.fft(this)},e.prototype.ifft=function(){return this.throwIfDisposed(),M.spectral.ifft(this)},e.prototype.rfft=function(){return this.throwIfDisposed(),M.spectral.rfft(this)},e.prototype.irfft=function(){return this.throwIfDisposed(),M.spectral.irfft(this)},e}();Object.defineProperty(Ke,Symbol.hasInstance,{value:function(e){return!!e&&e.dataId!=null&&e.shape!=null&&e.dtype!=null}});var Kv,Nh,Lh,Mh,Oh,hi=function(e){function t(n,r,A,o){var i=e.call(this,n.shape,n.dtype,n.dataId,o)||this;return i.trainable=r,i.name=A,i}return Vn(t,e),t.prototype.assign=function(n){if(n.dtype!==this.dtype)throw new Error("dtype of the new value ("+n.dtype+") and previous value ("+this.dtype+") must match");if(!vt(n.shape,this.shape))throw new Error("shape of the new value ("+n.shape+") and previous value ("+this.shape+") must match");nr().disposeTensor(this),this.dataId=n.dataId,nr().incRef(this,null)},t.prototype.dispose=function(){nr().disposeVariable(this),this.isDisposedInternal=!0},t}(Ke);Object.defineProperty(hi,Symbol.hasInstance,{value:function(e){return e instanceof Ke&&e.assign!=null&&e.assign instanceof Function}}),function(e){e.R0="R0",e.R1="R1",e.R2="R2",e.R3="R3",e.R4="R4",e.R5="R5",e.R6="R6"}(Kv||(Kv={})),function(e){e.float32="float32",e.int32="int32",e.bool="int32",e.complex64="complex64"}(Nh||(Nh={})),function(e){e.float32="float32",e.int32="int32",e.bool="bool",e.complex64="complex64"}(Lh||(Lh={})),function(e){e.float32="float32",e.int32="float32",e.bool="float32",e.complex64="complex64"}(Mh||(Mh={})),function(e){e.float32="complex64",e.int32="complex64",e.bool="complex64",e.complex64="complex64"}(Oh||(Oh={}));var mE={float32:Mh,int32:Nh,bool:Lh,complex64:Oh};function Ct(e,t){if(e==="string"||t==="string"){if(e==="string"&&t==="string")return"string";throw new Error("Can not upcast "+e+" with "+t)}return mE[e][t]}function Vc(e){return Ct(e,"int32")}function ze(e,t){if(e.dtype===t.dtype)return[e,t];var n=Ct(e.dtype,t.dtype);return[e.cast(n),t.cast(n)]}function wE(e,t){U(e.dtype===t.dtype,function(){return"The dtypes of the first("+e.dtype+") and second("+t.dtype+") input must match"})}function hy(e){var t=[];return function n(r,A,o){if(r!=null){if(r instanceof Ke)return void A.push(r);if(i=r,!(!Array.isArray(i)&&typeof i!="object")){var i,a=r;for(var s in a){var u=a[s];o.has(u)||(o.add(u),n(u,A,o))}}}}(e,t,new Set),t}var Wc,Vv=function(){function e(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null}}return e.prototype.dispose=function(){for(var t in this.registeredVariables)this.registeredVariables[t].dispose()},e}(),BE=function(){function e(t){this.ENV=t,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new Vv}return e.prototype.ready=function(){return ee(this,void 0,void 0,function(){var t,n,r;return te(this,function(A){switch(A.label){case 0:if(this.pendingBackendInit!=null)return[2,this.pendingBackendInit.then(function(){})];if(this.backendInstance!=null)return[2];t=this.getSortedBackends(),n=0,A.label=1;case 1:return n<t.length?(r=t[n],[4,this.initializeBackend(r).success]):[3,5];case 2:return A.sent()?[4,this.setBackend(r)]:[3,4];case 3:return A.sent(),[2];case 4:return n++,[3,1];case 5:throw new Error("Could not initialize any backends, all backend initializations failed.")}})})},Object.defineProperty(e.prototype,"backend",{get:function(){if(this.pendingBackendInit!=null)throw new Error("Backend '"+this.backendName+"' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");if(this.backendInstance==null){var t=this.initializeBackendsAndReturnBest(),n=t.name;if(t.asyncInit)throw new Error("The highest priority backend '"+n+"' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");this.setBackend(n)}return this.backendInstance},enumerable:!0,configurable:!0}),e.prototype.backendNames=function(){return Object.keys(this.registryFactory)},e.prototype.findBackend=function(t){return!(t in this.registry)&&(!(t in this.registryFactory)||this.initializeBackend(t).asyncInit)?null:this.registry[t]},e.prototype.findBackendFactory=function(t){return t in this.registryFactory?this.registryFactory[t].factory:null},e.prototype.registerBackend=function(t,n,r){return r===void 0&&(r=1),t in this.registryFactory?(console.warn(t+" backend was already registered. Reusing existing backend factory."),!1):(this.registryFactory[t]={factory:n,priority:r},!0)},e.prototype.setBackend=function(t){return ee(this,void 0,void 0,function(){var n,r,A;return te(this,function(o){switch(o.label){case 0:if(this.registryFactory[t]==null)throw new Error("Backend name '"+t+"' not found in registry");return this.backendName=t,this.registry[t]!=null?[3,4]:(this.backendInstance=null,n=this.initializeBackend(t),r=n.success,n.asyncInit?[4,r]:[3,2]);case 1:return A=o.sent(),[3,3];case 2:A=r,o.label=3;case 3:if(!A)return[2,!1];o.label=4;case 4:return this.backendInstance=this.registry[t],this.setupRegisteredKernels(),this.profiler=new pE(this.backendInstance),[2,!0]}})})},e.prototype.setupRegisteredKernels=function(){var t=this;Nv(this.backendName).forEach(function(n){n.setupFunc!=null&&n.setupFunc(t.backendInstance)})},e.prototype.disposeRegisteredKernels=function(t){var n=this;Nv(t).forEach(function(r){r.disposeFunc!=null&&r.disposeFunc(n.registry[t])})},e.prototype.initializeBackend=function(t){var n=this,r=this.registryFactory[t];if(r==null)throw new Error("Cannot initialize backend "+t+", no registration found.");try{var A=r.factory();if(Promise.resolve(A)===A){var o=++this.pendingBackendInitId,i=A.then(function(a){return!(o<n.pendingBackendInitId)&&(n.registry[t]=a,n.pendingBackendInit=null,!0)}).catch(function(a){return!(o<n.pendingBackendInitId)&&(n.pendingBackendInit=null,console.warn("Initialization of backend "+t+" failed"),console.warn(a.stack||a.message),!1)});return this.pendingBackendInit=i,{success:i,asyncInit:!0}}return this.registry[t]=A,{success:!0,asyncInit:!1}}catch(a){return console.warn("Initialization of backend "+t+" failed"),console.warn(a.stack||a.message),{success:!1,asyncInit:!1}}},e.prototype.removeBackend=function(t){if(!(t in this.registryFactory))throw new Error(t+" backend not found in registry");this.backendName===t&&this.pendingBackendInit!=null&&this.pendingBackendInitId++,t in this.registry&&(this.disposeRegisteredKernels(t),this.registry[t].dispose(),delete this.registry[t]),delete this.registryFactory[t],this.backendName===t&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)},e.prototype.getSortedBackends=function(){var t=this;if(Object.keys(this.registryFactory).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort(function(n,r){return t.registryFactory[r].priority-t.registryFactory[n].priority})},e.prototype.initializeBackendsAndReturnBest=function(){for(var t=this.getSortedBackends(),n=0;n<t.length;n++){var r=t[n],A=this.initializeBackend(r),o=A.success,i=A.asyncInit;if(i||o)return{name:r,asyncInit:i}}throw new Error("Could not initialize any backends, all backend initializations failed.")},e.prototype.moveData=function(t,n){var r=this.state.tensorInfo.get(n),A=r.backend,o=this.readSync(n);A.disposeData(n),r.backend=t,t.move(n,o,r.shape,r.dtype),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++},e.prototype.tidy=function(t,n){var r,A=this,o=null;if(n==null){if(typeof t!="function")throw new Error("Please provide a function to tidy()");n=t}else{if(typeof t!="string"&&!(t instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof n!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");o=t}return this.scopedRun(function(){return A.startScope(o)},function(){return A.endScope(r)},function(){return(r=n())instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),r})},e.prototype.scopedRun=function(t,n,r){t();try{var A=r();return n(),A}catch(o){throw n(),o}},e.prototype.nextTensorId=function(){return e.nextTensorId++},e.prototype.nextVariableId=function(){return e.nextVariableId++},e.prototype.clone=function(t){var n=this.makeTensorFromDataId(t.dataId,t.shape,t.dtype),r={x:t};return this.addTapeNode(this.state.activeScope.name,r,[n],function(A){return{x:function(){return A.toFloat()}}},[]),n},e.prototype.runKernel=function(t,n,r,A,o){return this.runKernelFunc(null,n,null,t,r,A,o)},e.prototype.shouldCheckForMemLeaks=function(){return this.ENV.getBool("IS_TEST")},e.prototype.checkKernelForMemLeak=function(t,n,r){var A=this.backend.numDataIds(),o=0;r.forEach(function(s){o+=s.dtype==="complex64"?3:1});var i=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],a=A-n-o-i;if(a>0)throw new Error("Backend '"+this.backendName+"' has an internal memory leak ("+a+" data ids) after running '"+t+"'")},e.prototype.runKernelFunc=function(t,n,r,A,o,i,a){var s,u=this;i===void 0&&(i=[]),a===void 0&&(a=[]);var l=[],c=this.isTapeOn();A==null&&(A=this.state.activeScope!=null?this.state.activeScope.name:"");var f,h=function(v){c&&(l=v.map(function(w){return u.keep(u.clone(w))}))},d=this.state.numBytes,g=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);var m,p=ry(A,this.backendName);return f=p!=null?function(){var v=u.backend.numDataIds();m=p.kernelFunc({inputs:n,attrs:o,backend:u.backend});var w=Array.isArray(m)?m:[m];u.shouldCheckForMemLeaks()&&u.checkKernelForMemLeak(A,v,w);var B=w.map(function(C){var b=C.dataId,x=C.shape,F=C.dtype;return u.makeTensorFromDataId(b,x,F)}),y=B.filter(function(C,b){return a[b]});return h((i||[]).slice().concat(y)),B}:function(){var v=u.backend.numDataIds();m=u.tidy(function(){return t(u.backend,h)});var w=Array.isArray(m)?m:[m];return u.shouldCheckForMemLeaks()&&u.checkKernelForMemLeak(A,v,w),w},this.scopedRun(function(){return u.state.kernelDepth++},function(){return u.state.kernelDepth--},function(){s=u.ENV.getBool("DEBUG")?u.profiler.profileKernel(A,n,function(){return f()}):f()}),c&&this.addTapeNode(A,n,s,r,l),this.state.profiling&&this.state.activeProfile.kernels.push({name:A,bytesAdded:this.state.numBytes-d,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-g,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(n).map(function(v){return n[v].shape}),outputShapes:s.map(function(v){return v.shape})}),Array.isArray(m)?s:s[0]},e.prototype.makeTensor=function(t,n,r,A){if(t==null)throw new Error("Values passed to engine.makeTensor() are null");r=r||"float32",A=A||this.backend;var o=t;r==="string"&&mp(t[0])&&(o=t.map(function(l){return hE(l)}));var i=A.write(o,n,r),a=new Ke(n,r,i,this.nextTensorId());if(this.incRef(a,A),r==="string"){var s=this.state.tensorInfo.get(i),u=lE(o);this.state.numBytes+=u-s.bytes,s.bytes=u}return a},e.prototype.makeTensorFromDataId=function(t,n,r,A){var o=new Ke(n,r=r||"float32",t,this.nextTensorId());return this.incRef(o,A),o},e.prototype.makeVariable=function(t,n,r,A){n===void 0&&(n=!0),r=r||this.nextVariableId().toString(),A!=null&&A!==t.dtype&&(t=t.asType(A));var o=new hi(t,n,r,this.nextTensorId());if(this.state.registeredVariables[o.name]!=null)throw new Error("Variable with name "+o.name+" was already registered");return this.state.registeredVariables[o.name]=o,this.incRef(o,this.backend),o},e.prototype.incRef=function(t,n){var r=this.state.tensorInfo.has(t.dataId)?this.state.tensorInfo.get(t.dataId).refCount:0;if(this.state.numTensors++,t.dtype==="string"&&this.state.numStringTensors++,r===0){this.state.numDataBuffers++;var A=0;t.dtype!=="complex64"&&t.dtype!=="string"&&(A=t.size*ay(t.dtype)),this.state.tensorInfo.set(t.dataId,{backend:n||this.backend,dtype:t.dtype,shape:t.shape,bytes:A,refCount:0}),this.state.numBytes+=A}this.state.tensorInfo.get(t.dataId).refCount++,t instanceof hi||this.track(t)},e.prototype.disposeTensor=function(t){if(this.state.tensorInfo.has(t.dataId)){this.state.numTensors--,t.dtype==="string"&&this.state.numStringTensors--;var n=this.state.tensorInfo.get(t.dataId);n.refCount<=1?(t.dtype!=="complex64"&&(this.state.numBytes-=n.bytes),this.state.numDataBuffers--,n.backend.disposeData(t.dataId),this.state.tensorInfo.delete(t.dataId)):this.state.tensorInfo.get(t.dataId).refCount--}},e.prototype.disposeVariables=function(){for(var t in this.state.registeredVariables){var n=this.state.registeredVariables[t];this.disposeVariable(n)}},e.prototype.disposeVariable=function(t){this.disposeTensor(t),this.state.registeredVariables[t.name]!=null&&delete this.state.registeredVariables[t.name]},e.prototype.memory=function(){var t=this.backend.memory();return t.numTensors=this.state.numTensors,t.numDataBuffers=this.state.numDataBuffers,t.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(t.unreliable=!0,t.reasons==null&&(t.reasons=[]),t.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),t},e.prototype.profile=function(t){return ee(this,void 0,void 0,function(){var n,r;return te(this,function(A){return this.state.profiling=!0,n=this.state.numBytes,r=this.state.numTensors,this.state.activeProfile.kernels=[],this.state.activeProfile.result=t(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max.apply(Math,this.state.activeProfile.kernels.map(function(o){return o.totalBytesSnapshot})),this.state.activeProfile.newBytes=this.state.numBytes-n,this.state.activeProfile.newTensors=this.state.numTensors-r,[2,this.state.activeProfile]})})},e.prototype.isTapeOn=function(){return this.state.gradientDepth>0&&this.state.kernelDepth===0},e.prototype.addTapeNode=function(t,n,r,A,o){var i=this,a={id:this.state.nextTapeNodeId++,kernelName:t,inputs:n,outputs:r,saved:o},s=nE(t);s!=null&&(A=s.gradFunc),A!=null&&(a.gradient=function(u){return u=u.map(function(l,c){if(l==null){var f=r[c],h=za(f.size,f.dtype);return i.makeTensor(h,f.shape,f.dtype)}return l}),A(u.length>1?u:u[0],o)}),this.state.activeTape.push(a)},e.prototype.keep=function(t){return t.kept=!0,t},e.prototype.startTape=function(){this.state.gradientDepth===0&&(this.state.activeTape=[]),this.state.gradientDepth++},e.prototype.endTape=function(){this.state.gradientDepth--},e.prototype.startScope=function(t){var n={track:[],name:"unnamed scope",id:this.state.nextScopeId++};t&&(n.name=t),this.state.scopeStack.push(n),this.state.activeScope=n},e.prototype.endScope=function(t){for(var n=this,r=hy(t),A=new Set(r.map(function(s){return s.id})),o=0;o<this.state.activeScope.track.length;o++){var i=this.state.activeScope.track[o];i.kept||A.has(i.id)||i.dispose()}var a=this.state.scopeStack.pop();this.state.activeScope=this.state.scopeStack.length===0?null:this.state.scopeStack[this.state.scopeStack.length-1],r.forEach(function(s){s.kept||s.scopeId!==a.id||n.track(s)})},e.prototype.gradients=function(t,n,r,A){var o=this;if(A===void 0&&(A=!1),U(n.length>0,function(){return"gradients() received an empty list of xs."}),r!=null&&r.dtype!=="float32")throw new Error("dy must have 'float32' dtype, but has '"+r.dtype+"'");var i=this.scopedRun(function(){return o.startTape()},function(){return o.endTape()},function(){return o.tidy("forward",t)});U(i instanceof Ke,function(){return"The result y returned by f() must be a tensor."});var a=function(s,u,l){for(var c={},f={},h=0;h<u.length;h++)c[u[h].id]=!0;for(h=0;h<s.length;h++){var d=(C=s[h]).inputs;for(var g in d){for(var m=d[g],p=!1,v=0;v<u.length;v++)if(c[m.id]){C.outputs.forEach(function(E){return c[E.id]=!0}),p=!0,f[C.id]=!0;break}if(p)break}}var w={};w[l.id]=!0;var B={};for(h=s.length-1;h>=0;h--)for(d=(C=s[h]).inputs,v=0;v<C.outputs.length;v++)if(w[C.outputs[v].id]){for(var g in d)w[d[g].id]=!0,B[C.id]=!0;break}var y=[];for(h=0;h<s.length;h++){var C;if(f[(C=s[h]).id]&&B[C.id]){var b={};for(var g in C.inputs){var x=C.inputs[g];c[x.id]&&(b[g]=x)}var F=Object.assign({},C);F.inputs=b,F.outputs=C.outputs,y.push(F)}}return y}(this.state.activeTape,n,i);if(!A&&a.length===0&&n.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",function(){var s,u,l={};l[i.id]=r??(s=i.shape,u=uy(ne(s),"float32"),k.makeTensor(u,s,"float32")),function(f,h,d){for(var g=function(p){var v=h[p],w=[];if(v.outputs.forEach(function(b){var x=f[b.id];x!=null?w.push(x):w.push(null)}),v.gradient==null)throw new Error("Cannot compute gradient: gradient function not found for "+v.kernelName+".");var B=v.gradient(w),y=function(b){if(!(b in B))throw new Error("Cannot backprop through input "+b+". Available gradients found: "+Object.keys(B)+".");var x=d(function(){return B[b]()});if(x.dtype!=="float32")throw new Error("Error in gradient for op "+v.kernelName+". The gradient of input "+b+" must have 'float32' dtype, but has '"+x.dtype+"'");var F=v.inputs[b];if(!vt(x.shape,F.shape))throw new Error("Error in gradient for op "+v.kernelName+". The gradient of input '"+b+"' has shape '"+x.shape+"', which does not match the shape of the input '"+F.shape+"'");if(f[F.id]==null)f[F.id]=x;else{var E=f[F.id];f[F.id]=E.add(x),E.dispose()}};for(var C in v.inputs)y(C)},m=h.length-1;m>=0;m--)g(m)}(l,a,function(f){return o.tidy(f)});var c=n.map(function(f){return l[f.id]});return o.state.gradientDepth===0&&(o.state.activeTape.forEach(function(f){for(var h=0,d=f.saved;h<d.length;h++)d[h].dispose()}),o.state.activeTape=null),{value:i,grads:c}})},e.prototype.customGrad=function(t){var n=this;return U(Th(t),function(){return"The f passed in customGrad(f) must be a function."}),function(){for(var r,A=[],o=0;o<arguments.length;o++)A[o]=arguments[o];U(A.every(function(a){return a instanceof Ke}),function(){return"The args passed in customGrad(f)(x1, x2,...) must all be tensors"});var i={};return A.forEach(function(a,s){i[s]=a}),n.runKernelFunc(function(a,s){return U((r=t.apply(void 0,A.concat([s]))).value instanceof Ke,function(){return"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"}),U(Th(r.gradFunc),function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."}),r.value},i,function(a,s){var u=r.gradFunc(a,s),l=Array.isArray(u)?u:[u];U(l.length===A.length,function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."}),U(l.every(function(f){return f instanceof Ke}),function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors."});var c={};return l.forEach(function(f,h){c[h]=function(){return f}}),c})}},e.prototype.readSync=function(t){return this.state.tensorInfo.get(t).backend.readSync(t)},e.prototype.read=function(t){return this.state.tensorInfo.get(t).backend.read(t)},e.prototype.time=function(t){return ee(this,void 0,void 0,function(){var n,r;return te(this,function(A){switch(A.label){case 0:return n=er(),[4,this.backend.time(t)];case 1:return(r=A.sent()).wallMs=er()-n,[2,r]}})})},e.prototype.track=function(t){return this.state.activeScope!=null&&(t.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(t)),t},Object.defineProperty(e.prototype,"registeredVariables",{get:function(){return this.state.registeredVariables},enumerable:!0,configurable:!0}),e.prototype.reset=function(){for(var t in this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new Vv,this.registry)this.disposeRegisteredKernels(t),this.registry[t].dispose(),delete this.registry[t];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null},e.nextTensorId=0,e.nextVariableId=0,e}(),k=function(){var e=function(){if(Wc==null){var n=void 0;if(typeof window<"u")n=window;else if(typeof global<"u")n=global;else if(typeof process<"u")n=process;else{if(typeof self>"u")throw new Error("Could not find a global object");n=self}Wc=n}return Wc}();if(e._tfengine==null){var t=new eE(e);e._tfengine=new BE(t)}return function(n){ny=n}(e._tfengine.ENV),nr=function(){return e._tfengine},e._tfengine}();function dy(){return typeof window<"u"&&window.document!=null||typeof WorkerGlobalScope<"u"}var Br=V();Br.registerFlag("DEBUG",function(){return!1},function(e){e&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")}),Br.registerFlag("IS_BROWSER",function(){return dy()}),Br.registerFlag("IS_NODE",function(){return typeof process<"u"&&process.versions!==void 0&&process.versions.node!==void 0}),Br.registerFlag("IS_CHROME",function(){return typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)}),Br.registerFlag("PROD",function(){return!1}),Br.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",function(){return Br.getBool("DEBUG")}),Br.registerFlag("DEPRECATION_WARNINGS_ENABLED",function(){return!0}),Br.registerFlag("IS_TEST",function(){return!1});var ka,ln,sn,TA={},Gc={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function yE(e,t){TA[e]=t}function cr(e){e in TA||(TA[e]=function(n){if(n!==1&&n!==2)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");var r=function(A){if(typeof OffscreenCanvas<"u"&&A===2)return new OffscreenCanvas(300,150);if(typeof document<"u")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}(n);return r.addEventListener("webglcontextlost",function(A){A.preventDefault(),delete TA[n]},!1),n===1?r.getContext("webgl",Gc)||r.getContext("experimental-webgl",Gc):r.getContext("webgl2",Gc)}(e));var t=TA[e];return t.isContextLost()?(delete TA[e],cr(e)):(t.disable(t.DEPTH_TEST),t.disable(t.STENCIL_TEST),t.disable(t.BLEND),t.disable(t.DITHER),t.disable(t.POLYGON_OFFSET_FILL),t.disable(t.SAMPLE_COVERAGE),t.enable(t.SCISSOR_TEST),t.enable(t.CULL_FACE),t.cullFace(t.BACK),TA[e])}function Ml(e,t){return[t,e]}function oa(e){var t=ne(e);return Rh(Math.ceil(t/4))}function Xa(e,t){return[Math.max(1,Math.ceil(t/2)),Math.max(1,Math.ceil(e/2))]}function wp(e,t){var n,r,A,o,i,a,s,u,l,c=e;return V().getNumber("WEBGL_VERSION")===2?(n=c.R32F,r=c.R16F,A=c.RGBA16F,o=c.RGBA32F,i=c.RED,a=4,s=1,u=c.HALF_FLOAT,l=c.FLOAT):(n=e.RGBA,r=e.RGBA,A=e.RGBA,o=c.RGBA,i=e.RGBA,a=4,s=4,u=t!=null?t.HALF_FLOAT_OES:null,l=e.FLOAT),{internalFormatFloat:n,internalFormatHalfFloat:r,internalFormatPackedHalfFloat:A,internalFormatPackedFloat:o,textureFormatFloat:i,downloadTextureFormat:e.RGBA,downloadUnpackNumChannels:a,defaultNumChannels:s,textureTypeHalfFloat:u,textureTypeFloat:l}}function re(e,t,n){var r=n();return t&&function(A){var o=A.getError();if(o!==A.NO_ERROR)throw new Error("WebGL Error: "+bE(A,o))}(e),r}(function(e){e[e.DENSE=0]="DENSE",e[e.SHARED_BATCH=1]="SHARED_BATCH"})(ka||(ka={})),function(e){e[e.RENDER=0]="RENDER",e[e.UPLOAD=1]="UPLOAD",e[e.PIXELS=2]="PIXELS",e[e.DOWNLOAD=3]="DOWNLOAD"}(ln||(ln={})),function(e){e[e.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",e[e.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",e[e.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",e[e.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",e[e.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"}(sn||(sn={}));var CE=596e-10,xE=65504;function FE(e){return!!(V().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||e===0||CE<Math.abs(e)&&Math.abs(e)<xE)}function bE(e,t){switch(t){case e.NO_ERROR:return"NO_ERROR";case e.INVALID_ENUM:return"INVALID_ENUM";case e.INVALID_VALUE:return"INVALID_VALUE";case e.INVALID_OPERATION:return"INVALID_OPERATION";case e.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case e.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case e.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return"Unknown error code "+t}}function Bs(e,t,n){return Nr(e,t,function(){return e.getExtension(n)},'Extension "'+n+'" not supported on this browser.')}function EE(e,t,n){var r=Nr(e,t,function(){return e.createShader(e.VERTEX_SHADER)},"Unable to create vertex WebGLShader.");if(re(e,t,function(){return e.shaderSource(r,n)}),re(e,t,function(){return e.compileShader(r)}),e.getShaderParameter(r,e.COMPILE_STATUS)===!1)throw console.log(e.getShaderInfoLog(r)),new Error("Failed to compile vertex shader.");return r}function QE(e,t,n){var r=Nr(e,t,function(){return e.createShader(e.FRAGMENT_SHADER)},"Unable to create fragment WebGLShader.");if(re(e,t,function(){return e.shaderSource(r,n)}),re(e,t,function(){return e.compileShader(r)}),e.getShaderParameter(r,e.COMPILE_STATUS)===!1)throw function(A,o){var i=UE.exec(o);if(i==null)return console.log("Couldn't parse line number in error: "+o),void console.log(A);for(var a=+i[1],s=A.split(`
`),u=s.length.toString().length+2,l=s.map(function(m,p){return Yo((p+1).toString(),u)+m}),c=0,f=0;f<l.length;f++)c=Math.max(l[f].length,c);var h=l.slice(0,a-1),d=l.slice(a-1,a),g=l.slice(a);console.log(h.join(`
`)),console.log(o.split(`
`)[0]),console.log("%c "+Yo(d[0],c),"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(g.join(`
`))}(n,e.getShaderInfoLog(r)),new Error("Failed to compile fragment shader.");return r}var zc,Xc,UE=/ERROR: [0-9]+:([0-9]+):/g;function IE(e,t){return Nr(e,t,function(){return e.createProgram()},"Unable to create WebGLProgram.")}function SE(e,t,n){if(re(e,t,function(){return e.linkProgram(n)}),e.getProgramParameter(n,e.LINK_STATUS)===!1)throw console.log(e.getProgramInfoLog(n)),new Error("Failed to link vertex and fragment shaders.")}function $c(e,t,n){if(re(e,t,function(){return e.validateProgram(n)}),e.getProgramParameter(n,e.VALIDATE_STATUS)===!1)throw console.log(e.getProgramInfoLog(n)),new Error("Shader program validation failed.")}function _E(e,t,n){var r=Nr(e,t,function(){return e.createBuffer()},"Unable to create WebGLBuffer");return re(e,t,function(){return e.bindBuffer(e.ARRAY_BUFFER,r)}),re(e,t,function(){return e.bufferData(e.ARRAY_BUFFER,n,e.STATIC_DRAW)}),r}function kE(e,t,n){var r=Nr(e,t,function(){return e.createBuffer()},"Unable to create WebGLBuffer");return re(e,t,function(){return e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,r)}),re(e,t,function(){return e.bufferData(e.ELEMENT_ARRAY_BUFFER,n,e.STATIC_DRAW)}),r}function DE(e,t){return Nr(e,t,function(){return e.createTexture()},"Unable to create WebGLTexture.")}function RE(e,t){var n=V().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(e<=0||t<=0){var r="["+e+"x"+t+"]";throw new Error("Requested texture size "+r+" is invalid.")}if(e>n||t>n)throw r="["+e+"x"+t+"]",new Error("Requested texture size "+r+" greater than WebGL maximum on this browser / GPU "+("["+n+"x"+n+"]")+".")}function TE(e,t){return Nr(e,t,function(){return e.createFramebuffer()},"Unable to create WebGLFramebuffer.")}function Wv(e,t,n,r,A,o,i,a){var s=e.getAttribLocation(n,r);return s!==-1&&(re(e,t,function(){return e.bindBuffer(e.ARRAY_BUFFER,A)}),re(e,t,function(){return e.vertexAttribPointer(s,o,e.FLOAT,!1,i,a)}),re(e,t,function(){return e.enableVertexAttribArray(s)}),!0)}function HE(e,t,n,r){PE(e,r),re(e,t,function(){return e.activeTexture(e.TEXTURE0+r)}),re(e,t,function(){return e.bindTexture(e.TEXTURE_2D,n)})}function NE(e,t,n,r){return Nr(e,t,function(){return e.getUniformLocation(n,r)},'uniform "'+r+'" not present in program.')}function LE(e,t,n){return e.getUniformLocation(t,n)}function ME(e,t,n,r,A,o){re(e,t,function(){return HE(e,t,r,o)}),re(e,t,function(){return e.uniform1i(A,o)})}function jc(e,t,n,r){re(e,t,function(){return e.bindFramebuffer(e.FRAMEBUFFER,r)}),re(e,t,function(){return e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0)})}function Gv(e,t,n){re(e,t,function(){return e.bindFramebuffer(e.FRAMEBUFFER,n)}),re(e,t,function(){return e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,null,0)})}function ys(e){var t=e.checkFramebufferStatus(e.FRAMEBUFFER);if(t!==e.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+OE(e,t))}function OE(e,t){switch(t){case e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case e.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return"unknown error "+t}}function Nr(e,t,n,r){var A=re(e,t,function(){return n()});if(A==null)throw new Error(r);return A}function PE(e,t){var n=e.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=t+e.TEXTURE0;if(r<e.TEXTURE0||r>n)throw new Error("textureUnit must be in "+("[gl.TEXTURE0, gl.TEXTURE"+n+"]")+".")}function Xu(e,t){return t===void 0&&(t=2),ne(e.slice(0,e.length-t))}function $u(e){if(e.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[e.length>1?e[e.length-2]:1,e[e.length-1]]}function Yc(e){var t=[1,1,1];return e.length===0||e.length===1&&e[0]===1||(t=[Xu(e)].concat($u(e))),t}function KE(e,t){var n;t===void 0&&(t=!1);var r=V().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(t&&(r*=2,(e=e.map(function(u,l){return l>=e.length-2?iy(e[l]):e[l]})).length===1&&(e=[2,e[0]])),e.length!==2){var A=NA(e);e=A.newShape}var o=ne(e);if(e.length<=1&&o<=r)return[1,o];if(e.length===2&&e[0]<=r&&e[1]<=r)return e;if(e.length===3&&e[0]*e[1]<=r&&e[2]<=r)return[e[0]*e[1],e[2]];if(e.length===3&&e[0]<=r&&e[1]*e[2]<=r)return[e[0],e[1]*e[2]];if(e.length===4&&e[0]*e[1]*e[2]<=r&&e[3]<=r)return[e[0]*e[1]*e[2],e[3]];if(e.length===4&&e[0]<=r&&e[1]*e[2]*e[3]<=r)return[e[0],e[1]*e[2]*e[3]];if(t){var i=Xu(e),a=2,s=2;return e.length&&(a=(n=$u(e))[0],s=n[1]),Rh(o=i*(a/2)*(s/2)).map(function(u){return 2*u})}return Rh(o)}function Cs(e){return e%2==0}function xs(e,t){if(vt(e=e.slice(-2),t=t.slice(-2))||!e.length||!t.length||e[0]===0||e[1]===0||t[0]===0||t[1]===0)return!0;if(e.length!==t.length){var n=e.slice(-1)[0],r=t.slice(-1)[0];if(n===r||Cs(n)&&Cs(r)&&(e[0]===1||t[0]===1))return!0}return e[1]===t[1]&&Cs(e[0])&&Cs(t[0])}function VE(e){if(zc==null){var t=cr(e);zc=t.getParameter(t.MAX_TEXTURE_SIZE)}return zc}function WE(e){if(Xc==null){var t=cr(e);Xc=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,Xc)}function GE(e){if(e===0)return 0;var t=cr(e);return bn(t,"EXT_disjoint_timer_query_webgl2")&&e===2?2:bn(t,"EXT_disjoint_timer_query")?1:0}function bn(e,t){return e.getExtension(t)!=null}function zv(e){try{if(cr(e)!=null)return!0}catch{return!1}return!1}function zE(e){if(e===0)return!1;var t=cr(e);if(e===1){if(!bn(t,"OES_texture_float"))return!1}else if(!bn(t,"EXT_color_buffer_float"))return!1;return Ph(t)}function XE(e){if(e===0)return!1;var t=cr(e);if(e!==1){if(bn(t,"EXT_color_buffer_float"))return Ph(t);if(bn(t,"EXT_color_buffer_half_float")){var n=t.getExtension("EXT_color_buffer_half_float");return function(r,A){var o=wp(r,A),i=r.createTexture();r.bindTexture(r.TEXTURE_2D,i),r.texImage2D(r.TEXTURE_2D,0,o.internalFormatHalfFloat,1,1,0,o.textureFormatFloat,o.textureTypeHalfFloat,null);var a=r.createFramebuffer();r.bindFramebuffer(r.FRAMEBUFFER,a),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,i,0);var s=r.checkFramebufferStatus(r.FRAMEBUFFER)===r.FRAMEBUFFER_COMPLETE;return r.bindTexture(r.TEXTURE_2D,null),r.bindFramebuffer(r.FRAMEBUFFER,null),r.deleteTexture(i),r.deleteFramebuffer(a),s}(t,n)}return!1}return!!bn(t,"OES_texture_float")&&!!bn(t,"WEBGL_color_buffer_float")&&Ph(t)}function Ph(e){var t=wp(e),n=e.createTexture();e.bindTexture(e.TEXTURE_2D,n),e.texImage2D(e.TEXTURE_2D,0,t.internalFormatFloat,1,1,0,t.textureFormatFloat,t.textureTypeFloat,null);var r=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,r),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0);var A=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(n),e.deleteFramebuffer(r),A}function $E(e){return e===2&&cr(e).fenceSync!=null}var ue=V();function py(e){V().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(e+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}function J(e,t){return k.tidy(e,t)}function en(e){hy(e).forEach(function(t){return t.dispose()})}function jE(e){return k.keep(e)}function ju(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];V().getBool("IS_TEST")||console.warn.apply(console,e)}function UA(e,t){var n=e;if(ar(e))return t==="string"?[]:[e.length];if(!Array.isArray(e))return[];for(var r=[];Array.isArray(n)||ar(n)&&t!=="string";)r.push(n.length),n=n[0];return Array.isArray(e)&&V().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&function A(o,i,a){if(a=a||[],!Array.isArray(o)&&!ar(o))return void U(i.length===0,function(){return"Element arr["+a.join("][")+"] is a primitive, but should be an array/TypedArray of "+i[0]+" elements"});U(i.length>0,function(){return"Element arr["+a.join("][")+"] should be a primitive, but is an array of "+o.length+" elements"}),U(o.length===i[0],function(){return"Element arr["+a.join("][")+"] should have "+i[0]+" elements, but has "+o.length+" elements"});for(var s=i.slice(1),u=0;u<o.length;++u)A(o[u],s,a.concat(u))}(e,r,[]),r}function Xv(e,t,n,r){if(e!=null&&(e!=="numeric"&&e!==t||e==="numeric"&&t==="string"))throw new Error("Argument '"+n+"' passed to '"+r+"' must be "+e+" tensor, but got "+t+" tensor")}function Q(e,t,n,r){if(r===void 0&&(r="numeric"),e instanceof Ke)return Xv(r,e.dtype,t,n),e;var A=Ga(e);if(A!=="string"&&["bool","int32","float32"].indexOf(r)>=0&&(A=r),Xv(r,A,t,n),e==null||!ar(e)&&!Array.isArray(e)&&typeof e!="number"&&typeof e!="boolean"&&typeof e!="string"){var o=e==null?"null":e.constructor.name;throw new Error("Argument '"+t+"' passed to '"+n+"' must be a Tensor or TensorLike, but got '"+o+"'")}var i=UA(e,A);ar(e)||Array.isArray(e)||(e=[e]);var a=A!=="string"?sy(e,A,V().getBool("DEBUG")):fi(e,[],!0);return k.makeTensor(a,i,A)}function Yu(e,t,n,r){if(r===void 0&&(r="numeric"),!Array.isArray(e))throw new Error("Argument "+t+" passed to "+n+" must be a `Tensor[]` or `TensorLike[]`");return e.map(function(A,o){return Q(A,t+"["+o+"]",n)},r)}function gy(e,t){for(var n=0;n<e.length;++n)if(e[e.length-n-1]!==t-1-n)return!1;return!0}function YE(e,t,n){for(var r=e.length+t.length,A=[],o=0,i=0,a=0;a<r;a++)n.indexOf(a)===-1?A.push(e[o++]):A.push(t[i++]);return A}function St(e,t){for(var n=[],r=e.length,A=0;A<r;A++)t.indexOf(A)===-1&&n.push(e[A]);return[n,t.map(function(o){return e[o]})]}function tn(e,t){return YE(e,t.map(function(n){return 1}),t)}function an(e,t,n){U(gy(t,n),function(){return e+" supports only inner-most axes for now. Got axes "+t+" and rank-"+n+" input."})}function fr(e,t){if(gy(e,t))return null;for(var n=[],r=0;r<t;++r)e.indexOf(r)===-1&&n.push(r);return e.forEach(function(A){return n.push(A)}),n}function Bp(e){return e.map(function(t,n){return[n,t]}).sort(function(t,n){return t[1]-n[1]}).map(function(t){return t[0]})}function hr(e,t){for(var n=[],r=t-e;r<t;++r)n.push(r);return n}function qE(e,t){var n=e[0].length;e.forEach(function(A,o){U(A.length===n,function(){return"Error in concat"+n+"D: rank of tensors["+o+"] must be the same as the rank of the rest ("+n+")"})}),U(t>=0&&t<n,function(){return"Error in concat"+n+"D: axis must be between 0 and "+(n-1)+"."});var r=e[0];e.forEach(function(A,o){for(var i=0;i<n;i++)U(i===t||A[i]===r[i],function(){return"Error in concat"+n+"D: Shape of tensors["+o+"] ("+A+") does not match the shape of the rest ("+r+") along the non-concatenated axis "+o+"."})})}function di(e,t){for(var n=e[0].slice(),r=1;r<e.length;r++)n[t]+=e[r][t];return n}function _(e){var t=Object.keys(e);if(t.length!==1)throw new Error("Please provide an object with a single key (operation name) mapping to a function. Got an object with "+t.length+" keys.");var n=t[0],r=e[n];n.endsWith("_")&&(n=n.substring(0,n.length-1));var A=function(){for(var o=[],i=0;i<arguments.length;i++)o[i]=arguments[i];k.startScope(n);try{var a=r.apply(void 0,o);return a instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),k.endScope(a),a}catch(s){throw k.endScope(null),s}};return Object.defineProperty(A,"name",{value:n,configurable:!0}),A}ue.registerFlag("HAS_WEBGL",function(){return ue.getNumber("WEBGL_VERSION")>0}),ue.registerFlag("WEBGL_VERSION",function(){return zv(2)?2:zv(1)?1:0}),ue.registerFlag("WEBGL_BUFFER_SUPPORTED",function(){return ue.get("WEBGL_VERSION")===2}),ue.registerFlag("WEBGL_CPU_FORWARD",function(){return!0}),ue.registerFlag("WEBGL_FORCE_F16_TEXTURES",function(){return!1}),ue.registerFlag("WEBGL_PACK",function(){return ue.getBool("HAS_WEBGL")}),ue.registerFlag("WEBGL_PACK_NORMALIZATION",function(){return ue.getBool("WEBGL_PACK")}),ue.registerFlag("WEBGL_PACK_CLIP",function(){return ue.getBool("WEBGL_PACK")}),ue.registerFlag("WEBGL_PACK_DEPTHWISECONV",function(){return!1}),ue.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",function(){return ue.getBool("WEBGL_PACK")}),ue.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",function(){return ue.getBool("WEBGL_PACK")}),ue.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",function(){return ue.getBool("WEBGL_PACK")}),ue.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",function(){return ue.getBool("WEBGL_PACK")}),ue.registerFlag("WEBGL_PACK_REDUCE",function(){return ue.getBool("WEBGL_PACK")}),ue.registerFlag("WEBGL_LAZILY_UNPACK",function(){return ue.getBool("WEBGL_PACK")}),ue.registerFlag("WEBGL_CONV_IM2COL",function(){return ue.getBool("WEBGL_PACK")}),ue.registerFlag("WEBGL_MAX_TEXTURE_SIZE",function(){return VE(ue.getNumber("WEBGL_VERSION"))}),ue.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",function(){return WE(ue.getNumber("WEBGL_VERSION"))}),ue.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",function(){var e=ue.getNumber("WEBGL_VERSION");return e===0?0:GE(e)}),ue.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",function(){return ue.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&(e=navigator.userAgent||navigator.vendor||window.opera,!(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))));var e}),ue.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",function(){return zE(ue.getNumber("WEBGL_VERSION"))}),ue.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",function(){return!ue.getBool("WEBGL_FORCE_F16_TEXTURES")&&ue.getBool("WEBGL_RENDER_FLOAT32_CAPABLE")}),ue.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",function(){return XE(ue.getNumber("WEBGL_VERSION"))}),ue.registerFlag("WEBGL_FENCE_API_ENABLED",function(){return $E(ue.getNumber("WEBGL_VERSION"))}),ue.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",function(){return ue.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0}),fy=py;var Bt=_({complex_:function(e,t){var n=Q(e,"real","complex"),r=Q(t,"imag","complex");return Qe(n.shape,r.shape,"real and imag shapes, "+n.shape+" and "+r.shape+", must match in call to tf.complex()."),k.runKernelFunc(function(A){return A.complex(n,r)},{$real:n,$imag:r})}}),xn=_({real_:function(e){var t=Q(e,"input","real");return k.runKernelFunc(function(n){return n.real(t)},{$input:t})}}),rr=_({imag_:function(e){var t=Q(e,"input","imag");return k.runKernelFunc(function(n){return n.imag(t)},{$input:t})}});function xt(e,t,n){return IA(e,t,UA(e,n),n)}function IA(e,t,n,r){if(r==null&&(r=Ga(e)),r==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(!ar(e)&&!Array.isArray(e)&&typeof e!="number"&&typeof e!="boolean"&&typeof e!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(t!=null){ly(t);var A=ne(t),o=ne(n);U(A===o,function(){return"Based on the provided shape, ["+t+"], the tensor should have "+A+" values but has "+o});for(var i=0;i<n.length;++i){var a=n[i],s=i!==n.length-1||a!==ne(t.slice(i));U(n[i]===t[i]||!s,function(){return"Error creating a new Tensor. Inferred shape ("+n+") does not match the provided shape ("+t+"). "})}}return ar(e)||Array.isArray(e)||(e=[e]),t=t||n,e=r!=="string"?sy(e,r,V().getBool("DEBUG")):fi(e,[],!0),k.makeTensor(e,t,r)}function $(e,t){if((ar(e)&&t!=="string"||Array.isArray(e))&&t!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if(t==="string"&&ar(e)&&!(e instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return IA(e,[],[],t)}function rt(e,t){Bi(e);var n=UA(e,t);if(n.length!==1)throw new Error("tensor1d() requires values to be a flat/TypedArray");return IA(e,null,n,t)}function pA(e,t,n){if(Bi(e),t!=null&&t.length!==2)throw new Error("tensor2d() requires shape to have two numbers");var r=UA(e,n);if(r.length!==2&&r.length!==1)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(r.length===1&&t==null)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return IA(e,t,r,n)}function yp(e,t,n){if(Bi(e),t!=null&&t.length!==3)throw new Error("tensor3d() requires shape to have three numbers");var r=UA(e,n);if(r.length!==3&&r.length!==1)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(r.length===1&&t==null)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return IA(e,t,r,n)}function $t(e,t,n){if(Bi(e),t!=null&&t.length!==4)throw new Error("tensor4d() requires shape to have four numbers");var r=UA(e,n);if(r.length!==4&&r.length!==1)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(r.length===1&&t==null)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return IA(e,t,r,n)}function JE(e,t,n){if(Bi(e),t!=null&&t.length!==5)throw new Error("tensor5d() requires shape to have five numbers");var r=UA(e,n);if(r.length!==5&&r.length!==1)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(r.length===1&&t==null)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return IA(e,t,r,n)}function ZE(e,t,n){if(Bi(e),t!=null&&t.length!==6)throw new Error("tensor6d() requires shape to have six numbers");var r=UA(e,n);if(r.length!==6&&r.length!==1)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(r.length===1&&t==null)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return IA(e,t=t||r,r,n)}function e2(e,t,n,r){return t===void 0&&(t=!0),k.makeVariable(e,t,n,r)}function yi(e,t){if(t===void 0&&(t="float32"),t==="complex64"){var n=yi(e,"float32"),r=Te(e,"float32");return Bt(n,r)}var A=uy(ne(e),t);return k.makeTensor(A,e,t)}function Te(e,t){if(t===void 0&&(t="float32"),t==="complex64"){var n=Te(e,"float32"),r=Te(e,"float32");return Bt(n,r)}var A=za(ne(e),t);return k.makeTensor(A,e,t)}function ur(e,t,n){return k.runKernelFunc(function(r){return r.fill(e,t,n)},{})}function t2(e,t,n){if(n<=0)throw new Error("The number of values should be positive.");return k.runKernelFunc(function(r){return r.linspace(e,t,n)},{})}function qu(e,t,n,r){if(n===void 0&&(n=1),r===void 0&&(r="float32"),n===0)throw new Error("Cannot have a step of zero");if(e===t||e<t&&n<0||t<e&&n>1)return Te([0],r);var A=za(Math.abs(Math.ceil((t-e)/n)),r);t<e&&n===1&&(n=-1),A[0]=e;for(var o=1;o<A.length;o++)A[o]=A[o-1]+n;return rt(A,r)}var vy=_({onesLike_:function(e){var t=Q(e,"x","onesLike");if(t.dtype==="complex64"){var n=vy(xn(t)),r=ye(rr(t));return Bt(n,r)}return k.runKernelFunc(function(A){return A.onesLike(t)},{$x:t},function(A,o){return{$x:function(){return ye(A)}}})}}),ye=_({zerosLike_:function(e){var t=Q(e,"x","zerosLike");return k.runKernelFunc(function(n){return n.zerosLike(t)},{$x:t},function(n,r){return{$x:function(){return ye(n)}}})}}),st=_({concat_:function(e,t){t===void 0&&(t=0),U(e.length>=1,function(){return"Pass at least one tensor to concat"});var n=Yu(e,"tensors","concat");n[0].dtype==="complex64"&&n.forEach(function(a){if(a.dtype!=="complex64")throw new Error(`Cannot concatenate complex64 tensors with a tensor
          with dtype `+a.dtype+". ")}),t=ft(t,n[0].shape)[0];var r=di(n.map(function(a){return a.shape}),t);if(ne(r)===0)return xt([],r);if((n=n.filter(function(a){return a.size>0})).length===1)return n[0];var A=n.map(function(a){return a.shape});qE(A,t);var o=n,i={axis:t};return k.runKernelFunc(function(a){return a.concat(n,t)},o,function(a){var s=A.map(function(u){return u[t]});return Cp(a,s,t).map(function(u){return function(){return u}})},"Concat",i)}}),n2=_({concat1d_:function(e){return st(e,0)}}),r2=_({concat2d_:function(e,t){return st(e,t)}}),A2=_({concat3d_:function(e,t){return st(e,t)}}),o2=_({concat4d_:function(e,t){return st(e,t)}}),Cp=_({split_:function(e,t,n){n===void 0&&(n=0);var r,A=Q(e,"x","split");return n=ft(n,A.shape)[0],typeof t=="number"?(U(A.shape[n]%t==0,function(){return"Number of splits must evenly divide the axis."}),r=new Array(t).fill(A.shape[n]/t)):(U(A.shape[n]===t.reduce(function(o,i){return o+i}),function(){return"The sum of sizes must match the size of the axis dimension."}),r=t),k.runKernelFunc(function(o){return o.split(A,r,n)},{$x:A},function(o){return{$x:function(){return st(o,n)}}})}});function oo(e,t){return e(t={exports:{}},t.exports),t.exports}var i2=oo(function(e){(function(t,n,r){function A(a){var s,u=this,l=(s=4022871197,function(c){c=c.toString();for(var f=0;f<c.length;f++){var h=.02519603282416938*(s+=c.charCodeAt(f));h-=s=h>>>0,s=(h*=s)>>>0,s+=4294967296*(h-=s)}return 23283064365386963e-26*(s>>>0)});u.next=function(){var c=2091639*u.s0+23283064365386963e-26*u.c;return u.s0=u.s1,u.s1=u.s2,u.s2=c-(u.c=0|c)},u.c=1,u.s0=l(" "),u.s1=l(" "),u.s2=l(" "),u.s0-=l(a),u.s0<0&&(u.s0+=1),u.s1-=l(a),u.s1<0&&(u.s1+=1),u.s2-=l(a),u.s2<0&&(u.s2+=1),l=null}function o(a,s){return s.c=a.c,s.s0=a.s0,s.s1=a.s1,s.s2=a.s2,s}function i(a,s){var u=new A(a),l=s&&s.state,c=u.next;return c.int32=function(){return 4294967296*u.next()|0},c.double=function(){return c()+11102230246251565e-32*(2097152*c()|0)},c.quick=c,l&&(typeof l=="object"&&o(l,u),c.state=function(){return o(u,{})}),c}n&&n.exports?n.exports=i:this.alea=i})(0,e)}),a2=oo(function(e){(function(t,n,r){function A(a){var s=this,u="";s.x=0,s.y=0,s.z=0,s.w=0,s.next=function(){var c=s.x^s.x<<11;return s.x=s.y,s.y=s.z,s.z=s.w,s.w^=s.w>>>19^c^c>>>8},a===(0|a)?s.x=a:u+=a;for(var l=0;l<u.length+64;l++)s.x^=0|u.charCodeAt(l),s.next()}function o(a,s){return s.x=a.x,s.y=a.y,s.z=a.z,s.w=a.w,s}function i(a,s){var u=new A(a),l=s&&s.state,c=function(){return(u.next()>>>0)/4294967296};return c.double=function(){do var f=((u.next()>>>11)+(u.next()>>>0)/4294967296)/2097152;while(f===0);return f},c.int32=u.next,c.quick=c,l&&(typeof l=="object"&&o(l,u),c.state=function(){return o(u,{})}),c}n&&n.exports?n.exports=i:this.xor128=i})(0,e)}),s2=oo(function(e){(function(t,n,r){function A(a){var s=this,u="";s.next=function(){var c=s.x^s.x>>>2;return s.x=s.y,s.y=s.z,s.z=s.w,s.w=s.v,(s.d=s.d+362437|0)+(s.v=s.v^s.v<<4^c^c<<1)|0},s.x=0,s.y=0,s.z=0,s.w=0,s.v=0,a===(0|a)?s.x=a:u+=a;for(var l=0;l<u.length+64;l++)s.x^=0|u.charCodeAt(l),l==u.length&&(s.d=s.x<<10^s.x>>>4),s.next()}function o(a,s){return s.x=a.x,s.y=a.y,s.z=a.z,s.w=a.w,s.v=a.v,s.d=a.d,s}function i(a,s){var u=new A(a),l=s&&s.state,c=function(){return(u.next()>>>0)/4294967296};return c.double=function(){do var f=((u.next()>>>11)+(u.next()>>>0)/4294967296)/2097152;while(f===0);return f},c.int32=u.next,c.quick=c,l&&(typeof l=="object"&&o(l,u),c.state=function(){return o(u,{})}),c}n&&n.exports?n.exports=i:this.xorwow=i})(0,e)}),u2=oo(function(e){(function(t,n,r){function A(a){var s=this;s.next=function(){var u,l,c=s.x,f=s.i;return u=c[f],l=(u^=u>>>7)^u<<24,l^=(u=c[f+1&7])^u>>>10,l^=(u=c[f+3&7])^u>>>3,l^=(u=c[f+4&7])^u<<7,u=c[f+7&7],l^=(u^=u<<13)^u<<9,c[f]=l,s.i=f+1&7,l},function(u,l){var c,f=[];if(l===(0|l))f[0]=l;else for(l=""+l,c=0;c<l.length;++c)f[7&c]=f[7&c]<<15^l.charCodeAt(c)+f[c+1&7]<<13;for(;f.length<8;)f.push(0);for(c=0;c<8&&f[c]===0;++c);for(c==8?f[7]=-1:f[c],u.x=f,u.i=0,c=256;c>0;--c)u.next()}(s,a)}function o(a,s){return s.x=a.x.slice(),s.i=a.i,s}function i(a,s){a==null&&(a=+new Date);var u=new A(a),l=s&&s.state,c=function(){return(u.next()>>>0)/4294967296};return c.double=function(){do var f=((u.next()>>>11)+(u.next()>>>0)/4294967296)/2097152;while(f===0);return f},c.int32=u.next,c.quick=c,l&&(l.x&&o(l,u),c.state=function(){return o(u,{})}),c}n&&n.exports?n.exports=i:this.xorshift7=i})(0,e)}),l2=oo(function(e){(function(t,n,r){function A(a){var s=this;s.next=function(){var u,l,c=s.w,f=s.X,h=s.i;return s.w=c=c+1640531527|0,l=f[h+34&127],u=f[h=h+1&127],l^=l<<13,u^=u<<17,l^=l>>>15,u^=u>>>12,l=f[h]=l^u,s.i=h,l+(c^c>>>16)|0},function(u,l){var c,f,h,d,g,m=[],p=128;for(l===(0|l)?(f=l,l=null):(l+="\0",f=0,p=Math.max(p,l.length)),h=0,d=-32;d<p;++d)l&&(f^=l.charCodeAt((d+32)%l.length)),d===0&&(g=f),f^=f<<10,f^=f>>>15,f^=f<<4,f^=f>>>13,d>=0&&(g=g+1640531527|0,h=(c=m[127&d]^=f+g)==0?h+1:0);for(h>=128&&(m[127&(l&&l.length||0)]=-1),h=127,d=512;d>0;--d)f=m[h+34&127],c=m[h=h+1&127],f^=f<<13,c^=c<<17,f^=f>>>15,c^=c>>>12,m[h]=f^c;u.w=g,u.X=m,u.i=h}(s,a)}function o(a,s){return s.i=a.i,s.w=a.w,s.X=a.X.slice(),s}function i(a,s){a==null&&(a=+new Date);var u=new A(a),l=s&&s.state,c=function(){return(u.next()>>>0)/4294967296};return c.double=function(){do var f=((u.next()>>>11)+(u.next()>>>0)/4294967296)/2097152;while(f===0);return f},c.int32=u.next,c.quick=c,l&&(l.X&&o(l,u),c.state=function(){return o(u,{})}),c}n&&n.exports?n.exports=i:this.xor4096=i})(0,e)}),c2=oo(function(e){(function(t,n,r){function A(a){var s=this,u="";s.next=function(){var c=s.b,f=s.c,h=s.d,d=s.a;return c=c<<25^c>>>7^f,f=f-h|0,h=h<<24^h>>>8^d,d=d-c|0,s.b=c=c<<20^c>>>12^f,s.c=f=f-h|0,s.d=h<<16^f>>>16^d,s.a=d-c|0},s.a=0,s.b=0,s.c=-1640531527,s.d=1367130551,a===Math.floor(a)?(s.a=a/4294967296|0,s.b=0|a):u+=a;for(var l=0;l<u.length+20;l++)s.b^=0|u.charCodeAt(l),s.next()}function o(a,s){return s.a=a.a,s.b=a.b,s.c=a.c,s.d=a.d,s}function i(a,s){var u=new A(a),l=s&&s.state,c=function(){return(u.next()>>>0)/4294967296};return c.double=function(){do var f=((u.next()>>>11)+(u.next()>>>0)/4294967296)/2097152;while(f===0);return f},c.int32=u.next,c.quick=c,l&&(typeof l=="object"&&o(l,u),c.state=function(){return o(u,{})}),c}n&&n.exports?n.exports=i:this.tychei=i})(0,e)}),HA=oo(function(e){(function(t,n){var r,A=this,o=256,i=6,a="random",s=n.pow(o,i),u=n.pow(2,52),l=2*u,c=o-1;function f(p,v,w){var B=[],y=g(function x(F,E){var I,S=[],T=typeof F;if(E&&T=="object")for(I in F)try{S.push(x(F[I],E-1))}catch{}return S.length?S:T=="string"?F:F+"\0"}((v=v==1?{entropy:!0}:v||{}).entropy?[p,m(t)]:p??function(){try{var x;return r&&(x=r.randomBytes)?x=x(o):(x=new Uint8Array(o),(A.crypto||A.msCrypto).getRandomValues(x)),m(x)}catch{var F=A.navigator,E=F&&F.plugins;return[+new Date,A,E,A.screen,m(t)]}}(),3),B),C=new h(B),b=function(){for(var x=C.g(i),F=s,E=0;x<u;)x=(x+E)*o,F*=o,E=C.g(1);for(;x>=l;)x/=2,F/=2,E>>>=1;return(x+E)/F};return b.int32=function(){return 0|C.g(4)},b.quick=function(){return C.g(4)/4294967296},b.double=b,g(m(C.S),t),(v.pass||w||function(x,F,E,I){return I&&(I.S&&d(I,C),x.state=function(){return d(C,{})}),E?(n[a]=x,F):x})(b,y,"global"in v?v.global:this==n,v.state)}function h(p){var v,w=p.length,B=this,y=0,C=B.i=B.j=0,b=B.S=[];for(w||(p=[w++]);y<o;)b[y]=y++;for(y=0;y<o;y++)b[y]=b[C=c&C+p[y%w]+(v=b[y])],b[C]=v;(B.g=function(x){for(var F,E=0,I=B.i,S=B.j,T=B.S;x--;)F=T[I=c&I+1],E=E*o+T[c&(T[I]=T[S=c&S+F])+(T[S]=F)];return B.i=I,B.j=S,E})(o)}function d(p,v){return v.i=p.i,v.j=p.j,v.S=p.S.slice(),v}function g(p,v){for(var w,B=p+"",y=0;y<B.length;)v[c&y]=c&(w^=19*v[c&y])+B.charCodeAt(y++);return m(v)}function m(p){return String.fromCharCode.apply(0,p)}if(n["seed"+a]=f,g(n.random(),t),e.exports){e.exports=f;try{r=require("crypto")}catch{}}})([],Math)});HA.alea=i2,HA.xor128=a2,HA.xorwow=s2,HA.xorshift7=u2,HA.xor4096=l2,HA.tychei=c2;var Ol=HA.alea,xp=function(){function e(t,n,r,A,o){this.mean=t,this.stdDev=n,this.dtype=r,this.nextVal=NaN,this.truncated=A,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);var i=o||Math.random();this.random=Ol(i.toString())}return e.prototype.nextValue=function(){if(!isNaN(this.nextVal)){var t=this.nextVal;return this.nextVal=NaN,t}for(var n,r,A=!1;!A;){var o=void 0,i=void 0,a=void 0;do a=(o=2*this.random()-1)*o+(i=2*this.random()-1)*i;while(a>=1||a===0);var s=Math.sqrt(-2*Math.log(a)/a);n=this.mean+this.stdDev*o*s,r=this.mean+this.stdDev*i*s,this.truncated&&!this.isValidTruncated(n)||(A=!0)}return this.truncated&&!this.isValidTruncated(r)||(this.nextVal=this.convertValue(r)),this.convertValue(n)},e.prototype.convertValue=function(t){return this.dtype==null||this.dtype==="float32"?t:Math.round(t)},e.prototype.isValidTruncated=function(t){return t<=this.upper&&t>=this.lower},e}(),f2=function(){function e(t,n,r,A){this.alpha=t,this.beta=1/n,this.dtype=r;var o=A||Math.random();this.randu=Ol(o.toString()),this.randn=new xp(0,1,r,!1,this.randu()),this.d=t<1?t+2/3:t-1/3,this.c=1/Math.sqrt(9*this.d)}return e.prototype.nextValue=function(){for(var t,n,r,A,o,i;;){do A=this.randn.nextValue(),i=1+this.c*A;while(i<=0);if(i*=i*i,n=1-.331*(t=A*A)*t,r=.5*t+this.d*(1-i+Math.log(i)),(o=this.randu())<n||Math.log(o)<r)break}return i=1/this.beta*this.d*i,this.alpha<1&&(i*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(i)},e.prototype.convertValue=function(t){return this.dtype==="float32"?t:Math.round(t)},e}(),h2=function(){function e(t,n,r,A){var o=this;if(t===void 0&&(t=0),n===void 0&&(n=1),this.canReturnFloat=function(){return o.dtype==null||o.dtype==="float32"},this.min=t,this.range=n-t,this.dtype=r,A==null&&(A=Math.random()),typeof A=="number"&&(A=A.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error("The difference between "+t+" - "+n+" <= 1 and dtype is not float");this.random=Ol(A)}return e.prototype.convertValue=function(t){return this.canReturnFloat()?t:Math.round(t)},e.prototype.nextValue=function(){return this.convertValue(this.min+this.range*this.random())},e}();function fe(e,t,n){return t===void 0&&(t="float32"),t=t||"float32",ly(e),new _a(e,t,n)}function d2(e,t){t===void 0&&(t=!1),console.log(e.toString(t))}var my=_({batchToSpaceND_:function(e,t,n){var r=Q(e,"x","batchToSpaceND"),A=t.reduce(function(o,i){return o*i});return U(r.rank>=1+t.length,function(){return"input rank is "+r.rank+" but should be > than blockShape.length "+t.length}),U(n.length===t.length,function(){return"crops.length is "+n.length+" but should be equal to blockShape.length  "+t.length}),U(r.shape[0]%A==0,function(){return"input tensor batch is "+r.shape[0]+" but is not divisible by the product of the elements of blockShape "+t.join(" * ")+" === "+A}),k.runKernelFunc(function(o){return o.batchToSpaceND(r,t,n)},{$x:r},function(o){return{$x:function(){return o.spaceToBatchND(t,n)}}})}}),p2=_({broadcastTo_:function(e,t){var n=Q(e,"broadcastTo","x"),r=n.shape;if(t.some(function(s){return!(s>0)||s%1!=0}))throw new Error("broadcastTo(): Invalid broadcast shape ["+t+"].");if(t.length<n.rank)throw new Error("broadcastTo(): shape.length="+t.length+" < input.rank="+n.rank+".");if(t.length>n.rank){for(var A=n.shape.slice();A.length<t.length;)A.unshift(1);n=n.reshape(A)}for(var o=Array.from(t),i=t.length-1;i>=0;i--)if(n.shape[i]===t[i])o[i]=1;else if(n.shape[i]!==1)throw new Error("broadcastTo(): ["+r+"] cannot be broadcast to ["+t+"].");var a=o.map(function(s,u){return s>1?u:-1}).filter(function(s){return s>=0});return a.length===0?n.clone():k.runKernelFunc(function(s){return s.tile(n,o)},{input:n},function(s){return{input:function(){return s.sum(a,!0)}}})}}),g2=_({cast_:function(e,t){var n=Q(e,"x","cast");if(!sE(t))throw new Error("Failed to cast to unknown dtype "+t);if(t==="string"&&n.dtype!=="string"||t!=="string"&&n.dtype==="string")throw new Error("Only strings can be casted to strings");var r={dtype:t};return k.runKernelFunc(function(A){return A.cast(n,t)},{x:n},function(A){return{x:function(){return A.clone()}}},"Cast",r)}}),v2=_({clone_:function(e){var t=Q(e,"x","clone",null);return k.runKernelFunc(function(){return k.makeTensorFromDataId(t.dataId,t.shape,t.dtype)},{$x:t},function(n){return{$x:function(){return n.toFloat()}}})}}),m2=_({cumsum_:function(e,t,n,r){t===void 0&&(t=0),n===void 0&&(n=!1),r===void 0&&(r=!1);var A=Q(e,"x","cumsum"),o=fr([t|=0],A.rank),i=A;o!=null&&(i=A.transpose(o));var a=hr(1,A.rank)[0],s=k.runKernelFunc(function(u){return u.cumsum(i,a,n,r)},{permutedX:i},function(u){return{permutedX:function(){return u.cumsum(t,n,!r)}}});return o!=null&&(s=s.transpose(o)),s}}),w2=_({depthToSpace_:function(e,t,n){n===void 0&&(n="NHWC");var r=Q(e,"x","depthToSpace"),A=n==="NHWC"?r.shape[1]:r.shape[2],o=n==="NHWC"?r.shape[2]:r.shape[3],i=n==="NHWC"?r.shape[3]:r.shape[1];return U(A*t>=0,function(){return`Negative dimension size caused by overflow when multiplying
      `+A+" and "+t+`  for depthToSpace with input shape
      `+r.shape}),U(o*t>=0,function(){return`Negative dimension size caused by overflow when multiplying
      `+o+" and "+t+` for depthToSpace with input shape
          `+r.shape}),U(i%(t*t)==0,function(){return"Dimension size must be evenly divisible by "+t*t+" but is "+i+" for depthToSpace with input shape "+r.shape}),k.runKernelFunc(function(a){return a.depthToSpace(r,t,n)},{$x:r})}}),yn=_({expandDims_:function(e,t){t===void 0&&(t=0);var n=Q(e,"x","expandDims",null);U(t<=n.rank,function(){return"Axis must be <= rank of the tensor"});var r=n.shape.slice();return t<0&&(U(-(n.rank+1)<=t,function(){return"Axis must be in the interval ["+-(n.rank+1)+", "+n.rank+"]"}),t=n.rank+t+1),r.splice(t,0,1),Ln(n,r)}}),wy=_({eye_:function(e,t,n,r){r===void 0&&(r="float32"),t==null&&(t=e);for(var A=fe([e,t],r),o=e<=t?e:t,i=0;i<o;++i)A.set(1,i,i);var a=A.toTensor().as2D(e,t);if(n==null)return a;if(n.length===1)return qo(yn(a,0),[n[0],1,1]);if(n.length===2)return qo(yn(yn(a,0),0),[n[0],n[1],1,1]);if(n.length===3)return qo(yn(yn(yn(a,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error("eye() currently supports only 1D and 2D batchShapes, but received "+n.length+"D.")}}),B2=_({multinomial_:function(e,t,n,r){r===void 0&&(r=!1);var A=Q(e,"logits","multinomial"),o=A.size,i=A.rank;if(o<2)throw new Error("Error in multinomial: you need at least 2 outcomes, but got "+o+".");if(i>2)throw new Error("Rank of probabilities must be 1 or 2, but is "+i);n=n||Math.random();var a=i===1?A.as2D(1,-1):A,s=k.runKernelFunc(function(u){return u.multinomial(a,r,t,n)},{logits2D:a});return i===1?s.as1D():s}}),Kh=_({oneHot_:function(e,t,n,r){if(n===void 0&&(n=1),r===void 0&&(r=0),t<2)throw new Error("Error in oneHot: depth must be >=2, but it is "+t);var A=Q(e,"indices","oneHot","int32"),o=A.shape.concat([t]);return A=A.flatten(),k.runKernelFunc(function(i){return i.oneHot(A,t,n,r)},{$indices:A},function(i){return{$indices:function(){return Te(A.shape,"float32")}}}).reshape(o)}}),io=_({pad_:function(e,t,n){n===void 0&&(n=0);var r=Q(e,"x","pad");if(r.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");var A={paddings:t,constantValue:n};return k.runKernelFunc(function(o){return o.pad(r,t,n)},{x:r},function(o){var i=t.map(function(a){return a[0]});return{x:function(){return o.slice(i,r.shape)}}},"PadV2",A)}}),y2=_({pad1d_:function(e,t,n){return n===void 0&&(n=0),U(t.length===2,function(){return"Invalid number of paddings. Must be length of 2."}),io(e,[t],n)}}),C2=_({pad2d_:function(e,t,n){return n===void 0&&(n=0),U(t.length===2&&t[0].length===2&&t[1].length===2,function(){return"Invalid number of paddings. Must be length of 2 each."}),io(e,t,n)}}),x2=_({pad3d_:function(e,t,n){return n===void 0&&(n=0),U(t.length===3&&t[0].length===2&&t[1].length===2&&t[2].length===2,function(){return"Invalid number of paddings. Must be length of 2 each."}),io(e,t,n)}}),F2=_({pad4d_:function(e,t,n){return n===void 0&&(n=0),U(t.length===4&&t[0].length===2&&t[1].length===2&&t[2].length===2&&t[3].length===2,function(){return"Invalid number of paddings. Must be length of 2 each."}),io(e,t,n)}}),b2=_({rand_:function(e,t,n){var r=ne(e),A=null;if(n==null||n==="float32")A=new Float32Array(r);else if(n==="int32")A=new Int32Array(r);else{if(n!=="bool")throw new Error("Unknown data type "+n);A=new Uint8Array(r)}for(var o=0;o<r;o++)A[o]=t();return k.makeTensor(A,e,n)}}),E2=_({randomNormal_:function(e,t,n,r,A){if(t===void 0&&(t=0),n===void 0&&(n=1),r!=null&&r==="bool")throw new Error("Unsupported data type "+r);for(var o=new xp(t,n,r,!1,A),i=fe(e,r),a=0;a<i.values.length;a++)i.values[a]=o.nextValue();return i.toTensor()}}),Q2=_({randomGamma_:function(e,t,n,r,A){if(n===void 0&&(n=1),r===void 0&&(r="float32"),n==null&&(n=1),r==null&&(r="float32"),r!=="float32"&&r!=="int32")throw new Error("Unsupported data type "+r);for(var o=new f2(t,n,r,A),i=fe(e,r),a=0;a<i.values.length;a++)i.values[a]=o.nextValue();return i.toTensor()}}),By=_({randomUniform_:function(e,t,n,r,A){t===void 0&&(t=0),n===void 0&&(n=1),r===void 0&&(r="float32");for(var o=fe(e,r),i=new h2(t,n,null,A),a=0;a<o.values.length;a++)o.values[a]=i.nextValue();return o.toTensor()}}),Ln=_({reshape_:function(e,t){var n=Q(e,"x","reshape",null);t=iE(t,n.size),U(n.size===ne(t),function(){return"new shape and old shape must have the same number of elements."});var r={shape:t};return k.runKernelFunc(function(A){return A.reshape(n,t)},{x:n},function(A){return{x:function(){return A.reshape(n.shape)}}},"Reshape",r)}}),yy=_({spaceToBatchND_:function(e,t,n){var r=Q(e,"x","spaceToBatchND");return U(r.rank>=1+t.length,function(){return"input rank "+r.rank+" should be > than [blockShape] "+t.length}),U(n.length===t.length,function(){return"paddings.shape[0] "+n.length+" must be equal to [blockShape] "+t.length}),U(r.shape.reduce(function(A,o,i){return i>0&&i<=t.length?A&&(o+n[i-1][0]+n[i-1][1])%t[i-1]==0:A},!0),function(){return"input spatial dimensions "+r.shape.slice(1)+" with paddings "+n.toString()+" must be divisible by blockShapes "+t.toString()}),k.runKernelFunc(function(A){return A.spaceToBatchND(r,t,n)},{$x:r},function(A){return{$x:function(){return A.batchToSpaceND(t,n)}}})}}),Cy=_({squeeze_:function(e,t){var n=Q(e,"x","squeeze");return Ln(n,NA(n.shape,t).newShape)}}),dn=_({stack_:function(e,t){t===void 0&&(t=0);var n=Yu(e,"tensors","stack");if(U(n.length>=1,function(){return"Pass at least one tensor to tf.stack"}),n.length===1)return n[0].expandDims(t);var r=n[0].rank,A=n[0].shape,o=n[0].dtype;U(t<=r,function(){return"Axis must be <= rank of the tensor"}),n.forEach(function(a){Qe(A,a.shape,"All tensors passed to stack must have matching shapes")}),n.forEach(function(a){U(o===a.dtype,function(){return"All tensors passed to stack must have matching dtypes"})});var i=n.map(function(a){return a.expandDims(t)});return st(i,t)}}),qo=_({tile_:function(e,t){var n=Q(e,"x","tile",null);U(n.rank===t.length,function(){return"Error in transpose: rank of input "+n.rank+" must match length of reps "+t+"."});var r=[n],A={reps:t};return k.runKernelFunc(function(o,i){var a=o.tile(n,t);return i([n]),a},{x:n},function(o,i){var a=i[0];return{x:function(){var s=ye(a);if(a.rank===1)for(var u=0;u<t[0];++u)s=s.add(o.slice([u*a.shape[0]],[a.shape[0]]));else if(a.rank===2)for(u=0;u<t[0];++u)for(var l=0;l<t[1];++l)s=s.add(o.slice([u*a.shape[0],l*a.shape[1]],[a.shape[0],a.shape[1]]));else if(a.rank===3)for(u=0;u<t[0];++u)for(l=0;l<t[1];++l)for(var c=0;c<t[2];++c)s=s.add(o.slice([u*a.shape[0],l*a.shape[1],c*a.shape[2]],[a.shape[0],a.shape[1],a.shape[2]]));else{if(a.rank!==4)throw new Error("Gradient for tile operation is not implemented for rank-"+a.rank+" tensors yet.");for(u=0;u<t[0];++u)for(l=0;l<t[1];++l)for(c=0;c<t[2];++c)for(var f=0;f<t[3];++f)s=s.add(o.slice([u*a.shape[0],l*a.shape[1],c*a.shape[2],f*a.shape[3]],[a.shape[0],a.shape[1],a.shape[2],a.shape[3]]))}return s}}},"Tile",A,r)}}),U2=_({truncatedNormal_:function(e,t,n,r,A){if(t===void 0&&(t=0),n===void 0&&(n=1),r!=null&&r==="bool")throw new Error("Unsupported data type "+r);for(var o=new xp(t,n,r,!0,A),i=fe(e,r),a=0;a<i.values.length;a++)i.values[a]=o.nextValue();return i.toTensor()}}),ut=_({unstack_:function(e,t){t===void 0&&(t=0),t=t||0;var n=Q(e,"x","unstack");U(t>=-n.shape.length&&t<n.shape.length,function(){return"Axis = "+t+" is not in [-"+n.shape.length+", "+n.shape.length+")"}),t<0&&(t+=n.shape.length);var r={axis:t};return k.runKernelFunc(function(A){return A.unstack(n,t)},{x:n},function(A){return{x:function(){return dn(A,t)}}},"Unpack",r)}}),I2=function(e,t){return ee(this,void 0,void 0,function(){var n,r,A,o,i,a,s,u,l,c;return te(this,function(f){switch(f.label){case 0:return n=Q(e,"x","setdiff1d"),r=Q(t,"y","setdiff1d"),U(n.dtype===r.dtype,function(){return"x and y should have the same dtype, but got x ("+n.dtype+") and y ("+r.dtype+")."}),U(n.rank===1,function(){return"x should be 1D tensor, but got x ("+n.shape+")."}),U(r.rank===1,function(){return"y should be 1D tensor, but got y ("+r.shape+")."}),[4,n.data()];case 1:return A=f.sent(),[4,r.data()];case 2:for(o=f.sent(),i=new Set(o),a=0,l=0;l<A.length;l++)i.has(A[l])||a++;for(s=new _a([a],n.dtype),u=new _a([a],"int32"),l=0,c=0;l<A.length;l++)i.has(A[l])||(s.values[c]=A[l],u.values[c]=l,c++);return[2,[s.toTensor(),u.toTensor()]]}})})};function Ju(e,t,n,r){r===void 0&&(r=!0);var A=[];if(r)(A=A.concat(t.slice(0))).push(e[0]/n),A=A.concat(e.slice(1));else{A=A.concat(e[0]);for(var o=t.length,i=0;i<o;++i)A=A.concat([e[i+1]/t[i],t[i]]);A=A.concat(e.slice(o+1))}return A}function Zu(e,t,n){n===void 0&&(n=!0);var r=[];if(n){r.push(t);for(var A=t+1;A<e;++A)A<=2*t?(r.push(A),r.push(A-(t+1))):r.push(A)}else{var o=[],i=[];for(A=1;A<e;++A)A>=2*t+1||A%2==1?i.push(A):o.push(A);r.push.apply(r,o),r.push(0),r.push.apply(r,i)}return r}function el(e,t,n,r){r===void 0&&(r=!0);var A=[];r?A.push(e[0]/n):A.push(e[0]*n);for(var o=1;o<e.length;++o)o<=t.length?r?A.push(t[o-1]*e[o]):A.push(e[o]/t[o-1]):A.push(e[o]);return A}function xy(e,t){for(var n=[0],r=0;r<t;++r)n.push(e[r][0]);return n}function Fy(e,t,n){for(var r=e.slice(0,1),A=0;A<n;++A)r.push(e[A+1]-t[A][0]-t[A][1]);return r}function by(e,t){if(e.rank<1)throw new Error("tf.gatherND() expects the input to be rank 1 or higher, but the rank was "+e.rank+".");if(t.rank<1)throw new Error("tf.gatherND() expects the indices to be rank 1 or higher, but the rank was "+t.rank+".");if(t.dtype!=="int32")throw new Error("tf.gatherND() expects the indices to be int32 type, but the dtype was "+t.dtype+".");if(t.shape[t.rank-1]>e.rank)throw new Error("index innermost dimension length must be <= tensor rank; saw: "+t.shape[t.rank-1]+" vs. "+e.rank);if(e.size===0)throw new Error("Requested more than 0 entries, but input is empty. Input shape: "+e.shape+".");for(var n=t.shape,r=n[n.length-1],A=1,o=0;o<n.length-1;++o)A*=n[o];var i=e.shape,a=n.slice();a.pop();var s=1;for(o=r;o<e.rank;++o)s*=i[o],a.push(i[o]);var u=sr(e.shape).map(function(l){return l/s}).concat([1]).slice(0,r);return[a,A,s,u]}var Ey=30;function qc(e){return e<=Ey?e:Hh(e,Math.floor(Math.sqrt(e)))}function S2(e,t,n){var r=t.rank>1?t.shape[t.rank-1]:1,A=t.rank>1?t.rank-1:1,o="Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: "+n.shape+", indices.shape: "+t.shape+", shape: "+e+", sliceDim: "+r+", and batchDim: "+A+".";if(n.rank<A)throw new Error(o+" update.rank < "+A+". ");if(e.length<r+(n.rank-A))throw new Error(o+" Output shape length < "+(r+(n.rank-A)));if(n.rank!==A+e.length-r)throw new Error(o+" update.rank != "+(A+e.length-r));for(var i=0;i<A;++i)if(n.shape[i]!==t.shape[i])throw new Error(o+" updates.shape["+i+"] ("+n.shape[i]+") != indices.shape["+i+"] ("+t.shape[i]+").");for(i=0;i<n.rank-A;++i)if(n.shape[i+A]!==e[i+r])throw new Error(o+" updates.shape["+(i+A)+"] ("+n.shape[i+A]+") != shape["+(i+A)+"] ("+e[i+A]+")")}function _2(e,t,n){if(t.rank<1)throw new Error("tf.scatterND() expects the indices to be rank 1 or higher, but the rank was "+t.rank+".");if(e.rank<1)throw new Error("tf.scatterND() expects the updates to be rank 1 or higher, but the rank was "+e.rank+".");if(t.dtype!=="int32")throw new Error("The dtype of 'indices' should be int32, but got dtype: "+t.dtype);if(n.length<1)throw new Error("Output rank must be greater or equal to 1, but got shape: "+n);if(n.length===0){if(t.size===0)throw new Error("Indices specified for empty output. indices shape: "+t.shape);if(e.size===0)throw new Error("Updates specified for empty output. updates shape: "+e.shape)}S2(n,t,e)}function tl(e,t,n){for(var r=t.shape.length,A=r>1?t.shape[r-1]:1,o=n.length,i=1,a=A;a<o;++a)i*=n[a];var s=A<1?1:A;return{sliceRank:A,numUpdates:ne(t.shape)/s,sliceSize:i,strides:sr(n.slice(0,A)).concat([1]),outputSize:ne(n)}}function k2(e,t,n){U(e.rank===t.length,function(){return"Error in slice"+e.rank+"D: Length of begin "+t+" must match the rank of the array ("+e.rank+")."}),U(e.rank===n.length,function(){return"Error in slice"+e.rank+"D: Length of size "+n+" must match the rank of the array ("+e.rank+")."});for(var r=function(o){U(t[o]+n[o]<=e.shape[o],function(){return"Error in slice"+e.rank+"D: begin["+o+"] + size["+o+"] ("+(t[o]+n[o])+") would overflow input.shape["+o+"] ("+e.shape[o]+")"})},A=0;A<e.rank;++A)r(A)}function $v(e){for(var t=[],n=0;e>0;)1&e&&t.push(n),e/=2,n++;return t}function Fp(e,t,n){for(var r=[],A=0;A<e.length;A++)r[A]=Math.ceil((t[A]-e[A])/n[A]);return r}function D2(e,t,n,r,A){var o=t[A],i=n[A]||1;(e&1<<A||o==null)&&(o=i>0?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER);var a=r[A];return o<0&&(o+=a),o=Dh(0,o,a-1)}function R2(e,t,n,r,A){var o=t[A],i=n[A]||1;(e&1<<A||o==null)&&(o=i>0?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER);var a=r[A];return o<0&&(o+=a),o=i>0?Dh(0,o,a):Dh(-1,o,a-1)}function Qy(e,t,n){for(var r=n.length,A=0;A<n.length;A++)if(n[A]>1){r=A;break}for(A=r+1;A<n.length;A++)if(t[A]>0||n[A]!==e[A])return!1;return!0}function Uy(e,t){for(var n=e.length>0?e[e.length-1]:1,r=0;r<e.length-1;r++)n+=e[r]*t[r];return n}function T2(e,t){U(Th(e),function(){return"The f passed in variableGrads(f) must be a function"}),U(t==null||Array.isArray(t)&&t.every(function(l){return l instanceof hi}),function(){return"The varList passed in variableGrads(f, varList) must be an array of variables"});var n=t!=null;if(!n)for(var r in t=[],k.registeredVariables)t.push(k.registeredVariables[r]);var A=n?t.filter(function(l){return!l.trainable}):null,o=t.length;U((t=t.filter(function(l){return l.trainable})).length>0,function(){return"variableGrads() expects at least one of the input variables to be trainable, but none of the "+o+" variables is trainable."});var i=k.gradients(e,t,null,!0),a=i.value,s=i.grads;U(s.some(function(l){return l!=null}),function(){return"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."}),U(a.rank===0,function(){return"The f passed in variableGrads(f) must return a scalar, but it returned a rank-"+a.rank+" tensor"});var u={};return t.forEach(function(l,c){s[c]!=null&&(u[l.name]=s[c])}),A!=null&&A.forEach(function(l){return u[l.name]=null}),{value:a,grads:u}}function Pl(e){return k.customGrad(e)}var Lr=_({softmax_:function(e,t){t===void 0&&(t=-1);var n=Q(e,"logits","softmax","float32");if(t===-1&&(t=n.rank-1),t!==n.rank-1)throw Error("Softmax along a non-last dimension is not yet supported. Logits was rank "+n.rank+" and dim was "+t);return k.runKernelFunc(function(r,A){var o=r.softmax(n,t);return A([o]),o},{logits:n},function(r,A){var o=A[0],i=r.mul(o);return{logits:function(){return i.sub(i.sum([t],!0).mul(o))}}},"Softmax",{dim:t},[],[!0])}}),H2=_({logSoftmax_:function(e,t){t===void 0&&(t=-1);var n=Q(e,"logits","logSoftmax");if(t===-1&&(t=n.rank-1),t!==n.rank-1)throw Error("Log Softmax along a non-last dimension is not yet supported. Logits was rank "+n.rank+" and axis was "+t);return Pl(function(r,A){var o=r.max(t,!0),i=r.sub(o),a=i.toFloat().sub(i.exp().sum(t,!0).log());return A([a]),{value:a,gradFunc:function(s,u){var l=u[0].exp();return s.sub(s.sum(t,!0).mul(l))}}})(n)}}),Iy=function(){function e(t,n){this.backend=t,this.dataMover=n,this.data=new WeakMap,this.dataIdsCount=0}return e.prototype.get=function(t){return this.data.has(t)||this.dataMover.moveData(this.backend,t),this.data.get(t)},e.prototype.set=function(t,n){this.dataIdsCount++,this.data.set(t,n)},e.prototype.has=function(t){return this.data.has(t)},e.prototype.delete=function(t){return this.dataIdsCount--,this.data.delete(t)},e.prototype.numDataIds=function(){return this.dataIdsCount},e}(),Sy=function(){function e(){}return e.prototype.time=function(t){return H("time")},e.prototype.read=function(t){return H("read")},e.prototype.readSync=function(t){return H("readSync")},e.prototype.numDataIds=function(){return H("numDataIds")},e.prototype.disposeData=function(t){return H("disposeData")},e.prototype.write=function(t,n,r){return H("write")},e.prototype.move=function(t,n,r,A){return H("move")},e.prototype.memory=function(){return H("memory")},e.prototype.floatPrecision=function(){return H("floatPrecision")},e.prototype.epsilon=function(){return this.floatPrecision()===32?1e-7:1e-4},e.prototype.batchMatMul=function(t,n,r,A){return H("batchMatMul")},e.prototype.fusedBatchMatMul=function(t){return t.a,t.b,t.transposeA,t.transposeB,t.bias,t.activation,t.preluActivationWeights,H("fusedBatchMatMul")},e.prototype.slice=function(t,n,r){return H("slice")},e.prototype.stridedSlice=function(t,n,r,A){return H("stridedSlice")},e.prototype.unstack=function(t,n){return H("unstack")},e.prototype.reverse=function(t,n){return H("reverse")},e.prototype.concat=function(t,n){return H("concat")},e.prototype.neg=function(t){return H("neg")},e.prototype.add=function(t,n){return H("add")},e.prototype.addN=function(t){return H("addN")},e.prototype.subtract=function(t,n){return H("subtract")},e.prototype.multiply=function(t,n){return H("multiply")},e.prototype.realDivide=function(t,n){return H("realDivide")},e.prototype.floorDiv=function(t,n){return H("floorDiv")},e.prototype.sum=function(t,n){return H("sum")},e.prototype.prod=function(t,n){return H("prod")},e.prototype.unsortedSegmentSum=function(t,n,r){return H("unsortedSegmentSum")},e.prototype.argMin=function(t,n){return H("argMin")},e.prototype.argMax=function(t,n){return H("argMax")},e.prototype.equal=function(t,n){return H("equal")},e.prototype.notEqual=function(t,n){return H("notEqual")},e.prototype.less=function(t,n){return H("less")},e.prototype.lessEqual=function(t,n){return H("lessEqual")},e.prototype.greater=function(t,n){return H("greater")},e.prototype.greaterEqual=function(t,n){return H("greaterEqual")},e.prototype.logicalNot=function(t){return H("logicalNot")},e.prototype.logicalAnd=function(t,n){return H("logicalAnd")},e.prototype.logicalOr=function(t,n){return H("logicalOr")},e.prototype.where=function(t){return H("where")},e.prototype.select=function(t,n,r){return H("select")},e.prototype.topk=function(t,n,r){return H("topk")},e.prototype.min=function(t,n){return H("min")},e.prototype.minimum=function(t,n){return H("minimum")},e.prototype.mod=function(t,n){return H("mod")},e.prototype.max=function(t,n){return H("max")},e.prototype.maximum=function(t,n){return H("maximum")},e.prototype.all=function(t,n){return H("all")},e.prototype.any=function(t,n){return H("any")},e.prototype.squaredDifference=function(t,n){return H("squaredDifference")},e.prototype.ceil=function(t){return H("ceil")},e.prototype.floor=function(t){return H("floor")},e.prototype.round=function(t){return H("round")},e.prototype.sign=function(t){return H("sign")},e.prototype.isNaN=function(t){return H("isNaN")},e.prototype.isInf=function(t){return H("isInf")},e.prototype.isFinite=function(t){return H("isFinite")},e.prototype.pow=function(t,n){return H("pow")},e.prototype.exp=function(t){return H("exp")},e.prototype.expm1=function(t){return H("expm1")},e.prototype.softmax=function(t,n){return H("softmax")},e.prototype.log=function(t){return H("log")},e.prototype.log1p=function(t){return H("log1p")},e.prototype.sqrt=function(t){return H("sqrt")},e.prototype.rsqrt=function(t){return H("rsqrt")},e.prototype.square=function(t){return H("square")},e.prototype.reciprocal=function(t){return H("reciprocal")},e.prototype.relu=function(t){return H("relu")},e.prototype.relu6=function(t){return H("relu6")},e.prototype.prelu=function(t,n){return H("prelu")},e.prototype.elu=function(t){return H("elu")},e.prototype.eluDer=function(t,n){return H("eluDer")},e.prototype.selu=function(t){return H("selu")},e.prototype.int=function(t){return H("int")},e.prototype.clip=function(t,n,r){return H("clip")},e.prototype.abs=function(t){return H("abs")},e.prototype.complexAbs=function(t){return H("complexAbs")},e.prototype.sigmoid=function(t){return H("sigmoid")},e.prototype.softplus=function(t){return H("softplus")},e.prototype.sin=function(t){return H("sin")},e.prototype.cos=function(t){return H("cos")},e.prototype.tan=function(t){return H("tan")},e.prototype.asin=function(t){return H("asin")},e.prototype.acos=function(t){return H("acos")},e.prototype.atan=function(t){return H("atan")},e.prototype.atan2=function(t,n){return H("atan2")},e.prototype.sinh=function(t){return H("sinh")},e.prototype.cosh=function(t){return H("cosh")},e.prototype.tanh=function(t){return H("tanh")},e.prototype.asinh=function(t){return H("asinh")},e.prototype.acosh=function(t){return H("acosh")},e.prototype.atanh=function(t){return H("atanh")},e.prototype.erf=function(t){return H("erf")},e.prototype.step=function(t,n){return H("step")},e.prototype.fusedConv2d=function(t){return t.input,t.filter,t.convInfo,t.bias,t.activation,t.preluActivationWeights,H("fusedConv2d")},e.prototype.conv2d=function(t,n,r){return H("conv2d")},e.prototype.conv2dDerInput=function(t,n,r){return H("conv2dDerInput")},e.prototype.conv2dDerFilter=function(t,n,r){return H("conv2dDerFilter")},e.prototype.fusedDepthwiseConv2D=function(t){return t.input,t.filter,t.convInfo,t.bias,t.activation,t.preluActivationWeights,H("fusedDepthwiseConv2D")},e.prototype.depthwiseConv2D=function(t,n,r){return H("depthwiseConv2D")},e.prototype.depthwiseConv2DDerInput=function(t,n,r){return H("depthwiseConv2DDerInput")},e.prototype.depthwiseConv2DDerFilter=function(t,n,r){return H("depthwiseConv2DDerFilter")},e.prototype.conv3d=function(t,n,r){return H("conv3d")},e.prototype.conv3dDerInput=function(t,n,r){return H("conv3dDerInput")},e.prototype.conv3dDerFilter=function(t,n,r){return H("conv3dDerFilter")},e.prototype.maxPool=function(t,n){return H("maxPool")},e.prototype.maxPoolBackprop=function(t,n,r,A){return H("maxPoolBackprop")},e.prototype.avgPool=function(t,n){return H("avgPool")},e.prototype.avgPoolBackprop=function(t,n,r){return H("avgPoolBackprop")},e.prototype.avgPool3d=function(t,n){return H("avgPool3d")},e.prototype.avgPool3dBackprop=function(t,n,r){return H("avgPool3dBackprop")},e.prototype.maxPool3d=function(t,n){return H("maxPool3d")},e.prototype.maxPool3dBackprop=function(t,n,r,A){return H("maxPool3dBackprop")},e.prototype.reshape=function(t,n){return H("reshape")},e.prototype.cast=function(t,n){return H("cast")},e.prototype.tile=function(t,n){return H("tile")},e.prototype.pad=function(t,n,r){return H("pad")},e.prototype.transpose=function(t,n){return H("transpose")},e.prototype.gather=function(t,n,r){return H("gather")},e.prototype.gatherND=function(t,n){return H("gatherND")},e.prototype.scatterND=function(t,n,r){return H("scatterND")},e.prototype.batchToSpaceND=function(t,n,r){return H("batchToSpaceND")},e.prototype.spaceToBatchND=function(t,n,r){return H("spaceToBatchND")},e.prototype.resizeBilinear=function(t,n,r,A){return H("resizeBilinear")},e.prototype.resizeBilinearBackprop=function(t,n,r){return H("resizeBilinearBackprop")},e.prototype.resizeNearestNeighbor=function(t,n,r,A){return H("resizeNearestNeighbor")},e.prototype.resizeNearestNeighborBackprop=function(t,n,r){return H("resizeNearestNeighborBackprop")},e.prototype.batchNormalization=function(t,n,r,A,o,i){return H("batchNormalization")},e.prototype.localResponseNormalization4D=function(t,n,r,A,o){return H("localResponseNormalization4D")},e.prototype.LRNGrad=function(t,n,r,A,o,i,a){return H("LRNGrad")},e.prototype.multinomial=function(t,n,r,A){return H("multinomial")},e.prototype.oneHot=function(t,n,r,A){return H("oneHot")},e.prototype.cumsum=function(t,n,r,A){return H("cumsum")},e.prototype.nonMaxSuppression=function(t,n,r,A,o){return H("nonMaxSuppression")},e.prototype.fft=function(t){return H("fft")},e.prototype.ifft=function(t){return H("ifft")},e.prototype.complex=function(t,n){return H("complex")},e.prototype.real=function(t){return H("real")},e.prototype.imag=function(t){return H("imag")},e.prototype.cropAndResize=function(t,n,r,A,o,i){return H("cropAndResize")},e.prototype.depthToSpace=function(t,n,r){return H("depthToSpace")},e.prototype.split=function(t,n,r){return H("split")},e.prototype.sparseToDense=function(t,n,r,A){return H("sparseToDense")},e.prototype.diag=function(t){return H("diag")},e.prototype.fill=function(t,n,r){return H("fill")},e.prototype.onesLike=function(t){return H("onesLike")},e.prototype.zerosLike=function(t){return H("zerosLike")},e.prototype.linspace=function(t,n,r){return H("linspace")},e.prototype.dispose=function(){return H("dispose")},e}();function H(e){throw new Error("'"+e+"' not yet implemented or not found in the registry. Did you forget to import the kernel?")}function nA(e,t){for(var n=e.length,r=[],A=0;A<n;A++){var o=n-1-A,i=e[o]||1;(t[t.length-1-A]||1)>1&&i===1&&r.unshift(o)}return r}function lt(e,t){for(var n=[],r=0;r<t.length;r++){var A=e[e.length-r-1],o=t.length-r-1,i=t[o];(A==null||A===1&&i>1)&&n.unshift(o)}return n}function pe(e,t){for(var n=[],r=Math.max(e.length,t.length),A=0;A<r;A++){var o=e[e.length-A-1];o==null&&(o=1);var i=t[t.length-A-1];if(i==null&&(i=1),o===1)n.unshift(i);else if(i===1)n.unshift(o);else{if(o!==i)throw Error("Operands could not be broadcast together with shapes "+e+" and "+t+".");n.unshift(o)}}return n}function Da(e,t,n,r,A,o,i){i===void 0&&(i="channelsLast");var a,s=Al(t),u=s[0],l=s[1];if(i==="channelsLast")a=[u,l,e[3],e[3]];else{if(i!=="channelsFirst")throw new Error("Unknown dataFormat "+i);a=[u,l,e[1],e[1]]}return ao(e,a,n,r,A,o,!1,i)}function nl(e,t,n,r,A,o,i){i===void 0&&(i="NDHWC");var a,s,u=Vh(t),l=u[0],c=u[1],f=u[2];if(i==="NDHWC")s="channelsLast",a=[l,c,f,e[4],e[4]];else{if(i!=="NCDHW")throw new Error("Unknown dataFormat "+i);s="channelsFirst",a=[l,c,f,e[1],e[1]]}return rl(e,a,n,r,A,!1,s,o)}function ao(e,t,n,r,A,o,i,a){i===void 0&&(i=!1),a===void 0&&(a="channelsLast");var s=[-1,-1,-1,-1],u=s[0],l=s[1],c=s[2],f=s[3];if(a==="channelsLast")u=e[0],l=e[1],c=e[2],f=e[3];else{if(a!=="channelsFirst")throw new Error("Unknown dataFormat "+a);u=e[0],f=e[1],l=e[2],c=e[3]}var h,d=t[0],g=t[1],m=t[3],p=Al(n),v=p[0],w=p[1],B=Al(r),y=B[0],C=B[1],b=Jo(d,y),x=Jo(g,C),F=function(N,O,K,P,D,R,L,G){var X,q,ie;if(typeof N=="number"){X={top:N,bottom:N,left:N,right:N,type:N===0?"VALID":"NUMBER"};var ae=function(we,Ie,Fe,Xe,Me){Xe==null&&(Xe=_y(we,Ie,Fe));var Oe=we[0],zn=we[1],Xn=ia((Oe-Ie+2*Xe)/Fe+1,Me);U(et(Xn),function(){return"The output # of rows ("+Xn+") must be an integer. Change the stride and/or zero pad parameters"});var rn=ia((zn-Ie+2*Xe)/Fe+1,Me);return U(et(rn),function(){return"The output # of columns ("+rn+") must be an integer. Change the stride and/or zero pad parameters"}),[Xn,rn]}([O,K],R,P,N,G);q=ae[0],ie=ae[1]}else if(N==="same"){q=Math.ceil(O/P),ie=Math.ceil(K/D);var se=Math.max(0,(q-1)*P+R-O),le=Math.max(0,(ie-1)*D+L-K),me=Math.floor(se/2),Be=se-me,Ye=Math.floor(le/2);X={top:me,bottom:Be,left:Ye,right:le-Ye,type:"SAME"}}else{if(N!=="valid")throw Error("Unknown padding parameter: "+N);X={top:0,bottom:0,left:0,right:0,type:"VALID"},q=Math.ceil((O-R+1)/P),ie=Math.ceil((K-L+1)/D)}return{padInfo:X,outHeight:q,outWidth:ie}}(A,l,c,v,w,b,x,o),E=F.padInfo,I=F.outHeight,S=F.outWidth,T=i?m*f:m;return a==="channelsFirst"?h=[u,T,I,S]:a==="channelsLast"&&(h=[u,I,S,T]),{batchSize:u,dataFormat:a,inHeight:l,inWidth:c,inChannels:f,outHeight:I,outWidth:S,outChannels:T,padInfo:E,strideHeight:v,strideWidth:w,filterHeight:d,filterWidth:g,effectiveFilterHeight:b,effectiveFilterWidth:x,dilationHeight:y,dilationWidth:C,inShape:e,outShape:h,filterShape:t}}function rl(e,t,n,r,A,o,i,a){o===void 0&&(o=!1),i===void 0&&(i="channelsLast");var s=[-1,-1,-1,-1,-1],u=s[0],l=s[1],c=s[2],f=s[3],h=s[4];if(i==="channelsLast")u=e[0],l=e[1],c=e[2],f=e[3],h=e[4];else{if(i!=="channelsFirst")throw new Error("Unknown dataFormat "+i);u=e[0],h=e[1],l=e[2],c=e[3],f=e[4]}var d,g=t[0],m=t[1],p=t[2],v=t[4],w=Vh(n),B=w[0],y=w[1],C=w[2],b=Vh(r),x=b[0],F=b[1],E=b[2],I=Jo(g,x),S=Jo(m,F),T=Jo(p,E),N=function(L,G,X,q,ie,ae,se,le,me,Be,Ye){var we,Ie,Fe,Xe;if(typeof L=="number"){we={top:L,bottom:L,left:L,right:L,front:L,back:L,type:L===0?"VALID":"NUMBER"};var Me=function(co,wr,cc,fo,$n,fc){$n==null&&($n=_y(co,wr,fo));var Cx=co[0],xx=co[1],Fx=co[2],hc=ia((Cx-wr+2*$n)/fo+1,fc);U(et(hc),function(){return"The output # of depths ("+hc+") must be an integer. Change the stride and/or zero pad parameters"});var dc=ia((xx-wr+2*$n)/fo+1,fc);U(et(dc),function(){return"The output # of rows ("+dc+") must be an integer. Change the stride and/or zero pad parameters"});var pc=ia((Fx-wr+2*$n)/fo+1,fc);return U(et(pc),function(){return"The output # of columns ("+pc+") must be an integer. Change the stride and/or zero pad parameters"}),[hc,dc,pc,cc]}([G,X,q,1],le,1,ie,L,Ye);Ie=Me[0],Fe=Me[1],Xe=Me[2]}else if(L==="same"){Ie=Math.ceil(G/ie),Fe=Math.ceil(X/ae),Xe=Math.ceil(q/se);var Oe=(Ie-1)*ie+le-G,zn=(Fe-1)*ae+me-X,Xn=(Xe-1)*se+Be-q,rn=Math.floor(Oe/2),lo=Oe-rn,vr=Math.floor(zn/2),Vr=zn-vr,mr=Math.floor(Xn/2);we={top:vr,bottom:Vr,left:mr,right:Xn-mr,front:rn,back:lo,type:"SAME"}}else{if(L!=="valid")throw Error("Unknown padding parameter: "+L);we={top:0,bottom:0,left:0,right:0,front:0,back:0,type:"VALID"},Ie=Math.ceil((G-le+1)/ie),Fe=Math.ceil((X-me+1)/ae),Xe=Math.ceil((q-Be+1)/se)}return{padInfo:we,outDepth:Ie,outHeight:Fe,outWidth:Xe}}(A,l,c,f,B,y,C,I,S,T,a),O=N.padInfo,K=N.outDepth,P=N.outHeight,D=N.outWidth,R=o?v*h:v;return i==="channelsFirst"?d=[u,R,K,P,D]:i==="channelsLast"&&(d=[u,K,P,D,R]),{batchSize:u,dataFormat:i,inDepth:l,inHeight:c,inWidth:f,inChannels:h,outDepth:K,outHeight:P,outWidth:D,outChannels:R,padInfo:O,strideDepth:B,strideHeight:y,strideWidth:C,filterDepth:g,filterHeight:m,filterWidth:p,effectiveFilterDepth:I,effectiveFilterHeight:S,effectiveFilterWidth:T,dilationDepth:x,dilationHeight:F,dilationWidth:E,inShape:e,outShape:d,filterShape:t}}function _y(e,t,n,r){r===void 0&&(r=1);var A=Jo(t,r);return Math.floor((e[0]*(n-1)-n+A)/2)}function Al(e){return typeof e=="number"?[e,e,e]:e.length===2?[e[0],e[1],1]:e}function Vh(e){return typeof e=="number"?[e,e,e]:e}function Jo(e,t){return t<=1?e:e+(e-1)*(t-1)}function ia(e,t){if(!t)return e;switch(t){case"round":return Math.round(e);case"ceil":return Math.ceil(e);case"floor":return Math.floor(e);default:throw new Error("Unknown roundingMode "+t)}}function pi(e){var t=Al(e),n=t[0],r=t[1],A=t[2];return n===1&&r===1&&A===1}function nn(e,t){return pi(e)||pi(t)}function bp(e){if(e==="NHWC")return"channelsLast";if(e==="NCHW")return"channelsFirst";throw new Error("Unknown dataFormat "+e)}function ky(e,t,n){if(t==="complex64"){if(e.dtype==="complex64")return e.clone();var r=Te(e.shape),A=e.toFloat(),o=n.complex(A,r);return r.dispose(),A.dispose(),o}if(!uE(e.dtype,t))return k.makeTensorFromDataId(e.dataId,e.shape,t);if(e.dtype==="complex64"){var i=n.real(e);return o=i.cast(t),i.dispose(),o}if(t==="int32")return n.int(e);if(t==="bool"){var a=$(0,e.dtype);return o=n.notEqual(e,a),a.dispose(),o}throw new Error("Error in Cast: failed to cast "+e.dtype+" to "+t)}function Wh(e,t){return k.makeTensorFromDataId(e.dataId,t,e.dtype)}function Dy(e,t,n){var r=(t-e)/(n-1),A=za(n,"float32");A[0]=e;for(var o=1;o<A.length;o++)A[o]=A[o-1]+r;return rt(A,"float32")}function Gh(e,t){if(e.length!==t.length)throw new Error("Cannot merge real and imag arrays of different lengths. real:"+e.length+", imag: "+t.length+".");for(var n=new Float32Array(2*e.length),r=0;r<n.length;r+=2)n[r]=e[r/2],n[r+1]=t[r/2];return n}function jv(e,t){return{real:e[2*t],imag:e[2*t+1]}}function N2(e,t,n,r){e[2*r]=t,e[2*r+1]=n}function L2(e,t,n){var r=(n?2:-2)*Math.PI*(e/t);return{real:Math.cos(r),imag:Math.sin(r)}}function M2(e,t,n){var r=function(o,i,a){return function(s,u,l){for(var c=0,f=s.length,h=0,d=!1;c<f;){var g=l(u,s[h=c+(f-c>>>1)]);g>0?c=h+1:(f=h,d=!g)}return d?c:-c-1}(o,i,a||O2)}(e,t,n),A=r<0?-(r+1):r;e.splice(A,0,t)}function O2(e,t){return e>t?1:e<t?-1:0}function Ep(e,t,n,r,A){return Ry(e,t,n,r,A,0).selectedIndices}function Qp(e,t,n,r,A,o){var i=Ry(e,t,n,r,A,o);return i.numValidOutputs.dispose(),{selectedIndices:i.selectedIndices,selectedScores:i.selectedScores}}function Ry(e,t,n,r,A,o,i,a){a===void 0&&(a=!1);for(var s=Array.from(t).map(function(B,y){return{score:B,boxIndex:y,suppressBeginIndex:0}}).filter(function(B){return B.score>A}).sort(Yv),u=o>0?-.5/o:0,l=[],c=[];l.length<n&&s.length>0;){var f=s.pop(),h=f.score,d=f.boxIndex,g=f.suppressBeginIndex;if(h<A)break;for(var m=!1,p=l.length-1;p>=g;--p){var v=P2(e,d,l[p]);if(v>=r){m=!0;break}if(f.score=f.score*K2(r,u,v),f.score<=A)break}f.suppressBeginIndex=l.length,m||(f.score===h?(l.push(d),c.push(f.score)):f.score>A&&M2(s,f,Yv))}var w=l.length;return a&&(l.fill(0,w),c.fill(0,w)),{selectedIndices:rt(l,"int32"),selectedScores:rt(c,"float32"),numValidOutputs:$(w,"int32")}}function P2(e,t,n){var r=e.subarray(4*t,4*t+4),A=e.subarray(4*n,4*n+4),o=Math.min(r[0],r[2]),i=Math.min(r[1],r[3]),a=Math.max(r[0],r[2]),s=Math.max(r[1],r[3]),u=Math.min(A[0],A[2]),l=Math.min(A[1],A[3]),c=Math.max(A[0],A[2]),f=Math.max(A[1],A[3]),h=(a-o)*(s-i),d=(c-u)*(f-l);if(h<=0||d<=0)return 0;var g=Math.max(o,u),m=Math.max(i,l),p=Math.min(a,c),v=Math.min(s,f),w=Math.max(p-g,0)*Math.max(v-m,0);return w/(h+d-w)}function K2(e,t,n){var r=Math.exp(t*n*n);return n<=e?r:0}function Yv(e,t){return e.score-t.score||e.score===t.score&&t.boxIndex-e.boxIndex}function Ty(e,t,n){var r=new Array(e.rank).fill(0),A=e.shape.slice();return t.map(function(o){A[n]=o;var i=e.slice(r,A);return r[n]+=o,i})}function Hy(e,t){for(var n=new Array(e.rank),r=0;r<n.length;r++)n[r]=e.shape[r]*t[r];var A=fe(n,e.dtype);for(r=0;r<A.values.length;++r){for(var o=A.indexToLoc(r),i=new Array(e.rank),a=0;a<i.length;a++)i[a]=o[a]%e.shape[a];var s=e.locToIndex(i);A.values[r]=e.values[s]}return A.toTensor()}function Ny(e,t,n,r,A){for(var o=t[t.length-1],i=[e.length/o,o],a=i[0],s=i[1],u=Sa(n,a*r),l=Sa("int32",a*r),c=0;c<a;c++){for(var f=c*s,h=e.subarray(f,f+s),d=[],g=0;g<h.length;g++)d.push({value:h[g],index:g});d.sort(function(B,y){return y.value-B.value});var m=c*r,p=u.subarray(m,m+r),v=l.subarray(m,m+r);for(g=0;g<r;g++)p[g]=d[g].value,v[g]=d[g].index}var w=t.slice();return w[w.length-1]=r,[xt(u,w,n),xt(l,w,"int32")]}function Up(e,t){for(var n=[],r=0;r<t.length;r++)t[r]&&n.push(r);var A=fe(e,"int32"),o=fe([n.length,e.length],"int32");for(r=0;r<n.length;r++){var i=A.indexToLoc(n[r]),a=r*e.length;o.values.set(i,a)}return o.toTensor()}var V2=function(e,t){this.outputShape=[],this.outputShape=e,this.variableNames=t.map(function(A,o){return"T"+o});var n=[];this.variableNames.forEach(function(A){n.push("float v"+A+" = get"+A+"AtOutCoords();")});var r=this.variableNames.map(function(A){return"v"+A}).join(" + ");this.userCode=`
      void main() {
        `+n.join(`
        `)+`

        float result = `+r+`;
        setOutput(result);
      }
    `},W2=function(e,t){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.variableNames=t.map(function(A,o){return"T"+o});var n=[];this.variableNames.forEach(function(A){n.push("vec4 v"+A+" = get"+A+"AtOutCoords();")});var r=this.variableNames.map(function(A){return"v"+A}).join(" + ");this.userCode=`
      void main() {
        `+n.join(`
        `)+`

        vec4 result = `+r+`;
        setOutput(result);
      }
    `},G2=function(e,t,n){this.variableNames=["A"];var r=e.windowSize,A=e.batchSize,o=e.inSize,i=Math.ceil(o/r);n||this.variableNames.push("bestIndicesA"),this.outputShape=[A,i];var a=t==="max"?">":"<",s=n?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * `+r+`;

        int bestIndex = inOffset;
        float bestValue = getA(batch, bestIndex);

        for (int i = 0; i < `+r+`; i++) {
          int inIdx = `+s+`;
          float candidate = getA(batch, inIdx);
          if (candidate `+a+` bestValue) {
            bestValue = candidate;
            bestIndex = inIdx;
          }
        }
        setOutput(float(bestIndex));
      }
    `};function Ly(e,t){return["x","y","z","w","u","v"].slice(0,t).map(function(n){return e+"."+n})}function jt(e,t){return t===1?[e]:Ly(e,t)}function Rt(){var e,t,n,r,A,o,i,a,s,u;return V().getNumber("WEBGL_VERSION")===2?(e="#version 300 es",t="in",n="out",r="in",A="texture",o="outputColor",i="out vec4 outputColor;",a=`
      bool isnan_custom(float val) {
        return (val > 0.0 || val < 0.0) ? false : val != 0.0;
      }

      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan_custom(val.x),
          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));
      }

      #define isnan(value) isnan_custom(value)
    `,s="",u=`
      #define round(value) newRound(value)
      int newRound(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 newRound(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `):(e="",t="attribute",n="varying",r="varying",A="texture2D",o="gl_FragColor",i="",a=`
      #define isnan(value) isnan_custom(value)
      bool isnan_custom(float val) {
        return (val > 0. || val < 1. || val == 0.) ? false : true;
      }
      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));
      }
    `,s=`
      uniform float INFINITY;

      bool isinf(float val) {
        return abs(val) == INFINITY;
      }
      bvec4 isinf(vec4 val) {
        return equal(abs(val), vec4(INFINITY));
      }
    `,u=`
      int round(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 round(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `),{version:e,attribute:t,varyingVs:n,varyingFs:r,texture2D:A,output:o,defineOutput:i,defineSpecialNaN:a,defineSpecialInf:s,defineRound:u}}function KA(e,t,n){n===void 0&&(n="index");var r=sr(t);return r.map(function(A,o){return"int "+e[o]+" = "+n+" / "+A+"; "+(o===r.length-1?"int "+e[o+1]+" = "+n+" - "+e[o]+" * "+A:"index -= "+e[o]+" * "+A)+";"}).join("")}function Ip(e){var t=sr(e).map(function(n){return n.toString()});return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * `+t[0]+" + coords.y * "+t[1]+` + coords.z;
  }
`}var My=`
  const float FLOAT_MAX = 1.70141184e38;
  const float FLOAT_MIN = 1.17549435e-38;

  lowp vec4 encode_float(highp float v) {
    if (isnan(v)) {
      return vec4(255, 255, 255, 255);
    }

    highp float av = abs(v);

    if(av < FLOAT_MIN) {
      return vec4(0.0, 0.0, 0.0, 0.0);
    } else if(v > FLOAT_MAX) {
      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
    } else if(v < -FLOAT_MAX) {
      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
    }

    highp vec4 c = vec4(0,0,0,0);

    highp float e = floor(log2(av));
    highp float m = exp2(fract(log2(av))) - 1.0;

    c[2] = floor(128.0 * m);
    m -= c[2] / 128.0;
    c[1] = floor(32768.0 * m);
    m -= c[1] / 32768.0;
    c[0] = floor(8388608.0 * m);

    highp float ebias = e + 127.0;
    c[3] = floor(ebias / 2.0);
    ebias -= c[3] * 2.0;
    c[2] += floor(ebias) * 128.0;

    c[3] += 128.0 * step(0.0, -v);

    return c / 255.0;
  }
`;function z2(e,t,n,r){var A=[];e.forEach(function(h){var d=ne(h.shapeInfo.logicalShape);h.shapeInfo.isUniform?A.push("uniform float "+h.name+(d>1?"["+d+"]":"")+";"):(A.push("uniform sampler2D "+h.name+";"),A.push("uniform int offset"+h.name+";"))});var o,i,a=A.join(`
`),s=e.map(function(h){return function(d,g,m){m===void 0&&(m=!1);var p="";p+=m?Oy(d):bo(d);var v=d.shapeInfo.logicalShape,w=g.logicalShape;return v.length<=w.length&&(p+=m?function(B,y){var C,b=B.name,x=b.charAt(0).toUpperCase()+b.slice(1),F="get"+x+"AtOutCoords",E=B.shapeInfo.logicalShape.length,I=y.logicalShape.length,S=nA(B.shapeInfo.logicalShape,y.logicalShape),T=De(I),N=I-E,O=["x","y","z","w","u","v"];C=E===0?"":I<2&&S.length>=1?"coords = 0;":S.map(function(X){return"coords."+O[X+N]+" = 0;"}).join(`
`);var K="";K=I<2&&E>0?"coords":B.shapeInfo.logicalShape.map(function(X,q){return"coords."+O[q+N]}).join(", ");var P="return outputValue;",D=ne(B.shapeInfo.logicalShape)===1,R=ne(y.logicalShape)===1;if(E!==1||D||R){if(D&&!R)P=I===1?`
        return vec4(outputValue.x, outputValue.x, 0., 0.);
      `:`
        return vec4(outputValue.x);
      `;else if(S.length){var L=E-2,G=E-1;S.indexOf(L)>-1&&S.indexOf(G)>-1?P="return vec4(outputValue.x);":S.indexOf(L)>-1?P="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":S.indexOf(G)>-1&&(P="return vec4(outputValue.xx, outputValue.zz);")}}else P=`
      return vec4(outputValue.xy, outputValue.xy);
    `;return`
    vec4 `+F+`() {
      `+T+` coords = getOutputCoords();
      `+C+`
      vec4 outputValue = get`+x+"("+K+`);
      `+P+`
    }
  `}(d,g):function(B,y){var C=B.name,b=C.charAt(0).toUpperCase()+C.slice(1),x="get"+b+"AtOutCoords",F=y.texShape,E=B.shapeInfo.texShape,I=B.shapeInfo.logicalShape.length,S=y.logicalShape.length;if(!B.shapeInfo.isUniform&&I===S&&B.shapeInfo.flatOffset==null&&vt(E,F))return`
      float `+x+`() {
        return sampleTexture(`+C+`, resultUV);
      }
    `;var T,N=De(S),O=nA(B.shapeInfo.logicalShape,y.logicalShape),K=S-I,P=["x","y","z","w","u","v"];T=I===0?"":S<2&&O.length>=1?"coords = 0;":O.map(function(R){return"coords."+P[R+K]+" = 0;"}).join(`
`);var D="";return D=S<2&&I>0?"coords":B.shapeInfo.logicalShape.map(function(R,L){return"coords."+P[L+K]}).join(", "),`
    float `+x+`() {
      `+N+` coords = getOutputCoords();
      `+T+`
      return get`+b+"("+D+`);
    }
  `}(d,g)),p}(h,t,r)}).join(`
`),u=t.texShape,l=Rt(),c=function(h){return`
    float sampleTexture(sampler2D textureSampler, vec2 uv) {
      return `+h.texture2D+`(textureSampler, uv).r;
    }
  `}(l),f=function(h){return h.version+`
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    `+h.varyingFs+` vec2 resultUV;
    `+h.defineOutput+`
    const vec2 halfCR = vec2(0.5, 0.5);

    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    uniform float NAN;
    `+h.defineSpecialNaN+`
    `+h.defineSpecialInf+`
    `+h.defineRound+`

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    int idiv(int a, int b, float sign) {
      int res = a / b;
      int mod = imod(a, b);
      if (sign < 0. && mod != 0) {
        res -= 1;
      }
      return res;
    }

    //Based on the work of Dave Hoskins
    //https://www.shadertoy.com/view/4djSRW
    #define HASHSCALE1 443.8975
    float random(float seed){
      vec2 p = resultUV * seed;
      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);
      p3 += dot(p3, p3.yzx + 19.19);
      return fract((p3.x + p3.y) * p3.z);
    }

    `+X2+`
    `+$2+`
    `+j2+`
  `}(l);return t.isPacked?(o=function(h,d){switch(h.length){case 0:return`
    int getOutputCoords() {
      return 0;
    }
  `;case 1:return function(B,y){var C=[Math.ceil(y[0]/2),Math.ceil(y[1]/2)];return C[0]===1?`
      int getOutputCoords() {
        return 2 * int(resultUV.x * `+C[1]+`.0);
      }
    `:C[1]===1?`
      int getOutputCoords() {
        return 2 * int(resultUV.y * `+C[0]+`.0);
      }
    `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+C[0]+", "+C[1]+`));
      return 2 * (resTexRC.x * `+C[1]+` + resTexRC.y);
    }
  `}(0,d);case 2:return function(B,y){var C=[Math.ceil(y[0]/2),Math.ceil(y[1]/2)];if(vt(B,y))return`
      ivec2 getOutputCoords() {
        return 2 * ivec2(resultUV.yx * vec2(`+C[0]+", "+C[1]+`));
      }
    `;var b=Math.ceil(B[1]/2);return`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+C[0]+", "+C[1]+`));

      int index = resTexRC.x * `+C[1]+` + resTexRC.y;
      int r = 2 * (index / `+b+`);
      int c = imod(index, `+b+`) * 2;

      return ivec2(r, c);
    }
  `}(h,d);case 3:return g=h,m=d,p=[Math.ceil(m[0]/2),Math.ceil(m[1]/2)],v=Math.ceil(g[2]/2),w=v*Math.ceil(g[1]/2),`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+p[0]+", "+p[1]+`));
      int index = resTexRC.x * `+p[1]+` + resTexRC.y;

      int b = index / `+w+`;
      index -= b * `+w+`;

      int r = 2 * (index / `+v+`);
      int c = imod(index, `+v+`) * 2;

      return ivec3(b, r, c);
    }
  `;default:return function(B,y){for(var C=[Math.ceil(y[0]/2),Math.ceil(y[1]/2)],b=Math.ceil(B[B.length-1]/2),x=b*Math.ceil(B[B.length-2]/2),F=x,E="",I="b, r, c",S=2;S<B.length-1;S++)F*=B[B.length-S-1],E=`
      int b`+S+" = index / "+F+`;
      index -= b`+S+" * "+F+`;
    `+E,I="b"+S+", "+I;return`
    ivec`+B.length+` getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+C[0]+", "+C[1]+`));
      int index = resTexRC.x * `+C[1]+` + resTexRC.y;

      `+E+`

      int b = index / `+x+`;
      index -= b * `+x+`;

      int r = 2 * (index / `+b+`);
      int c = imod(index, `+b+`) * 2;

      return ivec`+B.length+"("+I+`);
    }
  `}(h,d)}var g,m,p,v,w}(t.logicalShape,u),i=function(h){return`
    void setOutput(vec4 val) {
      `+h.output+` = val;
    }
  `}(l)):(o=function(h,d){switch(h.length){case 0:return`
    int getOutputCoords() {
      return 0;
    }
  `;case 1:return function(p,v){return v[0]===1?`
      int getOutputCoords() {
        return int(resultUV.x * `+v[1]+`.0);
      }
    `:v[1]===1?`
      int getOutputCoords() {
        return int(resultUV.y * `+v[0]+`.0);
      }
    `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+v[0]+", "+v[1]+`));
      return resTexRC.x * `+v[1]+` + resTexRC.y;
    }
  `}(0,d);case 2:return function(p,v){return vt(p,v)?`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(`+v[0]+", "+v[1]+`));
      }
    `:p[1]===1?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(`+v[0]+", "+v[1]+`));
        int index = resTexRC.x * `+v[1]+` + resTexRC.y;
        return ivec2(index, 0);
      }
    `:p[0]===1?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(`+v[0]+", "+v[1]+`));
        int index = resTexRC.x * `+v[1]+` + resTexRC.y;
        return ivec2(0, index);
      }
    `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+v[0]+", "+v[1]+`));
      int index = resTexRC.x * `+v[1]+` + resTexRC.y;
      int r = index / `+p[1]+`;
      int c = index - r * `+p[1]+`;
      return ivec2(r, c);
    }
  `}(h,d);case 3:return g=d,m=KA(["r","c","d"],h),`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+g[0]+", "+g[1]+`));
      int index = resTexRC.x * `+g[1]+` + resTexRC.y;
      `+m+`
      return ivec3(r, c, d);
    }
  `;case 4:return function(p,v){var w=KA(["r","c","d","d2"],p);return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(`+v[0]+", "+v[1]+`));
      int index = resTexRC.x * `+v[1]+` + resTexRC.y;
      `+w+`
      return ivec4(r, c, d, d2);
    }
  `}(h,d);case 5:return function(p,v){var w=KA(["r","c","d","d2","d3"],p);return`
    ivec5 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx * vec2(`+v[0]+`,
                             `+v[1]+`));

      int index = resTexRC.x * `+v[1]+` + resTexRC.y;

      `+w+`

      ivec5 outShape = ivec5(r, c, d, d2, d3);
      return outShape;
    }
  `}(h,d);case 6:return function(p,v){var w=KA(["r","c","d","d2","d3","d4"],p);return`
    ivec6 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(`+v[0]+", "+v[1]+`));
      int index = resTexRC.x * `+v[1]+` + resTexRC.y;

      `+w+`

      ivec6 result = ivec6(r, c, d, d2, d3, d4);
      return result;
    }
  `}(h,d);default:throw new Error(h.length+"-D output sampling is not yet supported")}var g,m}(t.logicalShape,u),i=function(h){return`
    void setOutput(float val) {
      `+h.output+` = vec4(val, 0, 0, 0);
    }
  `}(l)),r&&(f+=Y2),[f,c,i,a,o,s,n].join(`
`)}function bo(e){var t=e.shapeInfo.logicalShape;switch(t.length){case 0:return function(n){var r=n.name,A="get"+r.charAt(0).toUpperCase()+r.slice(1);if(n.shapeInfo.isUniform)return"float "+A+"() {return "+r+";}";var o=n.shapeInfo.texShape,i=o[0],a=o[1];if(i===1&&a===1)return`
      float `+A+`() {
        return sampleTexture(`+r+`, halfCR);
      }
    `;var s=n.shapeInfo.texShape,u=s[0],l=s[1],c=_A(r);return`
    float `+A+`() {
      vec2 uv = uvFromFlat(`+u+", "+l+", "+c+`);
      return sampleTexture(`+r+`, uv);
    }
  `}(e);case 1:return function(n){var r=n.name,A="get"+r.charAt(0).toUpperCase()+r.slice(1);if(n.shapeInfo.isUniform)return`
      float `+A+`(int index) {
        `+po(n)+`
      }
    `;var o=n.shapeInfo.texShape,i=o[0],a=o[1];if(a===1&&i===1)return`
      float `+A+`(int index) {
        return sampleTexture(`+r+`, halfCR);
      }
    `;var s=_A(r);return a===1?`
      float `+A+`(int index) {
        vec2 uv = vec2(0.5, (float(index + `+s+") + 0.5) / "+i+`.0);
        return sampleTexture(`+r+`, uv);
      }
    `:i===1?`
      float `+A+`(int index) {
        vec2 uv = vec2((float(index + `+s+") + 0.5) / "+a+`.0, 0.5);
        return sampleTexture(`+r+`, uv);
      }
    `:`
    float `+A+`(int index) {
      vec2 uv = uvFromFlat(`+i+", "+a+", index + "+s+`);
      return sampleTexture(`+r+`, uv);
    }
  `}(e);case 2:return function(n){var r=n.shapeInfo.logicalShape,A=n.name,o="get"+A.charAt(0).toUpperCase()+A.slice(1),i=n.shapeInfo.texShape;if(i!=null&&vt(r,i)){var a=i[0],s=i[1];return`
    float `+o+`(int row, int col) {
      vec2 uv = (vec2(col, row) + halfCR) / vec2(`+s+".0, "+a+`.0);
      return sampleTexture(`+A+`, uv);
    }
  `}var u=NA(r),l=u.newShape,c=u.keptDims,f=l;if(f.length<r.length){var h=Eo(n,f);return`
      `+bo(h)+`
      float `+o+`(int row, int col) {
        return `+o+"("+Qo(["row","col"],c)+`);
      }
    `}if(n.shapeInfo.isUniform)return`
      float `+o+`(int row, int col) {
        int index = round(dot(vec2(row, col), vec2(`+r[1]+`, 1)));
        `+po(n)+`
      }
    `;var d=i[0],g=i[1],m=_A(A);return g===1?`
    float `+o+`(int row, int col) {
      float index = dot(vec3(row, col, `+m+"), vec3("+r[1]+`, 1, 1));
      vec2 uv = vec2(0.5, (index + 0.5) / `+d+`.0);
      return sampleTexture(`+A+`, uv);
    }
  `:d===1?`
    float `+o+`(int row, int col) {
      float index = dot(vec3(row, col, `+m+"), vec3("+r[1]+`, 1, 1));
      vec2 uv = vec2((index + 0.5) / `+g+`.0, 0.5);
      return sampleTexture(`+A+`, uv);
    }
  `:`
  float `+o+`(int row, int col) {
    // Explicitly use integer operations as dot() only works on floats.
    int index = row * `+r[1]+" + col + "+m+`;
    vec2 uv = uvFromFlat(`+d+", "+g+`, index);
    return sampleTexture(`+A+`, uv);
  }
`}(e);case 3:return function(n){var r=n.shapeInfo.logicalShape,A=n.name,o="get"+A.charAt(0).toUpperCase()+A.slice(1),i=r[1]*r[2],a=r[2],s=NA(r),u=s.newShape,l=s.keptDims,c=u;if(c.length<r.length){var f=Eo(n,c);return`
        `+bo(f)+`
        float `+o+`(int row, int col, int depth) {
          return `+o+"("+Qo(["row","col","depth"],l)+`);
        }
      `}if(n.shapeInfo.isUniform)return`
      float `+o+`(int row, int col, int depth) {
        int index = round(dot(vec3(row, col, depth),
                          vec3(`+i+", "+a+`, 1)));
        `+po(n)+`
      }
    `;var h=n.shapeInfo.texShape,d=h[0],g=h[1],m=n.shapeInfo.flatOffset;if(g===i&&m==null)return`
        float `+o+`(int row, int col, int depth) {
          float texR = float(row);
          float texC = dot(vec2(col, depth), vec2(`+a+`, 1));
          vec2 uv = (vec2(texC, texR) + halfCR) /
                     vec2(`+g+".0, "+d+`.0);
          return sampleTexture(`+A+`, uv);
        }
      `;if(g===a&&m==null)return`
    float `+o+`(int row, int col, int depth) {
      float texR = dot(vec2(row, col), vec2(`+r[1]+`, 1));
      float texC = float(depth);
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(`+g+".0, "+d+`.0);
      return sampleTexture(`+A+`, uv);
    }
  `;var p=_A(A);return`
      float `+o+`(int row, int col, int depth) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * `+i+" + col * "+a+" + depth + "+p+`;
        vec2 uv = uvFromFlat(`+d+", "+g+`, index);
        return sampleTexture(`+A+`, uv);
      }
  `}(e);case 4:return function(n){var r=n.shapeInfo.logicalShape,A=n.name,o="get"+A.charAt(0).toUpperCase()+A.slice(1),i=r[3],a=r[2]*i,s=r[1]*a,u=NA(r),l=u.newShape,c=u.keptDims;if(l.length<r.length){var f=Eo(n,l);return`
      `+bo(f)+`
      float `+o+`(int row, int col, int depth, int depth2) {
        return `+o+"("+Qo(["row","col","depth","depth2"],c)+`);
      }
    `}if(n.shapeInfo.isUniform)return`
      float `+o+`(int row, int col, int depth, int depth2) {
        int index = round(dot(vec4(row, col, depth, depth2),
                          vec4(`+s+", "+a+", "+i+`, 1)));
        `+po(n)+`
      }
    `;var h=n.shapeInfo.flatOffset,d=n.shapeInfo.texShape,g=d[0],m=d[1];if(m===s&&h==null)return`
      float `+o+`(int row, int col, int depth, int depth2) {
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(`+a+", "+i+`, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(`+m+".0, "+g+`.0);
        return sampleTexture(`+A+`, uv);
      }
    `;if(m===i&&h==null)return`
      float `+o+`(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(`+r[1]*r[2]+", "+r[2]+`, 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(`+m+".0, "+g+`.0);
        return sampleTexture(`+A+`, uv);
      }
    `;var p=_A(A);return`
    float `+o+`(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * `+s+" + col * "+a+` +
          depth * `+i+` + depth2;
      vec2 uv = uvFromFlat(`+g+", "+m+", index + "+p+`);
      return sampleTexture(`+A+`, uv);
    }
  `}(e);case 5:return function(n){var r=n.shapeInfo.logicalShape,A=n.name,o="get"+A.charAt(0).toUpperCase()+A.slice(1),i=r[4],a=r[3]*i,s=r[2]*a,u=r[1]*s,l=NA(r),c=l.newShape,f=l.keptDims;if(c.length<r.length){var h=Eo(n,c);return`
      `+bo(h)+`
      float `+o+`(int row, int col, int depth, int depth2, int depth3) {
        return `+o+"("+Qo(["row","col","depth","depth2","depth3"],f)+`);
      }
    `}if(n.shapeInfo.isUniform)return`
      float `+o+`(int row, int col, int depth, int depth2, int depth3) {
        float index = dot(
          vec4(row, col, depth, depth2),
          vec4(`+u+", "+s+", "+a+", "+i+`)) +
          depth3;
        `+po(n)+`
      }
    `;var d=n.shapeInfo.flatOffset,g=n.shapeInfo.texShape,m=g[0],p=g[1];if(p===u&&d==null)return`
      float `+o+`(int row, int col, int depth, int depth2, int depth3) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
                         vec4(`+s+", "+a+", "+i+`, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(`+p+".0, "+m+`.0);
        return sampleTexture(`+A+`, uv);
      }
    `;if(p===i&&d==null)return`
      float `+o+`(int row, int col, int depth, int depth2, int depth3) {
        float texR = dot(
          vec4(row, col, depth, depth2),
          vec4(`+r[1]*r[2]*r[3]+`,
               `+r[2]*r[3]+", "+r[3]+`, 1));
        int texC = depth3;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(`+p+".0, "+m+`.0);
        return sampleTexture(`+A+`, uv);
      }
    `;var v=_A(A);return`
    float `+o+`(int row, int col, int depth, int depth2, int depth3) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * `+u+" + col * "+s+" + depth * "+a+` +
          depth2 * `+i+" + depth3 + "+v+`;
      vec2 uv = uvFromFlat(`+m+", "+p+`, index);
      return sampleTexture(`+A+`, uv);
    }
  `}(e);case 6:return function(n){var r=n.shapeInfo.logicalShape,A=n.name,o="get"+A.charAt(0).toUpperCase()+A.slice(1),i=NA(r),a=i.newShape,s=i.keptDims;if(a.length<r.length){var u=Eo(n,a);return`
      `+bo(u)+`
      float `+o+`(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        return `+o+"("+Qo(["row","col","depth","depth2","depth3","depth4"],s)+`);
      }
    `}var l=r[5],c=r[4]*l,f=r[3]*c,h=r[2]*f,d=r[1]*h;if(n.shapeInfo.isUniform)return`
      float `+o+`(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
        int index = round(dot(
          vec4(row, col, depth, depth2),
          vec4(`+d+", "+h+", "+f+", "+c+`)) +
          dot(
            vec2(depth3, depth4),
            vec2(`+l+`, 1)));
        `+po(n)+`
      }
    `;var g=n.shapeInfo.flatOffset,m=n.shapeInfo.texShape,p=m[0],v=m[1];if(v===d&&g==null)return`
      float `+o+`(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
          vec4(`+h+", "+f+", "+c+", "+l+`)) +
               float(depth4);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(`+v+".0, "+p+`.0);
        return sampleTexture(`+A+`, uv);
      }
    `;if(v===l&&g==null)return`
      float `+o+`(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        float texR = dot(vec4(row, col, depth, depth2),
          vec4(`+r[1]*r[2]*r[3]*r[4]+`,
               `+r[2]*r[3]*r[4]+`,
               `+r[3]*r[4]+`,
               `+r[4]+`)) + float(depth3);
        int texC = depth4;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(`+v+".0, "+p+`.0);
        return sampleTexture(`+A+`, uv);
      }
    `;var w=_A(A);return`
    float `+o+`(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * `+d+" + col * "+h+" + depth * "+f+` +
          depth2 * `+c+" + depth3 * "+l+" + depth4 + "+w+`;
      vec2 uv = uvFromFlat(`+p+", "+v+`, index);
      return sampleTexture(`+A+`, uv);
    }
  `}(e);default:throw new Error(t.length+"-D input sampling is not yet supported")}}function Oy(e){var t,n,r;switch(e.shapeInfo.logicalShape.length){case 0:return t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1),r=Rt(),`
    vec4 `+n+`() {
      return `+r.texture2D+"("+t+`, halfCR);
    }
  `;case 1:return function(A){var o=A.name,i="get"+o.charAt(0).toUpperCase()+o.slice(1),a=A.shapeInfo.texShape,s=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)],u=Rt();return`
    vec4 `+i+`(int index) {
      vec2 uv = packedUVfrom1D(
        `+s[0]+", "+s[1]+`, index);
      return `+u.texture2D+"("+o+`, uv);
    }
  `}(e);case 2:return function(A){var o=A.shapeInfo.logicalShape,i=A.name,a="get"+i.charAt(0).toUpperCase()+i.slice(1),s=A.shapeInfo.texShape,u=s[0],l=s[1],c=Rt();if(s!=null&&vt(o,s))return`
      vec4 `+a+`(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(`+l+".0, "+u+`.0);

        return `+c.texture2D+"("+i+`, uv);
      }
    `;var f=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)],h=Math.ceil(o[1]/2);return`
    vec4 `+a+`(int row, int col) {
      vec2 uv = packedUVfrom2D(`+h+", "+f[0]+", "+f[1]+`, row, col);
      return `+c.texture2D+"("+i+`, uv);
    }
  `}(e);case 3:return function(A){var o=A.shapeInfo.logicalShape,i=A.name,a="get"+i.charAt(0).toUpperCase()+i.slice(1),s=A.shapeInfo.texShape,u=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)];if(o[0]===1){var l=o.slice(1),c=Eo(A,l);return`
        `+Oy(c)+`
        vec4 `+a+`(int b, int row, int col) {
          return `+a+"("+Qo(["b","row","col"],[1,2])+`);
        }
      `}var f=u[0],h=u[1],d=Math.ceil(o[2]/2),g=d*Math.ceil(o[1]/2),m=Rt();return`
    vec4 `+a+`(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        `+f+", "+h+", "+g+", "+d+`, b, row, col);
      return `+m.texture2D+"("+i+`, uv);
    }
  `}(e);default:return function(A){for(var o=A.shapeInfo.logicalShape,i=o.length,a=A.name,s="get"+a.charAt(0).toUpperCase()+a.slice(1),u=A.shapeInfo.texShape,l=[Math.ceil(u[0]/2),Math.ceil(u[1]/2)],c=l[0],f=l[1],h=Math.ceil(o[i-1]/2),d=h*Math.ceil(o[i-2]/2),g="int b, int row, int col",m="b * "+d+" + (row / 2) * "+h+" + (col / 2)",p=2;p<i-1;p++)g="int b"+p+", "+g,d*=o[i-p-1],m="b"+p+" * "+d+" + "+m;var v=Rt();return`
    vec4 `+s+"("+g+`) {
      int index = `+m+`;
      int texR = index / `+f+`;
      int texC = index - texR * `+f+`;
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(`+f+", "+c+`);
      return `+v.texture2D+"("+a+`, uv);
    }
  `}(e)}}var X2=`
vec2 uvFromFlat(int texNumR, int texNumC, int index) {
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
  int texelIndex = index / 2;
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,$2=`
vec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,
  int texNumC, int row, int col) {
  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,j2=`
vec2 packedUVfrom3D(int texNumR, int texNumC,
    int texelsInBatch, int texelsInLogicalRow, int b,
    int row, int col) {
  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,Y2=`
  float getChannel(vec4 frag, vec2 innerDims) {
    vec2 modCoord = mod(innerDims, 2.);
    return modCoord.x == 0. ?
      (modCoord.y == 0. ? frag.r : frag.g) :
      (modCoord.y == 0. ? frag.b : frag.a);
  }
  float getChannel(vec4 frag, int dim) {
    float modCoord = mod(float(dim), 2.);
    return modCoord == 0. ? frag.r : frag.g;
  }
`;function _A(e){return"offset"+e}function po(e){var t=e.name,n=ne(e.shapeInfo.logicalShape);return n<2?"return "+t+";":`
    for (int i = 0; i < `+n+`; i++) {
      if (i == index) {
        return `+t+`[i];
      }
    }
  `}function De(e){if(e<=1)return"int";if(e===2)return"ivec2";if(e===3)return"ivec3";if(e===4)return"ivec4";if(e===5)return"ivec5";if(e===6)return"ivec6";throw Error("GPU for rank "+e+" is not yet supported")}function Eo(e,t){var n=JSON.parse(JSON.stringify(e));return n.shapeInfo.logicalShape=t,n}function Qo(e,t){return t.map(function(n){return e[n]}).join(", ")}var q2=function(e,t,n,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,U(e.length>2,function(){return"Packed arg"+(n.charAt(0).toUpperCase()+n.slice(1))+" supports only inputs with rank above 2."});var A=e[e.length-1],o=Math.ceil(A/t);this.outputShape=e.slice(0,-1),o>1&&this.outputShape.push(o),r||this.variableNames.push("bestIndicesA");var i,a,s=this.outputShape,u=s.length,l=De(u),c=jt("coords",u);if(o===1){var f=De(a=u+1);i=`
        `+f+" sourceLocR = "+f+"("+c.join()+`, 0);
        ++`+c[u-1]+`;
        `+f+" sourceLocG = "+f+"("+c.join()+`, 0);
        ++`+c[u-2]+`;
        `+f+" sourceLocA = "+f+"("+c.join()+`, 0);
        --`+c[u-1]+`;
        `+f+" sourceLocB = "+f+"("+c.join()+`, 0);
        --`+c[u-2]+";"}else a=u,i=`
        `+l+` sourceLocR = coords;
        ++`+c[u-1]+`;
        `+l+` sourceLocG = coords;
        ++`+c[u-2]+`;
        `+l+` sourceLocA = coords;
        --`+c[u-1]+`;
        `+l+` sourceLocB = coords;
        --`+c[u-2]+";";var h=["x","y","z","w","u","v"].slice(0,a),d="."+h[a-1],g=h.map(function(x){return"int "+x}),m=jt("sourceLocR",a-1).concat("inIdx.r"),p=jt("sourceLocG",a-1).concat("inIdx.g"),v=jt("sourceLocB",a-1).concat("inIdx.b"),w=jt("sourceLocA",a-1).concat("inIdx.a"),B=n==="max"?"greaterThan":"lessThan",y=r?"":`
          inIdx = round(vec4(getBestIndicesAChannel(`+m.join()+`),
                             getBestIndicesAChannel(`+p.join()+`),
                             getBestIndicesAChannel(`+v.join()+`),
                             getBestIndicesAChannel(`+w.join()+")));",C=`vec4(
            getAChannel(`+m.join()+`),
            hasNextCol ? getAChannel(`+p.join()+`) : 0.,
            hasNextRow ? getAChannel(`+v.join()+`) : 0.,
            hasNextRow && hasNextCol ? getAChannel(`+w.join()+") : 0.)",b=r?"":`
      float getBestIndicesAChannel(`+g.join()+`) {
        return getChannel(getBestIndicesA(`+h.join()+`),
                                          vec2(`+h.slice(-2).join()+`));
      }`;this.userCode=`
      float getAChannel(`+g.join()+`) {
        return getChannel(getA(`+h.join()+`),
                               vec2(`+h.slice(-2).join()+`));
      }
      `+b+`
      void main() {
        `+l+` coords = getOutputCoords();
        bool hasNextCol = `+c[u-1]+" < "+(s[u-1]-1)+`;
        bool hasNextRow = `+c[u-2]+" < "+(s[u-2]-1)+`;
        `+i+`
        ivec4 srcIdx = ivec4(sourceLocR`+d+", sourceLocG"+d+`,
          sourceLocB`+d+", sourceLocA"+d+") * "+t+`;
        ivec4 inIdx = srcIdx;
        vec4 bestIndex = vec4(inIdx);
        vec4 bestValue = `+C+`;

        for (int i = 0; i < `+t+`; i++) {
          inIdx = srcIdx;
          `+y+`
          vec4 candidate = `+C+`;
          bvec4 nan = isnan(candidate);
          bvec4 replace = bvec4(
            vec4(`+B+`(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));

          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,
                           replace.y  ? candidate.y : bestValue.y,
                           replace.z  ? candidate.z : bestValue.z,
                           replace.w  ? candidate.w : bestValue.w);
          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));
          srcIdx++;
        }
        setOutput(bestIndex);
      }
    `},J2=function(e){this.variableNames=["dy"],this.outputShape=e.inShape;var t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,A=e.strideWidth,o=e.dilationHeight,i=e.dilationWidth,a=e.effectiveFilterHeight,s=e.effectiveFilterWidth,u=a-1-e.padInfo.top,l=s-1-e.padInfo.left,c=1/(t*n);this.userCode=`
      const ivec2 pads = ivec2(`+u+", "+l+`);
      const float avgMultiplier = float(`+c+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+a+`;
            wR += `+o+`) {
          float dyR = float(dyRCorner + wR) / `+r+`.0;

          if (dyR < 0.0 || dyR >= `+e.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < `+s+`;
            wC+= `+i+`) {
            float dyC = float(dyCCorner + wC) / `+A+`.0;

            if (dyC < 0.0 || dyC >= `+e.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);

            dotProd += dyValue * avgMultiplier;
          }
        }
        setOutput(dotProd);
      }
    `},Z2=function(e){this.variableNames=["dy"],this.outputShape=e.inShape;var t=e.filterDepth,n=e.filterHeight,r=e.filterWidth,A=e.strideDepth,o=e.strideHeight,i=e.strideWidth,a=e.dilationDepth,s=e.dilationHeight,u=e.dilationWidth,l=e.effectiveFilterDepth,c=e.effectiveFilterHeight,f=e.effectiveFilterWidth,h=l-1-e.padInfo.front,d=c-1-e.padInfo.top,g=f-1-e.padInfo.left,m=1/(t*n*r);this.userCode=`
      const ivec3 pads = ivec3(`+h+", "+d+", "+g+`);
      const float avgMultiplier = float(`+m+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < `+l+`;
            wD += `+a+`) {
          float dyD = float(dyDCorner + wD) / `+A+`.0;

          if (dyD < 0.0 || dyD >= `+e.outDepth+`.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < `+c+`;
              wR += `+s+`) {
            float dyR = float(dyRCorner + wR) / `+o+`.0;

            if (dyR < 0.0 || dyR >= `+e.outHeight+`.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < `+f+`;
                wC += `+u+`) {
              float dyC = float(dyCCorner + wC) / `+i+`.0;

              if (dyC < 0.0 || dyC >= `+e.outWidth+`.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);

              dotProd += dyValue * avgMultiplier;
            }
          }
        }
        setOutput(dotProd);
      }
    `},eQ=function(e,t,n,r,A,o){this.outputShape=[],this.variableNames=["x","mean","variance"],pe(e,t),pe(e,n);var i="0.0";r!=null&&(pe(e,r),this.variableNames.push("offset"),i="getOffsetAtOutCoords()");var a="1.0";A!=null&&(pe(e,A),this.variableNames.push("scale"),a="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        float x = getXAtOutCoords();
        float mean = getMeanAtOutCoords();
        float variance = getVarianceAtOutCoords();
        float offset = `+i+`;
        float scale = `+a+`;
        float inv = scale * inversesqrt(variance + float(`+o+`));
        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));
      }
    `},tQ=function(e,t,n,r,A,o){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],pe(e,t),pe(e,n);var i="vec4(0.0)";r!=null&&(pe(e,r),this.variableNames.push("offset"),i="getOffsetAtOutCoords()");var a="vec4(1.0)";A!=null&&(pe(e,A),this.variableNames.push("scale"),a="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        vec4 offset = `+i+`;
        vec4 scale = `+a+`;

        vec4 x = getXAtOutCoords();
        vec4 mean = getMeanAtOutCoords();
        vec4 variance = getVarianceAtOutCoords();

        vec4 inv = scale * inversesqrt(variance + vec4(`+o+`));

        setOutput((x - mean) * inv + offset);
      }
    `},nQ="return areal * breal - aimag * bimag;",rQ="return areal * bimag + aimag * breal;",qv=function(e,t,n){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=pe(t,n),this.userCode=`
      float binaryOpComplex(
          float areal, float aimag, float breal, float bimag) {
        `+e+`
      }

      void main() {
        float areal = getARealAtOutCoords();
        float aimag = getAImagAtOutCoords();
        float breal = getBRealAtOutCoords();
        float bimag = getBImagAtOutCoords();
        setOutput(binaryOpComplex(areal, aimag, breal, bimag));
      }
    `},Jc="return a + b;",Zc="return a - b;",Jv="return a * b;",Py="return (a < 0.) ? b * a : a;",$e=function(e,t,n){this.variableNames=["A","B"],this.outputShape=pe(t,n),this.userCode=`
      float binaryOperation(float a, float b) {
        `+e+`
      }

      void main() {
        float a = getAAtOutCoords();
        float b = getBAtOutCoords();
        setOutput(binaryOperation(a, b));
      }
    `},Ky=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`,xr=function(e,t,n,r){r===void 0&&(r=!1),this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=pe(t,n);var A=this.outputShape.length,o="";if(r)if(A===0||ne(this.outputShape)===1)o=`
          result.y = 0.;
          result.z = 0.;
          result.w = 0.;
        `;else if(o=`
          `+De(A)+` coords = getOutputCoords();
        `,A===1)o+=`
            result.y = (coords + 1) >= `+this.outputShape[0]+` ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `;else{var i=jt("coords",A);o+=`
            bool nextRowOutOfBounds =
              (`+i[A-2]+" + 1) >= "+this.outputShape[A-2]+`;
            bool nextColOutOfBounds =
              (`+i[A-1]+" + 1) >= "+this.outputShape[A-1]+`;
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `}this.userCode=`
      vec4 binaryOperation(vec4 a, vec4 b) {
        `+e+`
      }

      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();

        vec4 result = binaryOperation(a, b);
        `+o+`

        setOutput(result);
      }
    `},AQ=function(){function e(t){this.variableNames=["A"],this.outputShape=t,this.userCode=`
      uniform float minVal;
      uniform float maxVal;

      void main() {
        float value = getAAtOutCoords();
        if (isnan(value)) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, minVal, maxVal));
      }
    `}return e.prototype.getCustomSetupFunc=function(t,n){var r=this;return function(A,o){r.minLoc==null&&(r.minLoc=A.getUniformLocationNoThrow(o,"minVal"),r.maxLoc=A.getUniformLocationNoThrow(o,"maxVal")),A.gl.uniform1f(r.minLoc,t),A.gl.uniform1f(r.maxLoc,n)}},e}(),oQ=function(){function e(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.userCode=`
      uniform float minVal;
      uniform float maxVal;

      void main() {
        vec4 value = getAAtOutCoords();

        if (any(isnan(value))) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));
      }
    `}return e.prototype.getCustomSetupFunc=function(t,n){var r=this;return function(A,o){r.minLoc==null&&(r.minLoc=A.getUniformLocationNoThrow(o,"minVal"),r.maxLoc=A.getUniformLocationNoThrow(o,"maxVal")),A.gl.uniform1f(r.minLoc,t),A.gl.uniform1f(r.maxLoc,n)}},e}(),iQ=function(e){this.variableNames=["real","imag"],this.outputShape=e,this.userCode=`
      void main() {
        float re = abs(getRealAtOutCoords());
        float im = abs(getImagAtOutCoords());
        float mx = max(re, im);

        // sadly the length function in glsl is not underflow-safe
        // (at least not on Intel GPUs). So the safe solution is
        // to ensure underflow-safety in all cases.
        setOutput(
          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))
        );
      }
    `},aQ=function(e){this.outputShape=[],this.outputShape=di(e,1),this.variableNames=e.map(function(a,s){return"T"+s});var t=new Array(e.length-1);t[0]=e[0][1];for(var n=1;n<t.length;n++)t[n]=t[n-1]+e[n][1];var r=["if (yC < "+t[0]+") setOutput(getT0(yR, yC));"];for(n=1;n<t.length;n++){var A=t[n-1];r.push("else if (yC < "+t[n]+") setOutput(getT"+n+"(yR, yC-"+A+"));")}var o=t.length,i=t[t.length-1];r.push("else setOutput(getT"+o+"(yR, yC-"+i+"));"),this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int yR = coords.x;
        int yC = coords.y;

        `+r.join(`
        `)+`
      }
    `},sQ=function(e,t){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=di(e,t);var n=this.outputShape,r=n.length,A=De(r),o=jt("coords",r),i=["x","y","z","w","u","v"].slice(0,r);this.variableNames=e.map(function(m,p){return"T"+p});var a=new Array(e.length-1);a[0]=e[0][t];for(var s=1;s<a.length;s++)a[s]=a[s-1]+e[s][t];var u=i[t],l=i.slice(-2),c=i.join(),f="if ("+u+" < "+a[0]+`) {
        return getChannel(
            getT0(`+c+"), vec2("+l.join()+`));
        }`;for(s=1;s<a.length;s++){var h=a[s-1];f+=`
        if (`+u+" < "+a[s]+"  && "+u+" >= "+a[s-1]+`) {
          return getChannel(
            getT`+s+"("+Fs(i,u,h)+`),
            vec2(`+Fs(l,u,h)+`));
        }`}var d=a.length,g=a[a.length-1];f+=`
        return getChannel(
          getT`+d+"("+Fs(i,u,g)+`),
          vec2(`+Fs(l,u,g)+"));",this.userCode=`
      float getValue(`+i.map(function(m){return"int "+m})+`) {
        `+f+`
      }

      void main() {
        `+A+` coords = getOutputCoords();
        vec4 result = vec4(getValue(`+o+`), 0., 0., 0.);

        `+o[r-1]+" = "+o[r-1]+` + 1;
        if (`+o[r-1]+" < "+n[r-1]+`) {
          result.g = getValue(`+o+`);
        }

        `+o[r-2]+" = "+o[r-2]+` + 1;
        if (`+o[r-2]+" < "+n[r-2]+`) {
          result.a = getValue(`+o+`);
        }

        `+o[r-1]+" = "+o[r-1]+` - 1;
        if (`+o[r-2]+" < "+n[r-2]+` &&
            `+o[r-1]+" < "+n[r-1]+`) {
          result.b = getValue(`+o+`);
        }
        setOutput(result);
      }
    `};function Fs(e,t,n){var r=e.indexOf(t);return e.map(function(A,o){return o===r?A+" - "+n:A}).join()}var uQ=function(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;var t=e.strideHeight,n=e.strideWidth,r=e.padInfo.top,A=e.padInfo.left,o=e.dataFormat==="channelsLast";this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int d2 = coords.w;

        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int b = 0; b < `+e.batchSize+`; b++) {
          for (int yR = 0; yR < `+e.outHeight+`; yR++) {
            int xR = wR + yR * `+t+" - "+r+`;

            if (xR < 0 || xR >= `+e.inHeight+`) {
              continue;
            }

            for (int yC = 0; yC < `+e.outWidth+`; yC++) {
              int xC = wC + yC * `+n+" - "+A+`;

              if (xC < 0 || xC >= `+e.inWidth+`) {
                continue;
              }

              if (`+o+`) {
                float dyValue = getDy(b, yR, yC, d2);
                float xValue = getX(b, xR, xC, d1);
                dotProd += (xValue * dyValue);
              } else {
                float dyValue = getDy(b, d2, yR, yC);
                float xValue = getX(b, d1, xR, xC);
                dotProd += (xValue * dyValue);
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `},lQ=function(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;var t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,A=e.strideWidth,o=e.dataFormat==="channelsLast",i=t-1-e.padInfo.top,a=n-1-e.padInfo.left,s=o?1:2,u=o?2:3,l=o?3:1;this.userCode=`
      const ivec2 pads = ivec2(`+i+", "+a+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[`+l+`];

        ivec2 dyCorner = ivec2(coords[`+s+"], coords["+u+`]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+t+`; wR++) {
          float dyR = float(dyRCorner + wR) / `+r+`.0;

          if (dyR < 0.0 || dyR >= `+e.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = `+t+` - 1 - wR;

          for (int wC = 0; wC < `+n+`; wC++) {
            float dyC = float(dyCCorner + wC) / `+A+`.0;

            if (dyC < 0.0 || dyC >= `+e.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = `+n+` - 1 - wC;

            for (int d2 = 0; d2 < `+e.outChannels+`; d2++) {

              if (`+o+`) {
                float xValue = getDy(batch, idyR, idyC, d2);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              } else {
                float xValue = getDy(batch, d2, idyR, idyC);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `},cQ=function(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;var t=e.strideDepth,n=e.strideHeight,r=e.strideWidth,A=e.padInfo.front,o=e.padInfo.top,i=e.padInfo.left;this.userCode=`
      void main() {
        ivec5 coords = getOutputCoords();
        int wF = coords.x;
        int wR = coords.y;
        int wC = coords.z;
        int d1 = coords.w;
        int d2 = coords.u;

        float dotProd = 0.0;

        for (int b = 0; b < `+e.batchSize+`; b++) {
          for (int yF = 0; yF < `+e.outDepth+`; yF++) {
            int xF = wF + yF * `+t+" - "+A+`;

            if (xF < 0 || xF >= `+e.inDepth+`) {
              continue;
            }

            for (int yR = 0; yR < `+e.outHeight+`; yR++) {
              int xR = wR + yR * `+n+" - "+o+`;

              if (xR < 0 || xR >= `+e.inHeight+`) {
                continue;
              }

              for (int yC = 0; yC < `+e.outWidth+`; yC++) {
                int xC = wC + yC * `+r+" - "+i+`;

                if (xC < 0 || xC >= `+e.inWidth+`) {
                  continue;
                }

                float dyValue = getDy(b, yF, yR, yC, d2);
                float xValue = getX(b, xF, xR, xC, d1);
                dotProd += (xValue * dyValue);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `},fQ=function(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;var t=e.filterDepth,n=e.filterHeight,r=e.filterWidth,A=e.strideDepth,o=e.strideHeight,i=e.strideWidth,a=t-1-e.padInfo.front,s=n-1-e.padInfo.top,u=r-1-e.padInfo.left;this.userCode=`
      const ivec3 pads = ivec3(`+a+", "+s+", "+u+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.u;


        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyFCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        float dotProd = 0.0;
        for (int wF = 0; wF < `+t+`; wF++) {
          float dyF = float(dyFCorner + wF) / `+A+`.0;

          if (dyF < 0.0 || dyF >= `+e.outDepth+`.0 || fract(dyF) > 0.0) {
            continue;
          }
          int idyF = int(dyF);

          int wFPerm = `+t+` - 1 - wF;

          for (int wR = 0; wR < `+n+`; wR++) {
            float dyR = float(dyRCorner + wR) / `+o+`.0;

            if (dyR < 0.0 || dyR >= `+e.outHeight+`.0 ||
              fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            int wRPerm = `+n+` - 1 - wR;

            for (int wC = 0; wC < `+r+`; wC++) {
              float dyC = float(dyCCorner + wC) / `+i+`.0;

              if (dyC < 0.0 || dyC >= `+e.outWidth+`.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              int wCPerm = `+r+` - 1 - wC;

              for (int d2 = 0; d2 < `+e.outChannels+`; d2++) {
                float xValue = getDy(batch, idyF, idyR, idyC, d2);
                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `},hQ=function(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;var t=e.strideHeight,n=e.strideWidth,r=e.padInfo.top,A=e.padInfo.left,o=e.outChannels/e.inChannels;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int dm = coords.w;
        int d2 = d1 * `+o+` + dm;

        float dotProd = 0.0;

        // TO DO: Vec4 over the batch size
        for (int b = 0; b < `+e.batchSize+`; b++) {
          for (int yR = 0; yR < `+e.outHeight+`; yR++) {
            int xR = wR + yR * `+t+" - "+r+`;

            if (xR < 0 || xR >= `+e.inHeight+`) {
              continue;
            }

            for (int yC = 0; yC < `+e.outWidth+`; yC++) {
              int xC = wC + yC * `+n+" - "+A+`;

              if (xC < 0 || xC >= `+e.inWidth+`) {
                continue;
              }

              float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);
            }
          }
        }
        setOutput(dotProd);
      }
    `},dQ=function(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;var t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,A=e.strideWidth,o=t-1-e.padInfo.top,i=n-1-e.padInfo.left,a=e.outChannels/e.inChannels;this.userCode=`
      const ivec2 pads = ivec2(`+o+", "+i+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];
        ivec2 dyCorner = coords.yz - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        float dotProd = 0.0;

        for (int wR = 0; wR < `+t+`; wR++) {
          float dyR = float(dyRCorner + wR) / `+r+`.0;

          if (dyR < 0.0 || dyR >= `+e.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = `+t+` - 1 - wR;

          for (int wC = 0; wC < `+n+`; wC++) {
            float dyC = float(dyCCorner + wC) / `+A+`.0;

            if (dyC < 0.0 || dyC >= `+e.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = `+n+` - 1 - wC;

            // TO DO: Vec4 over the channelMul
            for (int dm = 0; dm < `+a+`; dm++) {
              int d2 = d1 * `+a+` + dm;
              float xValue = getDy(batch, idyR, idyC, d2);
              float wValue = getW(wRPerm, wCPerm, d1, dm);
              dotProd += xValue * wValue;
            }
          }
        }
        setOutput(dotProd);
      }
    `},Zv=function(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=null),r===void 0&&(r=!1),this.variableNames=["x","W"],this.outputShape=e.outShape;var A=e.padInfo.top,o=e.padInfo.left,i=e.strideHeight,a=e.strideWidth,s=e.dilationHeight,u=e.dilationWidth,l=e.filterHeight,c=e.filterWidth,f=4*Math.floor(e.inChannels/4),h=e.inChannels%4,d=e.dataFormat==="channelsLast",g=d?1:2,m=d?2:3,p=d?3:1,v="",w="";n&&(v=r?`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          `+n+`
        }`:`
          float activation(float x) {
            `+n+`
          }
        `,w="result = activation(result);");var B=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+v+`

      const ivec2 strides = ivec2(`+i+", "+a+`);
      const ivec2 pads = ivec2(`+A+", "+o+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d2 = coords[`+p+`];

        ivec2 xRCCorner =
            ivec2(coords[`+g+"], coords["+m+`]) * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+l+`; wR++) {
          int xR = xRCorner + wR * `+s+`;

          if (xR < 0 || xR >= `+e.inHeight+`) {
            continue;
          }

          for (int wC = 0; wC < `+c+`; wC++) {
            int xC = xCCorner + wC * `+u+`;

            if (xC < 0 || xC >= `+e.inWidth+`) {
              continue;
            }

            for (int d1 = 0; d1 < `+f+`; d1 += 4) {
              vec4 wValues = vec4(
                getW(wR, wC, d1, d2),
                getW(wR, wC, d1 + 1, d2),
                getW(wR, wC, d1 + 2, d2),
                getW(wR, wC, d1 + 3, d2)
              );

              if (`+d+`) {
                vec4 xValues = vec4(
                  getX(batch, xR, xC, d1),
                  getX(batch, xR, xC, d1 + 1),
                  getX(batch, xR, xC, d1 + 2),
                  getX(batch, xR, xC, d1 + 3)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec4 xValues = vec4(
                  getX(batch, d1, xR, xC),
                  getX(batch, d1 + 1, xR, xC),
                  getX(batch, d1 + 2, xR, xC),
                  getX(batch, d1 + 3, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }
            }

            if (`+(h===1)+`) {

              if (`+d+`) {
                dotProd +=
                    getX(batch, xR, xC, `+f+`) *
                    getW(wR, wC, `+f+`, d2);
              } else {
                dotProd +=
                    getX(batch, `+f+`, xR, xC) *
                    getW(wR, wC, `+f+`, d2);
              }

            } else if (`+(h===2)+`) {
              vec2 wValues = vec2(
                getW(wR, wC, `+f+`, d2),
                getW(wR, wC, `+f+` + 1, d2)
              );

              if (`+d+`) {
                vec2 xValues = vec2(
                  getX(batch, xR, xC, `+f+`),
                  getX(batch, xR, xC, `+f+` + 1)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec2 xValues = vec2(
                  getX(batch, `+f+`, xR, xC),
                  getX(batch, `+f+` + 1, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            } else if (`+(h===3)+`) {
              vec3 wValues = vec3(
                getW(wR, wC, `+f+`, d2),
                getW(wR, wC, `+f+` + 1, d2),
                getW(wR, wC, `+f+` + 2, d2)
              );

              if (`+d+`) {
                vec3 xValues = vec3(
                  getX(batch, xR, xC, `+f+`),
                  getX(batch, xR, xC, `+f+` + 1),
                  getX(batch, xR, xC, `+f+` + 2)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec3 xValues = vec3(
                  getX(batch, `+f+`, xR, xC),
                  getX(batch, `+f+` + 1, xR, xC),
                  getX(batch, `+f+` + 2, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            }
          }
        }

        float result = dotProd;
        `+B+`
        `+w+`
        setOutput(result);
      }
    `},pQ=function(e){this.variableNames=["x","W"],this.outputShape=e.outShape;var t=e.padInfo.front,n=e.padInfo.top,r=e.padInfo.left,A=e.strideDepth,o=e.strideHeight,i=e.strideWidth,a=e.dilationDepth,s=e.dilationHeight,u=e.dilationWidth,l=e.filterDepth,c=e.filterHeight,f=e.filterWidth,h=4*Math.floor(e.inChannels/4),d=e.inChannels%4;this.userCode=`
      const ivec3 strides = ivec3(`+A+", "+o+", "+i+`);
      const ivec3 pads = ivec3(`+t+", "+n+", "+r+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d2 = coords.u;

        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xFCorner = xFRCCorner.x;
        int xRCorner = xFRCCorner.y;
        int xCCorner = xFRCCorner.z;

        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get
        // y(yF, yR, yC, d2). ? = to be determined. : = across all
        // values in that axis.
        float dotProd = 0.0;
        for (int wF = 0; wF < `+l+`; wF++) {
          int xF = xFCorner + wF * `+a+`;

          if (xF < 0 || xF >= `+e.inDepth+`) {
            continue;
          }

          for (int wR = 0; wR < `+c+`; wR++) {
            int xR = xRCorner + wR * `+s+`;

            if (xR < 0 || xR >= `+e.inHeight+`) {
              continue;
            }

            for (int wC = 0; wC < `+f+`; wC++) {
              int xC = xCCorner + wC * `+u+`;

              if (xC < 0 || xC >= `+e.inWidth+`) {
                continue;
              }

              for (int d1 = 0; d1 < `+h+`; d1 += 4) {
                vec4 xValues = vec4(
                  getX(batch, xF, xR, xC, d1),
                  getX(batch, xF, xR, xC, d1 + 1),
                  getX(batch, xF, xR, xC, d1 + 2),
                  getX(batch, xF, xR, xC, d1 + 3)
                );
                vec4 wValues = vec4(
                  getW(wF, wR, wC, d1, d2),
                  getW(wF, wR, wC, d1 + 1, d2),
                  getW(wF, wR, wC, d1 + 2, d2),
                  getW(wF, wR, wC, d1 + 3, d2)
                );

                dotProd += dot(xValues, wValues);
              }

              if (`+(d===1)+`) {
                dotProd +=
                  getX(batch, xF, xR, xC, `+h+`) *
                  getW(wF, wR, wC, `+h+`, d2);
              } else if (`+(d===2)+`) {
                vec2 xValues = vec2(
                  getX(batch, xF, xR, xC, `+h+`),
                  getX(batch, xF, xR, xC, `+h+` + 1)
                );
                vec2 wValues = vec2(
                  getW(wF, wR, wC, `+h+`, d2),
                  getW(wF, wR, wC, `+h+` + 1, d2)
                );
                dotProd += dot(xValues, wValues);
              } else if (`+(d===3)+`) {
                vec3 xValues = vec3(
                  getX(batch, xF, xR, xC, `+h+`),
                  getX(batch, xF, xR, xC, `+h+` + 1),
                  getX(batch, xF, xR, xC, `+h+` + 2)
                );
                vec3 wValues = vec3(
                  getW(wF, wR, wC, `+h+`, d2),
                  getW(wF, wR, wC, `+h+` + 1, d2),
                  getW(wF, wR, wC, `+h+` + 2, d2)
                );
                dotProd += dot(xValues, wValues);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `},em=function(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=null),r===void 0&&(r=!1),this.variableNames=["x","W"],this.outputShape=e.outShape;var A=e.inHeight,o=e.inWidth,i=e.padInfo.top,a=e.padInfo.left,s=e.strideHeight,u=e.strideWidth,l=e.dilationHeight,c=e.dilationWidth,f=e.filterHeight,h=e.filterWidth,d=e.outChannels/e.inChannels,g="",m="";n&&(g=r?`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          `+n+`
        }`:`
          float activation(float x) {
            `+n+`
          }
        `,m="result = activation(result);");var p=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+g+`

      const ivec2 strides = ivec2(`+s+", "+u+`);
      const ivec2 pads = ivec2(`+i+", "+a+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / `+d+`;
        int q = d2 - d1 * `+d+`;

        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.
        for (int wR = 0; wR < `+f+`; wR++) {
          int xR = xRCorner + wR * `+l+`;

          if (xR < 0 || xR >= `+A+`) {
            continue;
          }

          for (int wC = 0; wC < `+h+`; wC++) {
            int xC = xCCorner + wC * `+c+`;

            if (xC < 0 || xC >= `+o+`) {
              continue;
            }

            float xVal = getX(batch, xR, xC, d1);
            float wVal = getW(wR, wC, d1, q);
            dotProd += xVal * wVal;
          }
        }

        float result = dotProd;
        `+p+`
        `+m+`
        setOutput(result);
      }
    `},tm=function(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=null),r===void 0&&(r=!1),this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e.outShape;for(var A=e.inHeight,o=e.inWidth,i=e.padInfo.top,a=e.padInfo.left,s=e.strideHeight,u=e.strideWidth,l=e.dilationHeight,c=e.dilationWidth,f=e.filterHeight,h=e.filterWidth,d=h,g="int xR; int xC; int xCOffset;",m=0;m<f;m++)for(var p=0;p<h;p++)g+=`
          vec4 xTexelR`+m+"C"+2*p+` = vec4(0.);
          vec4 wR`+m+"C"+p+` = vec4(0.);
          vec4 xR`+m+"C"+p+" = vec4(0.);";for(m=0;m<f;m++)for(var v=0;v<d;v++){if(g+=`
          xR = xRCorner + `+m*l+`;
          xC = xCCorner + `+(p=2*v)*c+`;
        `,u===1){if(p<h&&(g+=a%2==1?`
                xCOffset = xC + 1;
                if(xR >= 0 && xR < `+A+" && xCOffset >= 0 && xCOffset < "+o+`) {
                  xTexelR`+m+"C"+p+` = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if(xCOffset + 1 >= `+o+`) {
                    xTexelR`+m+"C"+p+`.zw = vec2(0.);
                  }
                } else {
                  xTexelR`+m+"C"+p+` = vec4(0.);
                }

                xCOffset = xC + 1 - 2;
                if(xR >= 0 && xR < `+A+" && xCOffset >= 0 && xCOffset < "+o+`) {
                  vec4 previous = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if(xCOffset + 1 >= `+o+`) {
                    previous.zw = vec2(0.);
                  }

                  xR`+m+"C"+p+" = vec4(previous.zw, xTexelR"+m+"C"+p+`.xy);
                } else {
                  xR`+m+"C"+p+" = vec4(0, 0, xTexelR"+m+"C"+p+`.xy);
                }
              `:`
                if(xR >= 0 && xR < `+A+" && xC >= 0 && xC < "+o+`) {
                  xTexelR`+m+"C"+p+` = getX(batch, xR, xC, d1);
                } else {
                  xTexelR`+m+"C"+p+` = vec4(0.);
                }

                xR`+m+"C"+p+" = xTexelR"+m+"C"+p+`;
              `,p+1<h)){var w=a%2==0?iy(c):c;c%2==0&&a%2==1||c%2!=0&&a%2!=1?(g+=`
                  xCOffset = xC + `+a%2+" + "+w+`;

                  if(xR >= 0 && xR < `+A+` &&
                    xCOffset >= 0 && xCOffset < `+o+`) {
                    xTexelR`+m+"C"+(p+2)+` = getX(batch, xR, xCOffset, d1);
                  }
                `,c>1&&(g+=`
                    xCOffset -= 2;
                    if(xR >= 0 && xR < `+A+` &&
                      xCOffset >= 0 && xCOffset < `+o+`) {
                      xTexelR`+m+"C"+p+` = getX(batch, xR, xCOffset, d1);
                    } else {
                      xTexelR`+m+"C"+p+` = vec4(0.);
                    }
                  `),g+=`
                  xR`+m+"C"+(p+1)+` = vec4(
                    xTexelR`+m+"C"+p+".zw, xTexelR"+m+"C"+(p+2)+`.xy);
                `):g+=`
                  xCOffset = xC + `+w+`;

                  if(xR >= 0 && xR < `+A+` &&
                    xCOffset >= 0 && xCOffset < `+o+`) {
                    xTexelR`+m+"C"+(p+2)+` = getX(batch, xR, xCOffset, d1);
                  }

                  xR`+m+"C"+(p+1)+" = xTexelR"+m+"C"+(p+2)+`;
                `}}else p<h&&(g+=`
              if(xR >= 0 && xR < `+A+`) {
            `,a%2==1?(g+=`
                xCOffset = xC + 1 - `+u+`;
                if(xCOffset >= 0 && xCOffset < `+o+`) {
                  xTexelR`+m+"C"+p+` = getX(batch, xR, xCOffset, d1);
                } else {
                  xTexelR`+m+"C"+p+` = vec4(0.);
                }

                if(xC + 1 >= 0 && xC + 1 < `+o+`) {
                  xTexelR`+m+"C"+(p+2)+` = getX(batch, xR, xC + 1, d1);
                } else {
                  xTexelR`+m+"C"+(p+2)+` = vec4(0.);
                }

                xR`+m+"C"+p+` = vec4(
                  xTexelR`+m+"C"+p+".zw, xTexelR"+m+"C"+(p+2)+`.zw);
              `,p+1<h&&(g+=`
                  vec4 final = vec4(0.);
                  xCOffset = xC + 1 + `+u+`;
                  if(xCOffset >= 0 && xCOffset < `+o+`) {
                    final = getX(batch, xR, xCOffset, d1);
                  }
                  xR`+m+"C"+(p+1)+" = vec4(xTexelR"+m+"C"+(p+2)+`.xy, final.xy);
                `)):(g+=`
                if(xC >= 0 && xC < `+o+`) {
                  xTexelR`+m+"C"+p+` = getX(batch, xR, xC, d1);
                } else {
                  xTexelR`+m+"C"+p+` = vec4(0.);
                }

                xCOffset = xC + `+u+`;
                if(xCOffset >= 0 && xCOffset < `+o+`) {
                  xTexelR`+m+"C"+(p+2)+` = getX(batch, xR, xCOffset, d1);
                } else {
                  xTexelR`+m+"C"+(p+2)+` = vec4(0.);
                }

                xR`+m+"C"+p+` = vec4(
                  xTexelR`+m+"C"+p+".xy, xTexelR"+m+"C"+(p+2)+`.xy);
              `,p+1<h&&(g+=`
                  xR`+m+"C"+(p+1)+` = vec4(
                    xTexelR`+m+"C"+p+".zw, xTexelR"+m+"C"+(p+2)+`.zw);
                `)),g+="}");p<h&&(g+=`
            vec4 wTexelR`+m+"C"+p+" = getW("+m+", "+p+`, d1, q);
            wR`+m+"C"+p+" = vec4(wTexelR"+m+"C"+p+".xz, wTexelR"+m+"C"+p+`.xz);
          `,p+1<h&&(g+=`
              vec4 wTexelR`+m+"C"+(p+1)+" = getW("+m+", "+(p+1)+`, d1, q);
              wR`+m+"C"+(p+1)+` =
                vec4(wTexelR`+m+"C"+(p+1)+".xz, wTexelR"+m+"C"+(p+1)+".xz);"))}for(m=0;m<f;m++)for(p=0;p<h;p++)g+="dotProd += xR"+m+"C"+p+" * wR"+m+"C"+p+";";var B="",y="";n&&(B=r?`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          `+n+`
        }`:`vec4 activation(vec4 x) {
          `+n+`
        }`,y="result = activation(result);");var C=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+B+`

      const ivec2 strides = ivec2(`+s+", "+u+`);
      const ivec2 pads = ivec2(`+i+", "+a+`);

      void main() {

        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2;
        int q = 0;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        vec4 dotProd = vec4(0.);

        `+g+`

        vec4 result = dotProd;
        `+C+`
        `+y+`
        setOutput(result);
      }
    `},gQ=function(e,t,n,r,A){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];var o=e[0],i=e[1],a=e[2],s=e[3],u=t[0],l=n[0],c=n[1];this.outputShape=[u,l,c,s];var f=r==="bilinear"?1:0,h=[i-1+".0",a-1+".0"],d=h[0],g=h[1],m=l>1?[""+(i-1)/(l-1),"(y2-y1) * height_ratio","y1*"+d+" + float(y)*(height_scale)"]:["0.0","0.0","0.5 * (y1+y2) * "+d],p=m[0],v=m[1],w=m[2],B=c>1?[""+(a-1)/(c-1),"(x2-x1) * width_ratio","x1*"+g+" + float(x)*(width_scale)"]:["0.0","0.0","0.5 * (x1+x2) * "+g],y=B[0],C=B[1],b=B[2];this.userCode=`
      const float height_ratio = float(`+p+`);
      const float width_ratio = float(`+y+`);
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int y = coords[1];
        int x = coords[2];
        int d = coords[3];

        // get box vals
        float y1 = getBoxes(b,0);
        float x1 = getBoxes(b,1);
        float y2 = getBoxes(b,2);
        float x2 = getBoxes(b,3);

        // get image in batch index
        int bInd = round(getBoxInd(b));
        if(bInd < 0 || bInd >= `+o+`) {
          return;
        }

        float height_scale = `+v+`;
        float width_scale = `+C+`;

        float in_y = `+w+`;
        if( in_y < 0.0 || in_y > `+d+` ) {
          setOutput(float(`+A+`));
          return;
        }
        float in_x = `+b+`;
        if( in_x < 0.0 || in_x > `+g+` ) {
          setOutput(float(`+A+`));
          return;
        }

        vec2 sourceFracIndexCR = vec2(in_x,in_y);
        if(`+f+` == 1) {
          // Compute the four integer indices.
          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);
          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));

          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);
          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);
          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);
          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);

          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);

          float top = topLeft + (topRight - topLeft) * fracCR.x;
          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;
          float newValue = top + (bottom - top) * fracCR.y;
          setOutput(newValue);
        } else {
          // Compute the coordinators of nearest neighbor point.
          ivec2 sourceNearestCR = ivec2(floor(
            sourceFracIndexCR + vec2(0.5,0.5)));
          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);
          setOutput(newValue);
        }
      }
    `},vQ=function(e,t,n){this.variableNames=["x"],this.outputShape=e;var r=e.length,A=e[e.length-1],o=n?"<":">";this.userCode=`
      int getIndex(int i) {
        `+(n?"return "+A+" -i - 1;":"return i;")+`
      }

      void main() {
        `+De(r)+` coords = getOutputCoords();
        int end = `+nm(r,"coords")+`;
        float val = 0.0;
        for (int i = `+A+` - 1; i >= 0; i -= 1) {
          int idx = getIndex(i);
          if (idx `+o+` end) {
            continue;
          }
          if (idx == end && `+t+`) {
            continue;
          }
          `+nm(r,"coords")+` = idx;
          val += getX(`+function(i,a){if(i===1)return""+a;if(i===2)return a+".x, "+a+".y";if(i===3)return a+".x, "+a+".y, "+a+".z";if(i===4)return a+".x, "+a+".y, "+a+".z, "+a+".w";throw Error("Cumulative sum for rank "+i+" is not yet supported")}(r,"coords")+`);
        }
        setOutput(val);
      }
    `};function nm(e,t){if(e===1)return""+t;if(e===2)return t+".y";if(e===3)return t+".z";if(e===4)return t+".w";throw Error("Cumulative sum for rank "+e+" is not yet supported")}var mQ=function(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=ka.DENSE;var t=oa(e),n=Rt();this.outputShape=e,this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        `+KA(["r","c","d"],e)+`
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx *
          vec2(`+t[0]+", "+t[1]+`));
        int index = 4 * (resTexRC.x * `+t[1]+` + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getA(rc.x, rc.y, rc.z);
        }

        `+n.output+` = result;
      }
    `},wQ=function(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=ka.DENSE;var t=oa(e),n=Rt();this.outputShape=e,this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        `+KA(["r","c","d"],e)+`
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx *
          vec2(`+t[0]+", "+t[1]+`));
        int index = 4 * (resTexRC.x * `+t[1]+` + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));
        }

        `+n.output+` = result;
      }
    `},BQ=function(){function e(t,n,r){this.variableNames=["x"],this.outputShape=[],this.outputShape=t,this.blockSize=n,this.dataFormat=r,this.userCode=`
    void main() {
      ivec4 coords = getOutputCoords();
      int b = coords[0];
      int h = `+this.getHeightCoordString()+`;
      int w = `+this.getWidthCoordString()+`;
      int d = `+this.getDepthCoordString()+`;

      int in_h = h / `+n+`;
      int offset_h = imod(h, `+n+`);
      int in_w = w / `+n+`;
      int offset_w = imod(w, `+n+`);
      int offset_d = (offset_h * `+n+` + offset_w) *
        `+this.getOutputDepthSize()+`;
      int in_d = d + offset_d;

      float result = `+this.getInputSamplingString()+`;
      setOutput(result);
    }
  `}return e.prototype.getHeightCoordString=function(){return this.dataFormat==="NHWC"?"coords[1]":"coords[2]"},e.prototype.getWidthCoordString=function(){return this.dataFormat==="NHWC"?"coords[2]":"coords[3]"},e.prototype.getDepthCoordString=function(){return this.dataFormat==="NHWC"?"coords[3]":"coords[1]"},e.prototype.getOutputDepthSize=function(){return this.dataFormat==="NHWC"?this.outputShape[3]:this.outputShape[1]},e.prototype.getInputSamplingString=function(){return this.dataFormat==="NHWC"?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"},e}(),yQ=function(e){this.variableNames=["X"],this.outputShape=[e,e],this.userCode=`
      void main() {
          ivec2 coords = getOutputCoords();
          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;
          setOutput(val);
      }
    `},CQ=function(e){this.variableNames=["A"],this.outTexUsage=ln.DOWNLOAD;var t=Rt();this.outputShape=e,this.userCode=`
      `+My+`

      void main() {
        float x = getAAtOutCoords();
        `+t.output+` = encode_float(x);
      }
    `},xQ=function(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=ln.DOWNLOAD;var t=Rt();this.outputShape=e,this.userCode=`
      `+My+`

      void main() {
        ivec3 coords = getOutputCoords();
        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));
        `+t.output+` = encode_float(x);
      }
    `},FQ=function(e,t,n){n===void 0&&(n=!1),this.variableNames=["A"];var r=Rt(),A=t[0],o=t[1];this.outputShape=e;var i="result";n&&(i="floor(result * 255. + 0.5)"),this.userCode=`
      `+Ip(e)+`

      void main() {
        ivec3 coords = getOutputCoords();

        int flatIndex = getFlatIndex(coords);
        int offset = imod(flatIndex, 4);

        flatIndex = idiv(flatIndex, 4, 1.);
        
        int r = flatIndex / `+o+`;
        int c = imod(flatIndex, `+o+`);
        vec2 uv = (vec2(c, r) + halfCR) / vec2(`+o+".0, "+A+`.0);
        vec4 values = `+r.texture2D+`(A, uv);

        float result;

        if(offset == 0) {
          result = values[0];
        } else if(offset == 1) {
          result = values[1];
        } else if(offset == 2) {
          result = values[2];
        } else {
          result = values[3];
        }

        `+r.output+" = vec4("+i+`, 0., 0., 0.);
      }
    `},bQ=function(e,t,n){n===void 0&&(n=!1),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var r=Rt(),A=t[0],o=t[1];this.outputShape=e;var i="",a="result";n&&(a="floor(result * 255. + 0.5)");for(var s=0;s<=1;s++)for(var u=0;u<=1;u++){var l=2*s+u;i+=`
          localCoords = coords;
          if(localCoords[2] + `+u+" < "+e[2]+`) {
            localCoords[2] += `+u+`;
            if(localCoords[1] + `+s+" < "+e[1]+`) {
              localCoords[1] += `+s+`;

              flatIndex = getFlatIndex(localCoords);
              offset = imod(flatIndex, 4);

              flatIndex = idiv(flatIndex, 4, 1.);

              r = flatIndex / `+o+`;
              c = imod(flatIndex, `+o+`);
              uv = (vec2(c, r) + halfCR) / vec2(`+o+".0, "+A+`.0);
              values = `+r.texture2D+`(A, uv);

              if(offset == 0) {
                result[`+l+`] = values[0];
              } else if(offset == 1) {
                result[`+l+`] = values[1];
              } else if(offset == 2) {
                result[`+l+`] = values[2];
              } else {
                result[`+l+`] = values[3];
              }
            }
          }
        `}this.userCode=`
      `+Ip(e)+`

      void main() {
        ivec3 coords = getOutputCoords();

        vec4 result = vec4(0.);
        int flatIndex, r, c, offset;
        ivec3 localCoords;
        vec2 uv;
        vec4 values;

        `+i+`

        `+r.output+" = "+a+`;
      }
    `},EQ="return real * expR - imag * expI;",QQ="return real * expI + imag * expR;",rm=function(e,t,n){this.variableNames=["real","imag"];var r=t[1];this.outputShape=t;var A=n?"2.0 * "+Math.PI:"-2.0 * "+Math.PI,o=n?r+".0":"1.0";this.userCode=`
      const float exponentMultiplier = `+A+`;

      float unaryOpComplex(float real, float expR, float imag, float expI) {
        `+e+`
      }

      float mulMatDFT(int batch, int index) {
        float indexRatio = float(index) / float(`+r+`);
        float exponentMultiplierTimesIndexRatio =
            exponentMultiplier * indexRatio;

        float result = 0.0;

        for (int i = 0; i < `+r+`; i++) {
          // x = (-2|2 * PI / N) * index * i;
          float x = exponentMultiplierTimesIndexRatio * float(i);
          float expR = cos(x);
          float expI = sin(x);
          float real = getReal(batch, i);
          float imag = getImag(batch, i);

          result +=
              unaryOpComplex(real, expR, imag, expI) / `+o+`;
        }

        return result;
      }

      void main() {
        ivec2 coords = getOutputCoords();
        setOutput(mulMatDFT(coords[0], coords[1]));
      }
    `},UQ=function(){function e(t,n){this.outputShape=[],this.variableNames=["x"],this.outputShape=t,this.userCode=`
      uniform float value;
      void main() {
        // Input can be obtained from uniform value.
        setOutput(value);
      }
    `}return e.prototype.getCustomSetupFunc=function(t){var n=this;return function(r,A){n.valueLoc==null&&(n.valueLoc=r.getUniformLocationNoThrow(A,"value")),r.gl.uniform1f(n.valueLoc,t)}},e}(),IQ=function(e,t,n){this.variableNames=["A","indices"];var r=e.slice();r[n]=t,this.outputShape=r,this.rank=r.length;var A=De(this.rank),o=function(i,a){var s=i.length;if(s>4)throw Error("Gather for rank "+s+" is not yet supported");if(s===1)return"int(getIndices(resRC))";for(var u=["resRC.x","resRC.y","resRC.z","resRC.w"],l=[],c=0;c<i.length;c++)c===a?l.push("int(getIndices("+u[c]+"))"):l.push(""+u[c]);return l.join()}(e,n);this.userCode=`
      void main() {
        `+A+` resRC = getOutputCoords();
        setOutput(getA(`+o+`));
      }
    `},SQ=function(e,t,n){this.sliceDim=e,this.strides=t,this.variableNames=["x","indices"],this.outputShape=n;var r=De(t.length),A=De(n.length),o=this.sliceDim>1?"strides[j]":"strides";this.userCode=`
        `+r+" strides = "+r+"("+this.strides+`);
         void main() {
          `+A+` coords = getOutputCoords();
          int flattenIndex = 0;
          for (int j = 0; j < `+this.sliceDim+`; j++) {
            int index = round(getIndices(coords[0], j));
            flattenIndex += index * `+o+`;
          }
          setOutput(getX(flattenIndex, coords[1]));
        }
      `};function _Q(e,t){var n=Rt();return EE(e,t,n.version+`
    precision highp float;
    `+n.attribute+` vec3 clipSpacePos;
    `+n.attribute+` vec2 uv;
    `+n.varyingVs+` vec2 resultUV;

    void main() {
      gl_Position = vec4(clipSpacePos, 1);
      resultUV = uv;
    }`)}function kQ(e,t){return _E(e,t,new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]))}function DQ(e,t){return kE(e,t,new Uint16Array([0,1,2,2,1,3]))}function $a(e,t,n,r,A,o,i){RE(n,r);var a=DE(e,t),s=e.TEXTURE_2D;return re(e,t,function(){return e.bindTexture(s,a)}),re(e,t,function(){return e.texParameteri(s,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE)}),re(e,t,function(){return e.texParameteri(s,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)}),re(e,t,function(){return e.texParameteri(s,e.TEXTURE_MIN_FILTER,e.NEAREST)}),re(e,t,function(){return e.texParameteri(s,e.TEXTURE_MAG_FILTER,e.NEAREST)}),re(e,t,function(){return e.texImage2D(s,0,A,n,r,0,o,i,null)}),re(e,t,function(){return e.bindTexture(e.TEXTURE_2D,null)}),a}function RQ(e,t,n,r,A){var o=Ml(n,r);return $a(e,t,o[0],o[1],A.internalFormatFloat,A.textureFormatFloat,e.FLOAT)}function TQ(e,t,n,r,A){var o=Ml(n,r);return $a(e,t,o[0],o[1],A.internalFormatHalfFloat,A.textureFormatFloat,A.textureTypeHalfFloat)}function HQ(e,t,n,r,A){var o=Ml(n,r);return $a(e,t,o[0],o[1],e.RGBA,e.RGBA,e.UNSIGNED_BYTE)}function NQ(e,t,n,r,A){var o=Xa(n,r);return $a(e,t,o[0],o[1],A.internalFormatPackedFloat,e.RGBA,e.FLOAT)}function LQ(e,t,n,r,A){var o=Xa(n,r);return $a(e,t,o[0],o[1],A.internalFormatPackedHalfFloat,e.RGBA,A.textureTypeHalfFloat)}function MQ(e,t,n,r){return re(e,t,function(){return e.bindBuffer(e.ARRAY_BUFFER,r)}),Wv(e,t,n,"clipSpacePos",r,3,20,0)&&Wv(e,t,n,"uv",r,2,20,12)}function OQ(e,t,n,r,A,o,i){var a,s,u;re(e,t,function(){return e.bindTexture(e.TEXTURE_2D,n)}),o instanceof Uint8Array?(a=new Uint8Array(r*A*4),s=e.UNSIGNED_BYTE,u=e.RGBA):(a=new Float32Array(r*A*4),s=e.FLOAT,u=i.internalFormatPackedFloat),a.set(o),re(e,t,function(){return e.texImage2D(e.TEXTURE_2D,0,u,r,A,0,e.RGBA,s,a)}),re(e,t,function(){return e.bindTexture(e.TEXTURE_2D,null)})}function PQ(e,t,n,r){re(e,t,function(){return e.bindTexture(e.TEXTURE_2D,n)}),r.data instanceof Uint8Array?re(e,t,function(){return e.texImage2D(e.TEXTURE_2D,0,e.RGBA,r.width,r.height,0,e.RGBA,e.UNSIGNED_BYTE,r.data)}):re(e,t,function(){return e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,r)}),re(e,t,function(){return e.bindTexture(e.TEXTURE_2D,null)})}function KQ(e,t,n,r,A){var o=e.createBuffer();re(e,t,function(){return e.bindBuffer(e.PIXEL_PACK_BUFFER,o)});var i=16*n*r;return re(e,t,function(){return e.bufferData(e.PIXEL_PACK_BUFFER,i,e.STREAM_READ)}),re(e,t,function(){return e.readPixels(0,0,r,n,e.RGBA,e.FLOAT,0)}),re(e,t,function(){return e.bindBuffer(e.PIXEL_PACK_BUFFER,null)}),o}function VQ(e,t,n){var r=e,A=new Float32Array(n);return r.bindBuffer(r.PIXEL_PACK_BUFFER,t),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,A),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),A}function WQ(e,t,n,r,A){var o=Ml(n,r),i=o[0],a=o[1],s=new Uint8Array(n*r*4);return re(e,t,function(){return e.readPixels(0,0,i,a,A.downloadTextureFormat,e.UNSIGNED_BYTE,s)}),new Float32Array(s.buffer)}function GQ(e,t,n,r,A,o,i,a){var s=e,u=new Float32Array(function(l,c){var f=Xa(l,c);return f[0]*f[1]*4}(o,i));return s.bindBuffer(s.PIXEL_PACK_BUFFER,t),s.getBufferSubData(s.PIXEL_PACK_BUFFER,0,u),s.bindBuffer(s.PIXEL_PACK_BUFFER,null),u}function zQ(e,t,n,r){var A=new Float32Array(n*r*4);return re(e,t,function(){return e.readPixels(0,0,r,n,e.RGBA,e.FLOAT,A)}),A}var XQ=function(){function e(t){this.outputTexture=null,this.program=null,this.disposed=!1,this.vertexAttrsAreBound=!1,this.itemsToPoll=[];var n=V().getNumber("WEBGL_VERSION");t!=null?(this.gl=t,yE(n,t)):this.gl=cr(n);var r="WEBGL_color_buffer_float";if(V().getNumber("WEBGL_VERSION")===1){if(this.textureFloatExtension=Bs(this.gl,this.debug,"OES_texture_float"),bn(this.gl,"OES_texture_half_float"))this.textureHalfFloatExtension=Bs(this.gl,this.debug,"OES_texture_half_float");else if(V().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(r),bn(this.gl,"EXT_color_buffer_half_float"))this.colorBufferHalfFloatExtension=Bs(this.gl,this.debug,"EXT_color_buffer_half_float");else if(V().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(r="EXT_color_buffer_float",bn(this.gl,r))this.colorBufferFloatExtension=this.gl.getExtension(r);else{if(!bn(this.gl,"EXT_color_buffer_half_float"))throw new Error("GL context does not support color renderable floats");this.colorBufferHalfFloatExtension=this.gl.getExtension("EXT_color_buffer_half_float")}this.vertexBuffer=kQ(this.gl,this.debug),this.indexBuffer=DQ(this.gl,this.debug),this.framebuffer=TE(this.gl,this.debug),this.textureConfig=wp(this.gl,this.textureHalfFloatExtension)}return Object.defineProperty(e.prototype,"debug",{get:function(){return V().getBool("DEBUG")},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){var t=this;if(!this.disposed){this.program!=null&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),this.outputTexture!=null&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");var n=this.gl;re(n,this.debug,function(){return n.finish()}),re(n,this.debug,function(){return n.bindFramebuffer(n.FRAMEBUFFER,null)}),re(n,this.debug,function(){return n.deleteFramebuffer(t.framebuffer)}),re(n,this.debug,function(){return n.bindBuffer(n.ARRAY_BUFFER,null)}),re(n,this.debug,function(){return n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,null)}),re(n,this.debug,function(){return n.deleteBuffer(t.indexBuffer)}),this.disposed=!0}},e.prototype.createFloat32MatrixTexture=function(t,n){return this.throwIfDisposed(),RQ(this.gl,this.debug,t,n,this.textureConfig)},e.prototype.createFloat16MatrixTexture=function(t,n){return this.throwIfDisposed(),TQ(this.gl,this.debug,t,n,this.textureConfig)},e.prototype.createUnsignedBytesMatrixTexture=function(t,n){return this.throwIfDisposed(),HQ(this.gl,this.debug,t,n,this.textureConfig)},e.prototype.uploadPixelDataToTexture=function(t,n){this.throwIfDisposed(),PQ(this.gl,this.debug,t,n)},e.prototype.uploadDenseMatrixToTexture=function(t,n,r,A){this.throwIfDisposed(),OQ(this.gl,this.debug,t,n,r,A,this.textureConfig)},e.prototype.createFloat16PackedMatrixTexture=function(t,n){return this.throwIfDisposed(),LQ(this.gl,this.debug,t,n,this.textureConfig)},e.prototype.createPackedMatrixTexture=function(t,n){return this.throwIfDisposed(),NQ(this.gl,this.debug,t,n,this.textureConfig)},e.prototype.deleteMatrixTexture=function(t){var n=this;this.throwIfDisposed(),this.outputTexture===t&&(Gv(this.gl,this.debug,this.framebuffer),this.outputTexture=null),re(this.gl,this.debug,function(){return n.gl.deleteTexture(t)})},e.prototype.downloadByteEncodedFloatMatrixFromOutputTexture=function(t,n,r){var A=this;return this.downloadMatrixDriver(t,function(){return WQ(A.gl,A.debug,n,r,A.textureConfig)})},e.prototype.downloadPackedMatrixFromBuffer=function(t,n,r,A,o,i){return GQ(this.gl,t,0,0,0,o,i,this.textureConfig)},e.prototype.downloadFloat32MatrixFromBuffer=function(t,n){return VQ(this.gl,t,n)},e.prototype.createBufferFromTexture=function(t,n,r){this.bindTextureToFrameBuffer(t);var A=KQ(this.gl,this.debug,n,r,this.textureConfig);return this.unbindTextureToFrameBuffer(),A},e.prototype.createAndWaitForFence=function(){var t=this.createFence(this.gl);return this.pollFence(t)},e.prototype.createFence=function(t){var n,r,A=this;if(V().getBool("WEBGL_FENCE_API_ENABLED")){var o=t,i=o.fenceSync(o.SYNC_GPU_COMMANDS_COMPLETE,0);t.flush(),r=function(){var a=o.clientWaitSync(i,0,0);return a===o.ALREADY_SIGNALED||a===o.CONDITION_SATISFIED},n=i}else V().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(n=this.beginQuery(),this.endQuery(),r=function(){return A.isQueryAvailable(n,V().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}):r=function(){return!0};return{query:n,isFencePassed:r}},e.prototype.downloadMatrixFromPackedTexture=function(t,n,r){var A=this;return this.downloadMatrixDriver(t,function(){return zQ(A.gl,A.debug,n,r)})},e.prototype.createProgram=function(t){this.throwIfDisposed();var n=this.gl,r=QE(n,this.debug,t),A=_Q(n,this.debug),o=IE(n,this.debug);return re(n,this.debug,function(){return n.attachShader(o,A)}),re(n,this.debug,function(){return n.attachShader(o,r)}),SE(n,this.debug,o),this.debug&&$c(n,this.debug,o),this.vertexAttrsAreBound||(this.setProgram(o),this.vertexAttrsAreBound=MQ(n,this.debug,this.program,this.vertexBuffer)),o},e.prototype.deleteProgram=function(t){var n=this;this.throwIfDisposed(),t===this.program&&(this.program=null),t!=null&&re(this.gl,this.debug,function(){return n.gl.deleteProgram(t)})},e.prototype.setProgram=function(t){var n=this;this.throwIfDisposed(),this.program=t,this.program!=null&&this.debug&&$c(this.gl,this.debug,this.program),re(this.gl,this.debug,function(){return n.gl.useProgram(t)})},e.prototype.getUniformLocation=function(t,n,r){return r===void 0&&(r=!0),this.throwIfDisposed(),r?NE(this.gl,this.debug,t,n):LE(this.gl,t,n)},e.prototype.getAttributeLocation=function(t,n){var r=this;return this.throwIfDisposed(),re(this.gl,this.debug,function(){return r.gl.getAttribLocation(t,n)})},e.prototype.getUniformLocationNoThrow=function(t,n){return this.throwIfDisposed(),this.gl.getUniformLocation(t,n)},e.prototype.setInputMatrixTexture=function(t,n,r){this.throwIfDisposed(),this.throwIfNoProgram(),ME(this.gl,this.debug,this.program,t,n,r)},e.prototype.setOutputMatrixTexture=function(t,n,r){this.setOutputMatrixTextureDriver(t,r,n)},e.prototype.setOutputPackedMatrixTexture=function(t,n,r){this.throwIfDisposed();var A=Xa(n,r),o=A[0],i=A[1];this.setOutputMatrixTextureDriver(t,o,i)},e.prototype.setOutputMatrixWriteRegion=function(t,n,r,A){this.setOutputMatrixWriteRegionDriver(r,t,A,n)},e.prototype.setOutputPackedMatrixWriteRegion=function(t,n,r,A){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")},e.prototype.debugValidate=function(){this.program!=null&&$c(this.gl,this.debug,this.program),ys(this.gl)},e.prototype.executeProgram=function(){this.throwIfDisposed(),this.throwIfNoProgram();var t=this.gl;this.debug&&this.debugValidate(),re(t,this.debug,function(){return t.drawElements(t.TRIANGLES,6,t.UNSIGNED_SHORT,0)})},e.prototype.blockUntilAllProgramsCompleted=function(){var t=this;this.throwIfDisposed(),re(this.gl,this.debug,function(){return t.gl.finish()})},e.prototype.getQueryTimerExtension=function(){return this.disjointQueryTimerExtension==null&&(this.disjointQueryTimerExtension=Bs(this.gl,this.debug,V().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension},e.prototype.getQueryTimerExtensionWebGL2=function(){return this.getQueryTimerExtension()},e.prototype.getQueryTimerExtensionWebGL1=function(){return this.getQueryTimerExtension()},e.prototype.beginQuery=function(){if(V().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){var t=this.gl,n=this.getQueryTimerExtensionWebGL2(),r=t.createQuery();return t.beginQuery(n.TIME_ELAPSED_EXT,r),r}var A=this.getQueryTimerExtensionWebGL1(),o=A.createQueryEXT();return A.beginQueryEXT(A.TIME_ELAPSED_EXT,o),o},e.prototype.endQuery=function(){if(V().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")!==2){var t=this.getQueryTimerExtensionWebGL1();t.endQueryEXT(t.TIME_ELAPSED_EXT)}else{var n=this.gl,r=this.getQueryTimerExtensionWebGL2();n.endQuery(r.TIME_ELAPSED_EXT)}},e.prototype.waitForQueryAndGetTime=function(t){return ee(this,void 0,void 0,function(){var n=this;return te(this,function(r){switch(r.label){case 0:return[4,Lv(function(){return n.disposed||n.isQueryAvailable(t,V().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))})];case 1:return r.sent(),[2,this.getQueryTime(t,V().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))]}})})},e.prototype.getQueryTime=function(t,n){if(n===0)return null;if(n===2){var r=this.gl;return r.getQueryParameter(t,r.QUERY_RESULT)/1e6}var A=this.getQueryTimerExtensionWebGL1();return A.getQueryObjectEXT(t,A.QUERY_RESULT_EXT)/1e6},e.prototype.isQueryAvailable=function(t,n){if(n===0)return!0;if(n===2){var r=this.gl,A=this.getQueryTimerExtensionWebGL2(),o=r.getQueryParameter(t,r.QUERY_RESULT_AVAILABLE);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(A.GPU_DISJOINT_EXT)),o&&!this.disjoint}return o=(A=this.getQueryTimerExtensionWebGL1()).getQueryObjectEXT(t,A.QUERY_RESULT_AVAILABLE_EXT),this.disjoint==null&&(this.disjoint=this.gl.getParameter(A.GPU_DISJOINT_EXT)),o&&!this.disjoint},e.prototype.pollFence=function(t){var n=this;return new Promise(function(r){n.addItemToPoll(function(){return t.isFencePassed()},function(){return r()})})},e.prototype.pollItems=function(){for(var t=function(r){for(var A=0;A<r.length&&r[A]();++A);return A-1}(this.itemsToPoll.map(function(r){return r.isDoneFn})),n=0;n<=t;++n)(0,this.itemsToPoll[n].resolveFn)();this.itemsToPoll=this.itemsToPoll.slice(t+1)},e.prototype.addItemToPoll=function(t,n){var r=this;this.itemsToPoll.push({isDoneFn:t,resolveFn:n}),this.itemsToPoll.length>1||Lv(function(){return r.pollItems(),r.itemsToPoll.length===0})},e.prototype.bindTextureToFrameBuffer=function(t){this.throwIfDisposed(),jc(this.gl,this.debug,t,this.framebuffer),this.debug&&ys(this.gl)},e.prototype.unbindTextureToFrameBuffer=function(){this.outputTexture!=null?(jc(this.gl,this.debug,this.outputTexture,this.framebuffer),this.debug&&ys(this.gl)):Gv(this.gl,this.debug,this.framebuffer)},e.prototype.downloadMatrixDriver=function(t,n){this.bindTextureToFrameBuffer(t);var r=n();return this.unbindTextureToFrameBuffer(),r},e.prototype.setOutputMatrixTextureDriver=function(t,n,r){this.throwIfDisposed();var A=this.gl;jc(A,this.debug,t,this.framebuffer),this.debug&&ys(A),this.outputTexture=t,re(A,this.debug,function(){return A.viewport(0,0,n,r)}),re(A,this.debug,function(){return A.scissor(0,0,n,r)})},e.prototype.setOutputMatrixWriteRegionDriver=function(t,n,r,A){var o=this;this.throwIfDisposed(),re(this.gl,this.debug,function(){return o.gl.scissor(t,n,r,A)})},e.prototype.throwIfDisposed=function(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")},e.prototype.throwIfNoProgram=function(){if(this.program==null)throw new Error("No GPU program is currently set.")},e}();function Am(e,t){if(e.length!==t.length)throw Error("Binary was compiled with "+e.length+" inputs, but was executed with "+t.length+" inputs");e.forEach(function(n,r){var A=n.logicalShape,o=t[r],i=o.shape;if(!vt(A,i))throw Error("Binary was compiled with different shapes than the current args. Shapes "+A+" and "+i+" must match");if(!n.isUniform||!o.isUniform){var a=n.texShape,s=o.isUniform?null:o.texData.texShape;if(!vt(a,s))throw Error("Binary was compiled with different texture shapes than the current args. Shape "+a+" and "+s+" must match")}})}var $Q=function(e,t,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e;for(var r=n.filterWidth,A=n.inChannels,o=n.strideWidth,i=n.strideHeight,a=n.padInfo,s=n.outWidth,u=n.dilationWidth,l=n.dilationHeight,c=n.dataFormat,f=a.left,h=a.top,d=A*r,g=Rt(),m=c==="channelsLast",p=m?0:1,v=m?1:2,w="",B=0;B<=1;B++)for(var y=0;y<=1;y++)w+=`
          blockIndex = rc.y + `+y+`;
          pos = rc.x + `+B+`;

          if(blockIndex < `+e[1]+" && pos < "+e[0]+`) {
            offsetY = int(blockIndex / (`+s+")) * "+i+" - "+h+`;
            d0 = offsetY + `+l+" * (pos / "+d+`);

            if(d0 < `+t[p]+` && d0 >= 0) {

              offsetX = int(mod(float(blockIndex), `+s+".) * "+o+". - "+f+`.);
              d1 = offsetX + `+u+" * (int(mod(float(pos), "+d+".) / "+A+`.));

              if(d1 < `+t[v]+` && d1 >= 0) {

                ch = int(mod(float(pos), `+A+`.));

                if (`+m+`) {
                  innerDims = vec2(d1, ch);
                  result[`+(2*B+y)+`] = getChannel(
                    getA(d0, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                } else {
                  innerDims = vec2(d0, d1);
                  result[`+(2*B+y)+`] = getChannel(
                    getA(ch, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                }
              }
            }
          }
        `;this.userCode=`
      void main() {
        ivec2 rc = getOutputCoords();

        vec4 result = vec4(0);

        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
        vec2 innerDims;

        `+w+`

        `+g.output+` = result;
      }
    `},jQ=function(e,t,n,r,A){this.variableNames=["x"],this.outputShape=[];var o,i=t,a=e[3]-1;this.outputShape=e;var s="float("+n+") + float("+r+") * sum";o=A===.5?"inversesqrt("+s+")":A===1?"1.0/("+s+")":"exp(log("+s+") * float(-"+A+"));",this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];
        int d = coords[3];
        float x = getX(b, r, c, d);
        float sum = 0.0;
        for (int j = -`+i+"; j <= "+i+`; j++) {
          int idx = d + j;
          if (idx >= 0 && idx <=  `+a+`) {
            float z = getX(b, r, c, idx);
            sum += z * z;
          }
        }
        float val = x * `+o+`;
        setOutput(val);
      }
    `},YQ=function(e,t,n,r,A){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=e,this.depth=e[3],this.depthRadius=t,this.bias=n,this.alpha=r,this.beta=A,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];

        float result = 0.0;
        for (int d = 0; d < `+this.depth+`; ++d) {
          int depthBegin = int(max(0.0, float(d - `+t+`)));
          int depthEnd = int(min(float(`+this.depth+`),
              float(d + `+t+` + 1)));

          const int MIN_DEPTH_BEGIN = 0;
          const int MAX_DEPTH_END = `+this.depth+`;

          float norm = 0.0;
          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd) {
              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);
            }
            else {
              break;
            }
          }

          norm = float(`+r+") * norm + float("+n+`);

          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd){
              float dyi = -2.0 * float(`+r+`)
                * float(`+A+`)
                * getInputImage(b ,r ,c, k) * getOutputImage(b, r, c, d)
                / norm;
              if (k == d) {
                dyi += pow(norm, -1.0 * `+A+`);
              }
              if (k == coords[3]) {
                dyi *= getDy(b, r, c, d);
                result += dyi;
              }
            }
            else {
              break;
            }
          }
      }
      setOutput(result);
      }
    `},qQ=function(e,t,n,r,A){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;var o,i=t,a=e[3]-1;this.outputShape=e;var s="float("+n+") + float("+r+") * sum";o=A===.5?"inversesqrt("+s+")":A===1?"1.0/("+s+")":"exp(log("+s+") * float(-"+A+"));",this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords.x;
        int r = coords.y;
        int c = coords.z;
        int d = coords.w;

        bool hasNextCol = d < `+this.outputShape[3]+`;
        bool hasNextRow = c < `+this.outputShape[2]+`;

        vec4 sum = vec4(0.);
        vec4 xFragAtOutputCoords = getX(b, r, c, d);

        vec4 xAtOutputCoords = vec4(
          getChannel(xFragAtOutputCoords, vec2(c, d)),
          hasNextCol ?
            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,
          hasNextRow ?
            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,
          (hasNextRow && hasNextCol) ?
            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0
        );

        int firstChannel = d - `+i+`;
        vec2 cache = vec2(0.);
        if(firstChannel >= 0){
          vec4 firstChannelFrag = getX(b, r, c, firstChannel);
          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));
            if(hasNextRow){
              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));
            }
        }

        ivec2 depth = ivec2(d, d + 1);
        for (int j = - `+i+"; j <= "+i+`; j++) {
          ivec2 idx = depth + j;
          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));
          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(`+a+`));

          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;
          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;

          if(depthInRange || depthPlusOneInRange){
            vec4 z = vec4(0.);
            vec4 xFragAtCurrentDepth;
            z.xz = cache.xy;
            if(depthPlusOneInRange && hasNextCol){
              xFragAtCurrentDepth = idx.y != d ?
                getX(b, r, c, idx.y) : xFragAtOutputCoords;
              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));
              if(hasNextRow){
                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));
              }
            }
            cache.xy = z.yw;
            sum += z * z;
          }
        }
        vec4 result = xAtOutputCoords * `+o+`;
        setOutput(result);
      }
    `},JQ=function(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;var t=e.strideHeight,n=e.strideWidth,r=e.dilationHeight,A=e.effectiveFilterHeight,o=e.effectiveFilterWidth,i=A-1-e.padInfo.top,a=o-1-e.padInfo.left,s=A*o-1;this.userCode=`
      const ivec2 pads = ivec2(`+i+", "+a+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+A+`;
          wR += `+r+`) {
          float dyR = float(dyRCorner + wR) / `+t+`.0;

          if (dyR < 0.0 || dyR >= `+e.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < `+o+`; wC++) {
            float dyC = float(dyCCorner + wC) / `+n+`.0;

            if (dyC < 0.0 || dyC >= `+e.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);
            int maxPosValue = `+s+` - int(getMaxPos(b, idyR, idyC, d));

            // Get the current value, check it against the value from the
            // position matrix.
            int curPosValue = wR * `+o+` + wC;
            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

            dotProd += dyValue * mask;
          }
        }
        setOutput(dotProd);
      }
    `},ZQ=function(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;var t=e.strideDepth,n=e.strideHeight,r=e.strideWidth,A=e.dilationDepth,o=e.dilationHeight,i=e.dilationWidth,a=e.effectiveFilterDepth,s=e.effectiveFilterHeight,u=e.effectiveFilterWidth,l=a-1-e.padInfo.front,c=s-1-e.padInfo.top,f=u-1-e.padInfo.left,h=a*s*u-1;this.userCode=`
      const ivec3 pads = ivec3(`+l+", "+c+", "+f+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < `+a+`;
           wD += `+A+`) {
          float dyD = float(dyDCorner + wD) / `+t+`.0;

          if (dyD < 0.0 || dyD >= `+e.outDepth+`.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < `+s+`;
              wR += `+o+`) {
            float dyR = float(dyRCorner + wR) / `+n+`.0;

            if (dyR < 0.0 || dyR >= `+e.outHeight+`.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < `+u+`;
                wC += `+i+`) {
              float dyC = float(dyCCorner + wC) / `+r+`.0;

              if (dyC < 0.0 || dyC >= `+e.outWidth+`.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);
              int maxPosValue = `+h+` -
                  int(getMaxPos(batch, idyD, idyR, idyC, ch));

              // Get the current value, check it against the value from the
              // position matrix.
              int curPosValue =
                  wD * `+s+" * "+u+` +
                  wR * `+u+` + wC;
              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

              dotProd += dyValue * mask;
            }
          }
        }
        setOutput(dotProd);
      }
    `},ef=function(e,t,n,r,A,o,i){n===void 0&&(n=!1),r===void 0&&(r=!1),A===void 0&&(A=!1),o===void 0&&(o=null),i===void 0&&(i=!1),this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t;var a=n?e[1]:e[2],s=Math.ceil(a/2),u=n?"i * 2, rc.y":"rc.y, i * 2",l=r?"rc.z, i * 2":"i * 2, rc.z",c=n?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],f=r?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"],h="",d="";o&&(h=i?`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          `+o+`
        }`:`vec4 activation(vec4 x) {
          `+o+`
        }`,d="result = activation(result);");var g=A?"result += getBiasAtOutCoords();":"";A&&this.variableNames.push("bias"),i&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+h+`

      const float sharedDimension = `+s+`.0;

      vec4 dot2x2ARowBCol(ivec3 rc) {
        vec4 result = vec4(0);
        for (int i = 0; i < `+s+`; i++) {
          vec4 a = getMatrixA(rc.x, `+u+`);
          vec4 b = getMatrixB(rc.x, `+l+`);

          // These swizzled products need to be separately added.
          // See: https://github.com/tensorflow/tfjs/issues/1735
          result += (`+c[0]+" * "+f[0]+`);
          result += (`+c[1]+" * "+f[1]+`);
        }
        return result;
      }

      void main() {
        ivec3 rc = getOutputCoords();
        vec4 result = dot2x2ARowBCol(rc);

        `+g+`

        `+d+`

        setOutput(result);
      }
    `},eU=function(){function e(t,n,r){this.variableNames=["probs"],this.outputShape=[t,r],this.userCode=`
      uniform float seed;

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];

        float r = random(seed);
        float cdf = 0.0;

        for (int i = 0; i < `+(n-1)+`; i++) {
          cdf += getProbs(batch, i);

          if (r < cdf) {
            setOutput(float(i));
            return;
          }
        }

        // If no other event happened, last event happened.
        setOutput(float(`+(n-1)+`));
      }
    `}return e.prototype.getCustomSetupFunc=function(t){var n=this;return function(r,A){n.seedLoc==null&&(n.seedLoc=r.getUniformLocation(A,"seed")),r.gl.uniform1f(n.seedLoc,t)}},e}(),tU=function(e,t,n,r){this.variableNames=["indices"],this.outputShape=[e,t],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int index = round(getIndices(coords.x));
        setOutput(mix(float(`+r+"), float("+n+`),
                      float(index == coords.y)));
      }
    `},nU=function(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=e;var t=e.length;if(t===0)this.userCode=`
        void main() {
          setOutput(vec4(getA(), 0., 0., 0.));
        }
      `;else{var n=jt("rc",t),r=De(t),A=function(a,s,u){if(a===1)return"rc > "+s[0];for(var l="",c=a-2;c<a;c++)l+=u[c]+" >= "+s[c],c<a-1&&(l+="||");return l}(t,e,n),o=function(a,s,u,l){if(a===1)return"";var c=l.slice(-2);return`
    int r = `+c[0]+`;
    int c = `+c[1]+`;
    int rp1 = r + 1;
    int cp1 = c + 1;

    bool cEdge = cp1 >= `+s+`;
    bool rEdge = rp1 >= `+u+`;
  `}(t,e[e.length-1],e[e.length-2],n),i=function(a,s){var u=a.length,l=function(c,f){for(var h=[],d=0;d<=1;d++)for(var g=0;g<=1;g++){for(var m=(d===0?"r":"rp1")+", "+(g===0?"c":"cp1"),p=2;p<c;p++)m=f[f.length-1-p]+","+m;h.push(m)}return h}(u,s);return u===1?`getA(rc),
            rc + 1 >= `+a[0]+` ? 0. : getA(rc + 1),
            0, 0`:"getA("+l[0]+`),
          cEdge ? 0. : getA(`+l[1]+`),
          rEdge ? 0. : getA(`+l[2]+`),
          rEdge || cEdge ? 0. : getA(`+l[3]+")"}(e,n);this.userCode=`
        void main() {
          `+r+` rc = getOutputCoords();

          if(`+A+`) {
            setOutput(vec4(0));
          } else {
            `+o+`

            setOutput(vec4(`+i+`));
          }
        }
      `}},rU=function(e,t,n){this.variableNames=["x"],this.outputShape=t.map(function(s,u){return s[0]+e[u]+s[1]});var r=e.length,A=De(r),o=t.map(function(s){return s[0]}).join(","),i=t.map(function(s,u){return s[0]+e[u]}).join(","),a=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,r);this.userCode=r!==1?`
      `+A+" start = "+A+"("+o+`);
      `+A+" end = "+A+"("+i+`);

      void main() {
        `+A+` outC = getOutputCoords();
        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {
          setOutput(float(`+n+`));
        } else {
          `+A+` coords = outC - start;
          setOutput(getX(`+a+`));
        }
      }
    `:`
        int start = `+o+`;
        int end = `+i+`;

        void main() {
          int outC = getOutputCoords();
          if (outC < start || outC >= end) {
            setOutput(float(`+n+`));
          } else {
            setOutput(getX(outC - start));
          }
        }
      `},AU=function(e,t,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t.map(function(m,p){return m[0]+e[p]+m[1]});for(var r=e.length,A=De(r),o=t.map(function(m){return m[0]}).join(","),i=t.map(function(m,p){return m[0]+e[p]}).join(","),a=jt("rc",r),s=jt("source",r),u=a[r-1]+" < "+this.outputShape[r-1],l=r===1?"source":"vec2("+s.slice(-2).join()+")",c=[A+" rc = outputLoc;",a[r-1]+` += 1;
       if(`+u+`) {
      `,r===1?"":`}
       rc = outputLoc;
       `+a[r-2]+` += 1;
       if(`+a[r-2]+" < "+this.outputShape[r-2]+") {",r===1?"":"  "+a[r-1]+` += 1;
         if(`+u+") {"],f=r===1?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))",h="",d=0,g=r===1?2:4;d<g;d++)h+=`
        `+c[d]+`
        if (`+f+`) {
          result[`+d+"] = float("+n+`);
        } else {
          `+A+` source = rc - start;
          result[`+d+"] = getChannel(getX("+s.join()+"), "+l+`);
        }
      `;h+=r===1?"} ":"}}",this.userCode=`
      const `+A+" start = "+A+"("+o+`);
      const `+A+" end = "+A+"("+i+`);

      void main() {
        `+A+` outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        `+h+`
        setOutput(result);
      }
    `},tf=function(e,t,n){if(this.variableNames=["x"],t==="avg"&&n)throw new Error("Cannot compute positions for average pool.");var r=e.filterWidth,A=e.strideHeight,o=e.strideWidth,i=e.dilationHeight,a=e.dilationWidth,s=e.effectiveFilterHeight,u=e.effectiveFilterWidth,l=e.padInfo.top,c=e.padInfo.left;this.outputShape=e.outShape;var f=t==="avg",h="0.0";if(f||(h="-1.0 / 1e-20"),n)this.userCode=`
        const ivec2 strides = ivec2(`+A+", "+o+`);
        const ivec2 pads = ivec2(`+l+", "+c+`);

        void main() {
          ivec4 coords = getOutputCoords();
          int batch = coords[0];
          int d = coords[3];

          ivec2 xRCCorner = coords.yz * strides - pads;
          int xRCorner = xRCCorner.x;
          int xCCorner = xRCCorner.y;

          // max/min x(?, ?, d) to get y(yR, yC, d).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;
          float avgValue = 0.0;

          for (int wR = 0; wR < `+s+`;
              wR += `+i+`) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= `+e.inHeight+`) {
              continue;
            }

            for (int wC = 0; wC < `+u+`;
                wC += `+a+`) {
              int xC = xCCorner + wC;

              if (xC < 0 || xC >= `+e.inWidth+`) {
                continue;
              }

              float value = getX(batch, xR, xC, d);

              // If a min / max value has already been found, use it. If not,
              // use the current value.
              float currMinMaxValue = mix(
                  value, minMaxValue, minMaxValueFound);
              if (value >= currMinMaxValue) {
                minMaxValue = value;
                minMaxValueFound = 1.0;
                minMaxPosition = wR * `+u+` + wC;
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;else{var d=t+"("+t+"("+t+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";t==="avg"&&(d="avgValue / count");var g=4*Math.floor(r/4),m=r%4,p=`
      if (`+f+`) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = max(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec2 strides = ivec2(`+A+", "+o+`);
      const ivec2 pads = ivec2(`+l+", "+c+`);
      const float initializationValue = `+h+`;
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xR, int xC, int d) {
        if (xC < 0 || xC >= `+e.inWidth+`) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xR, xC, d);
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d = coords[3];

        ivec2 xRCCorner = coords.yz * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // max/min x(?, ?, d) to get y(yR, yC, d).
        // ? = to be determined
        vec4 minMaxValue = vec4(`+h+`);
        float avgValue = 0.0;
        count = 0.0;

        for (int wR = 0; wR < `+s+`;
            wR += `+i+`) {
          int xR = xRCorner + wR;

          if (xR < 0 || xR >= `+e.inHeight+`) {
            continue;
          }

          for (int wC = 0; wC < `+g+`; wC += 4) {
            int xC = xCCorner + wC * `+a+`;

            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + `+a+`, d),
              getValue(batch, xR, xC + 2 * `+a+`, d),
              getValue(batch, xR, xC + 3 * `+a+`, d)
            );

            `+p+`
          }

          int xC = xCCorner + `+g+`;
          if (`+(m===1)+`) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              initializationValue,
              initializationValue,
              initializationValue
            );

            `+p+`
          } else if (`+(m===2)+`) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + `+a+`, d),
              initializationValue,
              initializationValue
            );

            `+p+`
          } else if (`+(m===3)+`) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + `+a+`, d),
              getValue(batch, xR, xC + 2 * `+a+`, d),
              initializationValue
            );

            `+p+`
          }
        }
        setOutput(`+d+`);
      }
    `}},nf=function(e,t,n){if(this.variableNames=["x"],t==="avg"&&n)throw new Error("Cannot compute positions for average pool.");var r=e.filterWidth,A=e.strideDepth,o=e.strideHeight,i=e.strideWidth,a=e.dilationDepth,s=e.dilationHeight,u=e.dilationWidth,l=e.effectiveFilterDepth,c=e.effectiveFilterHeight,f=e.effectiveFilterWidth,h=e.padInfo.front,d=e.padInfo.top,g=e.padInfo.left;this.outputShape=e.outShape;var m=t==="avg",p="0.0";if(m||(p="-1.0 / 1e-20"),n)this.userCode=`
        const ivec3 strides =
            ivec3(`+A+", "+o+", "+i+`);
        const ivec3 pads = ivec3(`+h+", "+d+", "+g+`);

        void main() {
          ivec5 coords = getOutputCoords();
          int batch = coords.x;
          int ch = coords.u;

          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
          int xDCorner = xCorner.x;
          int xRCorner = xCorner.y;
          int xCCorner = xCorner.z;

          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;

          for (int wD = 0; wD < `+l+`;
              wD += `+a+`) {
            int xD = xDCorner + wD;

            if (xD < 0 || xD >= `+e.inDepth+`) {
              continue;
            }

            for (int wR = 0; wR < `+c+`;
                wR += `+s+`) {
              int xR = xRCorner + wR;

              if (xR < 0 || xR >= `+e.inHeight+`) {
                continue;
              }

              for (int wC = 0; wC < `+f+`;
                  wC += `+u+`) {
                int xC = xCCorner + wC;

                if (xC < 0 || xC >= `+e.inWidth+`) {
                  continue;
                }

                float value = getX(batch, xD, xR, xC, ch);

                // If a min / max value has already been found, use it. If not,
                // use the current value.
                float currMinMaxValue = mix(
                    value, minMaxValue, minMaxValueFound);
                if (value >= currMinMaxValue) {
                  minMaxValue = value;
                  minMaxValueFound = 1.0;
                  minMaxPosition =
                      wD * `+c+" * "+f+` +
                      wR * `+f+` + wC;;
                }
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;else{var v=t+"("+t+"("+t+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";t==="avg"&&(v="avgValue / count");var w=4*Math.floor(r/4),B=r%4,y=`
      if (`+m+`) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = max(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec3 strides =
        ivec3(`+A+", "+o+", "+i+`);
      const ivec3 pads = ivec3(`+h+", "+d+", "+g+`);
      const float initializationValue = `+p+`;
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xD, int xR, int xC, int ch) {
        if (xC < 0 || xC >= `+e.inWidth+`) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xD, xR, xC, ch);
      }

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xDCorner = xCorner.x;
        int xRCorner = xCorner.y;
        int xCCorner = xCorner.z;

        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).
        // ? = to be determined
        vec4 minMaxValue = vec4(`+p+`);
        float avgValue = 0.0;
        count = 0.0;

        for (int wD = 0; wD < `+l+`;
            wD += `+a+`) {
          int xD = xDCorner + wD;

          if (xD < 0 || xD >= `+e.inDepth+`) {
            continue;
          }

          for (int wR = 0; wR < `+c+`;
            wR += `+s+`) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= `+e.inHeight+`) {
              continue;
            }

            for (int wC = 0; wC < `+w+`; wC += 4) {
              int xC = xCCorner + wC * `+u+`;

              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + `+u+`, ch),
                getValue(batch, xD, xR, xC + 2 * `+u+`, ch),
                getValue(batch, xD, xR, xC + 3 * `+u+`, ch)
              );

              `+y+`
            }

            int xC = xCCorner + `+w+`;
            if (`+(B===1)+`) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                initializationValue,
                initializationValue,
                initializationValue
              );

              `+y+`
            } else if (`+(B===2)+`) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + `+u+`, ch),
                initializationValue,
                initializationValue
              );

              `+y+`
            } else if (`+(B===3)+`) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + `+u+`, ch),
                getValue(batch, xD, xR, xC + 2 * `+u+`, ch),
                initializationValue
              );

              `+y+`
            }
          }
          setOutput(`+v+`);
        }
      }
    `}},oU=function(e,t){this.variableNames=["x"];var n=e.windowSize,r=e.batchSize,A=e.inSize,o=Math.ceil(A/n);this.outputShape=[r,o];var i="0.0",a="";t==="prod"?i="1.0":t==="min"?(i="1.0 / 1e-20",a="min"):t==="max"&&(i="-1.0 / 1e-20",a="max");var s=t+"("+t+"("+t+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";t==="sum"?s="sumValue":t==="prod"?s="prodValue":t==="all"?s="allValue":t==="any"&&(s="anyValue");var u=4*Math.floor(n/4),l=n%4,c=`
      if (`+(t==="sum")+`) {
        sumValue += dot(values, ones);
      } else if (`+(t==="prod")+`) {
        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);
        prodValue *= tmp[0] * tmp[1];
      } else {
        minMaxValue = `+a+`(values, minMaxValue);
      }
    `,f="vec4";t==="all"?(i="1.0",c=`
        bool reducedAllValue = all(values);
        float floatedReducedAllValue = float(reducedAllValue);
        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);
      `,f="bvec4"):t==="any"&&(i="0.0",c=`
        bool reducedAnyValue = any(values);
        float floatedReducedAnyValue = float(reducedAnyValue);
        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);
      `,f="bvec4");var h="";A%n>0&&(h=`
        if (inIdx < 0 || inIdx >= `+A+`) {
          return initializationValue;
        }
      `),this.userCode=`
      const float initializationValue = `+i+`;
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        `+h+`
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * `+n+`;

        vec4 minMaxValue = vec4(`+i+`);
        float prodValue = 1.0;
        float sumValue = 0.0;
        float allValue = 1.0;
        float anyValue = 0.0;

        for (int i = 0; i < `+u+`; i += 4) {
          int inIdx = inOffset + i;
          `+f+" values = "+f+`(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          `+c+`
        }

        int inIdx = inOffset + `+u+`;
        if (`+(l===1)+`) {
          `+f+" values = "+f+`(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          `+c+`
        } else if (`+(l===2)+`) {
          `+f+" values = "+f+`(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          `+c+`
        } else if (`+(l===3)+`) {
          `+f+" values = "+f+`(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          `+c+`
        }
        setOutput(`+s+`);
      }
    `},iU=function(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e;for(var n="",r=0;r<4;r++){var A="thisRC = rc;";r%2==1&&(A+="thisRC.z += 1;"),r>1&&(A+="thisRC.y += 1;"),n+=`
        `+A+`
        `+(r>0?"if(thisRC.y < rows && thisRC.z < cols){":"")+`
          int flatIndex = getFlatIndex(thisRC);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);
          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[`+r+`] =
            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);
        `+(r>0?"}":"")+`
      `}this.userCode=`
      
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      `+KA(["r","c","d"],t)+`
      return ivec3(r, c, d);
    }
  
      `+Ip(e)+`

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.);

        ivec3 thisRC;
        int rows = `+e[1]+`;
        int cols = `+e[2]+`;

        `+n+`

        setOutput(result);
      }
    `},aU=function(e,t,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=t.shape;var r=t.shape,A=r[1],o=r[2],i=e.shape,a=i[1],s=i[2],u=[n&&a>1?A-1:A,n&&s>1?o-1:o],l=[n&&a>1?a-1:a,n&&s>1?s-1:s],c=u[0]/l[0],f=u[1]/l[1],h=1/c,d=1/f,g=2*Math.ceil(h)+2,m=2*Math.ceil(d)+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(`+c+`);
        const float widthScale = float(`+f+`);

        const float invHeightScale = float(`+h+`);
        const float invWidthScale = float(`+d+`);

        const int winHeight = int(`+g+`);
        const int winWidth = int(`+m+`);

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(startRLerp - float(winHeight / 2));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(startCLerp - float(winWidth / 2));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= `+a+`) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= `+s+`) {
              continue;
            }

            float dxR = float(dyR) * heightScale;
            int topDxRIndex = int(floor(dxR));
            int bottomDxRIndex = int(min(ceil(dxR), `+(A-1)+`.0));
            float dxRLerp = dxR - float(topDxRIndex);
            float inverseDxRLerp = 1.0 - dxRLerp;

            float dxC = float(dyC) * widthScale;
            int leftDxCIndex = int(floor(dxC));
            int rightDxCIndex = int(min(ceil(dxC), `+(o-1)+`.0));
            float dxCLerp = dxC - float(leftDxCIndex);
            float inverseDxCLerp = 1.0 - dxCLerp;

            if (r == topDxRIndex && c == leftDxCIndex) {
              // topLeft
              accumulator +=
                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;
            }

            if (r == topDxRIndex && c == rightDxCIndex) {
              // topRight
              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;
            }

            if (r == bottomDxRIndex && c == leftDxCIndex) {
              // bottomLeft
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;
            }

            if (r == bottomDxRIndex && c == rightDxCIndex) {
              // bottomRight
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `},sU=function(e,t,n,r){this.variableNames=["A"],this.outputShape=[];var A=e[0],o=e[1],i=e[2],a=e[3];this.outputShape=[A,t,n,a];var s=[r&&t>1?o-1:o,r&&n>1?i-1:i],u=[r&&t>1?t-1:t,r&&n>1?n-1:n];this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          `+s[0]/u[0]+`,
          `+s[1]/u[1]+`);
      const vec2 inputShapeRC = vec2(`+o+".0, "+i+`.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;

        // Compute the four integer indices.
        ivec2 sourceFloorRC = ivec2(sourceFracIndexRC);
        ivec2 sourceCeilRC = ivec2(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);
        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);
        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);
        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);

        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);

        float top = topLeft + (topRight - topLeft) * fracRC.y;
        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;
        float newValue = top + (bottom - top) * fracRC.x;

        setOutput(newValue);
      }
    `},uU=function(e,t,n,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];var A=e[0],o=e[1],i=e[2],a=e[3];this.outputShape=[A,t,n,a];var s=[r&&t>1?o-1:o,r&&n>1?i-1:i],u=[r&&t>1?t-1:t,r&&n>1?n-1:n];this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          `+s[0]/u[0]+`,
          `+s[1]/u[1]+`,
          `+s[1]/u[1]+`);
      const vec3 inputShapeRC = vec3(`+o+".0, "+i+`.0,
                                     `+i+`.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = vec3(yRC) * effectiveInputOverOutputRatioRC;

        // Compute the four integer indices.
        ivec3 sourceFloorRC = ivec3(sourceFracIndexRC);
        ivec3 sourceCeilRC = ivec3(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < `+(a-1)+`;
        bool hasNextRow = coords.z < `+(n-1)+`;

        // In parallel, construct four corners for all four components in
        // packed 2x2 cell.
        vec4 topLeft = vec4(
          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 bottomLeft = vec4(
          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 topRight = vec4(
          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec4 bottomRight = vec4(
          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);

        vec4 top = mix(topLeft, topRight, fracRC.yyzz);
        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);
        vec4 newValue = mix(top, bottom, fracRC.x);

        setOutput(newValue);
      }
    `},lU=function(e,t,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=t.shape;var r=t.shape,A=r[1],o=r[2],i=e.shape,a=i[1],s=i[2],u=[n&&a>1?A-1:A,n&&s>1?o-1:o],l=[n&&a>1?a-1:a,n&&s>1?s-1:s],c=u[0]/l[0],f=u[1]/l[1],h=1/c,d=1/f,g=2*Math.ceil(h)+2,m=2*Math.ceil(d)+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(`+c+`);
        const float widthScale = float(`+f+`);

        const float invHeightScale = float(`+h+`);
        const float invWidthScale = float(`+d+`);

        const int winHeight = int(`+g+`);
        const int winWidth = int(`+m+`);

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(floor(startRLerp - float(winHeight / 2)));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(floor(startCLerp - float(winWidth / 2)));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= `+a+`) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= `+s+`) {
              continue;
            }

            float sourceFracRow =
              float(`+u[0]+`) *
                (float(dyR) / float(`+l[0]+`));

            float sourceFracCol =
                float(`+u[1]+`) *
                  (float(dyC) / float(`+l[1]+`));

            int sourceNearestRow = int(min(
                float(int(`+A+`) - 1),
                `+n+` ? float(round(sourceFracRow)) :
                                  float(floor(sourceFracRow))));

            int sourceNearestCol = int(min(
                float(int(`+o+`) - 1),
                `+n+` ? float(round(sourceFracCol)) :
                                  float(floor(sourceFracCol))));

            if (r == sourceNearestRow && c == sourceNearestCol) {
              accumulator += getDy(b, dyR, dyC, d);
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `},cU=function(e,t,n,r){this.variableNames=["A"],this.outputShape=[];var A=e[0],o=e[1],i=e[2],a=e[3];this.outputShape=[A,t,n,a];var s=[r&&t>1?o-1:o,r&&n>1?i-1:i],u=[r&&t>1?t-1:t,r&&n>1?n-1:n],l=r?"0.5":"0.0";this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          `+s[0]/u[0]+`,
          `+s[1]/u[1]+`);
      const vec2 inputShapeRC = vec2(`+o+".0, "+i+`.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;

        // Compute the coordinators of nearest neighbor point.
        ivec2 sourceNearestRC = ivec2(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + `+l+`)));

        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);

        setOutput(newValue);
      }
    `},fU=function(e,t){this.variableNames=["x"];var n=e.length;if(n>4)throw new Error("WebGL backend: Reverse of rank-"+n+" tensor is not yet supported");if(this.outputShape=e,n!==1){var r=e.map(function(o,i){return function(a){return t.indexOf(a)!==-1&&e[a]!==1?e[a]+" - coords["+a+"] - 1":"coords["+a+"]"}(i)}).join(","),A=De(n);this.userCode=`
      void main() {
        `+A+` coords = getOutputCoords();
        setOutput(getX(`+r+`));
      }
    `}else this.userCode=`
        void main() {
          int coord = getOutputCoords();
          setOutput(getX(`+e[0]+` - coord - 1));
        }
      `},hU=function(e,t){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;var n=e.length;if(n>4)throw new Error("WebGL backend: Reverse of rank-"+n+" tensor is not yet supported");this.outputShape=e;var r=jt("rc",n),A=r[n-1]+" + 1 < "+this.outputShape[n-1],o=r[n-2]+" + 1 < "+this.outputShape[n-2],i=De(n);function a(s){var u=e.map(function(l,c){return function(f,h){return t.indexOf(f)!==-1&&e[f]!==1?e[f]+" - "+h[f]+" - 1":""+h[f]}(c,s)});return"getChannel(getX("+u.join(",")+"), vec2("+u.slice(-2).join(",")+"))"}this.userCode=n===1?`
        void main(){
          int rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = getChannel(getX(`+e[0]+` - rc - 1),
            `+e[0]+` - rc - 1);
          if(`+A+`){
              result.g = getChannel(getX(`+e[0]+` - (rc  + 1) - 1),
                `+e[0]+` - (rc  + 1) - 1);
          }
          setOutput(result);
        }
      `:`
        void main() {
          `+i+` rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = `+function(s){return a(s)}(r.slice())+`;
          if(`+A+`){
            result.g = `+function(s){return s[n-1]="("+s[n-1]+" + 1)",a(s)}(r.slice())+`;
          }
          if(`+o+`) {
            result.b = `+function(s){return s[n-2]="("+s[n-2]+" + 1)",a(s)}(r.slice())+`;
            if(`+A+`) {
              result.a = `+function(s){return s[n-1]="("+s[n-1]+" + 1)",s[n-2]="("+s[n-2]+" + 1)",a(s)}(r.slice())+`;
            }
          }
          setOutput(result);
        }
    `},om=function(e,t,n,r,A,o,i){this.variableNames=["updates","indices","defaultValue"],this.outputShape=o;var a=De(A.length),s=De(o.length),u="";n===1?u="i":n===2&&(u="i, j");var l="getIndices("+u+")",c="";r===1?c="i":r===2&&(c="i, coords[1]");var f="getUpdates("+c+")",h=t>1?"strides[j]":"strides";this.userCode=`
        `+a+" strides = "+a+"("+A+`);

        void main() {
          `+s+` coords = getOutputCoords();
          float sum = 0.0;
          bool found = false;
          for (int i = 0; i < `+e+`; i++) {
            int flattenedIndex = 0;
            for (int j = 0; j < `+t+`; j++) {
              int index = round(`+l+`);
              flattenedIndex += index * `+h+`;
            }
            if (flattenedIndex == coords[0]) {
              sum += `+f+`;
              found = true;
            }
          }
          setOutput(mix(getDefaultValue(), sum, float(found)));
        }
      `},dU=function(e,t){this.variableNames=["x","segmentIds"];var n=e.windowSize,r=e.batchSize,A=e.inSize,o=e.numSegments,i=o*Math.ceil(A/n);this.outputShape=[r,i];var a=4*Math.floor(n/4),s=n%4,u=`
        sumValue += dot(values, segFilter);
    `,l="";A%n>0&&(l=`
        if (inIdx < 0 || inIdx >= `+A+`) {
          return initializationValue;
        }
      `);var c="";A%n>0&&(c=`
        if (inIdx < 0 || inIdx >= `+A+`) {
          return -1.0;
        }
      `),this.userCode=`
      const float initializationValue = 0.0;

      float getValue(int batch, int inIdx) {
        `+l+`
        return getX(batch, inIdx);
      }

      float getSegmentIdAtIndex(int inIdx) {
        `+c+`
        return getSegmentIds(inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = int(floor(float(outIdx) / float(
          `+o+")) * float("+n+`));
        int currentSeg = int(mod(float(outIdx), float(`+o+`)));

        float sumValue = 0.0;

        for (int i = 0; i < `+a+`; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0
          );

          `+u+`
        }

        int inIdx = inOffset + `+a+`;
        if (`+(s===1)+`) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            0,
            0,
            0
          );

          `+u+`
        } else if (`+(s===2)+`) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
              0,
              0
          );

          `+u+`
        } else if (`+(s===3)+`) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            0
          );

          `+u+`
        }
        setOutput(sumValue);
      }
    `},pU=function(e,t,n){var r,A;if(this.variableNames=["c","a","b"],this.outputShape=t,n>4)throw Error("Where for rank "+n+" is not yet supported");if(n===1)A="resRC",r="resRC";else{for(var o=["resRC.x","resRC.y","resRC.z","resRC.w"],i=[],a=[],s=0;s<t.length;s++)a.push(""+o[s]),s<e&&i.push(""+o[s]);r=i.join(),A=a.join()}var u=De(n);this.userCode=`
      void main() {
        `+u+` resRC = getOutputCoords();
        float cVal = getC(`+r+`);
        if (cVal >= 1.0) {
          setOutput(getA(`+A+`));
        } else {
          setOutput(getB(`+A+`));
        }
      }
    `},gU=function(){function e(t){this.variableNames=["source"],this.outputShape=t,this.rank=t.length;var n,r=De(this.rank),A="uniform int start["+this.rank+"];",o=function(i){if(i===1)return"sourceLoc";if(i<=6)return rf.slice(0,i).map(function(a){return"sourceLoc."+a}).join(",");throw Error("Slicing for rank "+i+" is not yet supported")}(this.rank);n=`
        `+r+` sourceLoc;
        `+r+` coords = getOutputCoords();
        `+t.map(function(i,a){return"sourceLoc."+rf[a]+" = start["+a+"] + coords."+rf[a]+";"}).join(`
`)+`
      `,this.userCode=`
      `+A+`
      void main() {
        `+n+`
        setOutput(getSource(`+o+`));
      }
    `}return e.prototype.getCustomSetupFunc=function(t){var n=this;if(t.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+t.length+")");return function(r,A){n.startLoc==null&&(n.startLoc=r.getUniformLocationNoThrow(A,"start"),n.startLoc==null)||r.gl.uniform1iv(n.startLoc,t)}},e}(),rf=["x","y","z","w","u","v"],vU=function(){function e(t){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.rank=t.length;var n=De(this.rank),r=jt("coords",this.rank),A=jt("sourceLoc",this.rank),o=this.rank===1?"sourceLoc":"vec2("+A.slice(-2).join()+")",i="getChannel(getSource("+A.join()+"), "+o+")",a=`
      result.x = `+i+`;
      if (++`+r[this.rank-1]+" < "+t[this.rank-1]+`) {
        ++`+A[this.rank-1]+`;
        result.y = `+i+`;
        --`+A[this.rank-1]+`;
      }
    `,s=this.rank===1?"":`
      --`+r[this.rank-1]+`;
      if (++`+r[this.rank-2]+" < "+t[this.rank-2]+`) {
        ++`+A[this.rank-2]+`;
        result.z = `+i+`;
        if (++`+r[this.rank-1]+" < "+t[this.rank-1]+`) {
          ++`+A[this.rank-1]+`;
          result.w = `+i+`;
        }
      }
    `,u=this.rank<=4?`sourceLoc = coords +
            `+n+"("+t.map(function(l,c){return"start["+c+"]"}).join()+");":t.map(function(l,c){return A[c]+" = "+r[c]+" + start["+c+"];"}).join(`
`);this.userCode=`
      uniform int start[`+this.rank+`];
      void main() {
        `+n+` coords = getOutputCoords();
        `+n+` sourceLoc;
        `+u+`
        vec4 result = vec4(0.);
        `+a+`
        `+s+`
        setOutput(result);
      }
    `}return e.prototype.getCustomSetupFunc=function(t){var n=this;if(t.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+t.length+")");return function(r,A){n.startLoc==null&&(n.startLoc=r.getUniformLocationNoThrow(A,"start"),n.startLoc==null)||r.gl.uniform1iv(n.startLoc,t)}},e}(),mU=function(e,t,n){this.variableNames=["x"],this.outputShape=n;var r=n.length,A=De(n.length),o=De(n.length),i="";if(r===1)i="coords * strides + begin";else{var a=0;i=n.map(function(s,u){return a++,n.length===1?"coords * strides["+u+"] + begin["+u+"]":"coords["+(a-1)+"] * strides["+u+"] + begin["+u+"]"}).join(",")}this.userCode=`
      `+A+" begin = "+A+"("+e+`);
      `+A+" strides = "+A+"("+t+`);

      void main() {
        `+o+` coords = getOutputCoords();
        setOutput(getX(`+i+`));
      }
    `},wU=function(){function e(t){this.gpgpu=t,this.numUsedTextures=0,this.numFreeTextures=0,this.freeTextures={},this.logEnabled=!1,this.usedTextures={}}return e.prototype.acquireTexture=function(t,n,r){var A,o=im(n,r),i=am(t,o,r);if(i in this.freeTextures||(this.freeTextures[i]=[]),i in this.usedTextures||(this.usedTextures[i]=[]),this.freeTextures[i].length>0){this.numFreeTextures--,this.numUsedTextures++,this.log();var a=this.freeTextures[i].shift();return this.usedTextures[i].push(a),a}return this.numUsedTextures++,this.log(),o===sn.PACKED_2X2_FLOAT32?A=this.gpgpu.createPackedMatrixTexture(t[0],t[1]):o===sn.PACKED_2X2_FLOAT16?A=this.gpgpu.createFloat16PackedMatrixTexture(t[0],t[1]):o===sn.UNPACKED_FLOAT32?A=this.gpgpu.createFloat32MatrixTexture(t[0],t[1]):o===sn.UNPACKED_FLOAT16?A=this.gpgpu.createFloat16MatrixTexture(t[0],t[1]):o===sn.PACKED_4X1_UNSIGNED_BYTE&&(A=this.gpgpu.createUnsignedBytesMatrixTexture(t[0],t[1])),this.usedTextures[i].push(A),A},e.prototype.releaseTexture=function(t,n,r,A){if(this.freeTextures!=null){var o=am(n,im(r,A),A);o in this.freeTextures||(this.freeTextures[o]=[]),this.freeTextures[o].push(t),this.numFreeTextures++,this.numUsedTextures--;var i=this.usedTextures[o],a=i.indexOf(t);if(a<0)throw new Error("Cannot release a texture that was never provided by this texture manager");i.splice(a,1),this.log()}},e.prototype.log=function(){if(this.logEnabled){var t=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",this.numFreeTextures+" / "+this.numUsedTextures,"("+t+")")}},e.prototype.getNumUsedTextures=function(){return this.numUsedTextures},e.prototype.getNumFreeTextures=function(){return this.numFreeTextures},e.prototype.dispose=function(){var t=this;if(this.freeTextures!=null){for(var n in this.freeTextures)this.freeTextures[n].forEach(function(r){t.gpgpu.deleteMatrixTexture(r)});for(var n in this.usedTextures)this.usedTextures[n].forEach(function(A){t.gpgpu.deleteMatrixTexture(A)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0}},e}();function im(e,t){if(e===ln.UPLOAD)return sn.PACKED_2X2_FLOAT32;if(e===ln.RENDER||e==null)return function(n){return V().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?n?sn.PACKED_2X2_FLOAT32:sn.UNPACKED_FLOAT32:n?sn.PACKED_2X2_FLOAT16:sn.UNPACKED_FLOAT16}(t);if(e===ln.DOWNLOAD||e===ln.PIXELS)return sn.PACKED_4X1_UNSIGNED_BYTE;throw new Error("Unknown logical texture type "+e)}function am(e,t,n){return e[0]+"_"+e[1]+"_"+t+"_"+n}var BU=function(e,t){this.variableNames=["A"];for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e[r]*t[r];this.outputShape=n,this.rank=n.length;var A=De(this.rank),o=function(i){var a=i.length;if(a>5)throw Error("Tile for rank "+a+" is not yet supported");if(a===1)return"imod(resRC, "+i[0]+")";for(var s=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],u=[],l=0;l<i.length;l++)u.push("imod("+s[l]+", "+i[l]+")");return u.join()}(e);this.userCode=`
      void main() {
        `+A+` resRC = getOutputCoords();
        setOutput(getA(`+o+`));
      }
    `},yU=function(e,t){this.variableNames=["A"];for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e[t[r]];this.outputShape=n,this.rank=n.length;var A=De(this.rank),o=function(i){var a=i.length;if(a>6)throw Error("Transpose for rank "+a+" is not yet supported");for(var s=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],u=new Array(a),l=0;l<i.length;l++)u[i[l]]=s[l];return u.join()}(t);this.userCode=`
    void main() {
      `+A+` resRC = getOutputCoords();
      setOutput(getA(`+o+`));
    }
    `},CU=function(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e[t[r]];if(this.outputShape=n,this.rank=n.length,this.rank>6)throw Error("Packed transpose for rank "+this.rank+" is not yet supported.");var A=De(this.rank),o=Ly("rc",this.rank),i=new Array(this.rank);for(r=0;r<t.length;r++)i[t[r]]=o[r];var a="vec2("+i.slice(-2).join()+")",s="++"+o[this.rank-1]+" < "+n[this.rank-1],u="getChannel(getA("+i.join()+"), "+a+")";this.userCode=`
    void main() {
      `+A+` rc = getOutputCoords();
      vec4 result = vec4(0.);
      result[0] = `+u+`;
      if(`+s+`) {
        result[1] = `+u+`;
      }
      --`+o[this.rank-1]+`;
      if(++`+o[this.rank-2]+" < "+n[this.rank-2]+`) {
        result[2] = `+u+`;
        if(`+s+`) {
          result[3] = `+u+`;
        }
      }
      setOutput(result);
    }
    `},Sp=1.7580993408473768,_p=1.0507009873554805,he=function(e,t){this.variableNames=["A"],this.outputShape=e,this.userCode=`
      float unaryOperation(float x) {
        `+t+`
      }

      void main() {
        float x = getAAtOutCoords();
        float y = unaryOperation(x);

        setOutput(y);
      }
    `},Wn="if (isnan(x)) return x;",xU="return x;",sm="return abs(x);",Vy=Wn+`
  return (x < 0.0) ? 0.0 : x;
`,Wy=Wn+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,Gy="return (x >= 0.0) ? x : (exp(x) - 1.0);",FU=`
  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.
  // see: https://arxiv.org/abs/1706.02515
  float scaleAlpha = `+Sp+`;
  float scale = `+_p+`;
  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);
`,um="return -x;",lm="return ceil(x);",cm="return floor(x);",fm="return exp(x);",hm="return exp(x) - 1.0;",bU=Wn+`
  return sin(x);
`,EU=Wn+`
  return cos(x);
`,QU=Wn+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return asin(x);
`,UU=Wn+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return acos(x);
`,IU=Wn+`
  return atan(x);
`,SU=Wn+"return log(x + sqrt(x * x + 1.0));",_U=Wn+`
  if (x < 1.0) return NAN;
  return log(x + sqrt(x * x - 1.0));`,kU=Wn+`
  if ((x < -1.0) || (x > 1.0)) return NAN;
  return (log(1.0 + x) - log(1.0 - x)) / 2.0;`,bs="return x;",DU="return x;",zy=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,Xy=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,$y=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,Ri=function(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.userCode=`
      vec4 unaryOperation(vec4 x) {
        `+t+`
      }

      void main() {
        vec4 x = getAAtOutCoords();
        vec4 y = unaryOperation(x);

        setOutput(y);
      }
    `},RU=function(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=e;var t=e.length,n=jt("rc",t),r=De(t),A=function(a,s){if(a===1)return"rc";for(var u="",l=0;l<a;l++)u+=s[l],l<a-1&&(u+=",");return u}(t,n),o=n.slice(-2),i=t<=1?"rc":"vec2("+o.join(",")+")";this.userCode=`
      void main() {
        `+r+` rc = getOutputCoords();
        vec4 packedInput = getA(`+A+`);

        setOutput(getChannel(packedInput, `+i+`));
      }
    `},Es={};function Qs(e,t){if(t===void 0&&(t=!1),e==="linear")return t?DU:xU;if(e==="relu")return t?zy:Vy;if(e==="elu")return t?$y:Gy;if(e==="relu6")return t?Xy:Wy;if(e==="prelu")return t?Ky:Py;throw new Error("Activation "+e+" has not been implemented for the WebGL backend.")}var TU=600,HU=function(e){function t(n){var r,A=e.call(this)||this;if(A.pendingRead=new WeakMap,A.pendingDisposal=new WeakSet,A.dataRefCount=new WeakMap,A.numBytesInGPU=0,A.uploadWaitMs=0,A.downloadWaitMs=0,A.warnedAboutMemory=!1,A.pendingDeletes=0,A.disposed=!1,!V().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");if(n==null){var o=cr(V().getNumber("WEBGL_VERSION"));A.binaryCache=((r=V().getNumber("WEBGL_VERSION"))in Es||(Es[r]={}),Es[r]),A.gpgpu=new XQ(o),A.canvas=o.canvas,A.gpgpuCreatedLocally=!0}else A.gpgpu=n,A.binaryCache={},A.gpgpuCreatedLocally=!1,A.canvas=n.gl.canvas;return A.textureManager=new wU(A.gpgpu),A.numMBBeforeWarning=V().global.screen==null?1024:V().global.screen.height*V().global.screen.width*window.devicePixelRatio*TU/1024/1024,A.texData=new Iy(A,k),A}return Vn(t,e),t.prototype.numDataIds=function(){return this.texData.numDataIds()+(this.cpuBackend?this.cpuBackend.numDataIds():0)-this.pendingDeletes},t.prototype.write=function(n,r,A){if(V().getBool("DEBUG")&&this.checkNumericalProblems(n),A==="complex64"&&n!=null)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");var o={};return this.texData.set(o,{shape:r,dtype:A,values:n,usage:ln.UPLOAD}),o},t.prototype.move=function(n,r,A,o){if(V().getBool("DEBUG")&&this.checkNumericalProblems(r),o==="complex64")throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(n,{shape:A,dtype:o,values:r,usage:ln.UPLOAD})},t.prototype.readSync=function(n){var r=this.texData.get(n),A=r.values,o=r.dtype,i=r.complexTensors,a=r.slice,s=r.shape,u=r.isPacked;if(a!=null){var l=void 0;l=u?new Ri(s,bs):new he(s,bs);var c=this.runWebGLProgram(l,[{dataId:n,shape:s,dtype:o}],o),f=this.readSync(c.dataId);return this.disposeData(c.dataId),f}if(A!=null)return this.convertAndCacheOnCPU(n);if(o==="string")return A;var h,d,g=this.activeTimers!=null;return g&&(h=er()),o==="complex64"?d=Gh(i.real.dataSync(),i.imag.dataSync()):d=this.getValuesFromTexture(n),g&&(this.downloadWaitMs+=er()-h),this.convertAndCacheOnCPU(n,d)},t.prototype.read=function(n){return ee(this,void 0,void 0,function(){var r,A,o,i,a,s,u,l,c,f,h,d,g,m,p,v,w,B,y,C,b,x;return te(this,function(F){switch(F.label){case 0:if(this.pendingRead.has(n))return r=this.pendingRead.get(n),[2,new Promise(function(E){return r.push(E)})];if(A=this.texData.get(n),o=A.values,i=A.shape,a=A.slice,s=A.dtype,u=A.complexTensors,l=A.isPacked,a!=null)return c=void 0,c=l?new Ri(i,bs):new he(i,bs),f=this.runWebGLProgram(c,[{dataId:n,shape:i,dtype:s}],s),h=this.read(f.dataId),this.disposeData(f.dataId),[2,h];if(o!=null)return[2,this.convertAndCacheOnCPU(n)];if(!V().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&V().getNumber("WEBGL_VERSION")===2)throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");return d=null,s!=="complex64"&&V().get("WEBGL_BUFFER_SUPPORTED")&&(g=this.decode(n),m=this.texData.get(g.dataId),d=(x=this.gpgpu).createBufferFromTexture.apply(x,[m.texture].concat(oa(i)))),this.pendingRead.set(n,[]),s==="complex64"?[3,2]:[4,this.gpgpu.createAndWaitForFence()];case 1:F.sent(),F.label=2;case 2:return s!=="complex64"?[3,4]:[4,Promise.all([u.real.data(),u.imag.data()])];case 3:return v=F.sent(),w=v[0],B=v[1],p=Gh(w,B),[3,5];case 4:d==null?p=this.getValuesFromTexture(n):(y=ne(i),p=this.gpgpu.downloadFloat32MatrixFromBuffer(d,y)),F.label=5;case 5:return g!=null&&this.disposeData(g.dataId),C=this.convertAndCacheOnCPU(n,p),b=this.pendingRead.get(n),this.pendingRead.delete(n),b.forEach(function(E){return E(C)}),this.pendingDisposal.has(n)&&(this.pendingDisposal.delete(n),this.disposeData(n),this.pendingDeletes--),[2,C]}})})},t.prototype.checkNumericalProblems=function(n){if(n!=null)for(var r=0;r<n.length;r++){var A=n[r];if(!FE(A))throw V().getBool("WEBGL_RENDER_FLOAT32_CAPABLE")?Error("The value "+A+" cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'"):Error("The value "+A+" cannot be represented on this device.")}},t.prototype.getValuesFromTexture=function(n){var r,A=this.texData.get(n),o=A.shape,i=A.dtype,a=A.isPacked,s=ne(o);if(V().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){var u=this.decode(n),l=this.texData.get(u.dataId),c=(r=this.gpgpu).downloadMatrixFromPackedTexture.apply(r,[l.texture].concat(oa(o))).subarray(0,s);return this.disposeData(u.dataId),c}var f=V().getBool("WEBGL_PACK")&&a===!0,h=f?Yc(o):o,d=f?new xQ(h):new CQ(h),g=this.runWebGLProgram(d,[{shape:h,dtype:i,dataId:n}],"float32"),m=this.texData.get(g.dataId),p=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(m.texture,m.texShape[0],m.texShape[1]).subarray(0,s);return this.disposeData(g.dataId),p},t.prototype.time=function(n){return ee(this,void 0,void 0,function(){var r,A,o,i,a,s,u;return te(this,function(l){switch(l.label){case 0:return r=this.activeTimers,A=[],o=!1,this.programTimersStack==null?(this.programTimersStack=A,o=!0):this.activeTimers.push(A),this.activeTimers=A,n(),i=fi(this.activeTimers.map(function(c){return c.query})).filter(function(c){return c!=null}),a=fi(this.activeTimers.map(function(c){return c.name})).filter(function(c){return c!=null}),this.activeTimers=r,o&&(this.programTimersStack=null),s={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null},V().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?[4,Promise.all(i)]:[3,2];case 1:return u=l.sent(),s.kernelMs=AE(u),s.getExtraProfileInfo=function(){return u.map(function(c,f){return{name:a[f],ms:c}}).map(function(c){return c.name+": "+c.ms}).join(", ")},[3,3];case 2:s.kernelMs={error:"WebGL query timers are not supported in this environment."},l.label=3;case 3:return this.uploadWaitMs=0,this.downloadWaitMs=0,[2,s]}})})},t.prototype.memory=function(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU}},t.prototype.startTimer=function(){return V().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:er(),endMs:null}},t.prototype.endTimer=function(n){return V().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),n):(n.endMs=er(),n)},t.prototype.getQueryTime=function(n){return ee(this,void 0,void 0,function(){var r;return te(this,function(A){return V().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?[2,this.gpgpu.waitForQueryAndGetTime(n)]:[2,(r=n).endMs-r.startMs]})})},t.prototype.disposeData=function(n){if(!this.pendingDisposal.has(n)){if(this.pendingRead.has(n))return this.pendingDisposal.add(n),void this.pendingDeletes++;if(this.texData.has(n)){this.releaseGPUData(n);var r=this.texData.get(n).complexTensors;r!=null&&(r.real.dispose(),r.imag.dispose()),this.texData.delete(n)}}},t.prototype.releaseGPUData=function(n){var r=this.texData.get(n),A=r.texture,o=r.dtype,i=r.texShape,a=r.usage,s=r.isPacked,u=r.slice,l=u&&u.origDataId||n,c=this.dataRefCount.get(l);c>1?this.dataRefCount.set(l,c-1):(this.dataRefCount.delete(l),A!=null&&(this.numBytesInGPU-=this.computeBytes(i,o),this.textureManager.releaseTexture(A,i,a,s)));var f=this.texData.get(n);f.texture=null,f.texShape=null,f.isPacked=!1,f.slice=null},t.prototype.getTexture=function(n){return this.uploadToGPU(n),this.texData.get(n).texture},t.prototype.getDataInfo=function(n){return this.texData.get(n)},t.prototype.getCPUBackend=function(){return V().getBool("WEBGL_CPU_FORWARD")?(this.cpuBackend==null&&(this.cpuBackend=k.findBackend("cpu")),this.cpuBackend):null},t.prototype.shouldExecuteOnCPU=function(n,r){var A=this;return r===void 0&&(r=128),this.getCPUBackend()!=null&&n.every(function(o){return A.texData.get(o.dataId).texture==null&&o.size<r})},t.prototype.getGPGPUContext=function(){return this.gpgpu},t.prototype.complex=function(n,r){var A=this.makeOutput(n.shape,"complex64");return this.texData.get(A.dataId).complexTensors={real:k.keep(n.clone()),imag:k.keep(r.clone())},A},t.prototype.real=function(n){return this.texData.get(n.dataId).complexTensors.real.clone()},t.prototype.imag=function(n){return this.texData.get(n.dataId).complexTensors.imag.clone()},t.prototype.slice=function(n,r,A){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.slice(n,r,A);if(ne(A)===0)return xt([],A,n.dtype);var o=this.texData.get(n.dataId).isPacked,i=Qy(n.shape,r,A);if(o||!i){var a=V().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new vU(A):new gU(A),s=a.getCustomSetupFunc(r);return this.compileAndRun(a,[n],null,s)}return this.uploadToGPU(n.dataId),this.shallowSlice(n,r,A)},t.prototype.shallowSlice=function(n,r,A){var o=this.texData.get(n.dataId),i=this.makeOutput(A,n.dtype),a=this.texData.get(i.dataId);Object.assign(a,o),a.shape=A,a.dtype=n.dtype;var s=Uy(r,n.strides);o.slice&&(s+=o.slice.flatOffset),a.slice={flatOffset:s,origDataId:o.slice&&o.slice.origDataId||n.dataId};var u=this.dataRefCount.get(a.slice.origDataId)||1;return this.dataRefCount.set(a.slice.origDataId,u+1),i},t.prototype.stridedSlice=function(n,r,A,o){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.stridedSlice(n,r,A,o);var i=Fp(r,A,o);if(i.some(function(s){return s===0}))return xt([],i);var a=new mU(r,o,i);return this.compileAndRun(a,[n])},t.prototype.reverse=function(n,r){var A=V().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new hU(n.shape,r):new fU(n.shape,r);return this.compileAndRun(A,[n])},t.prototype.concat=function(n,r){if(n[0].dtype==="complex64"){var A=n.map(function(h){return xn(h)}),o=n.map(function(h){return rr(h)});return Bt(this.concat(A,r),this.concat(o,r))}if(this.shouldExecuteOnCPU(n))return this.cpuBackend.concat(n,r);if(n.length===1)return n[0];if(n.length>V().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){var i=Math.floor(n.length/2),a=this.concat(n.slice(0,i),r),s=this.concat(n.slice(i),r);return this.concat([a,s],r)}if(V().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&n[0].rank>1){var u=new sQ(n.map(function(h){return h.shape}),r);return this.compileAndRun(u,n)}var l=di(n.map(function(h){return h.shape}),r),c=n.map(function(h){return h.as2D(-1,ne(h.shape.slice(r)))}),f=new aQ(c.map(function(h){return h.shape}));return this.compileAndRun(f,c).reshape(l)},t.prototype.neg=function(n){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.neg(n);if(V().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(n,um,n.dtype);var r=new he(n.shape,um);return this.compileAndRun(r,[n])},t.prototype.batchMatMul=function(n,r,A,o){var i=A?n.shape[2]:n.shape[1],a=o?r.shape[1]:r.shape[2],s=A?n.shape[1]:n.shape[2],u=n.shape[0];if((i===1||a===1)&&s>1e3){A&&(n=n.transpose([0,2,1])),o&&(r=r.transpose([0,2,1]));var l=a===1?n:n.as3D(u,s,1),c=a===1?2:1,f=a===1?r.as3D(u,1,s):r;return this.multiply(l,f).sum(c,!0)}var h=Ct(n.dtype,r.dtype),d=new ef(n.shape,[u,i,a],A,o);return this.compileAndRun(d,[n,r],h)},t.prototype.fusedBatchMatMul=function(n){var r=n.a,A=n.b,o=n.transposeA,i=n.transposeB,a=n.bias,s=n.activation,u=n.preluActivationWeights,l=o?r.shape[2]:r.shape[1],c=i?A.shape[1]:A.shape[2],f=r.shape[0],h=Ct(r.dtype,A.dtype),d=a!=null,g=u!=null,m=s?Qs(s,!0):null,p=new ef(r.shape,[f,l,c],o,i,d,m,g),v=[r,A];return a&&v.push(a),u&&v.push(u),this.compileAndRun(p,v,h)},t.prototype.multiply=function(n,r){if(n.dtype==="complex64"){var A=this.texData.get(n.dataId),o=this.texData.get(r.dataId),i=new qv(nQ,n.shape,r.shape),a=new qv(rQ,n.shape,r.shape),s=[this.makeComplexComponentTensorInfo(n,A.complexTensors.real),this.makeComplexComponentTensorInfo(n,A.complexTensors.imag),this.makeComplexComponentTensorInfo(r,o.complexTensors.real),this.makeComplexComponentTensorInfo(r,o.complexTensors.imag)],u=this.compileAndRun(i,s),l=this.compileAndRun(a,s),c=this.complex(u,l);return u.dispose(),l.dispose(),c}if(this.shouldExecuteOnCPU([n,r]))return this.cpuBackend.multiply(n,r);if(V().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,Jv,n.dtype);var f=new $e(Jv,n.shape,r.shape);return this.compileAndRun(f,[n,r],n.dtype)},t.prototype.batchNormalization=function(n,r,A,o,i,a){var s=[n,r,A],u=null;a!=null&&(u=a.shape,s.push(a));var l=null;if(i!=null&&(l=i.shape,s.push(i)),V().getBool("WEBGL_PACK_NORMALIZATION")){var c=new tQ(n.shape,r.shape,A.shape,u,l,o);return this.compileAndRun(c,s)}var f=new eQ(n.shape,r.shape,A.shape,u,l,o);return this.compileAndRun(f,s)},t.prototype.localResponseNormalization4D=function(n,r,A,o,i){var a=V().getBool("WEBGL_PACK_NORMALIZATION")?new qQ(n.shape,r,A,o,i):new jQ(n.shape,r,A,o,i);return this.compileAndRun(a,[n])},t.prototype.LRNGrad=function(n,r,A,o,i,a,s){var u=new YQ(r.shape,o,i,a,s);return this.compileAndRun(u,[r,A,n])},t.prototype.tile=function(n,r){if(n.dtype==="string"){var A=this.readSync(n.dataId).map(function(i){return zu(i)});return Hy(fe(n.shape,n.dtype,A),r)}var o=new BU(n.shape,r);return this.compileAndRun(o,[n])},t.prototype.pad=function(n,r,A){var o=V().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new AU(n.shape,r,A):new rU(n.shape,r,A);return this.compileAndRun(o,[n])},t.prototype.transpose=function(n,r){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.transpose(n,r);var A=V().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new CU(n.shape,r):new yU(n.shape,r);return this.compileAndRun(A,[n])},t.prototype.gather=function(n,r,A){if(this.shouldExecuteOnCPU([n,r]))return this.cpuBackend.gather(n,r,A);var o=new IQ(n.shape,r.size,A);return this.compileAndRun(o,[n,r])},t.prototype.batchToSpaceND=function(n,r,A){U(n.rank<=4,function(){return"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet"});var o=r.reduce(function(c,f){return c*f}),i=Ju(n.shape,r,o),a=Zu(i.length,r.length),s=el(n.shape,r,o),u=xy(A,r.length),l=Fy(s,A,r.length);return n.reshape(i).transpose(a).reshape(s).slice(u,l)},t.prototype.spaceToBatchND=function(n,r,A){U(n.rank<=4,function(){return"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet"});var o=r.reduce(function(f,h){return f*h}),i=[[0,0]];i.push.apply(i,A);for(var a=1+r.length;a<n.shape.length;++a)i.push([0,0]);var s=n.pad(i),u=Ju(s.shape,r,o,!1),l=Zu(u.length,r.length,!1),c=el(s.shape,r,o,!1);return s.reshape(u).transpose(l).reshape(c)},t.prototype.reduce=function(n,r,A){var o=n.shape[0],i=n.shape[1],a=qc(i),s=new oU({windowSize:a,inSize:i,batchSize:o},r),u=this.compileAndRun(s,[n],A);return u.shape[1]===1?u:this.reduce(u,r,A)},t.prototype.argReduce=function(n,r,A){A===void 0&&(A=null);var o=n.shape[0],i=n.shape[1];A!=null&&(o=A.shape[0],i=A.shape[1]);var a=qc(i),s=new G2({windowSize:a,inSize:i,batchSize:o},r,A==null),u=[n];A!=null&&u.push(A);var l=this.compileAndRun(s,u,"int32");return l.shape[1]===1?l:this.argReduce(n,r,l)},t.prototype.argReducePacked=function(n,r,A){A===void 0&&(A=null);var o=A!=null?A.shape:n.shape,i=qc(o[o.length-1]),a=new q2(o,i,r,A==null),s=A==null?[n]:[n,A],u=this.compileAndRun(a,s,"int32");return u.rank===n.rank?this.argReducePacked(n,r,u):u},t.prototype.sum=function(n,r){an("sum",r,n.rank);var A=St(n.shape,r),o=A[0],i=ne(A[1]),a=n.as2D(-1,i),s=Vc(n.dtype);return this.reduce(a,"sum",s).reshape(o)},t.prototype.prod=function(n,r){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.prod(n,r);var A=St(n.shape,r),o=A[0],i=ne(A[1]),a=n.as2D(-1,i),s=Vc(n.dtype);return this.reduce(a,"prod",s).reshape(o)},t.prototype.unsortedSegmentSum=function(n,r,A){var o=0,i=fr([o],n.rank),a=n;i!=null&&(a=n.transpose(i),o=hr(1,n.rank)[0]);var s=function(h,d,g){for(var m=[],p=h.length,v=0;v<p;v++)v!==d?m.push(h[v]):m.push(g);return m}(a.shape,o,A),u=ne([a.shape[o]]),l=a.as2D(-1,u),c=Vc(n.dtype),f=this.segOpCompute(l,"unsortedSegmentSum",r,c,A).reshape(s);return i!=null&&(f=f.transpose(Bp(i))),f},t.prototype.segOpCompute=function(n,r,A,o,i){var a=n.shape[0],s=n.shape[1],u=function(f,h){var d,g=!1;for(f<=Ey?(d=f,g=!0):d=Hh(f,Math.floor(Math.sqrt(f)));!g;)d>h||d===f?g=!0:d=Hh(f,d+1);return d}(s,i),l=new dU({windowSize:u,inSize:s,batchSize:a,numSegments:i}),c=this.compileAndRun(l,[n,A],o);return c.shape[1]===i?c:(A=qu(0,i).tile([s/u]),this.segOpCompute(c,r,A,o,i))},t.prototype.argMinMaxReduce=function(n,r,A){var o=[r];if(an("arg"+A.charAt(0).toUpperCase()+A.slice(1),o,n.rank),!V().getBool("WEBGL_PACK_REDUCE")||n.rank<=2){var i=St(n.shape,o),a=i[0],s=ne(i[1]),u=n.as2D(-1,s);return this.argReduce(u,A).reshape(a)}return this.argReducePacked(n,A)},t.prototype.argMin=function(n,r){return this.argMinMaxReduce(n,r,"min")},t.prototype.argMax=function(n,r){return this.argMinMaxReduce(n,r,"max")},t.prototype.cumsum=function(n,r,A,o){if(r!==n.rank-1)throw new Error("WebGL cumsum shader expects an inner-most axis="+(n.rank-1)+" but got axis="+r);var i=new vQ(n.shape,A,o);return this.compileAndRun(i,[n])},t.prototype.equal=function(n,r){if(V().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  return vec4(equal(a, b));
`,"bool");var A=new $e("return float(a == b);",n.shape,r.shape);return this.compileAndRun(A,[n,r],"bool")},t.prototype.notEqual=function(n,r){if(V().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  return vec4(notEqual(a, b));
`,"bool");var A=new $e("return float(a != b);",n.shape,r.shape);return this.compileAndRun(A,[n,r],"bool")},t.prototype.less=function(n,r){if(this.shouldExecuteOnCPU([n,r]))return this.cpuBackend.less(n,r);if(V().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  return vec4(lessThan(a, b));
`,"bool");var A=new $e("return float(a < b);",n.shape,r.shape);return this.compileAndRun(A,[n,r],"bool")},t.prototype.lessEqual=function(n,r){if(V().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  return vec4(lessThanEqual(a, b));
`,"bool");var A=new $e("return float(a <= b);",n.shape,r.shape);return this.compileAndRun(A,[n,r],"bool")},t.prototype.greater=function(n,r){if(this.shouldExecuteOnCPU([n,r]))return this.cpuBackend.greater(n,r);if(V().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  return vec4(greaterThan(a, b));
`,"bool");var A=new $e("return float(a > b);",n.shape,r.shape);return this.compileAndRun(A,[n,r],"bool")},t.prototype.greaterEqual=function(n,r){if(V().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  return vec4(greaterThanEqual(a, b));
`,"bool");var A=new $e("return float(a >= b);",n.shape,r.shape);return this.compileAndRun(A,[n,r],"bool")},t.prototype.logicalNot=function(n){var r=new he(n.shape,"return float(!(x >= 1.0));");return this.compileAndRun(r,[n])},t.prototype.logicalAnd=function(n,r){if(V().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  return vec4(
    vec4(greaterThanEqual(a, vec4(1.0))) *
    vec4(greaterThanEqual(b, vec4(1.0))));
`,"bool");var A=new $e("return float(a >= 1.0 && b >= 1.0);",n.shape,r.shape);return this.compileAndRun(A,[n,r],"bool")},t.prototype.logicalOr=function(n,r){if(V().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  return min(
    vec4(greaterThanEqual(a, vec4(1.0))) +
    vec4(greaterThanEqual(b, vec4(1.0))),
    vec4(1.0));
`,"bool");var A=new $e("return float(a >= 1.0 || b >= 1.0);",n.shape,r.shape);return this.compileAndRun(A,[n,r],"bool")},t.prototype.select=function(n,r,A){var o=new pU(n.rank,r.shape,r.rank);return this.compileAndRun(o,[n,r,A],Ct(r.dtype,A.dtype))},t.prototype.where=function(n){ju("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");var r=n.dataSync();return Up(n.shape,r)},t.prototype.topk=function(n,r,A){return Ny(n.dataSync(),n.shape,n.dtype,r)},t.prototype.min=function(n,r){an("min",r,n.rank);var A=St(n.shape,r),o=A[0],i=ne(A[1]),a=n.as2D(-1,i);return this.reduce(a,"min",a.dtype).reshape(o)},t.prototype.minimum=function(n,r){if(this.shouldExecuteOnCPU([n,r]))return this.cpuBackend.minimum(n,r);var A=V().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new xr(`
  vec4 result = vec4(min(a, b));
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,n.shape,r.shape):new $e(`
  if (isnan(a)) return a;
  if (isnan(b)) return b;

  return min(a, b);
`,n.shape,r.shape);return this.compileAndRun(A,[n,r])},t.prototype.mod=function(n,r){var A=V().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new xr(`
  vec4 result = mod(a, b);
  vec4 isNaN = vec4(equal(b, vec4(0.0)));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,n.shape,r.shape):new $e(`if (b == 0.0) return NAN;
  return mod(a, b);`,n.shape,r.shape);return this.compileAndRun(A,[n,r])},t.prototype.max=function(n,r){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.max(n,r);an("max",r,n.rank);var A=St(n.shape,r),o=A[0],i=ne(A[1]),a=n.as2D(-1,i);return this.reduce(a,"max",a.dtype).reshape(o)},t.prototype.maximum=function(n,r){if(this.shouldExecuteOnCPU([n,r]))return this.cpuBackend.maximum(n,r);var A=V().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new xr(`
  vec4 result = vec4(max(a, b));
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,n.shape,r.shape):new $e(`
  if (isnan(a)) return a;
  if (isnan(b)) return b;

  return max(a, b);
`,n.shape,r.shape);return this.compileAndRun(A,[n,r])},t.prototype.all=function(n,r){an("all",r,n.rank);var A=St(n.shape,r),o=A[0],i=ne(A[1]),a=n.as2D(-1,i);return this.reduce(a,"all",a.dtype).reshape(o)},t.prototype.any=function(n,r){an("any",r,n.rank);var A=St(n.shape,r),o=A[0],i=ne(A[1]),a=n.as2D(-1,i);return this.reduce(a,"any",a.dtype).reshape(o)},t.prototype.realDivide=function(n,r){if(V().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  // vec4 one = vec4(equal(a, b));
  // return one + (vec4(1.0) - one) * a / b;
  vec4 result = a / b;
  if(a.x == b.x) {
    result.x = 1.;
  }
  if(a.y == b.y) {
    result.y = 1.;
  }
  if(a.z == b.z) {
    result.z = 1.;
  }
  if(a.w == b.w) {
    result.w = 1.;
  }

  return result;
`,"float32",!0);var A=new $e(`
if (a == b) {
  return 1.0;
};
return a / b;`,n.shape,r.shape);return this.compileAndRun(A,[n,r],"float32")},t.prototype.floorDiv=function(n,r){if(V().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  ivec4 ia = round(a);
  ivec4 ib = round(b);
  bvec4 cond = notEqual(ib, ivec4(0));
  ivec4 result = ivec4(0);
  vec4 s = sign(a) * sign(b);

  // Windows (D3D) wants guaranteed non-zero int division at compile-time.
  if (cond[0]) {
    result[0] = idiv(ia[0], ib[0], s[0]);
  }
  if (cond[1]) {
    result[1] = idiv(ia[1], ib[1], s[1]);
  }
  if (cond[2]) {
    result[2] = idiv(ia[2], ib[2], s[2]);
  }
  if (cond[3]) {
    result[3] = idiv(ia[3], ib[3], s[3]);
  }
  return vec4(result);
`,"int32");var A=new $e(`
  float s = sign(a) * sign(b);
  int ia = round(a);
  int ib = round(b);
  if (ib != 0) {
    // Windows (D3D) wants guaranteed non-zero int division at compile-time.
    return float(idiv(ia, ib, s));
  } else {
    return NAN;
  }
`,n.shape,r.shape);return this.compileAndRun(A,[n,r],"int32")},t.prototype.add=function(n,r){if(n.dtype==="complex64"&&r.dtype==="complex64")return this.complexSeparableBinaryOp(n,r,Jc);if(this.shouldExecuteOnCPU([n,r]))return this.cpuBackend.add(n,r);var A=Ct(n.dtype,r.dtype);if(V().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,Jc,A);var o=new $e(Jc,n.shape,r.shape);return this.compileAndRun(o,[n,r],A)},t.prototype.packedUnaryOp=function(n,r,A){var o=new Ri(n.shape,r);return this.compileAndRun(o,[n],A)},t.prototype.packedBinaryOp=function(n,r,A,o,i){i===void 0&&(i=!1);var a=new xr(A,n.shape,r.shape,i);return this.compileAndRun(a,[n,r],o)},t.prototype.complexSeparableBinaryOp=function(n,r,A){var o=this,i=this.texData.get(n.dataId),a=this.texData.get(r.dataId),s=[[i.complexTensors.real,a.complexTensors.real],[i.complexTensors.imag,a.complexTensors.imag]].map(function(f){var h=f[0],d=f[1],g=o.makeComplexComponentTensorInfo(n,h),m=o.makeComplexComponentTensorInfo(r,d),p=new $e(A,n.shape,r.shape);return o.compileAndRun(p,[g,m],Ct(h.dtype,d.dtype))}),u=s[0],l=s[1],c=this.complex(u,l);return u.dispose(),l.dispose(),c},t.prototype.makeComplexComponentTensorInfo=function(n,r){return{dataId:r.dataId,dtype:r.dtype,shape:n.shape}},t.prototype.addN=function(n){if(n.length===1)return n[0];if(n.length>V().get("WEBGL_MAX_TEXTURES_IN_SHADER")){var r=Math.floor(n.length/2),A=this.addN(n.slice(0,r)),o=this.addN(n.slice(r));return this.addN([A,o])}var i=n.map(function(u){return u.dtype}).reduce(function(u,l){return Ct(u,l)}),a=n.map(function(u){return u.shape}),s=V().getBool("WEBGL_PACK")?new W2(n[0].shape,a):new V2(n[0].shape,a);return this.compileAndRun(s,n,i)},t.prototype.subtract=function(n,r){if(n.dtype==="complex64"&&r.dtype==="complex64")return this.complexSeparableBinaryOp(n,r,Zc);if(this.shouldExecuteOnCPU([n,r]))return this.cpuBackend.subtract(n,r);var A=Ct(n.dtype,r.dtype);if(V().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,Zc,n.dtype);var o=new $e(Zc,n.shape,r.shape);return this.compileAndRun(o,[n,r],A)},t.prototype.pow=function(n,r){var A=V().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new xr(`
  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.
  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));
  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);
  vec4 result = multiplier * pow(abs(a), b);

  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS
  bvec4 isExpZero = equal(b, vec4(0.0));
  result.r = isExpZero.r ? 1.0 : result.r;
  result.g = isExpZero.g ? 1.0 : result.g;
  result.b = isExpZero.b ? 1.0 : result.b;
  result.a = isExpZero.a ? 1.0 : result.a;

  vec4 isNaN = vec4(lessThan(a, vec4(0.0))) * vec4(lessThan(floor(b), b));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,n.shape,r.shape):new $e(`
if(a < 0.0 && floor(b) < b){
  return NAN;
}
if (b == 0.0) {
  return 1.0;
}
return (round(mod(b, 2.0)) != 1) ?
    pow(abs(a), b) : sign(a) * pow(abs(a), b);
`,n.shape,r.shape),o=Ct(n.dtype,r.dtype);return this.compileAndRun(A,[n,r],o)},t.prototype.ceil=function(n){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.ceil(n);if(V().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(n,lm,n.dtype);var r=new he(n.shape,lm);return this.compileAndRun(r,[n])},t.prototype.floor=function(n){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.floor(n);if(V().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(n,cm,n.dtype);var r=new he(n.shape,cm);return this.compileAndRun(r,[n])},t.prototype.sign=function(n){var r=new he(n.shape,`
  if (isnan(x)) { return 0.0; }
  return sign(x);
`);return this.compileAndRun(r,[n])},t.prototype.isNaN=function(n){var r=new he(n.shape,"return float(isnan(x));");return this.compileAndRun(r,[n],"bool")},t.prototype.isInf=function(n){var r=new he(n.shape,"return float(isinf(x));");return this.compileAndRun(r,[n],"bool")},t.prototype.isFinite=function(n){var r=new he(n.shape,"return float(!isnan(x) && !isinf(x));");return this.compileAndRun(r,[n],"bool")},t.prototype.round=function(n){var r=new he(n.shape,`
  // OpenGL ES does not support round function.
  // The algorithm is based on banker's rounding.
  float base = floor(x);
  if ((x - base) < 0.5) {
    return floor(x);
  } else if ((x - base) > 0.5) {
    return ceil(x);
  } else {
    if (mod(base, 2.0) == 0.0) {
      return base;
    } else {
      return base + 1.0;
    }
  }
`);return this.compileAndRun(r,[n])},t.prototype.exp=function(n){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.exp(n);if(V().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(n,fm,n.dtype);var r=new he(n.shape,fm);return this.compileAndRun(r,[n])},t.prototype.expm1=function(n){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.expm1(n);if(V().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(n,hm,n.dtype);var r=new he(n.shape,hm);return this.compileAndRun(r,[n])},t.prototype.softmax=function(n,r){var A=ft([r],n.shape),o=this.max(n,A),i=tn(o.shape,A),a=this.subtract(n,o.reshape(i)),s=this.exp(a),u=this.sum(s,A).reshape(i);return this.realDivide(s,u)},t.prototype.log=function(n){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.log(n);if(V().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(n,`
  vec4 result = log(x);
  vec4 isNaN = vec4(lessThan(x, vec4(0.0)));
  result.r = isNaN.r == 1.0 ? NAN : result.r;
  result.g = isNaN.g == 1.0 ? NAN : result.g;
  result.b = isNaN.b == 1.0 ? NAN : result.b;
  result.a = isNaN.a == 1.0 ? NAN : result.a;

  return result;
`,n.dtype);var r=new he(n.shape,`if (x < 0.0) return NAN;
  return log(x);`);return this.compileAndRun(r,[n])},t.prototype.log1p=function(n){var r=new he(n.shape,"return log(1.0 + x);");return this.compileAndRun(r,[n])},t.prototype.sqrt=function(n){var r=new he(n.shape,"return sqrt(x);");return this.compileAndRun(r,[n])},t.prototype.rsqrt=function(n){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.rsqrt(n);var r=new he(n.shape,"return inversesqrt(x);");return this.compileAndRun(r,[n])},t.prototype.reciprocal=function(n){var r=new he(n.shape,"return 1.0 / x;");return this.compileAndRun(r,[n])},t.prototype.relu=function(n){var r;return r=V().getBool("WEBGL_PACK")?new Ri(n.shape,zy):new he(n.shape,Vy),this.compileAndRun(r,[n])},t.prototype.relu6=function(n){var r;return r=V().getBool("WEBGL_PACK")?new Ri(n.shape,Xy):new he(n.shape,Wy),this.compileAndRun(r,[n])},t.prototype.prelu=function(n,r){var A=V().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new xr(Ky,n.shape,r.shape):new $e(Py,n.shape,r.shape);return this.compileAndRun(A,[n,r])},t.prototype.elu=function(n){if(V().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(n,$y,n.dtype);var r=new he(n.shape,Gy);return this.compileAndRun(r,[n])},t.prototype.eluDer=function(n,r){var A=V().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new xr(`
  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));
  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));
`,n.shape,r.shape):new $e("return (b >= 1.0) ? a : a * (b + 1.0);",n.shape,r.shape);return this.compileAndRun(A,[n,r])},t.prototype.selu=function(n){var r=new he(n.shape,FU);return this.compileAndRun(r,[n])},t.prototype.int=function(n){var r=new he(n.shape,"return float(int(x));");return this.compileAndRun(r,[n],"int32")},t.prototype.clip=function(n,r,A){var o,i=(o=V().getBool("WEBGL_PACK_CLIP")?new oQ(n.shape):new AQ(n.shape)).getCustomSetupFunc(r,A);return this.compileAndRun(o,[n],null,i)},t.prototype.abs=function(n){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.abs(n);if(V().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(n,sm,n.dtype);var r=new he(n.shape,sm);return this.compileAndRun(r,[n])},t.prototype.complexAbs=function(n){var r=this.texData.get(n.dataId),A=new iQ(n.shape),o=[this.makeComplexComponentTensorInfo(n,r.complexTensors.real),this.makeComplexComponentTensorInfo(n,r.complexTensors.imag)];return this.compileAndRun(A,o)},t.prototype.sigmoid=function(n){var r=new he(n.shape,"return 1.0 / (1.0 + exp(-1.0 * x));");return this.compileAndRun(r,[n])},t.prototype.softplus=function(n){var r=new he(n.shape,`
  float epsilon = 1.1920928955078125e-7;
  float threshold = log(epsilon) + 2.0;

  bool too_large = x > -threshold;
  bool too_small = x < threshold;

  float result;
  float exp_x = exp(x);

  if (too_large){
    result = x;
  }
  else if (too_small){
    result = exp_x;
  }
  else{
    result = log(exp_x + 1.0);
  }
  return result;
`);return this.compileAndRun(r,[n])},t.prototype.sin=function(n){var r=new he(n.shape,bU);return this.compileAndRun(r,[n])},t.prototype.cos=function(n){var r=new he(n.shape,EU);return this.compileAndRun(r,[n])},t.prototype.tan=function(n){var r=new he(n.shape,"return tan(x);");return this.compileAndRun(r,[n])},t.prototype.asin=function(n){var r=new he(n.shape,QU);return this.compileAndRun(r,[n])},t.prototype.acos=function(n){var r=new he(n.shape,UU);return this.compileAndRun(r,[n])},t.prototype.atan=function(n){var r=new he(n.shape,IU);return this.compileAndRun(r,[n])},t.prototype.atan2=function(n,r){var A=V().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new xr(`
  vec4 result = atan(a, b);
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,n.shape,r.shape):new $e(`
  if (isnan(a)) return a;
  if (isnan(b)) return b;

  return atan(a, b);
`,n.shape,r.shape);return this.compileAndRun(A,[n,r])},t.prototype.sinh=function(n){var r=new he(n.shape,`
  float e2x = exp(x);
  return (e2x - 1.0 / e2x) / 2.0;
`);return this.compileAndRun(r,[n])},t.prototype.cosh=function(n){var r=new he(n.shape,`
  float e2x = exp(-x);
  return (e2x + 1.0 / e2x) / 2.0;
`);return this.compileAndRun(r,[n])},t.prototype.tanh=function(n){var r=new he(n.shape,`
  float e2x = exp(-2.0 * abs(x));
  return sign(x) * (1.0 - e2x) / (1.0 + e2x);
`);return this.compileAndRun(r,[n])},t.prototype.asinh=function(n){var r=new he(n.shape,SU);return this.compileAndRun(r,[n])},t.prototype.acosh=function(n){var r=new he(n.shape,_U);return this.compileAndRun(r,[n])},t.prototype.atanh=function(n){var r=new he(n.shape,kU);return this.compileAndRun(r,[n])},t.prototype.erf=function(n){var r=new he(n.shape,`
  // Error function is calculated approximately with elementary function.
  // See "Handbook of Mathematical Functions with Formulas,
  // Graphs, and Mathematical Tables", Abramowitz and Stegun.
  float p = 0.3275911;
  float a1 = 0.254829592;
  float a2 = -0.284496736;
  float a3 = 1.421413741;
  float a4 = -1.453152027;
  float a5 = 1.061405429;

  float sign = sign(x);
  x = abs(x);
  float t = 1.0 / (1.0 + p * x);
  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));
`);return this.compileAndRun(r,[n])},t.prototype.step=function(n,r){var A=new he(n.shape,function(o){return o===void 0&&(o=0),Wn+`
    return x > 0.0 ? 1.0 : float(`+o+`);
  `}(r));return this.compileAndRun(A,[n])},t.prototype.conv2dByMatMul=function(n,r,A,o,i,a){var s=n.shape,u=this.texData.get(n.dataId),l=A.inChannels,c=s[0]*s[1]*s[2],f=A.outChannels,h=A.dataFormat==="channelsLast",d=(c===1||f===1)&&l>1e3,g=s[2]%2!=0&&!!u.isPacked;if(d||!V().getBool("WEBGL_LAZILY_UNPACK")||!V().getBool("WEBGL_PACK_BINARY_OPERATIONS")||!g){var m=h?s[0]*s[1]*s[2]:s[0]*s[2]*s[3],p=this.reshape(n,[1,m,A.inChannels]),v=this.reshape(r,[1,A.inChannels,A.outChannels]);return this.reshape(this.fusedBatchMatMul({a:p,b:v,transposeA:!1,transposeB:!1,bias:o,activation:i,preluActivationWeights:a}),A.outShape)}var w=h?s[0]*s[1]*(s[2]+1):s[0]*s[2]*(s[3]+1),B={dataId:n.dataId,shape:[1,w,A.inChannels],dtype:n.dtype},y=u.shape;u.shape=u.shape.slice(),u.shape[u.shape.length-2]++,U(xs(u.shape,B.shape),function(){return"packed reshape "+u.shape+" to "+B.shape+" isn't free"});var C=this.reshape(r,[1,A.inChannels,A.outChannels]),b=this.fusedBatchMatMul({a:B,b:C,transposeA:!1,transposeB:!1,bias:o,activation:i,preluActivationWeights:a}),x=this.texData.get(b.dataId);return U(x.isPacked,function(){return"batchMatMul result is expected to be packed"}),u.shape=y,x.shape=A.outShape,k.makeTensorFromDataId(b.dataId,A.outShape,b.dtype)},t.prototype.conv2dWithIm2Row=function(n,r,A,o,i,a){var s=A.filterWidth,u=A.filterHeight,l=A.inChannels,c=A.outWidth,f=A.outHeight,h=A.dataFormat==="channelsLast",d=s*u*l,g=f*c,m=[d,g],p=n.squeeze([0]),v=r.reshape([1,d,-1]),w=new $Q(m,p.shape,A),B=this.compileAndRun(w,[p]).reshape([1,m[0],m[1]]),y=o!=null,C=a!=null,b=i?Qs(i,!0):null,x=new ef(B.shape,[1,g,A.outChannels],!0,!1,y,b,C),F=[B,v];o&&F.push(o),C&&F.push(a);var E=this.compileAndRun(x,F);return h?E.reshape([1,f,c,A.outChannels]):E.reshape([1,A.outChannels,f,c])},t.prototype.fusedConv2d=function(n){var r=n.input,A=n.filter,o=n.convInfo,i=n.bias,a=n.activation,s=n.preluActivationWeights;if(o.filterHeight===1&&o.filterWidth===1&&o.dilationHeight===1&&o.dilationWidth===1&&o.strideHeight===1&&o.strideWidth===1&&(o.padInfo.type==="SAME"||o.padInfo.type==="VALID"))return this.conv2dByMatMul(r,A,o,i,a,s);if(V().getBool("WEBGL_CONV_IM2COL")&&r.shape[0]===1)return this.conv2dWithIm2Row(r,A,o,i,a,s);var u=i!=null,l=s!=null,c=a?Qs(a,!1):null,f=new Zv(o,u,c,l),h=[r,A];return i&&h.push(i),s&&h.push(s),this.compileAndRun(f,h)},t.prototype.conv2d=function(n,r,A){if(A.filterHeight===1&&A.filterWidth===1&&A.dilationHeight===1&&A.dilationWidth===1&&A.strideHeight===1&&A.strideWidth===1&&(A.padInfo.type==="SAME"||A.padInfo.type==="VALID"))return this.conv2dByMatMul(n,r,A);if(V().getBool("WEBGL_CONV_IM2COL")&&n.shape[0]===1)return this.conv2dWithIm2Row(n,r,A);var o=new Zv(A);return this.compileAndRun(o,[n,r])},t.prototype.conv2dDerInput=function(n,r,A){var o=new lQ(A);return this.compileAndRun(o,[n,r])},t.prototype.conv2dDerFilter=function(n,r,A){var o=new uQ(A);return this.compileAndRun(o,[n,r])},t.prototype.fusedDepthwiseConv2D=function(n){var r,A=n.input,o=n.filter,i=n.convInfo,a=n.bias,s=n.activation,u=n.preluActivationWeights,l=V().getBool("WEBGL_PACK_DEPTHWISECONV")&&i.strideWidth<=2&&i.outChannels/i.inChannels==1,c=s?Qs(s,l):null,f=[A,o],h=a!=null,d=u!=null;return h&&f.push(a),d&&f.push(u),l?(r=new tm(i,h,c,d),this.compileAndRun(r,f)):(r=new em(i,h,c,d),this.compileAndRun(r,f))},t.prototype.depthwiseConv2D=function(n,r,A){var o;return V().getBool("WEBGL_PACK_DEPTHWISECONV")&&A.strideWidth<=2&&A.outChannels/A.inChannels==1?(o=new tm(A),this.compileAndRun(o,[n,r])):(o=new em(A),this.compileAndRun(o,[n,r]))},t.prototype.depthwiseConv2DDerInput=function(n,r,A){var o=new dQ(A);return this.compileAndRun(o,[n,r])},t.prototype.depthwiseConv2DDerFilter=function(n,r,A){var o=new hQ(A);return this.compileAndRun(o,[n,r])},t.prototype.conv3d=function(n,r,A){var o=new pQ(A);return this.compileAndRun(o,[n,r])},t.prototype.conv3dDerInput=function(n,r,A){var o=new fQ(A);return this.compileAndRun(o,[n,r])},t.prototype.conv3dDerFilter=function(n,r,A){var o=new cQ(A);return this.compileAndRun(o,[n,r])},t.prototype.maxPool=function(n,r){var A=new tf(r,"max",!1);return this.compileAndRun(A,[n])},t.prototype.avgPool=function(n,r){var A=new tf(r,"avg",!1);return this.compileAndRun(A,[n],"float32")},t.prototype.maxPoolBackprop=function(n,r,A,o){var i=new tf(o,"max",!0),a=this.compileAndRun(i,[r]),s=new JQ(o),u=this.compileAndRun(s,[n,a],r.dtype);return a.dispose(),u},t.prototype.avgPoolBackprop=function(n,r,A){var o=new J2(A);return this.compileAndRun(o,[n],r.dtype)},t.prototype.cast=function(n,r){return ky(n,r,this)},t.prototype.unstack=function(n,r){for(var A=n.shape[r],o=new Array(n.rank-1),i=0,a=0;a<n.rank;a++)a!==r&&(o[i++]=n.shape[a]);var s=new Array(n.rank).fill(0),u=n.shape.slice();u[r]=1;var l=new Array(A);for(a=0;a<l.length;a++)s[r]=a,l[a]=this.slice(n,s,u).reshape(o);return l},t.prototype.avgPool3d=function(n,r){var A=new nf(r,"avg",!1);return this.compileAndRun(A,[n],"float32")},t.prototype.avgPool3dBackprop=function(n,r,A){var o=new Z2(A);return this.compileAndRun(o,[n],r.dtype)},t.prototype.maxPool3d=function(n,r){var A=new nf(r,"max",!1);return this.compileAndRun(A,[n],"float32")},t.prototype.maxPool3dBackprop=function(n,r,A,o){var i=new nf(o,"max",!0),a=this.compileAndRun(i,[r]),s=new ZQ(o),u=this.compileAndRun(s,[n,a],r.dtype);return a.dispose(),u},t.prototype.reshape=function(n,r){var A=this.texData.get(n.dataId);if(A.isPacked&&!xs(n.shape,r)&&(A.texture===null||!xs(A.shape,r))){var o=this.packedReshape(n,r);return k.makeTensorFromDataId(o.dataId,o.shape,o.dtype)}return Wh(n,r)},t.prototype.resizeBilinear=function(n,r,A,o){var i=V().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new uU(n.shape,r,A,o):new sU(n.shape,r,A,o);return this.compileAndRun(i,[n],"float32")},t.prototype.resizeBilinearBackprop=function(n,r,A){var o=new aU(n,r,A);return this.compileAndRun(o,[n])},t.prototype.resizeNearestNeighbor=function(n,r,A,o){var i=new cU(n.shape,r,A,o);return this.compileAndRun(i,[n])},t.prototype.resizeNearestNeighborBackprop=function(n,r,A){var o=new lU(n,r,A);return this.compileAndRun(o,[n])},t.prototype.multinomial=function(n,r,A,o){var i=r?n:Lr(n),a=i.shape[0],s=i.shape[1],u=new eU(a,s,A),l=u.getCustomSetupFunc(o);return this.compileAndRun(u,[i],"int32",l)},t.prototype.oneHot=function(n,r,A,o){var i=new tU(n.size,r,A,o);return this.compileAndRun(i,[n])},t.prototype.diag=function(n){var r=new yQ(n.size);return this.compileAndRun(r,[n])},t.prototype.nonMaxSuppression=function(n,r,A,o,i){return ju("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead"),Ep(n.dataSync(),r.dataSync(),A,o,i)},t.prototype.cropAndResize=function(n,r,A,o,i,a){var s=new gQ(n.shape,r.shape,o,i,a);return this.compileAndRun(s,[n,r,A],"float32")},t.prototype.depthToSpace=function(n,r,A){U(r>1,function(){return"blockSize should be > 1 for depthToSpace, but was: "+r});var o=n.shape[0],i=A==="NHWC"?n.shape[1]:n.shape[2],a=A==="NHWC"?n.shape[2]:n.shape[3],s=A==="NHWC"?n.shape[3]:n.shape[1],u=i*r,l=a*r,c=s/(r*r),f=new BQ(A==="NHWC"?[o,u,l,c]:[o,c,u,l],r,A);return this.compileAndRun(f,[n])},t.prototype.split=function(n,r,A){return Ty(n,r,A)},t.prototype.scatterND=function(n,r,A){var o=tl(0,n,A),i=o.sliceRank,a=o.numUpdates,s=o.sliceSize,u=o.strides,l=o.outputSize,c=[l/s,s],f=n.reshape([a,i]),h=r.reshape([a,s]);if(l===0)return Wh(xt([]),A);var d=$(0),g=new om(a,i,f.rank,h.rank,u,c);return this.compileAndRun(g,[h,f,d]).reshape(A)},t.prototype.sparseToDense=function(n,r,A,o){var i=tl(0,n,A),a=i.sliceRank,s=i.numUpdates,u=i.strides,l=i.outputSize,c=new om(s,a,n.rank,r.rank,u,[l,1]);return this.compileAndRun(c,[r,n,o]).reshape(A)},t.prototype.fft=function(n){return this.fftImpl(n,!1)},t.prototype.ifft=function(n){return this.fftImpl(n,!0)},t.prototype.fftImpl=function(n,r){var A=this.texData.get(n.dataId),o=new rm(EQ,n.shape,r),i=new rm(QQ,n.shape,r),a=[this.makeComplexComponentTensorInfo(n,A.complexTensors.real),this.makeComplexComponentTensorInfo(n,A.complexTensors.imag)],s=this.compileAndRun(o,a),u=this.compileAndRun(i,a),l=this.complex(s,u).as2D(n.shape[0],n.shape[1]);return s.dispose(),u.dispose(),l},t.prototype.gatherND=function(n,r){var A=r.shape,o=A[A.length-1],i=by(n,r),a=i[0],s=i[1],u=i[2],l=i[3],c=r.reshape([s,o]),f=n.reshape([n.size/u,u]),h=new SQ(o,l,[s,u]);return this.compileAndRun(h,[f,c]).reshape(a)},t.prototype.fill=function(n,r,A){if((A=A||Ga(r))==="string"){var o=Gu(A,ne(n));return o.fill(r),k.makeTensor(o,n,A,this)}var i=new UQ(n,r),a=i.getCustomSetupFunc(r);return this.compileAndRun(i,[],A,a)},t.prototype.onesLike=function(n){if(n.dtype==="string")throw new Error("onesLike is not supported under string dtype");return this.fill(n.shape,1,n.dtype)},t.prototype.zerosLike=function(n){return this.fill(n.shape,n.dtype==="string"?"":0,n.dtype)},t.prototype.linspace=function(n,r,A){return Dy(n,r,A)},t.prototype.makeTensorInfo=function(n,r){var A=this.write(null,n,r);return this.texData.get(A).usage=null,{dataId:A,shape:n,dtype:r}},t.prototype.makeOutput=function(n,r){var A=this.makeTensorInfo(n,r).dataId;return k.makeTensorFromDataId(A,n,r,this)},t.prototype.unpackTensor=function(n){var r=new RU(n.shape);return this.runWebGLProgram(r,[n],n.dtype)},t.prototype.packTensor=function(n){var r=new nU(n.shape);return this.runWebGLProgram(r,[n],n.dtype,null,!0)},t.prototype.packedReshape=function(n,r){var A=[Xu(n.shape)].concat($u(n.shape)),o={dtype:n.dtype,shape:A,dataId:n.dataId},i=[Xu(r)].concat($u(r)),a=new iU(i,A),s=this.runWebGLProgram(a,[o],n.dtype,null,!0);return{dataId:s.dataId,shape:r,dtype:s.dtype}},t.prototype.decode=function(n){var r,A=this.texData.get(n),o=A.isPacked,i=A.shape,a=A.dtype,s=Yc(i);return r=o?new wQ(s):new mQ(s),{dtype:a,shape:i,dataId:this.runWebGLProgram(r,[{shape:s,dtype:a,dataId:n}],a,null,!0).dataId}},t.prototype.runWebGLProgram=function(n,r,A,o,i){var a=this;i===void 0&&(i=!1);var s=this.makeTensorInfo(n.outputShape,A),u=this.texData.get(s.dataId);if(n.packedOutput&&(u.isPacked=!0),n.outPackingScheme===ka.DENSE){var l=oa(n.outputShape);u.texShape=l.map(function(w){return 2*w})}if(n.outTexUsage!=null&&(u.usage=n.outTexUsage),ne(s.shape)===0)return u.values=Sa(s.dtype,0),s;var c=[],f=r.map(function(w){if(w.dtype==="complex64")throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");var B=a.texData.get(w.dataId);if(B.texture==null){if(!n.packedInputs&&ne(w.shape)<=V().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:w.shape,texData:null,isUniform:!0,uniformValues:B.values};n.packedInputs&&(B.isPacked=!0,B.shape=w.shape)}else if(!!B.isPacked!=!!n.packedInputs)w=B.isPacked?a.unpackTensor(w):a.packTensor(w),c.push(w),B=a.texData.get(w.dataId);else if(B.isPacked&&!xs(B.shape,w.shape)){var y=w,C=w.shape;w.shape=B.shape,w=a.packedReshape(w,C),c.push(w),B=a.texData.get(w.dataId),y.shape=C}return a.uploadToGPU(w.dataId),{shape:w.shape,texData:B,isUniform:!1}});this.uploadToGPU(s.dataId);var h,d={shape:s.shape,texData:u,isUniform:!1},g=function(w,B,y){var C="";B.concat(y).forEach(function(F){var E=F.texData!=null&&F.texData.slice!=null&&F.texData.slice.flatOffset>0,I=F.isUniform?"uniform":F.texData.texShape;C+=F.shape+"_"+I+"_"+E});var b=w.userCode,x=w.constructor.name;return x+="_"+C+"_"+b}(n,f,d),m=this.getAndSaveBinary(g,function(){return function(w,B,y,C){var b=B.userCode,x=y.map(function(D,R){var L={logicalShape:D.shape,texShape:D.isUniform?null:D.texData.texShape,isUniform:D.isUniform,isPacked:!D.isUniform&&D.texData.isPacked,flatOffset:null};return D.texData!=null&&D.texData.slice!=null&&D.texData.slice.flatOffset>0&&(L.flatOffset=D.texData.slice.flatOffset),{name:B.variableNames[R],shapeInfo:L}}),F=x.map(function(D){return D.shapeInfo}),E={logicalShape:C.shape,texShape:C.texData.texShape,isUniform:!1,isPacked:C.texData.isPacked,flatOffset:null},I=z2(x,E,b,B.packedInputs),S=w.createProgram(I),T=null,N=w.getUniformLocation(S,"NAN",!1);V().getNumber("WEBGL_VERSION")===1&&(T=w.getUniformLocation(S,"INFINITY",!1));for(var O={},K=0;K<B.variableNames.length;K++){var P=B.variableNames[K];O[P]=w.getUniformLocation(S,P,!1),O["offset"+P]=w.getUniformLocation(S,"offset"+P,!1)}return{program:B,source:I,webGLProgram:S,uniformLocations:O,inShapeInfos:F,outShapeInfo:E,infLoc:T,nanLoc:N}}(a.gpgpu,n,f,d)}),p=this.activeTimers!=null;if(p&&(h=this.startTimer()),function(w,B,y,C,b){Am(B.inShapeInfos,y),Am([B.outShapeInfo],[C]);var x=C.texData.texture,F=C.texData.texShape;C.texData.isPacked?w.setOutputPackedMatrixTexture(x,F[0],F[1]):w.setOutputMatrixTexture(x,F[0],F[1]),w.setProgram(B.webGLProgram),V().getNumber("WEBGL_VERSION")===1&&B.infLoc!==null&&w.gl.uniform1f(B.infLoc,1/0),B.nanLoc!==null&&w.gl.uniform1f(B.nanLoc,NaN),y.forEach(function(E,I){var S=B.program.variableNames[I],T=B.uniformLocations[S],N=B.uniformLocations["offset"+S];if(T!=null)if(E.isUniform)if(ne(E.shape)<2)w.gl.uniform1f(T,E.uniformValues[0]);else{var O=E.uniformValues;O instanceof Float32Array||(O=new Float32Array(O)),w.gl.uniform1fv(T,O)}else E.texData.slice!=null&&N!=null&&w.gl.uniform1i(N,E.texData.slice.flatOffset),w.setInputMatrixTexture(E.texData.texture,T,I)}),b!=null&&b(w,B.webGLProgram),w.executeProgram()}(this.gpgpu,m,f,d,o),c.forEach(function(w){return a.disposeData(w.dataId)}),p&&(h=this.endTimer(h),this.activeTimers.push({name:n.constructor.name,query:this.getQueryTime(h)})),!V().getBool("WEBGL_LAZILY_UNPACK")&&u.isPacked&&i===!1){var v=this.unpackTensor(s);return this.disposeData(s.dataId),v}return s},t.prototype.compileAndRun=function(n,r,A,o,i){i===void 0&&(i=!1),A=A||r[0].dtype;var a=this.runWebGLProgram(n,r,A,o,i);return k.makeTensorFromDataId(a.dataId,a.shape,a.dtype)},t.prototype.getAndSaveBinary=function(n,r){return n in this.binaryCache||(this.binaryCache[n]=r()),this.binaryCache[n]},t.prototype.getTextureManager=function(){return this.textureManager},t.prototype.dispose=function(){var n=this;this.disposed||(V().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach(function(r){n.gpgpu.deleteProgram(n.binaryCache[r].webGLProgram),delete n.binaryCache[r]}),this.textureManager.dispose(),this.canvas!=null&&typeof HTMLCanvasElement<"u"&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)},t.prototype.floatPrecision=function(){var n=this;return this.floatPrecisionValue==null&&(this.floatPrecisionValue=J(function(){if(!V().get("WEBGL_RENDER_FLOAT32_ENABLED")){var r=V().getBool("DEBUG");V().set("DEBUG",!1);var A=n.abs($(1e-8)).dataSync()[0];if(V().set("DEBUG",r),A>0)return 32}return 16})),this.floatPrecisionValue},t.prototype.epsilon=function(){return this.floatPrecision()===32?1e-7:1e-4},t.prototype.uploadToGPU=function(n){var r,A=this.texData.get(n),o=A.shape,i=A.dtype,a=A.values,s=A.texture,u=A.usage,l=A.isPacked;if(s==null){var c,f=this.activeTimers!=null;f&&(c=er());var h=A.texShape;if(h==null&&(h=KE(o,l),A.texShape=h),a!=null){var d=Yc(o),g=void 0,m=h[1],p=h[0],v=a instanceof Uint8Array;l?(m=(r=Xa(h[0],h[1]))[0],p=r[1],g=new bQ(d,[p,m],v)):g=new FQ(d,[p,m],v);var w=this.makeTensorInfo([p,m],i);this.texData.get(w.dataId).usage=v?ln.PIXELS:ln.UPLOAD,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(w.dataId),m,p,a);var B=this.runWebGLProgram(g,[w],i,null,!0),y=this.texData.get(B.dataId);A.texture=y.texture,A.texShape=y.texShape,A.isPacked=y.isPacked,A.usage=y.usage,this.disposeData(w.dataId),this.texData.delete(B.dataId),A.values=null,f&&(this.uploadWaitMs+=er()-c)}else{var C=this.acquireTexture(h,u,i,l);A.texture=C}}},t.prototype.convertAndCacheOnCPU=function(n,r){var A=this.texData.get(n),o=A.dtype;return this.releaseGPUData(n),r!=null&&(A.values=function(i,a){if(a==="float32"||a==="complex64")return i;if(a==="int32"||a==="bool"){for(var s=a==="int32"?new Int32Array(i.length):new Uint8Array(i.length),u=0;u<s.length;++u)s[u]=Math.round(i[u]);return s}throw new Error("Unknown dtype "+a)}(r,o)),A.values},t.prototype.acquireTexture=function(n,r,A,o){if(this.numBytesInGPU+=this.computeBytes(n,A),!this.warnedAboutMemory&&this.numBytesInGPU>1024*this.numMBBeforeWarning*1024){var i=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn("High memory usage in GPU: "+i+" MB, most likely due to a memory leak")}return this.textureManager.acquireTexture(n,r,o)},t.prototype.computeBytes=function(n,r){return n[0]*n[1]*ay(r)},t}(Sy);dy()&&k.registerBackend("webgl",function(){return new HU},2);var NU=_({square_:function(e){var t=Q(e,"x","square"),n=[t];return k.runKernelFunc(function(r,A){return A([t]),r.square(t)},{x:t},null,"Square",{},n,[])}}),Ra="SquaredDifference",jy=_({squaredDifference_:function(e,t){var n,r=Q(e,"a","squaredDifference"),A=Q(t,"b","squaredDifference");n=ze(r,A),r=n[0],A=n[1],pe(r.shape,A.shape);var o={a:r,b:A},i=[r,A];return k.runKernelFunc(function(a,s){var u=a.squaredDifference(r,A);return s([r,A]),u},o,function(a,s){var u=s[0],l=s[1],c=$(2);return{a:function(){return a.mul(u.sub(l).mul(c))},b:function(){return a.mul(l.sub(u).mul(c))}}},Ra,{},i,[])}}),LU=_({abs_:function(e){var t=Q(e,"x","abs");return t.dtype==="complex64"?k.runKernelFunc(function(n){return n.complexAbs(t)},{$x:t}):k.runKernelFunc(function(n,r){var A=n.abs(t);return r([t]),A},{x:t},function(n,r){var A=r[0];return{x:function(){return n.mul(A.toFloat().step(-1))}}},"Abs")}}),MU=_({acos_:function(e){var t=Q(e,"x","acos");return k.runKernelFunc(function(n,r){var A=n.acos(t);return r([t]),A},{$x:t},function(n,r){var A=r[0];return{$x:function(){return n.divStrict($(1).sub(A.toFloat().square()).sqrt()).neg()}}})}}),OU=_({acosh_:function(e){var t=Q(e,"x","acosh");return k.runKernelFunc(function(n,r){var A=n.acosh(t);return r([t]),A},{$x:t},function(n,r){var A=r[0];return{$x:function(){return n.divStrict(A.toFloat().square().sub(1).sqrt())}}})}}),PU=_({asin_:function(e){var t=Q(e,"x","asin");return k.runKernelFunc(function(n,r){var A=n.asin(t);return r([t]),A},{$x:t},function(n,r){var A=r[0];return{$x:function(){return n.divStrict($(1).sub(A.toFloat().square()).sqrt())}}})}}),KU=_({asinh_:function(e){var t=Q(e,"x","asinh");return k.runKernelFunc(function(n,r){var A=n.asinh(t);return r([t]),A},{$x:t},function(n,r){var A=r[0];return{$x:function(){return n.divStrict($(1).add(A.toFloat().square()).sqrt())}}})}}),VU=_({atan_:function(e){var t=Q(e,"x","atan");return k.runKernelFunc(function(n,r){var A=n.atan(t);return r([t]),A},{$x:t},function(n,r){var A=r[0];return{$x:function(){return n.div(A.toFloat().square().add(1))}}})}}),WU=_({atanh_:function(e){var t=Q(e,"x","atanh");return k.runKernelFunc(function(n,r){var A=n.atanh(t);return r([t]),A},{$x:t},function(n,r){var A=r[0];return{$x:function(){return n.div($(1).sub(A.toFloat().square()))}}})}}),GU=_({ceil_:function(e){var t=Q(e,"x","ceil");return k.runKernelFunc(function(n){return n.ceil(t)},{$x:t},function(n){return{$x:function(){return ye(n)}}})}}),kp=_({clipByValue_:function(e,t,n){var r=Q(e,"x","clipByValue");U(t<=n,function(){return"Error in clip: min ("+t+") must be less than or equal to max ("+n+")."});var A=[r],o={min:t,max:n};return k.runKernelFunc(function(i,a){var s=i.clip(r,t,n);return a([r]),s},{x:r},function(i,a){var s=a[0];return{x:function(){return i.where(s.greaterEqual(t).logicalAnd(s.lessEqual(n)),ye(i))}}},"ClipByValue",o,A)}}),zU=_({cos_:function(e){var t=Q(e,"x","cos"),n=[t];return k.runKernelFunc(function(r,A){var o=r.cos(t);return A([t]),o},{x:t},function(r,A){var o=A[0];return{x:function(){return o.toFloat().sin().neg().mul(r)}}},"Cos",{},n)}}),XU=_({cosh_:function(e){var t=Q(e,"x","cosh");return k.runKernelFunc(function(n,r){var A=n.cosh(t);return r([t]),A},{$x:t},function(n,r){var A=r[0];return{$x:function(){return A.toFloat().sinh().mulStrict(n)}}})}}),$U=_({erf_:function(e){var t=Q(e,"x","erf");return U(t.dtype==="int32"||t.dtype==="float32",function(){return"Input dtype must be `int32` or `float32`."}),t.dtype==="int32"&&(t=t.toFloat()),k.runKernelFunc(function(n,r){var A=n.erf(t);return r([t]),A},{$x:t},function(n,r){var A=r[0];return{$x:function(){return n.mul(A.square().neg().exp().mul(2/Math.sqrt(Math.PI)))}}})}}),zh=_({exp_:function(e){var t=Q(e,"x","exp");return k.runKernelFunc(function(n,r){var A=n.exp(t);return r([A]),A},{x:t},function(n,r){return{x:function(){return n.mulStrict(r[0])}}},"Exp",{},[],[!0])}}),jU=_({expm1_:function(e){var t=Q(e,"x","expm1");return k.runKernelFunc(function(n,r){var A=n.expm1(t);return r([t]),A},{$x:t},function(n,r){var A=r[0];return{$x:function(){return n.mul(A.exp())}}})}}),YU=_({floor_:function(e){var t=Q(e,"x","floor");return k.runKernelFunc(function(n){return n.floor(t)},{$x:t},function(n){return{$x:function(){return ye(n)}}})}}),qU=_({log_:function(e){var t=Q(e,"x","log"),n=[t];return k.runKernelFunc(function(r,A){var o=r.log(t);return A([t]),o},{x:t},function(r,A){var o=A[0];return{x:function(){return r.div(o.toFloat())}}},"Log",{},n)}}),JU=_({log1p_:function(e){var t=Q(e,"x","log1p");return k.runKernelFunc(function(n,r){var A=n.log1p(t);return r([t]),A},{$x:t},function(n,r){var A=r[0];return{$x:function(){return n.div(A.add(1))}}})}}),ZU=_({logSigmoid_:function(e){var t=Q(e,"x","logSigmoid");return k.runKernelFunc(function(n,r){var A=n.softplus(t.neg()).neg();return r([t]),A},{$x:t},function(n,r){var A=r[0];return{$x:function(){return n.mul(A.neg().sigmoid())}}})}}),ol=_({neg_:function(e){var t=Q(e,"x","neg"),n=[t];return k.runKernelFunc(function(r){return r.neg(t)},{x:t},function(r){return{x:function(){return r.neg()}}},"Neg",{},n)}}),eI=_({reciprocal_:function(e){var t=Q(e,"x","reciprocal");return k.runKernelFunc(function(n,r){var A=n.reciprocal(t);return r([t]),A},{$x:t},function(n,r){var A=r[0];return{$x:function(){return n.div(A.square().neg())}}})}}),tI=_({round_:function(e){var t=Q(e,"x","round");return k.runKernelFunc(function(n){return n.round(t)},{$x:t},function(n){return{$x:function(){return ye(n)}}})}}),Yy=_({rsqrt_:function(e){var t=Q(e,"x","rsqrt"),n=[t];return k.runKernelFunc(function(r,A){var o=r.rsqrt(t);return A([t]),o},{x:t},function(r,A){var o=A[0];return{x:function(){return r.div(o.pow(1.5).mul(2)).neg()}}},"Rsqrt",{},n)}}),qy=_({sigmoid_:function(e){var t=Q(e,"x","sigmoid");return k.runKernelFunc(function(n,r){var A=n.sigmoid(t);return r([A]),A},{x:t},function(n,r){var A=r[0];return{x:function(){return n.mul(A.mul($(1).sub(A)))}}},"Sigmoid")}}),nI=_({sign_:function(e){var t=Q(e,"x","sign");return k.runKernelFunc(function(n){return n.sign(t)},{$x:t},function(n){return{$x:function(){return ye(n)}}})}}),rI=_({isNaN_:function(e){var t=Q(e,"x","isNaN");return k.runKernelFunc(function(n){return n.isNaN(t)},{$x:t},function(n){return{$x:function(){return ye(n)}}})}}),AI=_({isInf_:function(e){var t=Q(e,"x","isInf");return k.runKernelFunc(function(n){return n.isInf(t)},{$x:t},function(n){return{$x:function(){return ye(n)}}})}}),oI=_({isFinite_:function(e){var t=Q(e,"x","isFinite");return k.runKernelFunc(function(n){return n.isFinite(t)},{$x:t},function(n){return{$x:function(){return ye(n)}}})}}),iI=_({sin_:function(e){var t=Q(e,"x","sin"),n=[t];return k.runKernelFunc(function(r,A){var o=r.sin(t);return A([t]),o},{x:t},function(r,A){var o=A[0];return{x:function(){return o.toFloat().cos().mul(r)}}},"Sin",{},n)}}),aI=_({sinh_:function(e){var t=Q(e,"x","sinh");return k.runKernelFunc(function(n,r){var A=n.sinh(t);return r([t]),A},{$x:t},function(n,r){var A=r[0];return{$x:function(){return A.toFloat().cosh().mulStrict(n)}}})}}),sI=_({softplus_:function(e){var t=Q(e,"x","softplus");return k.runKernelFunc(function(n,r){var A=n.softplus(t);return r([t]),A},{$x:t},function(n,r){var A=r[0];return{$x:function(){return n.mul(A.sigmoid())}}})}}),uI=_({sqrt_:function(e){var t=Q(e,"x","sqrt");return k.runKernelFunc(function(n,r){var A=n.sqrt(t);return r([t]),A},{$x:t},function(n,r){var A=r[0];return{$x:function(){return n.div(A.toFloat().sqrt().mul(2))}}})}}),lI=_({step_:function(e,t){t===void 0&&(t=0);var n=Q(e,"x","step");return k.runKernelFunc(function(r){return r.step(n,t)},{$x:n},function(r){return{$x:function(){return ye(r)}}})}}),cI=_({tan_:function(e){var t=Q(e,"x","tan");return k.runKernelFunc(function(n,r){var A=n.tan(t);return r([t]),A},{$x:t},function(n,r){var A=r[0];return{$x:function(){return n.div(A.cos().square())}}})}}),fI=_({tanh_:function(e){var t=Q(e,"x","tanh");return k.runKernelFunc(function(n,r){var A=n.tanh(t);return r([A]),A},{x:t},function(n,r){var A=r[0];return{x:function(){return $(1).sub(A.square()).mulStrict(n)}}},"Tanh",{},null,[!0])}});function Jy(e,t,n,r,A,o){var i,a,s=Q(e,"x","batchNorm"),u=Q(t,"mean","batchNorm"),l=Q(n,"variance","batchNorm");return A!=null&&(i=Q(A,"scale","batchNorm")),r!=null&&(a=Q(r,"offset","batchNorm")),U(s.rank===2,function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+s.rank+"."}),U(u.rank===2||u.rank===1,function(){return"Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank "+u.rank+"."}),U(l.rank===2||l.rank===1,function(){return"Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank "+l.rank+"."}),i!=null&&U(i.rank===2||i.rank===1,function(){return"Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank "+i.rank+"."}),a!=null&&U(a.rank===2||a.rank===1,function(){return"Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank "+a.rank+"."}),ja(s,u,l,a,i,o)}function Zy(e,t,n,r,A,o){var i,a,s=Q(e,"x","batchNorm"),u=Q(t,"mean","batchNorm"),l=Q(n,"variance","batchNorm");return A!=null&&(i=Q(A,"scale","batchNorm")),r!=null&&(a=Q(r,"offset","batchNorm")),U(s.rank===3,function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+s.rank+"."}),U(u.rank===3||u.rank===1,function(){return"Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank "+u.rank+"."}),U(l.rank===3||l.rank===1,function(){return"Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank "+l.rank+"."}),i!=null&&U(i.rank===3||i.rank===1,function(){return"Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank "+i.rank+"."}),a!=null&&U(a.rank===3||a.rank===1,function(){return"Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank "+a.rank+"."}),ja(s,u,l,a,i,o)}function eC(e,t,n,r,A,o){var i,a,s=Q(e,"x","batchNorm"),u=Q(t,"mean","batchNorm"),l=Q(n,"variance","batchNorm");return A!=null&&(i=Q(A,"scale","batchNorm")),r!=null&&(a=Q(r,"offset","batchNorm")),U(s.rank===4,function(){return"Error in batchNorm4D: x must be rank 4 but got rank "+s.rank+"."}),U(u.rank===4||u.rank===1,function(){return"Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank "+u.rank+"."}),U(l.rank===4||l.rank===1,function(){return"Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank "+l.rank+"."}),i!=null&&U(i.rank===4||i.rank===1,function(){return"Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank "+i.rank+"."}),a!=null&&U(a.rank===4||a.rank===1,function(){return"Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank "+a.rank+"."}),ja(s,u,l,a,i,o)}function ja(e,t,n,r,A,o){o==null&&(o=.001);var i,a,s,u=Q(e,"x","batchNorm"),l=Q(t,"mean","batchNorm"),c=Q(n,"variance","batchNorm");A!=null&&(i=Q(A,"scale","batchNorm")),r!=null&&(a=Q(r,"offset","batchNorm")),U(l.rank===c.rank,function(){return"Batch normalization gradient requires mean and variance to have equal ranks."}),U(a==null||l.rank===a.rank,function(){return"Batch normalization gradient requires mean and offset to have equal ranks."}),U(i==null||l.rank===i.rank,function(){return"Batch normalization gradient requires mean and scale to have equal ranks."}),s=u.rank===0||u.rank===1?u.as4D(1,1,1,u.size):u.rank===2?u.as4D(1,1,u.shape[0],u.shape[1]):u.rank===3?u.as4D(1,u.shape[0],u.shape[1],u.shape[2]):u;var f=[u,l,c,i];return k.runKernelFunc(function(h,d){var g=h.batchNormalization(s,Us(l),Us(c),o,Us(i),Us(a));return d([u,l,c,i]),g},{x:u,mean:l,variance:c,scale:i,offset:a},function(h,d){var g=d,m=g[0],p=g[1],v=g[2],w=g[3],B=w??$(1),y=lt(p.shape,s.shape),C=[];if(p.rank===1){for(var b=0;b<s.shape.length-1;++b)C.push(s.shape[b]);C.push(1)}var x=m.sub(p),F=h.mul(B),E=Yy(v.add($(o))),I=E.mul(E).mul(E).mul($(-.5));return{x:function(){return p.rank===1?h.mul(qo(E.as4D(1,1,1,p.shape[0]),C)).mul(B).reshape(m.shape):h.mul(E).mul(B).reshape(m.shape)},mean:function(){var S=E.mul($(-1)).mul(F);return p.rank===1&&(S=S.sum(y)),S.reshape(p.shape)},variance:function(){var S=I.mul(x).mul(F);return p.rank===1&&(S=S.sum(y)),S.reshape(p.shape)},scale:function(){var S=x.mul(E),T=h.mul(S);return p.rank===1&&(T=T.sum(y)),T.reshape(p.shape)},offset:function(){var S=h;return p.rank===1&&(S=S.sum(y)),S.reshape(p.shape)}}},"BatchNormalization",{varianceEpsilon:o},f).reshape(u.shape)}function Us(e){return e==null?null:e.rank===0?e.as1D():e.rank===1?e:e.rank===2?e.as4D(1,1,e.shape[0],e.shape[1]):e.rank===3?e.as4D(1,e.shape[0],e.shape[1],e.shape[2]):e}function Kl(){py("tf.batchNormalization() is going away. Use tf.batchNorm() instead, and note the positional argument change of scale, offset, and varianceEpsilon")}var hI=_({batchNormalization2d_:function(e,t,n,r,A,o){return r===void 0&&(r=.001),Kl(),Jy(e,t,n,o,A,r)}}),dI=_({batchNormalization3d_:function(e,t,n,r,A,o){return r===void 0&&(r=.001),Kl(),Zy(e,t,n,o,A,r)}}),pI=_({batchNormalization4d_:function(e,t,n,r,A,o){return r===void 0&&(r=.001),Kl(),eC(e,t,n,o,A,r)}}),gI=_({batchNormalization_:function(e,t,n,r,A,o){return r===void 0&&(r=.001),Kl(),ja(e,t,n,o,A,r)}}),tC=_({batchNorm_:ja}),vI=_({batchNorm2d_:Jy}),mI=_({batchNorm3d_:Zy}),wI=_({batchNorm4d_:eC}),Vl=_({logicalAnd_:function(e,t){var n=Q(e,"a","logicalAnd","bool"),r=Q(t,"b","logicalAnd","bool");return pe(n.shape,r.shape),k.runKernelFunc(function(A){return A.logicalAnd(n,r)},{a:n,b:r},null,"LogicalAnd")}}),BI=_({logicalNot_:function(e){var t=Q(e,"x","logicalNot","bool");return k.runKernelFunc(function(n){return n.logicalNot(t)},{$x:t})}}),nC=_({logicalOr_:function(e,t){var n=Q(e,"a","logicalOr","bool"),r=Q(t,"b","logicalOr","bool");return pe(n.shape,r.shape),k.runKernelFunc(function(A){return A.logicalOr(n,r)},{$a:n,$b:r})}}),yI=_({logicalXor_:function(e,t){var n=Q(e,"a","logicalXor","bool"),r=Q(t,"b","logicalXor","bool");return pe(n.shape,r.shape),nC(e,t).logicalAnd(Vl(e,t).logicalNot())}}),to=_({where_:function(e,t,n){var r=Q(t,"a","where"),A=Q(n,"b","where"),o=Q(e,"condition","where","bool");return Qe(r.shape,A.shape,"Error in where: "),o.rank===1?U(o.shape[0]===r.shape[0],function(){return"The first dimension of `a` must match the size of `condition`."}):Qe(o.shape,A.shape,"Error in where: "),k.runKernelFunc(function(i,a){var s=i.select(o,r,A);return a([o]),s},{$condition:o,$a:r,$b:A},function(i,a){var s=a[0];return{$condition:function(){return ye(s).toFloat()},$a:function(){return i.mul(s.cast(i.dtype))},$b:function(){return i.mul(s.logicalNot().cast(i.dtype))}}})}}),rC=function(e){return ee(this,void 0,void 0,function(){var t,n,r;return te(this,function(A){switch(A.label){case 0:return[4,(t=Q(e,"condition","whereAsync","bool")).data()];case 1:return n=A.sent(),r=Up(t.shape,n),e!==t&&t.dispose(),[2,r]}})})},de=_({add_:function(e,t){var n,r=Q(e,"a","add"),A=Q(t,"b","add");n=ze(r,A),r=n[0],A=n[1];var o=pe(r.shape,A.shape);return k.runKernelFunc(function(i){return i.add(r,A)},{a:r,b:A},function(i){return{a:function(){var a=i,s=lt(r.shape,o);return s.length>0&&(a=a.sum(s)),a.reshape(r.shape)},b:function(){var a=i,s=lt(A.shape,o);return s.length>0&&(a=a.sum(s)),a.reshape(A.shape)}}},"Add")}}),CI=_({addN_:function(e){U(Array.isArray(e),function(){return"The argument passed to tf.addN() must be a list of tensors"}),U(e.length>=1,function(){return"Must pass at least one tensor to tf.addN(), but got "+e.length});var t=e.map(function(A,o){return Q(A,"tensors"+o,"addN")}),n=t[0];t.forEach(function(A){if(A.dtype!==n.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")}),t.forEach(function(A){if(!vt(A.shape,n.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")});var r=t;return k.runKernelFunc(function(A){return A.addN(t)},r,function(A){var o={};return t.forEach(function(i,a){o[a]=function(){return A.clone()}}),o},"AddN")}}),xI=_({addStrict_:function(e,t){var n=Q(e,"a","addStrict"),r=Q(t,"b","addStrict");return Qe(n.shape,r.shape,"Error in addStrict: "),n.add(r)}}),FI=_({atan2_:function(e,t){var n,r=Q(e,"a","atan2"),A=Q(t,"b","atan2");n=ze(r,A),r=n[0],A=n[1];var o=pe(r.shape,A.shape);return k.runKernelFunc(function(i,a){var s=i.atan2(r,A);return a([r,A]),s},{$a:r,$b:A},function(i,a){var s=a[0],u=a[1];return{$a:function(){var l=de(s.square(),u.square()),c=i.mul(u.div(l)),f=lt(s.shape,o);return f.length>0&&(c=c.sum(f)),c.reshape(s.shape)},$b:function(){var l=de(s.square(),u.square()),c=ol(i.mul(s.div(l))),f=lt(u.shape,o);return f.length>0&&(c=c.sum(f)),c.reshape(u.shape)}}})}}),Nn=_({div_:function(e,t){var n,r=Q(e,"a","div"),A=Q(t,"b","div");if(n=ze(r,A),r=n[0],A=n[1],r.dtype==="int32"&&A.dtype==="int32")return AC(r,A);var o=pe(r.shape,A.shape);return k.runKernelFunc(function(i,a){var s=i.realDivide(r,A);return a([r,A]),s},{a:r,b:A},function(i,a){var s=a[0],u=a[1];return{a:function(){var l=i.div(u.toFloat()),c=lt(s.shape,o);return c.length>0?l.sum(c).reshape(s.shape):l},b:function(){var l=i.mul(s.toFloat()),c=lt(u.shape,o);c.length>0&&(l=l.sum(c).reshape(u.shape));var f=u.square();return l.div(f.toFloat()).neg()}}},"Div")}}),bI=_({divNoNan_:function(e,t){var n,r=Q(e,"a","div"),A=Q(t,"b","div");r=(n=ze(r,A))[0],A=n[1];var o=Nn(r,A),i=ye(o),a=A.equal(i);return to(a,i,o)}}),EI=_({divStrict_:function(e,t){var n=Q(e,"a","div"),r=Q(t,"b","div");return Qe(n.shape,r.shape,"Error in divideStrict: "),n.div(r)}}),AC=_({floorDiv_:function(e,t){var n,r=Q(e,"a","floorDiv"),A=Q(t,"b","floorDiv");n=ze(r,A),r=n[0],A=n[1];var o=pe(r.shape,A.shape);return k.runKernelFunc(function(i,a){var s=i.floorDiv(r,A);return a([r,A]),s},{a:r,b:A},function(i,a){var s=a[0],u=a[1];return{a:function(){var l=i.div(u.toFloat()),c=lt(s.shape,o);return c.length>0?l.sum(c).reshape(s.shape):l},b:function(){var l=i.mul(s.toFloat()),c=lt(u.shape,o);c.length>0&&(l=l.sum(c).reshape(u.shape));var f=u.square();return l.div(f.toFloat()).neg()}}},"FloorDiv")}}),Dp=_({maximum_:function(e,t){var n,r=Q(e,"a","maximum"),A=Q(t,"b","maximum");return n=ze(r,A),r=n[0],A=n[1],r.dtype==="bool"&&(r=r.toInt(),A=A.toInt()),pe(r.shape,A.shape),k.runKernelFunc(function(o,i){var a=o.maximum(r,A);return i([r,A]),a},{a:r,b:A},function(o,i){var a=i[0],s=i[1];return{a:function(){return o.mul(a.greaterEqual(s).toFloat())},b:function(){return o.mul(a.less(s).toFloat())}}},"Maximum")}}),QI=_({maximumStrict_:function(e,t){var n=Q(e,"a","maximumStrict"),r=Q(t,"b","maximumStrict");return Qe(n.shape,r.shape,"Error in maximumStrict: "),n.maximum(r)}}),oC=_({minimum_:function(e,t){var n,r=Q(e,"a","minimum"),A=Q(t,"b","minimum");return n=ze(r,A),r=n[0],A=n[1],r.dtype==="bool"&&(r=r.toInt(),A=A.toInt()),pe(r.shape,A.shape),k.runKernelFunc(function(o,i){var a=o.minimum(r,A);return i([r,A]),a},{a:r,b:A},function(o,i){var a=i[0],s=i[1];return{a:function(){return o.mul(a.lessEqual(s).toFloat())},b:function(){return o.mul(a.greater(s).toFloat())}}},"Minimum")}}),UI=_({minimumStrict_:function(e,t){var n=Q(e,"a","minimumStrict"),r=Q(t,"b","minimumStrict");return Qe(n.shape,r.shape,"Error in minimumStrict: "),n.minimum(r)}}),II=_({mod_:function(e,t){var n,r=Q(e,"a","mod"),A=Q(t,"b","mod");n=ze(r,A),r=n[0],A=n[1];var o=pe(r.shape,A.shape);return k.runKernelFunc(function(i,a){var s=i.mod(r,A);return a([r,A]),s},{$a:r,$b:A},function(i,a){var s=a[0],u=a[1];return{$a:function(){var l=lt(s.shape,o);return l.length>0?i.sum(l).reshape(s.shape):i},$b:function(){var l=i.mul(s.div(u).floor().neg()),c=lt(u.shape,o);return c.length>0?l.sum(c).reshape(u.shape):l}}})}}),SI=_({modStrict_:function(e,t){var n=Q(e,"a","modStrict"),r=Q(t,"b","modStrict");return Qe(n.shape,r.shape,"Error in modStrict: "),n.mod(r)}}),Ht=_({mul_:function(e,t){var n,r=Q(e,"a","mul"),A=Q(t,"b","mul");n=ze(r,A),r=n[0],A=n[1];var o=pe(r.shape,A.shape);return k.runKernelFunc(function(i,a){var s=i.multiply(r,A);return a([r,A]),s},{a:r,b:A},function(i,a){var s=a[0],u=a[1];return{a:function(){var l=i.mul(u.toFloat()),c=lt(s.shape,o);return c.length>0?l.sum(c).reshape(s.shape):l},b:function(){var l=i.mul(s.toFloat()),c=lt(u.shape,o);return c.length>0?l.sum(c).reshape(u.shape):l}}},"Mul")}}),_I=_({mulStrict_:function(e,t){var n=Q(e,"a","mul"),r=Q(t,"b","mul");return Qe(n.shape,r.shape,"Error in multiplyStrict: "),n.mul(r)}}),il=_({pow_:function(e,t){var n,r=Q(e,"base","pow"),A=Q(t,"exp","pow");n=ze(r,A),r=n[0],A=n[1];var o=pe(r.shape,A.shape),i=[r,A];return k.runKernelFunc(function(a,s){var u=a.pow(r,A);return s([r,A,u]),u},{a:r,b:A},function(a,s){var u=s[0],l=s[1],c=s[2];return{a:function(){var f=l.toFloat(),h=a.mul(f.mul(u.pow(f.sub($(1))))),d=lt(u.shape,o);return d.length>0&&(h=h.sum(d)),h.reshape(u.shape)},b:function(){var f=u.greater(0),h=u.log().where(f,ye(u)),d=a.mul(c.mul(h)),g=lt(l.shape,o);return g.length>0&&(d=d.sum(g)),d.reshape(l.shape)}}},"Pow",{},i,[!0])}}),kI=_({powStrict_:function(e,t){return Qe(e.shape,t.shape,"Error in powStrict: "),e.pow(t)}}),DI=_({squaredDifferenceStrict_:function(e,t){var n=Q(e,"a","squaredDifferenceStrict"),r=Q(t,"b","squaredDifferenceStrict");return Qe(n.shape,r.shape,"Error in squaredDifferenceStrict: "),n.squaredDifference(r)}}),ct=_({sub_:function(e,t){var n,r=Q(e,"a","sub"),A=Q(t,"b","sub");n=ze(r,A),r=n[0],A=n[1];var o=pe(r.shape,A.shape);return k.runKernelFunc(function(i){return i.subtract(r,A)},{a:r,b:A},function(i){return{a:function(){var a=i,s=lt(r.shape,o);return s.length>0&&(a=a.sum(s)),a.reshape(r.shape)},b:function(){var a=i,s=lt(A.shape,o);return s.length>0&&(a=a.sum(s)),a.neg().reshape(A.shape)}}},"Sub")}}),RI=_({subStrict_:function(e,t){var n=Q(e,"a","subStrict"),r=Q(t,"b","subStrict");return Qe(n.shape,r.shape,"Error in subStrict: "),n.sub(r)}}),iC=_({equal_:function(e,t){var n,r=Q(e,"a","equal"),A=Q(t,"b","equal");return n=ze(r,A),r=n[0],A=n[1],pe(r.shape,A.shape),k.runKernelFunc(function(o){return o.equal(r,A)},{$a:r,$b:A})}}),TI=_({equalStrict_:function(e,t){var n=Q(e,"a","equalStrict"),r=Q(t,"b","equalStrict");return Qe(n.shape,r.shape,"Error in equalStrict: "),n.equal(r)}}),HI=_({greater_:function(e,t){var n,r=Q(e,"a","greater"),A=Q(t,"b","greater");return n=ze(r,A),r=n[0],A=n[1],pe(r.shape,A.shape),k.runKernelFunc(function(o){return o.greater(r,A)},{a:r,b:A},null,"Greater")}}),aC=_({greaterEqual_:function(e,t){var n,r=Q(e,"a","greaterEqual"),A=Q(t,"b","greaterEqual");return n=ze(r,A),r=n[0],A=n[1],pe(r.shape,A.shape),k.runKernelFunc(function(o,i){var a=o.greaterEqual(r,A);return i([r,A]),a},{a:r,b:A},function(o,i){var a=i[0],s=i[1];return{a:function(){return ye(a)},b:function(){return ye(s)}}},"GreaterEqual")}}),NI=_({greaterEqualStrict_:function(e,t){var n=Q(e,"a","greaterEqualStrict"),r=Q(t,"b","greaterEqualStrict");return Qe(n.shape,r.shape,"Error in greaterEqualStrict: "),n.greaterEqual(r)}}),LI=_({greaterStrict_:function(e,t){var n=Q(e,"a","greaterStrict"),r=Q(t,"b","greaterStrict");return Qe(n.shape,r.shape,"Error in greaterStrict: "),n.greater(r)}}),MI=_({less_:function(e,t){var n,r=Q(e,"a","less"),A=Q(t,"b","less");return n=ze(r,A),r=n[0],A=n[1],pe(r.shape,A.shape),k.runKernelFunc(function(o){return o.less(r,A)},{a:r,b:A},null,"Less")}}),OI=_({lessEqual_:function(e,t){var n,r=Q(e,"a","lessEqual"),A=Q(t,"b","lessEqual");return n=ze(r,A),r=n[0],A=n[1],pe(r.shape,A.shape),k.runKernelFunc(function(o,i){var a=o.lessEqual(r,A);return i([r,A]),a},{a:r,b:A},null,"LessEqual")}}),PI=_({lessEqualStrict_:function(e,t){var n=Q(e,"a","lessEqualStrict"),r=Q(t,"b","lessEqualStrict");return Qe(n.shape,r.shape,"Error in lessEqualStrict: "),n.lessEqual(r)}}),KI=_({lessStrict_:function(e,t){var n=Q(e,"a","lessStrict"),r=Q(t,"b","lessStrict");return Qe(n.shape,r.shape,"Error in lessStrict: "),n.less(r)}}),VI=_({notEqual_:function(e,t){var n,r=Q(e,"a","notEqual"),A=Q(t,"b","notEqual");return n=ze(r,A),r=n[0],A=n[1],pe(r.shape,A.shape),k.runKernelFunc(function(o){return o.notEqual(r,A)},{a:r,b:A},null,"NotEqual")}}),WI=_({notEqualStrict_:function(e,t){var n=Q(e,"a","notEqualStrict"),r=Q(t,"b","notEqualStrict");return Qe(n.shape,r.shape,"Error in notEqualStrict: "),n.notEqual(r)}});function dm(e,t){for(var n=[],r=e;r<t;++r)n.push(r);return n}function pm(e){for(var t=[],n=0;n<e.length;++n)for(var r=0;r<e[n].length;++r)t.push(e[n][r]);return t}var Rp=_({gather_:function(e,t,n){n===void 0&&(n=0);var r=Q(e,"x","gather"),A=Q(t,"indices","gather","int32");n=ft(n,r.shape)[0];var o=function(i,a,s){for(var u=i.shape[s],l=[],c=1,f=1,h=0;h<s;h++)l.push(i.shape[h]),c*=i.shape[h];for(h=0;h<a.rank;h++)l.push(a.shape[h]);for(h=s+1;h<i.rank;h++)l.push(i.shape[h]),f*=i.shape[h];return{batchSize:c,sliceSize:f,dimSize:u,outputShape:l}}(r,A,n);return k.runKernelFunc(function(i,a){var s=i.gather(r,A.flatten(),n);return a([A]),s},{x:r,indices:A},function(i,a){var s=a[0];return{x:function(){var u=r.shape,l=s.size,c=u.slice(0,n),f=c.length,h=u.slice(n,u.length).slice(1),d=h.length,g=dm(0,f),m=dm(f+1,f+1+d),p=pm([c,[l],h]),v=i.reshape(p),w=s.reshape([l]),B=pm([[f],g,m]),y=v.transpose(B),C=sC(y,w,r.shape[n]),b=Bp(B);return C=C.transpose(b)},indices:function(){return s}}},"Gather",{axis:n}).reshape(o.outputShape)}}),sC=_({unsortedSegmentSum_:function(e,t,n){var r=Q(e,"x","unsortedSegmentSum"),A=Q(t,"segmentIds","unsortedSegmentSum","int32");return U(et(n),function(){return"numSegments must be of dtype int"}),k.runKernelFunc(function(o,i){var a=o.unsortedSegmentSum(r,A,n);return i([A]),a},{$x:r},function(o,i){var a=i[0];return{$x:function(){return function(s,u){for(var l=Dp(u,ye(u)),c=Rp(s,l),f=aC(u,$(0,"int32")),h=c.rank-f.rank,d=0;d<h;++d)f=yn(f,d+1);f=Vl(f,yi(c.shape,"bool"));var g=ye(c);return to(f,c,g)}(o,a)}}})}}),GI=function(e,t,n){return ee(this,void 0,void 0,function(){var r,A,o,i,a,s,u,l,c,f,h,d,g;return te(this,function(m){switch(m.label){case 0:for(r=Q(e,"tensor","boolMask"),A=Q(t,"mask","boolMask","bool"),o=n??0,i=A.rank,a=r.shape,U(i>0,function(){return"mask cannot be scalar"}),Qe(a.slice(o,o+i),A.shape,"mask's shape must match the first K dimensions of tensor's shape,"),s=1,u=o;u<o+i;u++)s*=a[u];return l=a.slice(0,o).concat([s],a.slice(o+i)),c=r.reshape(l),f=A.reshape([-1]),[4,rC(f)];case 1:return h=m.sent(),d=h.squeeze([1]),g=Rp(c,d,o),e!==r&&r.dispose(),t!==A&&A.dispose(),d.dispose(),c.dispose(),f.dispose(),h.dispose(),[2,g]}})})};function uC(e,t,n,r,A,o,i){o===void 0&&(o="NHWC"),U(e.length===t.rank,function(){return"Length of inShape ("+e.length+") and rank of dy ("+t.rank+") must match"});var a=e,s=t,u=!1;t.rank===3&&(u=!0,s=t.as4D(1,t.shape[0],t.shape[1],t.shape[2]),a=[1,e[0],e[1],e[2]]),U(a.length===4,function(){return"Error in conv2dDerInput: inShape must be length 4, but got length "+a.length+"."}),U(s.rank===4,function(){return"Error in conv2dDerInput: dy must be rank 4, but got rank "+s.rank}),U(n.rank===4,function(){return"Error in conv2dDerInput: filter must be rank 4, but got rank "+n.rank});var l=o==="NHWC"?a[3]:a[1],c=o==="NHWC"?s.shape[3]:s.shape[1];U(l===n.shape[2],function(){return"Error in conv2dDerInput: depth of input ("+l+") must match input depth for filter "+n.shape[2]+"."}),U(c===n.shape[3],function(){return"Error in conv2dDerInput: depth of output ("+c+") must match output depth for filter "+n.shape[3]+"."}),i!=null&&U(et(A),function(){return"Error in conv2dDerInput: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+A+"."});var f=bp(o),h=ao(a,n.shape,r,1,A,i,!1,f),d=k.runKernelFunc(function(g,m){var p=g.conv2dDerInput(s,n,h);return m([n,s]),p},{dy4D:s,filter:n},function(g,m){var p=m[0],v=m[1];return{dy4D:function(){return _n(g,p,r,A,o,1,i)},filter:function(){return Tp(g,v,p.shape,r,A,o,i)}}});return u?d.as3D(d.shape[1],d.shape[2],d.shape[3]):d}function Af(e){var t=function(o){return typeof o=="number"?[o,o,o]:o.length===2?[o[0],o[1],1]:o}(e),n=t[0],r=t[1],A=t[2];return n===1&&r===1&&A===1}function lC(e,t,n,r,A){U(e.length===t.rank,function(){return"Length of inShape ("+e.length+") and rank of dy ("+t.rank+") must match"});var o=e,i=t,a=!1;t.rank===4&&(a=!0,i=t.as5D(1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]),o=[1,e[0],e[1],e[2],e[3]]);var s=o[4],u=i.shape[4];U(o.length===5,function(){return"Error in conv3dDerInput: inShape must be length 5, but got length "+o.length+"."}),U(i.rank===5,function(){return"Error in conv3dDerInput: dy must be rank 5, but got rank "+i.rank}),U(n.rank===5,function(){return"Error in conv3dDerInput: filter must be rank 5, but got rank "+n.rank}),U(s===n.shape[3],function(){return"Error in conv3dDerInput: depth of input ("+s+") must match input depth for filter "+n.shape[3]+"."}),U(u===n.shape[4],function(){return"Error in conv3dDerInput: depth of output ("+u+") must match output depth for filter "+n.shape[4]+"."});var l=rl(o,n.shape,r,1,A),c=k.runKernelFunc(function(f){return f.conv3dDerInput(i,n,l)},{dy5D:i});return a?c.as4D(c.shape[1],c.shape[2],c.shape[3],c.shape[4]):c}var zI=_({conv1d_:function(e,t,n,r,A,o,i){A===void 0&&(A="NWC"),o===void 0&&(o=1);var a=Q(e,"x","conv1d"),s=Q(t,"filter","conv1d"),u=a,l=!1;a.rank===2&&(l=!0,u=a.as3D(1,a.shape[0],a.shape[1])),U(u.rank===3,function(){return"Error in conv1d: input must be rank 3, but got rank "+u.rank+"."}),U(s.rank===3,function(){return"Error in conv1d: filter must be rank 3, but got rank "+s.rank+"."}),i!=null&&U(et(r),function(){return"Error in conv1d: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+r+"."}),U(u.shape[2]===s.shape[1],function(){return"Error in conv1d: depth of input ("+u.shape[2]+") must match input depth for filter "+s.shape[1]+"."}),U(nn(n,o),function(){return"Error in conv1D: Either stride or dilation must be 1. Got stride "+n+" and dilation '"+o+"'"}),U(A==="NWC",function(){return"Error in conv1d: got dataFormat of "+A+" but only NWC is currently supported."});var c=s.as4D(1,s.shape[0],s.shape[1],s.shape[2]),f=u.as4D(u.shape[0],1,u.shape[1],u.shape[2]),h=_n(f,c,[1,n],r,"NHWC",[1,o],i);return l?h.as2D(h.shape[2],h.shape[3]):h.as3D(h.shape[0],h.shape[2],h.shape[3])}}),_n=_({conv2d_:function(e,t,n,r,A,o,i){A===void 0&&(A="NHWC"),o===void 0&&(o=[1,1]);var a=Q(e,"x","conv2d"),s=Q(t,"filter","conv2d"),u=a,l=!1;a.rank===3&&(l=!0,u=a.as4D(1,a.shape[0],a.shape[1],a.shape[2])),U(u.rank===4,function(){return"Error in conv2d: input must be rank 4, but got rank "+u.rank+"."}),U(s.rank===4,function(){return"Error in conv2d: filter must be rank 4, but got rank "+s.rank+"."}),i!=null&&U(et(r),function(){return"Error in conv2d: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+r+"."});var c=A==="NHWC"?u.shape[3]:u.shape[1];U(c===s.shape[2],function(){return"Error in conv2d: depth of input ("+c+") must match input depth for filter "+s.shape[2]+"."}),U(nn(n,o),function(){return"Error in conv2D: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+o+"'"});var f=bp(A),h=ao(u.shape,s.shape,n,o,r,i,!1,f),d=[s,u],g=k.runKernelFunc(function(m,p){var v=m.conv2d(u,s,h);return p([s,u]),v},{x:u,filter:s},function(m,p){var v=p,w=v[0],B=v[1];return U(pi(o),function(){return"Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+o+"'"}),{x:function(){return cC(B.shape,m,w,n,r,A)},filter:function(){return Tp(B,m,w.shape,n,r,A)}}},"Conv2D",h,d);return l?g.as3D(g.shape[1],g.shape[2],g.shape[3]):g}}),XI=_({conv3d_:function(e,t,n,r,A,o){A===void 0&&(A="NDHWC"),o===void 0&&(o=[1,1,1]);var i=Q(e,"x","conv3d"),a=Q(t,"filter","conv3d"),s=i,u=!1;i.rank===4&&(u=!0,s=i.as5D(1,i.shape[0],i.shape[1],i.shape[2],i.shape[3])),U(s.rank===5,function(){return"Error in conv3d: input must be rank 5, but got rank "+s.rank+"."}),U(a.rank===5,function(){return"Error in conv3d: filter must be rank 5, but got rank "+a.rank+"."}),U(s.shape[4]===a.shape[3],function(){return"Error in conv3d: depth of input ("+s.shape[4]+") must match input depth for filter "+a.shape[3]+"."}),U(function(f,h){return Af(f)||Af(h)}(n,o),function(){return"Error in conv3D: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+o+"'"}),U(A==="NDHWC",function(){return"Error in conv3d: got dataFormat of "+A+" but only NDHWC is currently supported."});var l=rl(s.shape,a.shape,n,o,r),c=k.runKernelFunc(function(f,h){var d=f.conv3d(s,a,l);return h([s,a]),d},{x:s,$filter:a},function(f,h){U(Af(o),function(){return"Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+o+"'"});var d=h[0],g=h[1];return{x:function(){return lC(d.shape,f,g,n,r)},$filter:function(){return function(m,p,v,w,B){var y=m;m.rank===4&&(y=m.as5D(1,m.shape[0],m.shape[1],m.shape[2],m.shape[3]));var C=p;C.rank===4&&(C=p.as5D(1,p.shape[0],p.shape[1],p.shape[2],p.shape[3])),U(y.rank===5,function(){return"Error in conv3dDerFilter: input must be rank 5, but got shape "+y.shape+"."}),U(C.rank===5,function(){return"Error in conv3dDerFilter: dy must be rank 5, but got shape "+C.shape+"."}),U(v.length===5,function(){return"Error in conv3dDerFilter: filterShape must be length 5, but got "+v+"."}),U(y.shape[4]===v[3],function(){return"Error in conv3dDerFilter: depth of input "+y.shape[4]+") must match input depth in filter ("+v[3]+"."}),U(C.shape[4]===v[4],function(){return"Error in conv3dDerFilter: depth of dy ("+C.shape[4]+") must match output depth for filter ("+v[4]+")."});var b=rl(y.shape,v,w,1,B);return k.runKernelFunc(function(x){return x.conv3dDerFilter(y,C,b)},{x5D:y,dy5D:C})}(d,f,g.shape,n,r)}}});return u?c.as4D(c.shape[1],c.shape[2],c.shape[3],c.shape[4]):c}}),Tp=_({conv2dDerFilter_:function(e,t,n,r,A,o,i){o===void 0&&(o="NHWC");var a=e;e.rank===3&&(a=e.as4D(1,e.shape[0],e.shape[1],e.shape[2]));var s=t;s.rank===3&&(s=t.as4D(1,t.shape[0],t.shape[1],t.shape[2])),U(a.rank===4,function(){return"Error in conv2dDerFilter: input must be rank 4, but got shape "+a.shape+"."}),U(s.rank===4,function(){return"Error in conv2dDerFilter: dy must be rank 4, but got shape "+s.shape+"."}),U(n.length===4,function(){return"Error in conv2dDerFilter: filterShape must be length 4, but got "+n+"."});var u=o==="NHWC"?a.shape[3]:a.shape[1],l=o==="NHWC"?s.shape[3]:s.shape[1];U(u===n[2],function(){return"Error in conv2dDerFilter: depth of input "+u+") must match input depth in filter ("+n[2]+"."}),U(l===n[3],function(){return"Error in conv2dDerFilter: depth of dy ("+l+") must match output depth for filter ("+n[3]+")."}),i!=null&&U(et(A),function(){return"Error in conv2dDerFilter: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+A+"."});var c=bp(o),f=ao(a.shape,n,r,1,A,i,!1,c);return k.runKernelFunc(function(h){return h.conv2dDerFilter(a,s,f)},{x4D:a,dy4D:s})}}),cC=_({conv2dDerInput_:uC}),Wl=_({depthwiseConv2d_:function(e,t,n,r,A,o,i){o===void 0&&(o=[1,1]);var a=Q(e,"x","depthwiseConv2d"),s=Q(t,"filter","depthwiseConv2d"),u=a,l=!1;a.rank===3&&(l=!0,u=a.as4D(1,a.shape[0],a.shape[1],a.shape[2])),U(u.rank===4,function(){return"Error in depthwiseConv2d: input must be rank 4, but got rank "+u.rank+"."}),U(s.rank===4,function(){return"Error in depthwiseConv2d: filter must be rank 4, but got rank "+s.rank+"."}),U(u.shape[3]===s.shape[2],function(){return"Error in depthwiseConv2d: number of input channels ("+u.shape[3]+") must match the inChannels dimension in filter "+s.shape[2]+"."}),o==null&&(o=[1,1]),U(nn(n,o),function(){return"Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+o+"'"}),i!=null&&U(et(r),function(){return"Error in depthwiseConv2d: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+r+"."});var c=ao(u.shape,s.shape,n,o,r,i,!0),f=[u,s],h=k.runKernelFunc(function(d,g){var m=d.depthwiseConv2D(u,s,c);return g([u,s]),m},{x:u,filter:s},function(d,g){U(pi(o),function(){return"Error in gradient of depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '"+o+"'"});var m=g[0],p=g[1];return{x:function(){return fC(m.shape,d,p,c)},filter:function(){return hC(m,d,p.shape,c)}}},"DepthwiseConv2dNative",c,f);return l?h.as3D(h.shape[1],h.shape[2],h.shape[3]):h}}),fC=_({depthwiseConv2dDerInput_:function(e,t,n,r){var A=t,o=!1;t.rank===3&&(o=!0,A=t.as4D(1,t.shape[0],t.shape[1],t.shape[2]));var i=k.runKernelFunc(function(a){return a.depthwiseConv2DDerInput(A,n,r)},{dy4D:A});return o?i.as3D(i.shape[1],i.shape[2],i.shape[3]):i}}),hC=_({depthwiseConv2dDerFilter_:function(e,t,n,r){var A=e;e.rank===3&&(A=e.as4D(1,e.shape[0],e.shape[1],e.shape[2]));var o=t;return o.rank===3&&(o=t.as4D(1,t.shape[0],t.shape[1],t.shape[2])),k.runKernelFunc(function(i){return i.depthwiseConv2DDerFilter(A,o,r)},{x4D:A,dy4D:o})}}),Hp=_({separableConv2d_:function(e,t,n,r,A,o,i){o===void 0&&(o=[1,1]),i===void 0&&(i="NHWC");var a=Q(e,"x","separableConv2d"),s=Q(t,"depthwiseFilter","separableConv2d"),u=Q(n,"pointwiseFilter","separableConv2d"),l=a,c=!1;if(a.rank===3&&(c=!0,l=a.as4D(1,a.shape[0],a.shape[1],a.shape[2])),i==="NCHW")throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");U(l.rank===4,function(){return"Error in separableConv2d: input must be rank 4, but got rank "+l.rank+"."}),U(s.rank===4,function(){return"Error in separableConv2d: depthwise filter must be rank 4, but got rank "+s.rank+"."}),U(u.rank===4,function(){return"Error in separableConv2d: pointwise filter must be rank 4, but got rank "+s.rank+"."}),U(u.shape[0]===1,function(){return"Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got "+u.shape[0]+"."}),U(u.shape[1]===1,function(){return"Error in separableConv2d: the second dimension of pointwise filter must be 1, but got "+u.shape[1]+"."});var f=s.shape[2],h=s.shape[3];U(u.shape[2]===f*h,function(){return"Error in separableConv2d: the third dimension of pointwise filter must be "+f*h+", but got "+u.shape[2]+"."});var d=Wl(l,s,r,A,i,o),g=_n(d,u,1,"valid",i);return c?g.as3D(g.shape[1],g.shape[2],g.shape[3]):g}}),$I=_({conv2dTranspose_:function(e,t,n,r,A,o){return uC(n,Q(e,"x","conv2dTranspose"),Q(t,"filter","conv2dTranspose"),r,A,"NHWC",o)}}),jI=_({conv3dTranspose_:function(e,t,n,r,A){return lC(n,Q(e,"x","conv3dTranspose"),Q(t,"filter","conv3dTranspose"),r,A)}}),Gl=_({matMul_:function(e,t,n,r){var A;n===void 0&&(n=!1),r===void 0&&(r=!1);var o=Q(e,"a","matMul"),i=Q(t,"b","matMul");A=ze(o,i),o=A[0],i=A[1];var a=n?o.shape[o.rank-2]:o.shape[o.rank-1],s=r?i.shape[i.rank-1]:i.shape[i.rank-2],u=n?o.shape[o.rank-1]:o.shape[o.rank-2],l=r?i.shape[i.rank-2]:i.shape[i.rank-1],c=o.shape.slice(0,-2),f=i.shape.slice(0,-2),h=ne(c),d=ne(f);U(o.rank>=2&&i.rank>=2&&o.rank===i.rank,function(){return"Error in matMul: inputs must have the same rank of at least 2, got ranks "+o.rank+" and "+i.rank+"."}),U(vt(c,f),function(){return"Error in matMul: outer dimensions ("+c+") and ("+f+") of Tensors with shapes "+o.shape+" and "+i.shape+" must match."}),U(a===s,function(){return"Error in matMul: inner shapes ("+a+") and ("+s+") of Tensors with shapes "+o.shape+" and "+i.shape+" and transposeA="+n+" and transposeB="+r+" must match."});var g=o.shape.slice(0,-2).concat([u,l]),m=n?o.as3D(h,a,u):o.as3D(h,u,a),p=r?i.as3D(d,l,s):i.as3D(d,s,l),v={transposeA:n,transposeB:r};return k.runKernelFunc(function(w,B){var y=w.batchMatMul(m,p,n,r);return B([m,p]),y},{a:m,b:p},function(w,B){var y=B,C=y[0],b=y[1];return n||r?!n&&r?{a:function(){return w.matMul(b,!1,!1)},b:function(){return w.matMul(C,!0,!1)}}:n&&!r?{a:function(){return b.matMul(w,!1,!0)},b:function(){return C.matMul(w,!1,!1)}}:{a:function(){return b.matMul(w,!0,!0)},b:function(){return w.matMul(C,!0,!0)}}:{a:function(){return w.matMul(b,!1,!0)},b:function(){return C.matMul(w,!0,!1)}}},"BatchMatMul",v).reshape(g)}}),YI=_({dot_:function(e,t){var n=Q(e,"t1","dot"),r=Q(t,"t2","dot");U(!(n.rank!==1&&n.rank!==2||r.rank!==1&&r.rank!==2),function(){return"Error in dot: inputs must all be rank 1 or 2, but got ranks "+n.rank+" and "+r.rank+"."});var A=n.rank===1?n.size:n.shape[1],o=r.rank===1?r.size:r.shape[0];return U(A===o,function(){return"Error in dot: inner dimensions of inputs must match, but got "+A+" and "+o+"."}),n.rank===1&&r.rank===1?n.as2D(1,-1).matMul(r.as2D(-1,1)).asScalar():n.rank===1&&r.rank===2?n.as2D(1,-1).matMul(r.as2D(r.shape[0],r.shape[1])).as1D():n.rank===2&&r.rank===1?n.matMul(r.as2D(-1,1)).as1D():n.matMul(r.as2D(r.shape[0],r.shape[1]))}}),qI=_({outerProduct_:function(e,t){var n=Q(e,"v1","outerProduct"),r=Q(t,"v2","outerProduct");return U(n.rank===1&&r.rank===1,function(){return"Error in outerProduct: inputs must be rank 1, but got ranks "+n.rank+" and "+r.rank+"."}),n.as2D(-1,1).matMul(r.as2D(1,-1))}}),Ya=_({reverse_:function(e,t){var n=Q(e,"x","reverse");if(n.rank===0)return n.clone();var r=ft(t,n.shape);return k.runKernelFunc(function(A){return A.reverse(n,r)},{$x:n},function(A){return{$x:function(){return A.reverse(r)}}}).reshapeAs(n)}}),JI=_({reverse1d_:function(e){var t=Q(e,"x","reverse");return U(t.rank===1,function(){return"Error in reverse1D: x must be rank 1 but got rank "+t.rank+"."}),Ya(t,0)}}),ZI=_({reverse2d_:function(e,t){var n=Q(e,"x","reverse");return U(n.rank===2,function(){return"Error in reverse2D: x must be rank 2 but got rank "+n.rank+"."}),Ya(n,t)}}),eS=_({reverse3d_:function(e,t){var n=Q(e,"x","reverse");return U(n.rank===3,function(){return"Error in reverse3D: x must be rank 3 but got rank "+n.rank+"."}),Ya(n,t)}}),tS=_({reverse4d_:function(e,t){var n=Q(e,"x","reverse");return U(n.rank===4,function(){return"Error in reverse4D: x must be rank 4 but got rank "+n.rank+"."}),Ya(n,t)}});function dC(e,t,n,r,A,o){var i=Q(e,"x","maxPool"),a=i,s=!1;i.rank===3&&(s=!0,a=i.as4D(1,i.shape[0],i.shape[1],i.shape[2])),U(a.rank===4,function(){return"Error in maxPool: input must be rank 4 but got rank "+a.rank+"."}),U(nn(n,r),function(){return"Error in maxPool: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+r+"'"}),o!=null&&U(et(A),function(){return"Error in maxPool: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+A+"."});var u=Da(a.shape,t,n,r,A,o);if(u.filterWidth===1&&u.filterHeight===1&&vt(u.inShape,u.outShape))return i.clone();var l=[a],c=k.runKernelFunc(function(f,h){var d=f.maxPool(a,u);return h([a,d]),d},{x:a},function(f,h){var d=h[0],g=h[1];return{x:function(){return function(m,p,v,w,B,y,C,b){var x=Q(m,"dy","maxPoolBackprop"),F=Q(p,"input","maxPoolBackprop"),E=Q(v,"output","maxPoolBackprop");U(F.rank===x.rank,function(){return"Rank of input ("+F.rank+") does not match rank of dy ("+x.rank+")"}),U(nn(B,y),function(){return"Error in maxPoolBackProp: Either strides or dilations must be 1. Got strides "+B+" and dilations '"+y+"'"}),U(x.rank===4,function(){return"Error in maxPoolBackprop: dy must be rank 4 but got rank "+x.rank+"."}),U(F.rank===4,function(){return"Error in maxPoolBackprop: input must be rank 4 but got rank "+F.rank+"."});var I=Da(F.shape,w,B,y,C,b);return k.runKernelFunc(function(S){return S.maxPoolBackprop(x,F,E,I)},{$dy:x,$input:F})}(f,d,g,t,n,r,A)}}},"MaxPool",u,l);return s?c.as3D(c.shape[1],c.shape[2],c.shape[3]):c}function pC(e,t,n,r,A,o){var i=Q(e,"x","avgPool","float32");U(nn(n,r),function(){return"Error in avgPool: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+r+"'"});var a=i,s=!1;i.rank===3&&(s=!0,a=i.as4D(1,i.shape[0],i.shape[1],i.shape[2])),U(a.rank===4,function(){return"Error in avgPool: x must be rank 4 but got rank "+a.rank+"."}),o!=null&&U(et(A),function(){return"Error in avgPool: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+A+"."});var u=Da(a.shape,t,n,r,A,o);if(u.filterWidth===1&&u.filterHeight===1&&vt(u.inShape,u.outShape))return i.clone();var l=k.runKernelFunc(function(c){return c.avgPool(a,u)},{x:a},function(c){return{x:function(){return function(f,h,d,g,m,p){var v=Q(f,"dy","avgPoolBackprop"),w=Q(h,"input","avgPoolBackprop");U(w.rank===v.rank,function(){return"Rank of input ("+w.rank+") does not match rank of dy ("+v.rank+")"}),U(nn(g,m),function(){return"Error in avgPoolBackprop: Either strides or dilations must be 1. Got strides "+g+" and dilations '"+m+"'"});var B=w,y=v,C=!1;w.rank===3&&(C=!0,B=w.as4D(1,w.shape[0],w.shape[1],w.shape[2]),y=v.as4D(1,v.shape[0],v.shape[1],v.shape[2])),U(y.rank===4,function(){return"Error in avgPoolBackprop: dy must be rank 4 but got rank "+y.rank+"."}),U(B.rank===4,function(){return"Error in avgPoolBackprop: input must be rank 4 but got rank "+B.rank+"."});var b=Da(B.shape,d,g,m,p),x=k.runKernelFunc(function(F){return F.avgPoolBackprop(y,B,b)},{dy4D:y,input4D:B});return C?x.as3D(x.shape[1],x.shape[2],x.shape[3]):x}(c,a,t,n,r,A)}}},"AvgPool",u);return l=l.cast(i.dtype),s?l.as3D(l.shape[1],l.shape[2],l.shape[3]):l}var dt=_({maxPool_:function(e,t,n,r,A){return dC(e,t,n,1,r,A)}}),qa=_({avgPool_:function(e,t,n,r,A){return pC(e,t,n,1,r,A)}}),nS=_({pool_:function(e,t,n,r,A,o){A==null&&(A=[1,1]),o==null&&(o=1),r===0&&(r="valid");var i=Q(e,"x","maxPool"),a=i,s=!1;i.rank===3&&(s=!0,a=i.as4D(1,i.shape[0],i.shape[1],i.shape[2])),U(nn(o,A),function(){return"Error in pool: Either strides or dilations must be 1. Got strides "+o+" and dilations '"+A+"'"});var u,l=Da(a.shape,t,o,A,r),c=[l.dilationHeight,l.dilationWidth];u=r==="same"?function(B,y){var C=B.map(function(F,E){return F+(F-1)*(y[E]-1)}).map(function(F){return F-1}),b=C.map(function(F){return Math.floor(F/2)}),x=C.map(function(F,E){return F-b[E]});return C.map(function(F,E){return[b[E],x[E]]})}([l.filterHeight,l.filterWidth],c):[[0,0],[0,0]];var f=c[0]===1&&c[1]===1,h=function(B,y,C){var b=C.map(function(N){return N[0]}),x=C.map(function(N){return N[1]}),F=B.concat(b,x),E=y.map(function(N,O){return(N-F[O]%N)%N}),I=x.map(function(N,O){return N+E[O]}),S=y.map(function(N,O){return[b[O],I[O]]}),T=y.map(function(N,O){return[0,E[O]]});return[S,T]}([l.inHeight,l.inWidth],c,u),d=h[0],g=h[1],m=f?r:"valid",p=f?a:yy(a,c,d),v=(n==="avg"?function(){return pC(p,t,o,1,m)}:function(){return dC(p,t,o,1,m)})(),w=f?v:my(v,c,g);return s?w.as3D(w.shape[1],w.shape[2],w.shape[3]):w}}),rS=_({maxPool3d_:function(e,t,n,r,A,o,i){o===void 0&&(o="NDHWC");var a=Q(e,"x","maxPool3d"),s=a,u=!1;a.rank===4&&(u=!0,s=a.as5D(1,a.shape[0],a.shape[1],a.shape[2],a.shape[3])),i==null&&(i=[1,1,1]),U(s.rank===5,function(){return"Error in maxPool3d: x must be rank 5 but got rank "+s.rank+"."}),U(o==="NDHWC",function(){return"Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of "+o}),U(nn(n,i),function(){return"Error in maxPool3d: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+i+"'"}),A!=null&&U(et(r),function(){return"Error in maxPool3d: pad must be an integer when using, dimRoundingMode "+A+" but got pad "+r+"."});var l=nl(s.shape,t,n,i,r,A,o),c=k.runKernelFunc(function(f,h){var d=f.maxPool3d(s,l);return h([s,d]),d},{x:s},function(f,h){var d=h[0],g=h[1];return{x:function(){return function(m,p,v,w,B,y,C,b){var x=Q(m,"dy","maxPool3dBackprop"),F=Q(p,"input","maxPool3dBackprop"),E=Q(v,"output","maxPool3dBackprop"),I=x,S=F,T=E,N=!1;F.rank===4&&(N=!0,I=x.as5D(1,x.shape[0],x.shape[1],x.shape[2],x.shape[3]),S=F.as5D(1,F.shape[0],F.shape[1],F.shape[2],F.shape[3]),T=E.as5D(1,E.shape[0],E.shape[1],E.shape[2],E.shape[3])),U(I.rank===5,function(){return"Error in maxPool3dBackprop: dy must be rank 5 but got rank "+I.rank+"."}),U(S.rank===5,function(){return"Error in maxPool3dBackprop: input must be rank 5 but got rank "+S.rank+"."}),U(T.rank===5,function(){return"Error in maxPool3dBackprop: output must be rank 5 but got rank "+T.rank+"."}),y==null&&(y=[1,1,1]),U(nn(B,y),function(){return"Error in maxPool3dBackprop: Either strides or dilations must be 1. Got strides "+B+" and dilations '"+y+"'"}),b!=null&&U(et(C),function(){return"Error in maxPool3dBackprop: pad must be an integer when using, dimRoundingMode "+b+" but got pad "+C+"."});var O=nl(S.shape,w,B,y,C,b),K=k.runKernelFunc(function(P){return P.maxPool3dBackprop(I,S,T,O)},{dy5D:I,input5D:S});return N?K.as4D(K.shape[1],K.shape[2],K.shape[3],K.shape[4]):K}(f,d,g,t,n,i,r,A)}}});return u?c.as4D(c.shape[1],c.shape[2],c.shape[3],c.shape[4]):c}}),AS=_({avgPool3d_:function(e,t,n,r,A,o,i){o===void 0&&(o="NDHWC");var a=Q(e,"x","avgPool3d","float32"),s=a,u=!1;a.rank===4&&(u=!0,s=a.as5D(1,a.shape[0],a.shape[1],a.shape[2],a.shape[3])),i==null&&(i=[1,1,1]),U(s.rank===5,function(){return"Error in avgPool3d: x must be rank 5 but got rank "+s.rank+"."}),U(o==="NDHWC",function(){return"Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of "+o}),U(nn(n,i),function(){return"Error in avgPool3d: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+i+"'"}),A!=null&&U(et(r),function(){return"Error in avgPool3d: pad must be an integer when using, dimRoundingMode "+A+" but got pad "+r+"."});var l=nl(s.shape,t,n,i,r,A,o),c=k.runKernelFunc(function(f){return f.avgPool3d(s,l)},{x:s},function(f){return{x:function(){return function(h,d,g,m,p,v,w){var B=Q(h,"dy","avgPool3dBackprop"),y=Q(d,"input","avgPool3dBackprop"),C=B,b=y,x=!1;y.rank===4&&(x=!0,C=B.as5D(1,B.shape[0],B.shape[1],B.shape[2],B.shape[3]),b=y.as5D(1,y.shape[0],y.shape[1],y.shape[2],y.shape[3])),U(C.rank===5,function(){return"Error in avgPool3dBackprop: dy must be rank 5 but got rank "+C.rank+"."}),U(b.rank===5,function(){return"Error in avgPool3dBackprop: input must be rank 5 but got rank "+b.rank+"."}),p==null&&(p=[1,1,1]),U(nn(m,p),function(){return"Error in avgPool3dBackprop: Either strides or dilations must be 1. Got strides "+m+" and dilations '"+p+"'"}),w!=null&&U(et(v),function(){return"Error in maxPool3dBackprop: pad must be an integer when using, dimRoundingMode "+w+" but got pad "+v+"."});var F=nl(b.shape,g,m,p,v,w),E=k.runKernelFunc(function(I){return I.avgPool3dBackprop(C,b,F)},{dy5D:C,input5D:b});return x?E.as4D(E.shape[1],E.shape[2],E.shape[3],E.shape[4]):E}(f,s,t,n,i,r,A)}}});return c=c.cast(s.dtype),u?c.as4D(c.shape[1],c.shape[2],c.shape[3],c.shape[4]):c}}),lr=_({slice_:function(e,t,n){var r,A,o=Q(e,"x","slice");if(o.rank===0)throw new Error("Slicing scalar is not possible");(r=typeof t=="number"?[t].concat(new Array(o.rank-1).fill(0)):t.length<o.rank?t.concat(new Array(o.rank-t.length).fill(0)):t.slice()).forEach(function(s){U(s!==-1,function(){return"slice() does not support negative begin indexing."})}),A=(A=n==null?new Array(o.rank).fill(-1):typeof n=="number"?[n].concat(new Array(o.rank-1).fill(-1)):n.length<o.rank?n.concat(new Array(o.rank-n.length).fill(-1)):n).map(function(s,u){return s>=0?s:(U(s===-1,function(){return"Negative size values should be exactly -1 but got "+s+" for the slice() size at index "+u+"."}),o.shape[u]-r[u])}),k2(o,r,A);var i=o.shape,a={begin:r,size:A};return k.runKernelFunc(function(s){return s.slice(o,r,A)},{x:o},function(s){for(var u=[],l=0;l<s.rank;l++)u.push([r[l],i[l]-r[l]-A[l]]);return{x:function(){return s.pad(u)}}},"Slice",a)}}),oS=_({slice1d_:function(e,t,n){var r=Q(e,"x","slice1d");return U(r.rank===1,function(){return"slice1d expects a rank-1 tensor, but got a rank-"+r.rank+" tensor"}),lr(r,[t],[n])}}),iS=_({slice2d_:function(e,t,n){var r=Q(e,"x","slice2d");return U(r.rank===2,function(){return"slice2d expects a rank-2 tensor, but got a rank-"+r.rank+" tensor"}),lr(r,t,n)}}),gC=_({slice3d_:function(e,t,n){var r=Q(e,"x","slice3d");return U(r.rank===3,function(){return"slice3d expects a rank-3 tensor, but got a rank-"+r.rank+" tensor"}),lr(r,t,n)}}),aS=_({slice4d_:function(e,t,n){var r=Q(e,"x","slice4d");return U(r.rank===4,function(){return"slice4d expects a rank-4 tensor, but got a rank-"+r.rank+" tensor"}),lr(r,t,n)}});function vC(e,t,n,r,A){return t.rank<n.rank&&(t=t.reshape(tn(t.shape,r))),e.rank<n.rank&&(e=e.reshape(tn(e.shape,r))),{x:function(){var o=e.mul(n.equal(t).cast(e.dtype));return A==null?o:o.transpose(A)}}}var sS=_({all_:function(e,t,n){t===void 0&&(t=null),n===void 0&&(n=!1);var r=Q(e,"x","all","bool"),A=ft(t,r.shape),o=A,i=fr(o,r.rank);i!=null&&(r=r.transpose(i),o=hr(o.length,r.rank));var a=k.runKernelFunc(function(u){return u.all(r,o)},{$x:r});if(n){var s=tn(a.shape,A);return a.reshape(s)}return a}}),uS=_({any_:function(e,t,n){t===void 0&&(t=null),n===void 0&&(n=!1);var r=Q(e,"x","any","bool"),A=ft(t,r.shape),o=A,i=fr(o,r.rank);i!=null&&(r=r.transpose(i),o=hr(o.length,r.rank));var a=k.runKernelFunc(function(u){return u.any(r,o)},{$x:r});if(n){var s=tn(a.shape,A);return a.reshape(s)}return a}}),lS=_({argMax_:function(e,t){t===void 0&&(t=0);var n=Q(e,"x","argMax");t==null&&(t=0);var r=ft(t,n.shape),A=fr(r,n.rank);A!=null&&(n=n.transpose(A),r=hr(r.length,n.rank));var o={axis:r[0]},i=[n];return k.runKernelFunc(function(a,s){var u=a.argMax(n,r[0]);return s([n]),u},{x:n},function(a,s){var u=s[0];return{x:function(){return ye(u)}}},"ArgMax",o,i)}}),cS=_({argMin_:function(e,t){t===void 0&&(t=0);var n=Q(e,"x","argMin");t==null&&(t=0);var r=ft(t,n.shape),A=fr(r,n.rank);return A!=null&&(n=n.transpose(A),r=hr(r.length,n.rank)),k.runKernelFunc(function(o,i){var a=o.argMin(n,r[0]);return i([n]),a},{$x:n},function(o,i){var a=i[0];return{$x:function(){return ye(a)}}})}}),fS=_({logSumExp_:function(e,t,n){t===void 0&&(t=null),n===void 0&&(n=!1);var r=Q(e,"x","logSumExp"),A=ft(t,r.shape),o=r.max(A,!0),i=r.sub(o).exp().sum(A).log(),a=o.reshape(i.shape).add(i);if(n){var s=tn(a.shape,A);return a.reshape(s)}return a}}),zl=_({max_:function(e,t,n){t===void 0&&(t=null),n===void 0&&(n=!1);var r=Q(e,"x","max"),A=r,o=ft(t,r.shape),i=o,a=fr(i,r.rank);a!=null&&(r=r.transpose(a),i=hr(i.length,r.rank));var s=[r],u=k.runKernelFunc(function(c,f){var h=c.max(r,i);return f([A,h]),h},{x:r},function(c,f){return vC(c,f[1],f[0],o,a)},"Max",{axes:i},s,[!0]);if(n){var l=tn(u.shape,o);u=u.reshape(l)}return u}}),hS=_({mean_:function(e,t,n){t===void 0&&(t=null),n===void 0&&(n=!1);var r=Q(e,"x","mean"),A=ft(t,r.shape),o=ne(St(r.shape,A)[1]);return Pl(function(i){var a=$(o);return{value:(a.dtype===i.dtype?i:i.cast(a.dtype)).div(a).sum(t,n),gradFunc:function(s){var u=i.shape.slice();return A.forEach(function(l){u[l]=1}),s.reshape(u).mul(yi(i.shape,"float32")).div(o)}}})(r)}}),dS=_({min_:function(e,t,n){t===void 0&&(t=null),n===void 0&&(n=!1);var r=Q(e,"x","min"),A=r,o=ft(t,r.shape),i=o,a=fr(i,r.rank);a!=null&&(r=r.transpose(a),i=hr(i.length,r.rank));var s=[r],u=k.runKernelFunc(function(c,f){var h=c.min(r,i);return f([A,h]),h},{x:r},function(c,f){return vC(c,f[1],f[0],o,a)},"Min",{axes:i},s,[!0]);if(n){var l=tn(u.shape,o);u=u.reshape(l)}return u}}),pS=_({moments_:function(e,t,n){t===void 0&&(t=null),n===void 0&&(n=!1);var r=ft(t,(e=Q(e,"x","moments")).shape),A=e.mean(r,n),o=A.shape;n||(o=tn(A.shape,r));var i=e.toFloat().sub(A.reshape(o)).square();return{mean:A,variance:i.mean(r,n)}}}),mC=_({sum_:function(e,t,n){t===void 0&&(t=null),n===void 0&&(n=!1);var r=Q(e,"x","sum");r.dtype==="bool"&&(r=r.toInt());var A=ft(t,r.shape);return Pl(function(o){var i=fr(A,o.rank),a=A,s=o;i!=null&&(s=o.transpose(i),a=hr(a.length,o.rank));var u=function(h){var d=o.shape.slice();return A.forEach(function(g){d[g]=1}),h.reshape(d).mul(yi(o.shape,"float32"))},l={axes:a},c=k.runKernelFunc(function(h){return h.sum(s,a)},{x:s},function(h){return{x:function(){return u(h)}}},"Sum",l);if(n){var f=tn(c.shape,A);c=c.reshape(f)}return{value:c,gradFunc:u}})(r)}}),gS=_({prod_:function(e,t,n){t===void 0&&(t=null),n===void 0&&(n=!1);var r=Q(e,"x","prod");r.dtype==="bool"&&(r=r.toInt());var A=ft(t,r.shape),o=fr(A,r.rank),i=A,a=r;o!=null&&(a=r.transpose(o),i=hr(i.length,r.rank));var s=k.runKernelFunc(function(l){return l.prod(a,i)},{permutedX:a});if(n){var u=tn(s.shape,A);s=s.reshape(u)}return s}}),wC=_({elu_:function(e){var t=Q(e,"x","elu");return k.runKernelFunc(function(n,r){var A=n.elu(t);return r([A]),A},{$x:t},function(n,r){var A=r[0];return{$x:function(){return k.runKernelFunc(function(o){return o.eluDer(n,A)},{dy:n,y:A})}}})}}),vS=_({leakyRelu_:function(e,t){t===void 0&&(t=.2);var n=Q(e,"x","leakyRelu");return Dp($(t).mul(n),n)}}),BC=_({prelu_:function(e,t){var n=Q(e,"x","prelu"),r=Q(t,"alpha","prelu");return k.runKernelFunc(function(A,o){var i=A.prelu(n,r);return o([n,r]),i},{x:n,alpha:r},function(A,o){var i=o[0],a=o[1],s=i.greater(0);return{x:function(){return to(s,A,A.mul(a))},alpha:function(){var u=to(s,ye(A),A.mul(i)),l=lt(a.shape,A.shape);return l.length>0&&(u=u.sum(l)),u.reshape(a.shape)}}},"Prelu")}}),Ve=_({relu_:function(e){var t=Q(e,"x","relu");return t.dtype==="bool"?t.toInt():k.runKernelFunc(function(n,r){var A=n.relu(t);return r([t]),A},{x:t},function(n,r){var A=r[0];return{x:function(){return n.mulStrict(A.step().toFloat())}}},"Relu")}}),yC=_({relu6_:function(e){var t=Q(e,"x","relu6");return t.dtype==="bool"?t.toInt():k.runKernelFunc(function(n,r){var A=n.relu6(t);return r([t]),A},{x:t},function(n,r){var A=r[0],o=A.lessEqual(6).mul(A.step());return{x:function(){return n.mulStrict(o.toFloat())}}},"Relu6")}}),mS=_({selu_:function(e){var t=Q(e,"x","selu");return k.runKernelFunc(function(n,r){var A=n.selu(t);return r([t]),A},{$x:t},function(n,r){var A=r[0];return{$x:function(){var o=A.greater($(0)),i=$(Sp),a=$(_p),s=n.mul(a),u=n.mul(i).mul(A.toFloat().exp());return to(o,s,u)}}})}}),CA=_({transpose_:function(e,t){var n=Q(e,"x","transpose");if(t==null&&(t=n.shape.map(function(A,o){return o}).reverse()),U(n.rank===t.length,function(){return"Error in transpose: rank of input "+n.rank+" must match length of perm "+t+"."}),t.forEach(function(A){U(A>=0&&A<n.rank,function(){return"All entries in 'perm' must be between 0 and "+(n.rank-1)+" but got "+t})}),n.rank<=1)return n.clone();var r={perm:t};return k.runKernelFunc(function(A){return A.transpose(n,t)},{x:n},function(A){var o=Bp(t);return{x:function(){return A.transpose(o)}}},"Transpose",r)}}),wS=_({localResponseNormalization_:function(e,t,n,r,A){t===void 0&&(t=5),n===void 0&&(n=1),r===void 0&&(r=1),A===void 0&&(A=.5);var o=Q(e,"x","localResponseNormalization");U(o.rank===4||o.rank===3,function(){return`Error in localResponseNormalization: x must be rank 3 or 4 but got
               rank `+o.rank+"."}),U(et(t),function(){return"Error in localResponseNormalization: depthRadius must be an integer but got depthRadius "+t+"."});var i=o,a=!1;o.rank===3&&(a=!0,i=o.as4D(1,o.shape[0],o.shape[1],o.shape[2]));var s=k.runKernelFunc(function(u,l){var c=u.localResponseNormalization4D(i,t,n,r,A);return l([i,c]),c},{x4D:i},function(u,l){var c=l[0],f=l[1];return{x4D:function(){return k.runKernelFunc(function(h){return h.LRNGrad(u,c,f,t,n,r,A)},{})}}});return a?s.as3D(s.shape[1],s.shape[2],s.shape[3]):s}}),CC=_({norm_:function(e,t,n,r){t===void 0&&(t="euclidean"),n===void 0&&(n=null),r===void 0&&(r=!1);var A=function a(s,u,l){if(l===void 0&&(l=null),s.rank===0)return s.abs();if(s.rank!==1&&l===null)return a(s.reshape([-1]),u,l);if(s.rank===1||typeof l=="number"||Array.isArray(l)&&l.length===1){if(u===1)return s.abs().sum(l);if(u===1/0)return s.abs().max(l);if(u===-1/0)return s.abs().min(l);if(u==="euclidean"||u===2)return s.abs().pow($(2,"int32")).sum(l).sqrt();throw new Error("Error in norm: invalid ord value: "+u)}if(Array.isArray(l)&&l.length===2){if(u===1)return s.abs().sum(l[0]).max(l[1]-1);if(u===1/0)return s.abs().sum(l[1]).max(l[0]);if(u===-1/0)return s.abs().sum(l[1]).min(l[0]);if(u==="fro"||u==="euclidean")return s.square().sum(l).sqrt();throw new Error("Error in norm: invalid ord value: "+u)}throw new Error("Error in norm: invalid axis: "+l)}(e=Q(e,"x","norm"),t,n),o=A.shape;if(r){var i=ft(n,e.shape);o=tn(A.shape,i)}return A.reshape(o)}}),BS=_({basicLSTMCell_:function(e,t,n,r,A,o){var i=Q(e,"forgetBias","basicLSTMCell"),a=Q(t,"lstmKernel","basicLSTMCell"),s=Q(n,"lstmBias","basicLSTMCell"),u=Q(r,"data","basicLSTMCell"),l=Q(A,"c","basicLSTMCell"),c=Q(o,"h","basicLSTMCell"),f=u.concat(c,1).matMul(a).add(s),h=f.shape[0],d=f.shape[1]/4,g=[h,d],m=f.slice([0,0],g),p=f.slice([0,d],g),v=f.slice([0,2*d],g),w=f.slice([0,3*d],g),B=m.sigmoid().mulStrict(p.tanh()).addStrict(l.mulStrict(i.add(v).sigmoid())),y=B.tanh().mulStrict(w.sigmoid());return[B,y]}}),yS=_({multiRNNCell_:function(e,t,n,r){for(var A=Q(t,"data","multiRNNCell"),o=Yu(n,"c","multiRNNCell"),i=Yu(r,"h","multiRNNCell"),a=A,s=[],u=0;u<e.length;u++){var l=e[u](a,o[u],i[u]);s.push(l[0]),s.push(l[1]),a=l[1]}var c=[],f=[];for(u=0;u<s.length;u+=2)c.push(s[u]),f.push(s[u+1]);return[c,f]}}),CS=_({movingAverage_:function(e,t,n,r,A){A===void 0&&(A=!0);var o=Q(e,"v","movingAverage"),i=Q(t,"x","movingAverage"),a=Q(n,"decay","movingAverage");wE(o,i),U(vt(o.shape,i.shape),function(){return"Shape mismatch in v and x"});var s=$(1),u=s.sub(a),l=i.sub(o).mul(u);if(A){U(r!=null,function(){return"When using zeroDebias: true, step is required."});var c=Q(r,"step","movingAverage");l=l.div(s.sub(il(a,c)))}return o.add(l)}}),xS=_({stridedSlice_:function(e,t,n,r,A,o,i,a,s){if(A===void 0&&(A=0),o===void 0&&(o=0),i===void 0&&(i=0),a===void 0&&(a=0),s===void 0&&(s=0),r==null&&(r=new Array(t.length)),i!==0)throw new Error("ellipsis mask is not yet supported");var u=Q(e,"x","stridedSlice"),l=$v(a),c=u.shape.slice();l.forEach(function(m){t[m]=0,n[m]=1,c.splice(m,0,1)}),u=u.reshape(c);for(var f=0;f<u.rank;f++)t[f]=D2(A,t,r,u.shape,f),n[f]=R2(o,n,r,u.shape,f),r[f]=r[f]||1;var h=$v(s);h.forEach(function(m){n[m]=t[m]+1,r[m]=1});var d=Fp(t,n,r),g=d.filter(function(m,p){return h.indexOf(p)===-1});return r.every(function(m){return m===1})?lr(u,t,d).reshape(g):k.runKernelFunc(function(m){return m.stridedSlice(u,t,n,r)},{$x:u}).reshape(g)}}),FS=_({topk_:function(e,t,n){t===void 0&&(t=1),n===void 0&&(n=!0);var r=Q(e,"x","topk");if(r.rank===0)throw new Error("topk() expects the input to be of rank 1 or higher");var A=r.shape[r.shape.length-1];if(t>A)throw new Error("'k' passed to topk() must be <= the last dimension ("+A+") but got "+t);var o=k.runKernelFunc(function(i){return i.topk(r,t,n)},{$x:r});return{values:o[0],indices:o[1]}}}),bS=_({scatterND_:function(e,t,n){var r=Q(e,"indices","scatterND","int32"),A=Q(t,"updates","scatterND");return _2(A,r,n),k.runKernelFunc(function(o){return o.scatterND(r,A,n)},{indices:r,updates:A},null,"ScatterNd",{shape:n})}}),Np=_({fft_:function(e){U(e.dtype==="complex64",function(){return"The dtype for tf.spectral.fft() must be complex64 but got "+e.dtype+"."});var t=e.shape[e.shape.length-1],n=e.size/t,r=e.as2D(n,t);return k.runKernelFunc(function(A){return A.fft(r)},{input:e}).reshape(e.shape)}}),al=_({ifft_:function(e){U(e.dtype==="complex64",function(){return"The dtype for tf.spectral.ifft() must be complex64 but got "+e.dtype+"."});var t=e.shape[e.shape.length-1],n=e.size/t,r=e.as2D(n,t);return k.runKernelFunc(function(A){return A.ifft(r)},{input:e}).reshape(e.shape)}}),Lp=_({rfft_:function(e,t){U(e.dtype==="float32",function(){return"The dtype for rfft() must be real value but got "+e.dtype});var n,r=e.shape[e.shape.length-1],A=e.size/r;if(t!=null&&t<r){var o=e.shape.map(function(p){return 0}),i=e.shape.map(function(p){return p});i[e.shape.length-1]=t,n=e.slice(o,i),r=t}else if(t!=null&&t>r){var a=e.shape.map(function(p){return p});a[e.shape.length-1]=t-r,n=e.concat(Te(a),e.shape.length-1),r=t}else n=e;var s=n.zerosLike(),u=Bt(n,s).as2D(A,r),l=Np(u),c=Math.floor(r/2)+1,f=xn(l),h=rr(l),d=f.split([c,r-c],f.shape.length-1),g=h.split([c,r-c],h.shape.length-1),m=n.shape.slice();return m[n.shape.length-1]=c,Bt(d[0],g[0]).reshape(m)}}),xC=_({irfft_:function(e){var t=e.shape[e.shape.length-1],n=e.size/t;if(t<=2){var r=e.as2D(n,t),A=al(r);return xn(A)}var o=[n,2*(t-1)],i=xn(e).as2D(n,t),a=rr(e).as2D(n,t),s=i.slice([0,1],[n,t-2]).reverse(1),u=a.slice([0,1],[n,t-2]).reverse(1).mul($(-1)),l=i.concat(s,1),c=a.concat(u,1);return r=Bt(l,c).as2D(o[0],o[1]),A=al(r),xn(A)}}),ES=Object.freeze({fft:Np,ifft:al,rfft:Lp,irfft:xC}),QS=_({sparseToDense_:function(e,t,n,r){r===void 0&&(r=0);var A=Q(e,"sparseIndices","sparseToDense","int32"),o=Q(t,"sparseValues","sparseToDense"),i=Q(r,"defaultValue","sparseToDense",o.dtype);return function(a,s,u,l){if(a.dtype!=="int32")throw new Error("tf.sparseToDense() expects the indices to be int32 type, but the dtype was "+a.dtype+".");if(a.rank>2)throw new Error("sparseIndices should be a scalar, vector, or matrix, but got shape "+a.shape+".");var c=a.rank>0?a.shape[0]:1,f=a.rank>1?a.shape[1]:1;if(u.length!==f)throw new Error("outputShape has incorrect number of elements:, "+u.length+", should be: "+f+".");var h=s.size;if(s.rank!==0&&(s.rank!==1||h!==c))throw new Error("sparseValues has incorrect shape "+s.shape+", should be [] or ["+c+"]");if(s.dtype!==l.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}(A,o,n,i),k.runKernelFunc(function(a){return a.sparseToDense(A,o,n,i)},{$sparseIndices:A,$sparseValues:o,$defaultValue:i})}}),US=_({gatherND_:function(e,t){var n=Q(t,"indices","gatherND","int32"),r=Q(e,"x","gatherND");return k.runKernelFunc(function(A){return A.gatherND(r,n)},{x:r,indices:n},null,"GatherNd")}}),IS=_({diag_:function(e){var t=Q(e,"x","diag").flatten(),n=e.shape.concat(e.shape);return k.runKernelFunc(function(r){return r.diag(t)},{$x:t}).reshape(n)}}),SS=_({dropout_:function(e,t,n,r){var A=Q(e,"x","dropout");if(U(A.dtype==="float32",function(){return"x has to be a floating point tensor since it's going to be scaled, but got a "+A.dtype+" tensor instead."}),U(t>=0&&t<1,function(){return"rate must be a float in the range [0, 1), but got "+t+"."}),t===0)return e instanceof Ke?A.clone():A;var o=function(s,u){if(u==null)return s.shape.slice();if(vt(s.shape,u))return u;if(s.shape.length===u.length){for(var l=[],c=0;c<s.shape.length;c++)u[c]==null&&s.shape[c]!=null?l.push(s.shape[c]):l.push(u[c]);return l}return u}(A,n),i=1-t,a=By(o,0,1,"float32",r).add(i).floor().div(i);return A.mul(a)}});function FC(e,t,n){for(var r=1-e%2,A=new Float32Array(e),o=0;o<e;++o){var i=2*Math.PI*o/(e+r-1);A[o]=t-n*Math.cos(i)}return rt(A,"float32")}var Mp=_({hannWindow_:function(e){return FC(e,.5,.5)}}),bC=_({hammingWindow_:function(e){return FC(e,.54,.46)}}),Op=_({frame_:function(e,t,n,r,A){r===void 0&&(r=!1),A===void 0&&(A=0);for(var o=0,i=[];o+t<=e.size;)i.push(lr(e,o,t)),o+=n;if(r)for(;o<e.size;){var a=o+t-e.size,s=st([lr(e,o,t-a),ur([a],A)]);i.push(s),o+=n}return i.length===0?pA([],[0,t]):st(i).as2D(i.length,t)}}),EC=_({stft_:function(e,t,n,r,A){var o;A===void 0&&(A=Mp),r==null&&(o=t,r=Math.floor(Math.pow(2,Math.ceil(Math.log(o)/Math.log(2)))));for(var i=Op(e,t,n),a=Ht(i,A(t)),s=[],u=0;u<i.shape[0];u++)s.push(Lp(a.slice([u,0],[1,t]),r));return st(s)}}),_S=Object.freeze({hannWindow:Mp,hammingWindow:bC,frame:Op,stft:EC}),Tt,kS=function(e,t,n){return n===void 0&&(n=1),ee(this,void 0,void 0,function(){var r,A,o,i,a,s,u,l,c,f,h,d,g,m;return te(this,function(p){switch(p.label){case 0:return r=Q(e,"predictions","inTopK"),A=Q(t,"targets","inTopK"),U(r.rank>1,function(){return"inTopK() expects the predictions to be of rank 2 or higher, but got "+r.rank}),U(r.rank-1===A.rank,function(){return"predictions rank should be 1 larger than targets rank, but got predictions rank "+r.rank+" and targets rank "+A.rank}),Qe(r.shape.slice(0,r.shape.length-1),A.shape,"predictions's shape should be align with the targets' shape, except the last dimension."),o=r.shape[r.shape.length-1],U(n>0&&n<=o,function(){return"'k' passed to inTopK() must be > 0 && <= the predictions last dimension ("+o+"), but got "+n}),[4,r.data()];case 1:return i=p.sent(),[4,A.data()];case 2:for(a=p.sent(),s=[i.length/o,o],l=s[1],c=Sa("bool",u=s[0]),f=0;f<u;f++){for(h=f*l,d=i.subarray(h,h+l),g=[],m=0;m<d.length;m++)g.push({value:d[m],index:m});for(g.sort(function(v,w){return w.value-v.value}),c[f]=0,m=0;m<n;m++)if(g[m].index===a[f]){c[f]=1;break}}return e!==r&&r.dispose(),t!==A&&A.dispose(),[2,xt(c,A.shape,"bool")]}})})};(function(e){e[e.NONE=0]="NONE",e[e.MEAN=1]="MEAN",e[e.SUM=2]="SUM",e[e.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"})(Tt||(Tt={}));var DS=_({absoluteDifference_:function(e,t,n,r){r===void 0&&(r=Tt.SUM_BY_NONZERO_WEIGHTS);var A=Q(e,"labels","absoluteDifference"),o=Q(t,"predictions","absoluteDifference"),i=null;n!=null&&(i=Q(n,"weights","absoluteDifference")),Qe(A.shape,o.shape,"Error in absoluteDifference: ");var a=A.sub(o).abs();return Mr(a,i,r)}}),Mr=_({computeWeightedLoss_:function(e,t,n){n===void 0&&(n=Tt.SUM_BY_NONZERO_WEIGHTS);var r=Q(e,"losses","computeWeightedLoss"),A=null;t!=null&&(A=Q(t,"weights","computeWeightedLoss"));var o=A==null?r:r.mul(A);if(n===Tt.NONE)return o;if(n===Tt.SUM)return o.sum();if(n===Tt.MEAN){if(A==null)return o.mean();var i=r.size/A.size,a=o.sum().div(A.sum());return i>1?a.div($(i)):a}if(n===Tt.SUM_BY_NONZERO_WEIGHTS){if(A==null)return o.sum().div($(r.size));var s=A.mul(yi(r.shape)).notEqual($(0)).sum().toFloat();return o.sum().div(s)}throw Error("Unknown reduction: "+n)}}),RS=_({cosineDistance_:function(e,t,n,r,A){A===void 0&&(A=Tt.SUM_BY_NONZERO_WEIGHTS);var o=Q(e,"labels","cosineDistance"),i=Q(t,"predictions","cosineDistance"),a=null;r!=null&&(a=Q(r,"weights","cosineDistance")),Qe(o.shape,i.shape,"Error in cosineDistance: ");var s=$(1).sub(o.mul(i).sum(n,!0));return Mr(s,a,A)}}),TS=_({hingeLoss_:function(e,t,n,r){r===void 0&&(r=Tt.SUM_BY_NONZERO_WEIGHTS);var A=Q(e,"labels","hingeLoss"),o=Q(t,"predictions","hingeLoss"),i=null;n!=null&&(i=Q(n,"weights","hingeLoss")),Qe(A.shape,o.shape,"Error in hingeLoss: ");var a=$(1);A=$(2).mul(A).sub(a);var s=a.sub(A.mul(o)).relu();return Mr(s,i,r)}}),HS=_({huberLoss_:function(e,t,n,r,A){r===void 0&&(r=1),A===void 0&&(A=Tt.SUM_BY_NONZERO_WEIGHTS);var o=Q(e,"labels","huberLoss"),i=Q(t,"predictions","huberLoss"),a=null;n!=null&&(a=Q(n,"weights","huberLoss")),Qe(o.shape,i.shape,"Error in huberLoss: ");var s=$(r),u=i.sub(o).abs(),l=oC(u,s),c=u.sub(l),f=$(.5).mul(l.square()).add(s.mul(c));return Mr(f,a,A)}}),NS=_({logLoss_:function(e,t,n,r,A){r===void 0&&(r=1e-7),A===void 0&&(A=Tt.SUM_BY_NONZERO_WEIGHTS);var o=Q(e,"labels","logLoss"),i=Q(t,"predictions","logLoss"),a=null;n!=null&&(a=Q(n,"weights","logLoss")),Qe(o.shape,i.shape,"Error in logLoss: ");var s=$(1),u=$(r),l=o.mul(i.add(u).log()).neg().sub(s.sub(o).mul(s.sub(i).add(u).log()));return Mr(l,a,A)}}),LS=_({meanSquaredError_:function(e,t,n,r){r===void 0&&(r=Tt.SUM_BY_NONZERO_WEIGHTS);var A=Q(e,"labels","meanSquaredError"),o=Q(t,"predictions","meanSquaredError"),i=null;n!=null&&(i=Q(n,"weights","meanSquaredError")),Qe(A.shape,o.shape,"Error in meanSquaredError: ");var a=A.squaredDifference(o);return Mr(a,i,r)}}),MS=_({sigmoidCrossEntropy_:function(e,t,n,r,A){r===void 0&&(r=0),A===void 0&&(A=Tt.SUM_BY_NONZERO_WEIGHTS);var o=Q(e,"multiClassLabels","sigmoidCrossEntropy"),i=Q(t,"logits","sigmoidCrossEntropy"),a=null;if(n!=null&&(a=Q(n,"weights","sigmoidCrossEntropy")),Qe(o.shape,i.shape,"Error in sigmoidCrossEntropy: "),r>0){var s=$(r),u=$(1),l=$(.5);o=o.mul(u.sub(s)).add(l.mul(s))}var c=function(f,h){var d=Q(f,"labels","sigmoidCrossEntropyWithLogits"),g=Q(h,"logits","sigmoidCrossEntropyWithLogits");Qe(d.shape,g.shape,"Error in sigmoidCrossEntropyWithLogits: ");var m=g.relu(),p=g.mul(d),v=g.abs().neg().exp().log1p();return m.sub(p).add(v)}(o,i);return Mr(c,a,A)}}),OS=_({softmaxCrossEntropy_:function(e,t,n,r,A){r===void 0&&(r=0),A===void 0&&(A=Tt.SUM_BY_NONZERO_WEIGHTS);var o=Q(e,"onehotLabels","softmaxCrossEntropy"),i=Q(t,"logits","softmaxCrossEntropy"),a=null;if(n!=null&&(a=Q(n,"weights","softmaxCrossEntropy")),Qe(o.shape,i.shape,"Error in softmaxCrossEntropy: "),r>0){var s=$(r),u=$(1),l=$(o.shape[1]);o=o.mul(u.sub(s)).add(s.div(l))}var c=function(f,h,d){if(d===void 0&&(d=-1),d===-1&&(d=h.rank-1),d!==h.rank-1)throw Error("Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank "+h.rank+" and dim was "+d);return Pl(function(g,m,p){var v=m.logSumExp([d],!0),w=m.toFloat().sub(v);return p([g,w]),{value:w.mul(g).neg().sum([d]),gradFunc:function(B,y){var C=y[0],b=y[1],x=tn(B.shape,[d]);return[B.reshape(x).mul(C.toFloat().sub(b.exp())),B.reshape(x).mul(b.exp().sub(C.toFloat()))]}}})(f,h)}(o,i);return Mr(c,a,A)}}),PS=Object.freeze({get Reduction(){return Tt},absoluteDifference:DS,computeWeightedLoss:Mr,cosineDistance:RS,hingeLoss:TS,huberLoss:HS,logLoss:NS,meanSquaredError:LS,sigmoidCrossEntropy:MS,softmaxCrossEntropy:OS});function gm(e,t){return t===void 0&&(t=!1),k.tidy(function(){if(e.shape.length!==2)throw new Error("qr2d() requires a 2D Tensor, but got a "+e.shape.length+"D Tensor.");for(var n=e.shape[0],r=e.shape[1],A=wy(n),o=e.clone(),i=pA([[1]],[1,1]),a=i.clone(),s=n>=r?r:n,u=function(c){var f,h=o,d=a,g=A;f=k.tidy(function(){var m=o.slice([c,c],[n-c,1]),p=m.norm(),v=o.slice([c,c],[1,1]),w=pA([[-1]]).where(v.greater(0),pA([[1]])),B=v.sub(w.mul(p)),y=m.div(B);a=y.shape[0]===1?i.clone():i.concat(y.slice([1,0],[y.shape[0]-1,y.shape[1]]),0);var C=w.matMul(B).div(p).neg(),b=o.slice([c,0],[n-c,r]),x=C.mul(a);if(c===0)o=b.sub(x.matMul(a.transpose().matMul(b)));else{var F=b.sub(x.matMul(a.transpose().matMul(b)));o=o.slice([0,0],[c,r]).concat(F,0)}var E=A.slice([0,c],[n,A.shape[1]-c]);if(c===0)A=E.sub(E.matMul(a).matMul(x.transpose()));else{var I=E.sub(E.matMul(a).matMul(x.transpose()));A=A.slice([0,0],[n,c]).concat(I,1)}return[a,o,A]}),a=f[0],o=f[1],A=f[2],en([h,d,g])},l=0;l<s;++l)u(l);return!t&&n>r&&(A=A.slice([0,0],[n,r]),o=o.slice([0,0],[r,r])),[A,o]})}var KS=_({bandPart_:function(e,t,n){if(t%1!=0)throw new Error("bandPart(): numLower must be an integer, got "+t+".");if(n%1!=0)throw new Error("bandPart(): numUpper must be an integer, got "+n+".");var r=Q(e,"a","bandPart");if(r.rank<2)throw new Error("bandPart(): Rank must be at least 2, got "+r.rank+".");var A=r.shape,o=r.shape.slice(-2),i=o[0],a=o[1];if(!(t<=i))throw new Error("bandPart(): numLower ("+t+") must not be greater than the number of rows ("+i+").");if(!(n<=a))throw new Error("bandPart(): numUpper ("+n+") must not be greater than the number of columns ("+a+").");t<0&&(t=i),n<0&&(n=a);var s=qu(0,i,1,"int32").reshape([-1,1]),u=qu(0,a,1,"int32"),l=ct(s,u),c=Vl(l.lessEqual($(+t,"int32")),l.greaterEqual($(-n,"int32"))),f=Te([i,a],r.dtype);return dn(ut(r.reshape([-1,i,a])).map(function(h){return to(c,h,f)})).reshape(A)}}),VS=_({gramSchmidt_:function(e){var t;if(Array.isArray(e)){t=!1,U(e!=null&&e.length>0,function(){return"Gram-Schmidt process: input must not be null, undefined, or empty"});for(var n=e[0].shape[0],r=function(s){U(e[s].shape[0]===n,function(){return"Gram-Schmidt: Non-unique lengths found in the input vectors: ("+e[s].shape[0]+" vs. "+n+")"})},A=1;A<e.length;++A)r(A)}else t=!0,e=Cp(e,e.shape[0],0).map(function(s){return Cy(s,[0])});U(e.length<=e[0].shape[0],function(){return"Gram-Schmidt: Number of vectors ("+e.length+") exceeds number of dimensions ("+e[0].shape[0]+")."});var o=[],i=e,a=function(s){o.push(k.tidy(function(){var u=i[s];if(s>0)for(var l=0;l<s;++l){var c=mC(o[l].mulStrict(u)).mul(o[l]);u=u.sub(c)}return u.div(CC(u,"euclidean"))}))};for(A=0;A<e.length;++A)a(A);return t?dn(o,0):o}}),WS=_({qr_:function(e,t){if(t===void 0&&(t=!1),e.rank<2)throw new Error("qr() requires input tensor to have a rank >= 2, but got rank "+e.rank);if(e.rank===2)return gm(e,t);var n=e.shape.slice(0,e.shape.length-2).reduce(function(i,a){return i*a}),r=ut(e.reshape([n,e.shape[e.shape.length-2],e.shape[e.shape.length-1]]),0),A=[],o=[];return r.forEach(function(i){var a=gm(i,t),s=a[0],u=a[1];A.push(s),o.push(u)}),[dn(A,0).reshape(e.shape),dn(o,0).reshape(e.shape)]}}),GS=Object.freeze({bandPart:KS,gramSchmidt:VS,qr:WS});function Xl(e,t,n,r,A,o){r==null&&(r=.5),A==null&&(A=Number.NEGATIVE_INFINITY),o==null&&(o=0);var i=e.shape[0];return n=Math.min(n,i),U(0<=r&&r<=1,function(){return"iouThreshold must be in [0, 1], but was '"+r+"'"}),U(e.rank===2,function(){return"boxes must be a 2D tensor, but was of rank '"+e.rank+"'"}),U(e.shape[1]===4,function(){return"boxes must have 4 columns, but 2nd dimension was "+e.shape[1]}),U(t.rank===1,function(){return"scores must be a 1D tensor"}),U(t.shape[0]===i,function(){return"scores has incompatible shape with boxes. Expected "+i+", but was "+t.shape[0]}),U(0<=o&&o<=1,function(){return"softNmsSigma must be in [0, 1], but was '"+o+"'"}),{maxOutputSize:n,iouThreshold:r,scoreThreshold:A,softNmsSigma:o}}var zS=_({resizeBilinear_:function(e,t,n){n===void 0&&(n=!1);var r=Q(e,"images","resizeBilinear");U(r.rank===3||r.rank===4,function(){return"Error in resizeBilinear: x must be rank 3 or 4, but got rank "+r.rank+"."}),U(t.length===2,function(){return"Error in resizeBilinear: new shape must 2D, but got shape "+t+"."});var A=r,o=!1;r.rank===3&&(o=!0,A=r.as4D(1,r.shape[0],r.shape[1],r.shape[2]));var i=t[0],a=t[1],s=k.runKernelFunc(function(u,l){return l([A]),u.resizeBilinear(A,i,a,n)},{x:A},function(u,l){return{x:function(){return k.runKernelFunc(function(c){return c.resizeBilinearBackprop(u,l[0],n)},{})}}},"ResizeBilinear",{alignCorners:n,newHeight:i,newWidth:a});return o?s.as3D(s.shape[1],s.shape[2],s.shape[3]):s}}),XS=_({resizeNearestNeighbor_:function(e,t,n){n===void 0&&(n=!1);var r=Q(e,"images","resizeNearestNeighbor");U(r.rank===3||r.rank===4,function(){return"Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank "+r.rank+"."}),U(t.length===2,function(){return"Error in resizeNearestNeighbor: new shape must 2D, but got shape "+t+"."}),U(r.dtype==="float32"||r.dtype==="int32",function(){return"`images` must have `int32` or `float32` as dtype"});var A=r,o=!1;r.rank===3&&(o=!0,A=r.as4D(1,r.shape[0],r.shape[1],r.shape[2]));var i=t[0],a=t[1],s=k.runKernelFunc(function(u,l){return l([A]),u.resizeNearestNeighbor(A,i,a,n)},{batchImages:A},function(u,l){return{batchImages:function(){return k.runKernelFunc(function(c){return c.resizeNearestNeighborBackprop(u,l[0],n)},{})}}});return o?s.as3D(s.shape[1],s.shape[2],s.shape[3]):s}}),$S=_({nonMaxSuppression_:function(e,t,n,r,A){r===void 0&&(r=.5),A===void 0&&(A=Number.NEGATIVE_INFINITY);var o=Q(e,"boxes","nonMaxSuppression"),i=Q(t,"scores","nonMaxSuppression"),a=Xl(o,i,n,r,A);n=a.maxOutputSize,r=a.iouThreshold,A=a.scoreThreshold;var s={maxOutputSize:n,iouThreshold:r,scoreThreshold:A};return k.runKernelFunc(function(u){return u.nonMaxSuppression(o,i,n,r,A)},{boxes:o,scores:i},null,"NonMaxSuppressionV3",s)}}),jS=function(e,t,n,r,A){return r===void 0&&(r=.5),A===void 0&&(A=Number.NEGATIVE_INFINITY),ee(this,void 0,void 0,function(){var o,i,a,s,u,l,c;return te(this,function(f){switch(f.label){case 0:return o=Q(e,"boxes","nonMaxSuppressionAsync"),i=Q(t,"scores","nonMaxSuppressionAsync"),a=Xl(o,i,n,r,A),n=a.maxOutputSize,r=a.iouThreshold,A=a.scoreThreshold,[4,Promise.all([o.data(),i.data()])];case 1:return s=f.sent(),u=s[0],l=s[1],c=Ep(u,l,n,r,A),o!==e&&o.dispose(),i!==t&&i.dispose(),[2,c]}})})},YS=_({nonMaxSuppressionWithScore_:function(e,t,n,r,A,o){r===void 0&&(r=.5),A===void 0&&(A=Number.NEGATIVE_INFINITY),o===void 0&&(o=0);var i=Q(e,"boxes","nonMaxSuppression"),a=Q(t,"scores","nonMaxSuppression"),s=Xl(i,a,n,r,A,o),u={maxOutputSize:n=s.maxOutputSize,iouThreshold:r=s.iouThreshold,scoreThreshold:A=s.scoreThreshold,softNmsSigma:o=s.softNmsSigma},l=k.runKernel("NonMaxSuppressionV5",{boxes:i,scores:a},u);return{selectedIndices:l[0],selectedScores:l[1]}}}),qS=function(e,t,n,r,A,o){return r===void 0&&(r=.5),A===void 0&&(A=Number.NEGATIVE_INFINITY),o===void 0&&(o=0),ee(this,void 0,void 0,function(){var i,a,s,u,l,c,f;return te(this,function(h){switch(h.label){case 0:return i=Q(e,"boxes","nonMaxSuppressionAsync"),a=Q(t,"scores","nonMaxSuppressionAsync"),s=Xl(i,a,n,r,A,o),n=s.maxOutputSize,r=s.iouThreshold,A=s.scoreThreshold,o=s.softNmsSigma,[4,Promise.all([i.data(),a.data()])];case 1:return u=h.sent(),l=u[0],c=u[1],f=Qp(l,c,n,r,A,o),i!==e&&i.dispose(),a!==t&&a.dispose(),[2,f]}})})},JS=_({cropAndResize_:function(e,t,n,r,A,o){var i=Q(e,"image","cropAndResize"),a=Q(t,"boxes","cropAndResize","float32"),s=Q(n,"boxInd","cropAndResize","int32");A=A||"bilinear",o=o||0;var u=a.shape[0];return U(i.rank===4,function(){return"Error in cropAndResize: image must be rank 4,but got rank "+i.rank+"."}),U(a.rank===2&&a.shape[1]===4,function(){return"Error in cropAndResize: boxes must be have size ["+u+",4] but had shape "+a.shape+"."}),U(s.rank===1&&s.shape[0]===u,function(){return"Error in cropAndResize: boxInd must be have size ["+u+"] but had shape "+a.shape+"."}),U(r.length===2,function(){return"Error in cropAndResize: cropSize must be of length 2, but got length "+r.length+"."}),U(r[0]>=1&&r[1]>=1,function(){return"cropSize must be atleast [1,1], but was "+r}),U(A==="bilinear"||A==="nearest",function(){return"method must be bilinear or nearest, but was "+A}),k.runKernelFunc(function(l,c){return l.cropAndResize(i,a,s,r,A,o)},{images:i,boxes:a,boxInd:s},null,"CropAndResize",{method:A,extrapolationValue:o,cropSize:r})}}),Pp=Object.freeze({resizeBilinear:zS,resizeNearestNeighbor:XS,nonMaxSuppression:$S,nonMaxSuppressionAsync:jS,nonMaxSuppressionWithScore:YS,nonMaxSuppressionWithScoreAsync:qS,cropAndResize:JS}),Kp=function(e,t){return!(e>0)||t==="linear"},Vp=function(e,t,n){if(n==null||n==="linear")return e;if(n==="relu")return e.mul(t.step());throw new Error("Gradient for activation "+n+" has not been implemented yet.")},Wp=function(e,t){var n=t,r=lt(e.shape,t.shape);return r.length>0&&(n=n.sum(r)),n.reshape(e.shape)},Gp=function(e,t,n){if(t==="linear")return e;if(t==="relu")return Ve(e);if(t==="elu")return wC(e);if(t==="relu6")return yC(e);if(t==="prelu")return BC(e,n);throw new Error("Unknown fused activation "+t+".")},ZS=_({fusedMatMul_:function(e){var t,n=e.a,r=e.b,A=e.transposeA,o=A!==void 0&&A,i=e.transposeB,a=i!==void 0&&i,s=e.bias,u=e.activation,l=u===void 0?"linear":u,c=e.preluActivationWeights;if(Kp(k.state.gradientDepth,l)===!1){var f=Gl(n,r,o,a);return s!=null&&(f=de(f,s)),Gp(f,l,c)}var h=Q(n,"a","fused matMul"),d=Q(r,"b","fused matMul");t=ze(h,d),h=t[0],d=t[1];var g=o?h.shape[h.rank-2]:h.shape[h.rank-1],m=a?d.shape[d.rank-1]:d.shape[d.rank-2],p=o?h.shape[h.rank-1]:h.shape[h.rank-2],v=a?d.shape[d.rank-2]:d.shape[d.rank-1],w=h.shape.slice(0,-2),B=d.shape.slice(0,-2),y=ne(w),C=ne(B);U(h.rank>=2&&d.rank>=2&&h.rank===d.rank,function(){return"Error in fused matMul: inputs must have the same rank of at least 2, got ranks "+h.rank+" and "+d.rank+"."}),U(vt(w,B),function(){return"Error in fused matMul: outer dimensions ("+w+") and ("+B+") of Tensors with shapes "+h.shape+" and "+d.shape+" must match."}),U(g===m,function(){return"Error in fused matMul: inner shapes ("+g+") and ("+m+") of Tensors with shapes "+h.shape+" and "+d.shape+" and transposeA="+o+" and transposeB="+a+" must match."});var b,x,F=h.shape.slice(0,-2).concat([p,v]),E=o?h.as3D(y,g,p):h.as3D(y,p,g),I=a?d.as3D(C,v,m):d.as3D(C,m,v);s!=null&&pe(F,(b=ze(b=Q(s,"bias","fused matMul"),h)[0]).shape),c!=null&&(x=Q(c,"prelu weights","fused matMul"));var S={a:E,b:I};s!=null&&(S.bias=b),c!=null&&(S.preluActivationWeights=x);var T=[E,I];return k.runKernelFunc(function(N,O){var K=N.fusedBatchMatMul({a:E,b:I,transposeA:o,transposeB:a,bias:b,activation:l,preluActivationWeights:x});return O([E,I,K]),K},S,function(N,O){var K=O[0],P=O[1],D=O[2],R=Vp(N,D,l),L={};return s!=null&&(L={bias:function(){return Wp(b,R)}}),Object.assign(o||a?!o&&a?{a:function(){return R.matMul(P,!1,!1)},b:function(){return R.matMul(K,!0,!1)}}:o&&!a?{a:function(){return P.matMul(R,!1,!0)},b:function(){return K.matMul(R,!1,!1)}}:{a:function(){return P.matMul(R,!0,!0)},b:function(){return R.matMul(K,!0,!0)}}:{a:function(){return R.matMul(P,!1,!0)},b:function(){return K.matMul(R,!0,!1)}},L)},"_FusedMatMul",{transposeA:o,transposeB:a,activation:l},T,[!0]).reshape(F)}}),e4=_({fusedConv2d_:function(e){var t=e.x,n=e.filter,r=e.strides,A=e.pad,o=e.dataFormat,i=o===void 0?"NHWC":o,a=e.dilations,s=a===void 0?[1,1]:a,u=e.dimRoundingMode,l=e.bias,c=e.activation,f=c===void 0?"linear":c,h=e.preluActivationWeights;if(f=f||"linear",Kp(k.state.gradientDepth,f)===!1){var d=_n(t,n,r,A,i,s,u);return l!=null&&(d=de(d,l)),Gp(d,f,h)}var g=Q(t,"x","conv2d"),m=Q(n,"filter","conv2d"),p=g,v=!1;g.rank===3&&(v=!0,p=g.as4D(1,g.shape[0],g.shape[1],g.shape[2])),U(p.rank===4,function(){return"Error in fused conv2d: input must be rank 4, but got rank "+p.rank+"."}),U(m.rank===4,function(){return"Error in fused conv2d: filter must be rank 4, but got rank "+m.rank+"."}),u!=null&&U(et(A),function(){return"Error in fused conv2d: pad must be an integer when using, dimRoundingMode "+u+" but got pad "+A+"."}),U(p.shape[3]===m.shape[2],function(){return"Error in conv2d: depth of input ("+p.shape[3]+") must match input depth for filter "+m.shape[2]+"."}),U(nn(r,s),function(){return"Error in conv2D: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+s+"'"}),U(i==="NHWC",function(){return"Error in conv2d: got dataFormat of "+i+" but only NHWC is currently supported."});var w,B,y=ao(p.shape,m.shape,r,s,A,u);l!=null&&(w=ze(w=Q(l,"bias","fused conv2d"),g)[0],pe(y.outShape,w.shape)),h!=null&&(B=Q(h,"prelu weights","fused conv2d"));var C={x:p,filter:m};l!=null&&(C.bias=w),h!=null&&(C.preluActivationWeights=B);var b=[m,p],x=k.runKernelFunc(function(F,E){var I=F.fusedConv2d({input:p,filter:m,convInfo:y,bias:w,activation:f,preluActivationWeights:B});return E([m,p,I]),I},C,function(F,E){var I=E,S=I[0],T=I[1],N=I[2],O=Vp(F,N,f);U(pi(s),function(){return"Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+s+"'"});var K={};return l!=null&&(K={bias:function(){return Wp(w,O)}}),Object.assign({x:function(){return cC(T.shape,O,S,r,A)},filter:function(){return Tp(T,O,S.shape,r,A)}},K)},"FusedConv2D",{convInfo:y,activation:f},b,[!0]);return v?x.as3D(x.shape[1],x.shape[2],x.shape[3]):x}}),t4=_({fusedDepthwiseConv2d_:function(e){var t=e.x,n=e.filter,r=e.strides,A=e.pad,o=e.dataFormat,i=o===void 0?"NHWC":o,a=e.dilations,s=a===void 0?[1,1]:a,u=e.dimRoundingMode,l=e.bias,c=e.activation,f=c===void 0?"linear":c,h=e.preluActivationWeights;if(Kp(k.state.gradientDepth,f)===!1){var d=Wl(t,n,r,A,i,s,u);return l!=null&&(d=de(d,l)),Gp(d,f,h)}var g=Q(t,"x","depthwiseConv2d"),m=Q(n,"filter","depthwiseConv2d"),p=g,v=!1;g.rank===3&&(v=!0,p=g.as4D(1,g.shape[0],g.shape[1],g.shape[2])),U(p.rank===4,function(){return"Error in fused depthwiseConv2d: input must be rank 4, but got rank "+p.rank+"."}),U(m.rank===4,function(){return"Error in fused depthwiseConv2d: filter must be rank 4, but got rank "+m.rank+"."}),U(p.shape[3]===m.shape[2],function(){return"Error in fused depthwiseConv2d: number of input channels ("+p.shape[3]+") must match the inChannels dimension in filter "+m.shape[2]+"."}),s==null&&(s=[1,1]),U(nn(r,s),function(){return"Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+s+"'"}),u!=null&&U(et(A),function(){return"Error in fused depthwiseConv2d: pad must be an integer when using dimRoundingMode "+u+" but got pad "+A+"."});var w,B,y=ao(p.shape,m.shape,r,s,A,u,!0);l!=null&&(w=ze(w=Q(l,"bias","fused conv2d"),g)[0],pe(y.outShape,w.shape)),h!=null&&(B=Q(h,"prelu weights","fused depthwiseConv2d"));var C={x:p,filter:m};l!=null&&(C.bias=w),h!=null&&(C.preluActivationWeights=B);var b=[m,p],x=k.runKernelFunc(function(F,E){var I=F.fusedDepthwiseConv2D({input:p,filter:m,convInfo:y,bias:w,activation:f,preluActivationWeights:B});return E([m,p,I]),I},C,function(F,E){U(pi(s),function(){return"Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '"+s+"'"});var I=E[0],S=E[1],T=E[2],N=Vp(F,T,f),O={};return l!=null&&(O={bias:function(){return Wp(w,N)}}),Object.assign({x:function(){return fC(S.shape,N,I,y)},filter:function(){return hC(S,N,I.shape,y)}},O)},"FusedDepthwiseConv2D",{convInfo:y,activation:f},b,[!0]);return v?x.as3D(x.shape[1],x.shape[2],x.shape[3]):x}}),n4=Object.freeze({matMul:ZS,conv2d:e4,depthwiseConv2d:t4}),r4=Object.freeze({image:Pp,linalg:GS,losses:PS,spectral:ES,fused:n4,signal:_S,square:NU,squaredDifference:jy,conv1d:zI,conv2d:_n,conv3d:XI,depthwiseConv2d:Wl,separableConv2d:Hp,conv2dTranspose:$I,conv3dTranspose:jI,op:_,batchNormalization2d:hI,batchNormalization3d:dI,batchNormalization4d:pI,batchNormalization:gI,batchNorm:tC,batchNorm2d:vI,batchNorm3d:mI,batchNorm4d:wI,booleanMaskAsync:GI,complex:Bt,real:xn,imag:rr,concat:st,concat1d:n2,concat2d:r2,concat3d:A2,concat4d:o2,split:Cp,matMul:Gl,dot:YI,outerProduct:qI,reverse:Ya,reverse1d:JI,reverse2d:ZI,reverse3d:eS,reverse4d:tS,maxPool:dt,avgPool:qa,pool:nS,maxPool3d:rS,avgPool3d:AS,slice:lr,slice1d:oS,slice2d:iS,slice3d:gC,slice4d:aS,abs:LU,acos:MU,acosh:OU,asin:PU,asinh:KU,atan:VU,atanh:WU,ceil:GU,clipByValue:kp,cos:zU,cosh:XU,erf:$U,exp:zh,expm1:jU,floor:YU,log:qU,log1p:JU,logSigmoid:ZU,neg:ol,reciprocal:eI,round:tI,rsqrt:Yy,sigmoid:qy,sign:nI,isNaN:rI,isInf:AI,isFinite:oI,sin:iI,sinh:aI,softplus:sI,sqrt:uI,step:lI,tan:cI,tanh:fI,all:sS,any:uS,argMax:lS,argMin:cS,logSumExp:fS,max:zl,mean:hS,min:dS,moments:pS,sum:mC,prod:gS,equal:iC,equalStrict:TI,greater:HI,greaterEqual:aC,greaterEqualStrict:NI,greaterStrict:LI,less:MI,lessEqual:OI,lessEqualStrict:PI,lessStrict:KI,notEqual:VI,notEqualStrict:WI,add:de,addN:CI,addStrict:xI,atan2:FI,div:Nn,divNoNan:bI,divStrict:EI,floorDiv:AC,maximum:Dp,maximumStrict:QI,minimum:oC,minimumStrict:UI,mod:II,modStrict:SI,mul:Ht,mulStrict:_I,pow:il,powStrict:kI,squaredDifferenceStrict:DI,sub:ct,subStrict:RI,elu:wC,leakyRelu:vS,prelu:BC,relu:Ve,relu6:yC,selu:mS,logicalAnd:Vl,logicalNot:BI,logicalOr:nC,logicalXor:yI,where:to,whereAsync:rC,buffer:fe,print:d2,batchToSpaceND:my,broadcastTo:p2,cast:g2,clone:v2,cumsum:m2,depthToSpace:w2,expandDims:yn,eye:wy,multinomial:B2,oneHot:Kh,pad:io,pad1d:y2,pad2d:C2,pad3d:x2,pad4d:F2,rand:b2,randomNormal:E2,randomGamma:Q2,randomUniform:By,reshape:Ln,spaceToBatchND:yy,squeeze:Cy,stack:dn,tile:qo,truncatedNormal:U2,unstack:ut,setdiff1dAsync:I2,fill:ur,linspace:t2,ones:yi,range:qu,scalar:$,tensor:xt,tensor1d:rt,tensor2d:pA,tensor3d:yp,tensor4d:$t,tensor5d:JE,tensor6d:ZE,variable:e2,zeros:Te,onesLike:vy,zerosLike:ye,transpose:CA,softmax:Lr,logSoftmax:H2,localResponseNormalization:wS,norm:CC,gather:Rp,unsortedSegmentSum:sC,basicLSTMCell:BS,multiRNNCell:yS,movingAverage:CS,stridedSlice:xS,topk:FS,scatterND:bS,fft:Np,ifft:al,rfft:Lp,irfft:xC,sparseToDense:QS,gatherND:US,diag:IS,dropout:SS,hannWindow:Mp,hammingWindow:bC,frame:Op,stft:EC,inTopKAsync:kS});function W(e,t){Array.isArray(e)||(e=[e]),e.forEach(function(n){n!=null&&U(n.dtype!=="complex64",function(){return t+" does not support complex64 tensors."})})}function of(e,t,n,r){if(n==="linear")return e.linear(t);if(n==="relu")return e.relu(t);if(n==="elu")return e.elu(t);if(n==="relu6")return e.relu6(t);if(n==="prelu")return e.prelu(t,r);throw new Error("Activation "+n+" has not been implemented for the CPU backend.")}var A4=function(e){function t(){var n=e.call(this)||this;return n.blockSize=48,n.firstUse=!0,n.data=new Iy(n,k),n}return Vn(t,e),t.prototype.write=function(n,r,A){this.firstUse&&(this.firstUse=!1,V().get("IS_NODE")&&ju(`
============================
Hi there 👋. Looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, which binds to TensorFlow C++, by running npm i @tensorflow/tfjs-node, or npm i @tensorflow/tfjs-node-gpu if you have CUDA. Then call require('@tensorflow/tfjs-node'); (-gpu suffix for CUDA) at the start of your program. Visit https://github.com/tensorflow/tfjs-node for more details.
============================`));var o={};return this.data.set(o,{values:n,dtype:A}),o},t.prototype.move=function(n,r,A,o){this.data.set(n,{values:r,dtype:o})},t.prototype.numDataIds=function(){return this.data.numDataIds()},t.prototype.read=function(n){return ee(this,void 0,void 0,function(){return te(this,function(r){return[2,this.readSync(n)]})})},t.prototype.readSync=function(n){var r=this.data.get(n),A=r.dtype,o=r.complexTensors;return A==="complex64"?Gh(this.readSync(o.real.dataId),this.readSync(o.imag.dataId)):this.data.get(n).values},t.prototype.bufferSync=function(n){var r=this.readSync(n.dataId),A=r;if(n.dtype==="string")try{A=r.map(function(o){return zu(o)})}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return fe(n.shape,n.dtype,A)},t.prototype.makeOutput=function(n,r,A){var o=this.write(n,r,A);return k.makeTensorFromDataId(o,r,A,this)},t.prototype.disposeData=function(n){if(this.data.has(n)){var r=this.data.get(n).complexTensors;r!=null&&(r.real.dispose(),r.imag.dispose()),this.data.delete(n)}},t.prototype.time=function(n){return ee(this,void 0,void 0,function(){var r;return te(this,function(A){return r=er(),n(),[2,{kernelMs:er()-r}]})})},t.prototype.memory=function(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}},t.prototype.complex=function(n,r){var A=this.makeOutput(null,n.shape,"complex64");return this.data.get(A.dataId).complexTensors={real:k.keep(n.clone()),imag:k.keep(r.clone())},A},t.prototype.real=function(n){return this.data.get(n.dataId).complexTensors.real.clone()},t.prototype.imag=function(n){return this.data.get(n.dataId).complexTensors.imag.clone()},t.prototype.slice=function(n,r,A){if(W(n,"slice"),Qy(n.shape,r,A)){var o=Uy(r,n.strides),i=ne(A);return xt(this.readSync(n.dataId).subarray(o,o+i),A,n.dtype)}for(var a=fe(A,n.dtype),s=this.bufferSync(n),u=0;u<a.size;++u){var l=a.indexToLoc(u).map(function(c,f){return c+r[f]});a.values[u]=s.get.apply(s,l)}return a.toTensor()},t.prototype.stridedSlice=function(n,r,A,o){W(n,"stridedSlice");var i=Fp(r,A,o);if(i.some(function(h){return h===0}))return xt([],i);for(var a=fe(i,n.dtype),s=this.bufferSync(n),u=0;u<a.size;u++){for(var l=a.indexToLoc(u),c=new Array(l.length),f=0;f<c.length;f++)c[f]=l[f]*o[f]+r[f];a.set.apply(a,[s.get.apply(s,c)].concat(l))}return a.toTensor()},t.prototype.diag=function(n){for(var r=this.readSync(n.dataId),A=fe([n.size,n.size],n.dtype),o=A.values,i=0;i<r.length;i++)o[i*n.size+i]=r[i];return A.toTensor()},t.prototype.unstack=function(n,r){for(var A=n.shape[r],o=new Array(n.rank-1),i=0,a=0;a<n.rank;a++)a!==r&&(o[i++]=n.shape[a]);var s=new Array(n.rank).fill(0),u=n.shape.slice();u[r]=1;var l=new Array(A);for(a=0;a<l.length;a++)s[r]=a,l[a]=this.slice(n,s,u).reshape(o);return l},t.prototype.reverse=function(n,r){W(n,"reverse");for(var A=fe(n.shape,n.dtype),o=this.bufferSync(n),i=function(s){var u=A.indexToLoc(s),l=u.slice();r.forEach(function(c){return l[c]=n.shape[c]-1-l[c]}),A.set.apply(A,[o.get.apply(o,l)].concat(u))},a=0;a<A.size;a++)i(a);return A.toTensor()},t.prototype.concat=function(n,r){var A=this;if(n[0].dtype==="complex64"){var o=n.map(function(h){return xn(h)}),i=n.map(function(h){return rr(h)});return Bt(this.concat(o,r),this.concat(i,r))}var a=n.map(function(h){var d=ne(h.shape.slice(r));return h.as2D(-1,d)}),s=di(a.map(function(h){return h.shape}),1),u=fe(s,n[0].dtype).values;if(a[0].shape[0]===1){var l=0;a.forEach(function(h){u.set(A.readSync(h.dataId),l),l+=h.size})}else{var c=0;a.forEach(function(h){for(var d=A.readSync(h.dataId),g=0,m=0;m<h.shape[0];++m)for(var p=m*s[1]+c,v=0;v<h.shape[1];++v)u[p+v]=d[g++];c+=h.shape[1]})}var f=di(n.map(function(h){return h.shape}),r);return xt(u,f,n[0].dtype)},t.prototype.neg=function(n){return W(n,"neg"),this.multiply($(-1),n)},t.prototype.add=function(n,r){return n.dtype==="complex64"||r.dtype==="complex64"?this.broadcastedBinaryComplexOp(n.cast("complex64"),r.cast("complex64"),function(A,o,i,a){return{real:A+i,imag:o+a}}):this.broadcastedBinaryOp(n,r,Ct(n.dtype,r.dtype),function(A,o){return A+o})},t.prototype.addN=function(n){var r=this;W(n,"addN");for(var A=n.map(function(l){return r.readSync(l.dataId)}),o=fe(n[0].shape,n[0].dtype),i=o.values,a=0;a<n.length;a++)for(var s=A[a],u=0;u<i.length;u++)i[u]+=s[u];return o.toTensor()},t.prototype.softmax=function(n,r){var A=ft([r],n.shape),o=this.max(n,A),i=tn(o.shape,A),a=this.subtract(n,o.reshape(i)),s=this.exp(a),u=this.sum(s,A).reshape(i);return this.realDivide(s,u)},t.prototype.subtract=function(n,r){return n.dtype==="complex64"||r.dtype==="complex64"?this.broadcastedBinaryComplexOp(n.cast("complex64"),r.cast("complex64"),function(A,o,i,a){return{real:A-i,imag:o-a}}):this.broadcastedBinaryOp(n,r,Ct(n.dtype,r.dtype),function(A,o){return A-o})},t.prototype.pow=function(n,r){return W([n,r],"pow"),this.broadcastedBinaryOp(n,r,n.dtype,function(A,o){return Math.pow(A,o)})},t.prototype.batchMatMul=function(n,r,A,o){W([n,r],"matMul");for(var i=A?n.shape[1]:n.shape[2],a=A?n.shape[2]:n.shape[1],s=o?r.shape[1]:r.shape[2],u=n.shape[0],l=this.readSync(n.dataId),c=this.readSync(r.dataId),f=A?[n.strides[0],1,n.strides[1]]:[n.strides[0],n.strides[1],1],h=f[0],d=f[1],g=f[2],m=o?[1,r.strides[1],r.strides[0]]:[r.strides[1],1,r.strides[0]],p=m[0],v=m[1],w=m[2],B=a*s,y=fe([u,a,s],n.dtype),C=y.values,b=this.blockSize,x=0;x<u;x++)for(var F=0;F<a;F+=b)for(var E=0;E<s;E+=b)for(var I=0;I<i;I+=b)for(var S=Math.min(F+b,a),T=Math.min(E+b,s),N=Math.min(I+b,i),O=F;O<S;O++)for(var K=E;K<T;K++){for(var P=0,D=I;D<N;D++)P+=l[x*h+O*d+D*g]*c[D*p+K*v+x*w];C[x*B+(O*s+K)]+=P}return y.toTensor()},t.prototype.fusedBatchMatMul=function(n){var r=n.a,A=n.b,o=n.transposeA,i=n.transposeB,a=n.bias,s=n.activation,u=n.preluActivationWeights,l=this.batchMatMul(r,A,o,i);return a&&(l=this.add(l,a)),s&&(l=of(this,l,s,u)),l},t.prototype.multiply=function(n,r){return n.dtype==="complex64"||r.dtype==="complex64"?this.broadcastedBinaryComplexOp(n.cast("complex64"),r.cast("complex64"),function(A,o,i,a){return{real:A*i-o*a,imag:A*a+o*i}}):this.broadcastedBinaryOp(n,r,Ct(n.dtype,r.dtype),function(A,o){return A*o})},t.prototype.realDivide=function(n,r){return W([n,r],"realDivide"),this.broadcastedBinaryOp(n,r,"float32",function(A,o){return A/o})},t.prototype.floorDiv=function(n,r){return W([n,r],"floorDiv"),this.broadcastedBinaryOp(n,r,"int32",function(A,o){return Math.floor(A/o)})},t.prototype.sum=function(n,r){W(n,"sum"),an("sum",r,n.rank);for(var A=St(n.shape,r),o=A[0],i=A[1],a=Te(o,Ct(n.dtype,"int32")),s=ne(i),u=this.readSync(a.dataId),l=this.readSync(n.dataId),c=0;c<u.length;++c){for(var f=c*s,h=0,d=0;d<s;++d)h+=l[f+d];u[c]=h}return a},t.prototype.prod=function(n,r){W(n,"sum");for(var A=St(n.shape,r),o=A[0],i=A[1],a=Te(o,Ct(n.dtype,"int32")),s=ne(i),u=this.readSync(a.dataId),l=this.readSync(n.dataId),c=0;c<u.length;++c){for(var f=c*s,h=1,d=0;d<s;++d)h*=l[f+d];u[c]=h}return a},t.prototype.unsortedSegmentSum=function(n,r,A){W(n,"unsortedSegmentSum");for(var o=[],i=n.rank-r.rank,a=0;a<i;++a)r=r.expandDims(a+1);for(a=0;a<A;++a){var s=$(a,"int32"),u=iC(s,r).asType("float32").mul(n).sum(0);o.push(u)}return dn(o)},t.prototype.argMin=function(n,r){W(n,"argMin");var A=[r];an("argMin",A,n.rank);for(var o=St(n.shape,A),i=o[0],a=o[1],s=Te(i,"int32"),u=ne(a),l=this.readSync(s.dataId),c=this.readSync(n.dataId),f=0;f<l.length;++f){for(var h=f*u,d=c[h],g=0,m=0;m<u;++m){var p=c[h+m];p<d&&(d=p,g=m)}l[f]=g}return s},t.prototype.argMax=function(n,r){W(n,"argMax");var A=[r];an("argMax",A,n.rank);for(var o=St(n.shape,A),i=o[0],a=o[1],s=Te(i,"int32"),u=ne(a),l=this.readSync(s.dataId),c=this.readSync(n.dataId),f=0;f<l.length;++f){for(var h=f*u,d=c[h],g=0,m=0;m<u;++m){var p=c[h+m];p>d&&(d=p,g=m)}l[f]=g}return s},t.prototype.cumsum=function(n,r,A,o){if(W(n,"cumsum"),r!==n.rank-1)throw new Error("backend.cumsum in CPU expects an inner-most axis="+(n.rank-1)+" but got axis="+r);for(var i=Ct(n.dtype,"int32"),a=Te(n.shape,i),s=this.readSync(a.dataId),u=this.readSync(n.dataId),l=n.shape[n.rank-1],c=o?function(m,p){return m+l-p-1}:function(m,p){return m+p},f=0;f<u.length;f+=l)for(var h=0;h<l;h++){var d=c(f,h);if(h===0)s[d]=A?0:u[d];else{var g=c(f,h-1);s[d]=A?u[g]+s[g]:u[d]+s[g]}}return a},t.prototype.equal=function(n,r){return W([n,r],"equal"),this.broadcastedBinaryOp(n,r,"bool",function(A,o){return A===o?1:0})},t.prototype.notEqual=function(n,r){return W([n,r],"notEqual"),this.broadcastedBinaryOp(n,r,"bool",function(A,o){return A!==o?1:0})},t.prototype.less=function(n,r){return W([n,r],"less"),this.broadcastedBinaryOp(n,r,"bool",function(A,o){return A<o?1:0})},t.prototype.lessEqual=function(n,r){return W([n,r],"lessEqual"),this.broadcastedBinaryOp(n,r,"bool",function(A,o){return A<=o?1:0})},t.prototype.greater=function(n,r){return W([n,r],"greater"),this.broadcastedBinaryOp(n,r,"bool",function(A,o){return A>o?1:0})},t.prototype.greaterEqual=function(n,r){return W([n,r],"greaterEqual"),this.broadcastedBinaryOp(n,r,"bool",function(A,o){return A>=o?1:0})},t.prototype.logicalNot=function(n){W(n,"logicalNot");for(var r=this.readSync(n.dataId),A=new Uint8Array(r.length),o=0;o<r.length;++o)A[o]=r[o]?0:1;return this.makeOutput(A,n.shape,"bool")},t.prototype.logicalAnd=function(n,r){return W([n,r],"logicalAnd"),this.broadcastedBinaryOp(n,r,"bool",function(A,o){return A&&o})},t.prototype.logicalOr=function(n,r){return W([n,r],"logicalOr"),this.broadcastedBinaryOp(n,r,"bool",function(A,o){return A||o})},t.prototype.select=function(n,r,A){W([n,r,A],"select");for(var o=this.readSync(n.dataId),i=this.readSync(r.dataId),a=this.readSync(A.dataId),s=Te(r.shape,Ct(r.dtype,A.dtype)),u=this.readSync(s.dataId),l=0,c=n.rank===0||n.rank>1||r.rank===1?1:ne(r.shape.slice(1)),f=0;f<o.length;f++)for(var h=0;h<c;h++)o[f]===1?u[l++]=i[f]:u[l++]=a[f];return s},t.prototype.where=function(n){W([n],"where");var r=this.readSync(n.dataId);return Up(n.shape,r)},t.prototype.topk=function(n,r,A){return W(n,"topk"),Ny(this.readSync(n.dataId),n.shape,n.dtype,r)},t.prototype.min=function(n,r){W(n,"min"),an("min",r,n.rank);for(var A=St(n.shape,r),o=A[0],i=A[1],a=Te(o,n.dtype),s=ne(i),u=this.readSync(a.dataId),l=this.readSync(n.dataId),c=0;c<u.length;++c){for(var f=c*s,h=l[f],d=0;d<s;++d){var g=l[f+d];g<h&&(h=g)}u[c]=h}return a},t.prototype.minimum=function(n,r){return W([n,r],"minimum"),this.broadcastedBinaryOp(n,r,n.dtype,function(A,o){return Math.min(A,o)})},t.prototype.mod=function(n,r){return W([n,r],"mod"),this.broadcastedBinaryOp(n,r,n.dtype,function(A,o){var i=A%o;return A<0&&o<0||A>=0&&o>=0?i:(i+o)%o})},t.prototype.max=function(n,r){W(n,"max"),an("max",r,n.rank);for(var A=St(n.shape,r),o=A[0],i=A[1],a=Te(o,n.dtype),s=ne(i),u=this.readSync(a.dataId),l=this.readSync(n.dataId),c=0;c<u.length;++c){for(var f=c*s,h=l[f],d=0;d<s;++d){var g=l[f+d];g>h&&(h=g)}u[c]=h}return a},t.prototype.maximum=function(n,r){return W([n,r],"maximum"),this.broadcastedBinaryOp(n,r,n.dtype,function(A,o){return Math.max(A,o)})},t.prototype.all=function(n,r){W(n,"all"),an("all",r,n.rank);for(var A=St(n.shape,r),o=A[0],i=A[1],a=Te(o,n.dtype),s=ne(i),u=this.readSync(a.dataId),l=this.readSync(n.dataId),c=0;c<u.length;++c){for(var f=c*s,h=l[f],d=0;d<s;++d){var g=l[f+d];h=h&&g}u[c]=h}return a},t.prototype.any=function(n,r){W(n,"any"),an("any",r,n.rank);for(var A=St(n.shape,r),o=A[0],i=A[1],a=Te(o,n.dtype),s=ne(i),u=this.readSync(a.dataId),l=this.readSync(n.dataId),c=0;c<u.length;++c){for(var f=c*s,h=l[f],d=0;d<s;++d){var g=l[f+d];h=h||g}u[c]=h}return a},t.prototype.squaredDifference=function(n,r){return W([n,r],"squaredDifference"),this.broadcastedBinaryOp(n,r,n.dtype,function(A,o){var i=A-o;return i*i})},t.prototype.ceil=function(n){W(n,"ceil");for(var r=this.readSync(n.dataId),A=new Float32Array(r.length),o=0;o<r.length;++o)A[o]=Math.ceil(r[o]);return this.makeOutput(A,n.shape,"float32")},t.prototype.floor=function(n){W(n,"floor");for(var r=this.readSync(n.dataId),A=new Float32Array(r.length),o=0;o<r.length;++o)A[o]=Math.floor(r[o]);return this.makeOutput(A,n.shape,"float32")},t.prototype.sign=function(n){W(n,"x");for(var r=this.readSync(n.dataId),A=new Float32Array(r.length),o=0;o<r.length;++o)r[o]<0?A[o]=-1:r[o]>0?A[o]=1:A[o]=0;return this.makeOutput(A,n.shape,"float32")},t.prototype.isNaN=function(n){W(n,"x");for(var r=this.readSync(n.dataId),A=new Uint8Array(r.length),o=0;o<r.length;++o)Number.isNaN(r[o])&&(A[o]=1);return this.makeOutput(A,n.shape,"bool")},t.prototype.isInf=function(n){W(n,"x");for(var r=this.readSync(n.dataId),A=new Uint8Array(r.length),o=0;o<r.length;++o)Math.abs(r[o])===1/0&&(A[o]=1);return this.makeOutput(A,n.shape,"bool")},t.prototype.isFinite=function(n){W(n,"x");for(var r=this.readSync(n.dataId),A=new Uint8Array(r.length),o=0;o<r.length;++o)Number.isFinite(r[o])&&(A[o]=1);return this.makeOutput(A,n.shape,"bool")},t.prototype.round=function(n){W(n,"round");for(var r=this.readSync(n.dataId),A=new Float32Array(r.length),o=0;o<r.length;++o){var i=Math.floor(r[o]);r[o]-i<.5?A[o]=Math.floor(r[o]):r[o]-i>.5?A[o]=Math.ceil(r[o]):A[o]=i%2==0?i:i+1}return this.makeOutput(A,n.shape,"float32")},t.prototype.exp=function(n){W(n,"exp");for(var r=this.readSync(n.dataId),A=new Float32Array(r.length),o=0;o<r.length;++o)A[o]=Math.exp(r[o]);return this.makeOutput(A,n.shape,"float32")},t.prototype.expm1=function(n){W(n,"expm1");for(var r=this.readSync(n.dataId),A=new Float32Array(r.length),o=0;o<r.length;++o)A[o]=Math.expm1(r[o]);return this.makeOutput(A,n.shape,"float32")},t.prototype.log=function(n){W(n,"log");for(var r=this.readSync(n.dataId),A=new Float32Array(r.length),o=0;o<r.length;++o){var i=r[o];A[o]=Math.log(i)}return this.makeOutput(A,n.shape,"float32")},t.prototype.log1p=function(n){W(n,"log1p");for(var r=this.readSync(n.dataId),A=new Float32Array(r.length),o=0;o<r.length;++o){var i=r[o];A[o]=Math.log1p(i)}return this.makeOutput(A,n.shape,"float32")},t.prototype.sqrt=function(n){W(n,"sqrt");for(var r=this.readSync(n.dataId),A=new Float32Array(r.length),o=0;o<r.length;++o){var i=r[o];A[o]=Math.sqrt(i)}return this.makeOutput(A,n.shape,"float32")},t.prototype.rsqrt=function(n){W(n,"rsqrt");for(var r=this.readSync(n.dataId),A=new Float32Array(r.length),o=0;o<r.length;++o){var i=r[o];A[o]=1/Math.sqrt(i)}return this.makeOutput(A,n.shape,"float32")},t.prototype.reciprocal=function(n){W(n,"reciprocal");for(var r=this.readSync(n.dataId),A=new Float32Array(r.length),o=0;o<r.length;++o)A[o]=1/r[o];return this.makeOutput(A,n.shape,"float32")},t.prototype.linear=function(n){return n},t.prototype.relu=function(n){W(n,"relu");for(var r=Te(n.shape,n.dtype),A=this.readSync(r.dataId),o=this.readSync(n.dataId),i=0;i<o.length;++i)A[i]=Math.max(0,o[i]);return r},t.prototype.relu6=function(n){W(n,"relu");for(var r=Te(n.shape,n.dtype),A=this.readSync(r.dataId),o=this.readSync(n.dataId),i=0;i<o.length;++i)A[i]=Math.min(Math.max(0,o[i]),6);return r},t.prototype.prelu=function(n,r){return W([n,r],"prelu"),this.broadcastedBinaryOp(n,r,n.dtype,function(A,o){return A<0?o*A:A})},t.prototype.elu=function(n){W(n,"elu");for(var r=new Float32Array(n.size),A=this.readSync(n.dataId),o=0;o<A.length;++o){var i=A[o];r[o]=i>=0?i:Math.exp(i)-1}return this.makeOutput(r,n.shape,"float32")},t.prototype.eluDer=function(n,r){W([n,r],"eluDer");for(var A=new Float32Array(r.size),o=this.readSync(r.dataId),i=this.readSync(n.dataId),a=0;a<o.length;++a){var s=o[a];A[a]=s>=1?i[a]:i[a]*(s+1)}return this.makeOutput(A,r.shape,"float32")},t.prototype.selu=function(n){W(n,"selu");for(var r=Sp,A=_p,o=new Float32Array(n.size),i=this.readSync(n.dataId),a=0;a<i.length;++a){var s=i[a];o[a]=s>=0?A*s:r*(Math.exp(s)-1)}return this.makeOutput(o,n.shape,"float32")},t.prototype.clip=function(n,r,A){W(n,"clip");for(var o=new Float32Array(n.size),i=this.readSync(n.dataId),a=0;a<i.length;++a){var s=i[a];o[a]=s>A?A:s<r?r:s}return this.makeOutput(o,n.shape,"float32")},t.prototype.abs=function(n){for(var r=new Float32Array(n.size),A=this.readSync(n.dataId),o=0;o<A.length;++o)r[o]=Math.abs(A[o]);return this.makeOutput(r,n.shape,"float32")},t.prototype.complexAbs=function(n){for(var r=new Float32Array(n.size),A=this.readSync(n.dataId),o=0;o<n.size;++o){var i=A[2*o],a=A[2*o+1];r[o]=Math.hypot(i,a)}return this.makeOutput(r,n.shape,"float32")},t.prototype.int=function(n){W(n,"int");for(var r=new Int32Array(n.size),A=this.readSync(n.dataId),o=0;o<A.length;++o)r[o]=A[o];return this.makeOutput(r,n.shape,"int32")},t.prototype.sigmoid=function(n){W(n,"sigmoid");for(var r=new Float32Array(n.size),A=this.readSync(n.dataId),o=0;o<A.length;++o)r[o]=1/(1+Math.exp(-A[o]));return this.makeOutput(r,n.shape,"float32")},t.prototype.softplus=function(n){W(n,"softplus");for(var r=Math.log(11920928955078125e-23)+2,A=new Float32Array(n.size),o=this.readSync(n.dataId),i=0;i<o.length;++i){var a=o[i]>-r,s=o[i]<r,u=Math.exp(o[i]),l=void 0;l=s?u:a?o[i]:Math.log(1+u),A[i]=l}return this.makeOutput(A,n.shape,"float32")},t.prototype.sin=function(n){W(n,"sin");for(var r=new Float32Array(n.size),A=this.readSync(n.dataId),o=0;o<A.length;++o)r[o]=Math.sin(A[o]);return this.makeOutput(r,n.shape,"float32")},t.prototype.cos=function(n){W(n,"cos");for(var r=new Float32Array(n.size),A=this.readSync(n.dataId),o=0;o<A.length;++o)r[o]=Math.cos(A[o]);return this.makeOutput(r,n.shape,"float32")},t.prototype.tan=function(n){W(n,"tan");for(var r=new Float32Array(n.size),A=this.readSync(n.dataId),o=0;o<A.length;++o)r[o]=Math.tan(A[o]);return this.makeOutput(r,n.shape,"float32")},t.prototype.asin=function(n){W(n,"asin");for(var r=new Float32Array(n.size),A=this.readSync(n.dataId),o=0;o<A.length;++o)r[o]=Math.asin(A[o]);return this.makeOutput(r,n.shape,"float32")},t.prototype.acos=function(n){W(n,"acos");for(var r=new Float32Array(n.size),A=this.readSync(n.dataId),o=0;o<A.length;++o)r[o]=Math.acos(A[o]);return this.makeOutput(r,n.shape,"float32")},t.prototype.atan=function(n){W(n,"atan");for(var r=new Float32Array(n.size),A=this.readSync(n.dataId),o=0;o<A.length;++o)r[o]=Math.atan(A[o]);return this.makeOutput(r,n.shape,"float32")},t.prototype.atan2=function(n,r){return W([n,r],"atan2"),this.broadcastedBinaryOp(n,r,n.dtype,function(A,o){return Math.atan2(A,o)})},t.prototype.sinh=function(n){W(n,"sinh");for(var r=new Float32Array(n.size),A=this.readSync(n.dataId),o=0;o<A.length;++o)r[o]=Math.sinh(A[o]);return this.makeOutput(r,n.shape,"float32")},t.prototype.cosh=function(n){W(n,"cosh");for(var r=new Float32Array(n.size),A=this.readSync(n.dataId),o=0;o<A.length;++o)r[o]=Math.cosh(A[o]);return this.makeOutput(r,n.shape,"float32")},t.prototype.tanh=function(n){W(n,"tanh");for(var r=new Float32Array(n.size),A=this.readSync(n.dataId),o=0;o<A.length;++o)r[o]=oE(A[o]);return this.makeOutput(r,n.shape,"float32")},t.prototype.asinh=function(n){W(n,"asinh");for(var r=new Float32Array(n.size),A=this.readSync(n.dataId),o=0;o<A.length;++o)r[o]=Math.asinh(A[o]);return this.makeOutput(r,n.shape,"float32")},t.prototype.acosh=function(n){W(n,"acosh");for(var r=new Float32Array(n.size),A=this.readSync(n.dataId),o=0;o<A.length;++o)r[o]=Math.acosh(A[o]);return this.makeOutput(r,n.shape,"float32")},t.prototype.atanh=function(n){W(n,"atanh");for(var r=new Float32Array(n.size),A=this.readSync(n.dataId),o=0;o<A.length;++o)r[o]=Math.atanh(A[o]);return this.makeOutput(r,n.shape,"float32")},t.prototype.erf=function(n){W(n,"erf");for(var r=new Float32Array(n.size),A=this.readSync(n.dataId),o=0;o<A.length;++o){var i=Math.sign(A[o]),a=Math.abs(A[o]),s=1/(1+.3275911*a);r[o]=i*(1-((((1.061405429*s-1.453152027)*s+1.421413741)*s-.284496736)*s+.254829592)*s*Math.exp(-a*a))}return this.makeOutput(r,n.shape,"float32")},t.prototype.step=function(n,r){r===void 0&&(r=0),W(n,"step");for(var A=new Float32Array(n.size),o=this.readSync(n.dataId),i=0;i<o.length;++i){var a=o[i];isNaN(a)?A[i]=NaN:A[i]=a>0?1:r}return this.makeOutput(A,n.shape,"float32")},t.prototype.fusedConv2d=function(n){var r=n.input,A=n.filter,o=n.convInfo,i=n.bias,a=n.activation,s=n.preluActivationWeights,u=this.conv2d(r,A,o);return i&&(u=this.add(u,i)),a&&(u=of(this,u,a,s)),u},t.prototype.conv2d=function(n,r,A){W([n,r],"conv2d");for(var o=A.filterHeight,i=A.filterWidth,a=A.dilationHeight,s=A.dilationWidth,u=A.padInfo.left,l=A.padInfo.top,c=A.dataFormat==="channelsLast",f=fe(A.outShape,n.dtype),h=n.strides[0],d=c?n.strides[1]:n.strides[2],g=c?n.strides[2]:1,m=c?1:n.strides[1],p=f.strides[0],v=c?f.strides[1]:f.strides[2],w=c?f.strides[2]:1,B=c?1:f.strides[1],y=this.readSync(n.dataId),C=this.readSync(r.dataId),b=f.values,x=0;x<A.batchSize;++x)for(var F=x*h,E=x*p,I=0;I<A.outHeight;++I)for(var S=E+I*v,T=I*A.strideHeight-l,N=0;N<o;N++){var O=T+N*a;if(!(O<0||O>=A.inHeight))for(var K=N*r.strides[0],P=F+O*d,D=0;D<A.outWidth;++D)for(var R=S+D*w,L=D*A.strideWidth-u,G=0;G<i;G++){var X=L+G*s;if(!(X<0||X>=A.inWidth))for(var q=P+X*g,ie=K+G*r.strides[1],ae=0;ae<A.inChannels;++ae){for(var se=y[q+ae*m],le=0;le<A.outChannels;++le)b[R+le*B]+=se*C[ie+le];ie+=A.outChannels}}}return f.toTensor()},t.prototype.conv3d=function(n,r,A){for(var o=A.filterDepth,i=A.filterHeight,a=A.filterWidth,s=A.dilationDepth,u=A.dilationHeight,l=A.dilationWidth,c=A.padInfo.front,f=A.padInfo.left,h=A.padInfo.top,d=fe(A.outShape,n.dtype),g=this.readSync(n.dataId),m=this.readSync(r.dataId),p=d.values,v=0;v<A.batchSize;++v)for(var w=v*n.strides[0],B=v*d.strides[0],y=0;y<A.outDepth;++y)for(var C=B+y*d.strides[1],b=y*A.strideDepth-c,x=0;x<o;x++){var F=b+x*s;if(!(F<0||F>=A.inDepth))for(var E=x*r.strides[0],I=w+F*n.strides[1],S=0;S<A.outHeight;++S)for(var T=C+S*d.strides[2],N=S*A.strideHeight-h,O=0;O<i;O++){var K=N+O*u;if(!(K<0||K>=A.inHeight))for(var P=E+O*r.strides[1],D=I+K*n.strides[2],R=0;R<A.outWidth;++R)for(var L=T+R*A.outChannels,G=R*A.strideWidth-f,X=0;X<a;X++){var q=G+X*l;if(!(q<0||q>=A.inWidth))for(var ie=P+X*r.strides[2],ae=D+q*A.inChannels,se=ie,le=0;le<A.inChannels;++le){for(var me=g[ae+le],Be=0;Be<A.outChannels;++Be)p[L+Be]+=me*m[se+Be];se+=A.outChannels}}}}return d.toTensor()},t.prototype.conv2dDerInput=function(n,r,A){W([n,r],"conv2dDerInput");for(var o=fe(A.inShape,"float32"),i=o.values,a=this.readSync(n.dataId),s=this.readSync(r.dataId),u=r.strides,l=u[0],c=u[1],f=u[2],h=A.batchSize,d=A.filterHeight,g=A.filterWidth,m=A.inChannels,p=A.inHeight,v=A.inWidth,w=A.outChannels,B=A.outHeight,y=A.outWidth,C=A.strideHeight,b=A.strideWidth,x=A.dataFormat,F=d-1-A.padInfo.top,E=g-1-A.padInfo.left,I=x==="channelsLast",S=o.strides[0],T=I?o.strides[1]:o.strides[2],N=I?o.strides[2]:1,O=I?1:o.strides[1],K=n.strides[0],P=I?n.strides[1]:n.strides[2],D=I?n.strides[2]:1,R=I?1:n.strides[1],L=0;L<h;++L)for(var G=0;G<m;++G)for(var X=0;X<p;++X)for(var q=X-F,ie=Math.max(0,Math.ceil(q/C)),ae=Math.min(B,(d+q)/C),se=0;se<v;++se){for(var le=se-E,me=Math.max(0,Math.ceil(le/b)),Be=Math.min(y,(g+le)/b),Ye=0,we=ie;we<ae;++we)for(var Ie=we*C-q,Fe=me;Fe<Be;++Fe)for(var Xe=K*L+P*we+D*Fe,Me=l*(d-1-Ie)+c*(g-1-(Fe*b-le))+f*G,Oe=0;Oe<w;++Oe)Ye+=a[Xe+R*Oe]*s[Me+Oe];i[S*L+T*X+N*se+O*G]=Ye}return o.toTensor()},t.prototype.conv3dDerInput=function(n,r,A){for(var o=fe(A.inShape,"float32"),i=o.values,a=o.strides,s=a[0],u=a[1],l=a[2],c=a[3],f=this.readSync(n.dataId),h=n.strides,d=h[0],g=h[1],m=h[2],p=h[3],v=this.readSync(r.dataId),w=r.strides,B=w[0],y=w[1],C=w[2],b=w[3],x=A.batchSize,F=A.filterDepth,E=A.filterHeight,I=A.filterWidth,S=A.inChannels,T=A.inDepth,N=A.inHeight,O=A.inWidth,K=A.outChannels,P=A.outDepth,D=A.outHeight,R=A.outWidth,L=A.strideDepth,G=A.strideHeight,X=A.strideWidth,q=F-1-A.padInfo.front,ie=E-1-A.padInfo.top,ae=I-1-A.padInfo.left,se=0;se<x;++se)for(var le=0;le<S;++le)for(var me=0;me<T;++me)for(var Be=me-q,Ye=Math.max(0,Math.ceil(Be/L)),we=Math.min(P,(F+Be)/L),Ie=0;Ie<N;++Ie)for(var Fe=Ie-ie,Xe=Math.max(0,Math.ceil(Fe/G)),Me=Math.min(D,(E+Fe)/G),Oe=0;Oe<O;++Oe){for(var zn=Oe-ae,Xn=Math.max(0,Math.ceil(zn/X)),rn=Math.min(R,(I+zn)/X),lo=0,vr=Ye;vr<we;++vr)for(var Vr=vr*L-Be,mr=Xe;mr<Me;++mr)for(var co=mr*G-Fe,wr=Xn;wr<rn;++wr)for(var cc=d*se+g*vr+m*mr+p*wr,fo=B*(F-1-Vr)+y*(E-1-co)+C*(I-1-(wr*X-zn))+b*le,$n=0;$n<K;++$n)lo+=f[cc+$n]*v[fo+$n];i[s*se+u*me+l*Ie+c*Oe+le]=lo}return o.toTensor()},t.prototype.conv2dDerFilter=function(n,r,A){W([n,r],"conv2dDerFilter");for(var o=A.strideHeight,i=A.strideWidth,a=A.filterHeight,s=A.filterWidth,u=A.dataFormat==="channelsLast",l=fe(A.filterShape,"float32"),c=A.padInfo.left,f=A.padInfo.top,h=this.bufferSync(n),d=this.bufferSync(r),g=0;g<a;++g)for(var m=Math.max(0,Math.ceil((f-g)/o)),p=Math.min(A.outHeight,(A.inHeight+f-g)/o),v=0;v<s;++v)for(var w=Math.max(0,Math.ceil((c-v)/i)),B=Math.min(A.outWidth,(A.inWidth+c-v)/i),y=0;y<A.inChannels;++y)for(var C=0;C<A.outChannels;++C){for(var b=0,x=0;x<A.batchSize;++x)for(var F=m;F<p;++F)for(var E=g+F*o-f,I=w;I<B;++I){var S=v+I*i-c;b+=u?h.get(x,E,S,y)*d.get(x,F,I,C):h.get(x,y,E,S)*d.get(x,C,F,I)}l.set(b,g,v,y,C)}return l.toTensor()},t.prototype.conv3dDerFilter=function(n,r,A){for(var o=A.strideDepth,i=A.strideHeight,a=A.strideWidth,s=A.filterDepth,u=A.filterHeight,l=A.filterWidth,c=fe(A.filterShape,"float32"),f=c.values,h=c.strides,d=h[0],g=h[1],m=h[2],p=h[3],v=this.readSync(r.dataId),w=r.strides,B=w[0],y=w[1],C=w[2],b=w[3],x=this.readSync(n.dataId),F=n.strides,E=F[0],I=F[1],S=F[2],T=F[3],N=A.padInfo.front,O=A.padInfo.left,K=A.padInfo.top,P=0;P<s;++P)for(var D=Math.max(0,Math.ceil((N-P)/o)),R=Math.min(A.outDepth,(A.inDepth+N-P)/o),L=P*d,G=0;G<u;++G)for(var X=Math.max(0,Math.ceil((K-G)/i)),q=Math.min(A.outHeight,(A.inHeight+K-G)/i),ie=G*g+L,ae=0;ae<l;++ae)for(var se=Math.max(0,Math.ceil((O-ae)/a)),le=Math.min(A.outWidth,(A.inWidth+O-ae)/a),me=ae*m+ie,Be=0;Be<A.inChannels;++Be)for(var Ye=Be*p+me,we=0;we<A.outChannels;++we){for(var Ie=0,Fe=0;Fe<A.batchSize;++Fe)for(var Xe=Fe*E,Me=Fe*B,Oe=D;Oe<R;++Oe)for(var zn=(P+Oe*o-N)*I+Xe,Xn=Oe*y+Me,rn=X;rn<q;++rn)for(var lo=(G+rn*i-K)*S+zn,vr=rn*C+Xn,Vr=se;Vr<le;++Vr){var mr=Vr*b+vr;Ie+=x[(ae+Vr*a-O)*T+lo+Be]*v[mr+we]}f[Ye+we]=Ie}return c.toTensor()},t.prototype.fusedDepthwiseConv2D=function(n){var r=n.input,A=n.filter,o=n.convInfo,i=n.bias,a=n.activation,s=n.preluActivationWeights,u=this.depthwiseConv2D(r,A,o);return i&&(u=this.add(u,i)),a&&(u=of(this,u,a,s)),u},t.prototype.depthwiseConv2D=function(n,r,A){W([n,r],"depthwiseConv2D");for(var o=A.filterHeight,i=A.filterWidth,a=A.dilationHeight,s=A.dilationWidth,u=A.padInfo.left,l=A.padInfo.top,c=A.outChannels/A.inChannels,f=fe(A.outShape,n.dtype),h=this.readSync(n.dataId),d=this.readSync(r.dataId),g=f.values,m=0;m<A.batchSize;++m)for(var p=m*n.strides[0],v=m*f.strides[0],w=0;w<A.outHeight;++w)for(var B=v+w*f.strides[1],y=w*A.strideHeight-u,C=0;C<o;++C){var b=y+C*a;if(!(b<0||b>=A.inHeight))for(var x=C*r.strides[0],F=p+b*n.strides[1],E=0;E<A.outWidth;++E)for(var I=B+E*f.strides[2],S=E*A.strideWidth-l,T=0;T<i;++T){var N=S+T*s;if(!(N<0||N>=A.inWidth))for(var O=x+T*r.strides[1],K=F+N*A.inChannels,P=I,D=O,R=0;R<A.inChannels;++R){for(var L=h[K+R],G=0;G<c;++G)g[P+G]+=L*d[D+G];P+=c,D+=c}}}return f.toTensor()},t.prototype.depthwiseConv2DDerInput=function(n,r,A){W([n,r],"depthwiseConv2DDerInput");for(var o=fe(A.inShape,"float32"),i=o.values,a=o.strides,s=a[0],u=a[1],l=a[2],c=this.readSync(n.dataId),f=n.strides,h=f[0],d=f[1],g=f[2],m=this.readSync(r.dataId),p=r.strides,v=p[0],w=p[1],B=p[2],y=A.batchSize,C=A.filterHeight,b=A.filterWidth,x=A.inChannels,F=A.inHeight,E=A.inWidth,I=A.outChannels,S=A.outHeight,T=A.outWidth,N=A.strideHeight,O=A.strideWidth,K=C-1-A.padInfo.top,P=b-1-A.padInfo.left,D=I/x,R=0;R<y;++R)for(var L=0;L<x;++L)for(var G=0;G<F;++G)for(var X=G-K,q=Math.max(0,Math.ceil(X/N)),ie=Math.min(S,(C+X)/N),ae=0;ae<E;++ae){for(var se=ae-P,le=Math.max(0,Math.ceil(se/O)),me=Math.min(T,(b+se)/O),Be=0,Ye=q;Ye<ie;++Ye)for(var we=Ye*N-X,Ie=le;Ie<me;++Ie)for(var Fe=h*R+d*Ye+g*Ie,Xe=v*(C-1-we)+w*(b-1-(Ie*O-se))+B*L,Me=0;Me<D;++Me)Be+=c[Fe+(L*D+Me)]*m[Xe+Me];i[s*R+u*G+l*ae+L]=Be}return o.toTensor()},t.prototype.depthwiseConv2DDerFilter=function(n,r,A){W([n,r],"depthwiseConv2DDerFilter");for(var o=A.strideHeight,i=A.strideWidth,a=A.filterHeight,s=A.filterWidth,u=fe(A.filterShape,"float32"),l=A.padInfo.left,c=A.padInfo.top,f=A.outChannels/A.inChannels,h=this.bufferSync(n),d=this.bufferSync(r),g=0;g<a;++g)for(var m=Math.max(0,Math.ceil((c-g)/o)),p=Math.min(A.outHeight,(A.inHeight+c-g)/o),v=0;v<s;++v)for(var w=Math.max(0,Math.ceil((l-v)/i)),B=Math.min(A.outWidth,(A.inWidth+l-v)/i),y=0;y<A.outChannels;++y){for(var C=Math.trunc(y/f),b=y%f,x=0,F=0;F<A.batchSize;++F)for(var E=m;E<p;++E)for(var I=g+E*o-c,S=w;S<B;++S){var T=v+S*i-l;x+=h.get(F,I,T,C)*d.get(F,E,S,y)}u.set(x,g,v,C,b)}return u.toTensor()},t.prototype.tile=function(n,r){return W(n,"tile"),Hy(this.bufferSync(n),r)},t.prototype.pad=function(n,r,A){W(n,"pad");var o=r.map(function(f,h){return f[0]+n.shape[h]+f[1]}),i=r.map(function(f){return f[0]}),a=this.bufferSync(n),s=fe(o,n.dtype);A!==0&&s.values.fill(A);for(var u=0;u<n.size;u++){var l=a.indexToLoc(u),c=l.map(function(f,h){return f+i[h]});s.set.apply(s,[a.get.apply(a,l)].concat(c))}return s.toTensor()},t.prototype.transpose=function(n,r){W(n,"transpose");for(var A=new Array(n.rank),o=0;o<A.length;o++)A[o]=n.shape[r[o]];var i=this.readSync(n.dataId),a=fe(A,n.dtype),s=this.bufferSync(n);for(o=0;o<n.size;++o){for(var u=s.indexToLoc(o),l=new Array(u.length),c=0;c<l.length;c++)l[c]=u[r[c]];var f=a.locToIndex(l);a.values[f]=i[o]}return a.toTensor()},t.prototype.gather=function(n,r,A){W([n,r],"gather");var o=n.shape.slice(),i=this.readSync(r.dataId);o[A]=i.length;for(var a=fe(o,n.dtype),s=this.bufferSync(n),u=0;u<a.size;++u){var l=a.indexToLoc(u),c=l.slice();c[A]=i[l[A]];var f=s.locToIndex(c);a.values[u]=s.values[f]}return a.toTensor()},t.prototype.batchToSpaceND=function(n,r,A){W([n],"batchToSpaceND");var o=r.reduce(function(c,f){return c*f}),i=Ju(n.shape,r,o),a=Zu(i.length,r.length),s=el(n.shape,r,o),u=xy(A,r.length),l=Fy(s,A,r.length);return n.reshape(i).transpose(a).reshape(s).slice(u,l)},t.prototype.spaceToBatchND=function(n,r,A){W([n],"spaceToBatchND");var o=r.reduce(function(f,h){return f*h}),i=[[0,0]];i.push.apply(i,A);for(var a=1+r.length;a<n.shape.length;++a)i.push([0,0]);var s=n.pad(i),u=Ju(s.shape,r,o,!1),l=Zu(u.length,r.length,!1),c=el(s.shape,r,o,!1);return s.reshape(u).transpose(l).reshape(c)},t.prototype.pool=function(n,r,A){W(n,"pool");for(var o=r.strideHeight,i=r.strideWidth,a=r.dilationHeight,s=r.dilationWidth,u=r.effectiveFilterHeight,l=r.effectiveFilterWidth,c=r.padInfo.top,f=r.padInfo.left,h=A==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,d=this.readSync(n.dataId),g=fe(r.outShape,n.dtype),m=g.values,p=r.outShape[1]*r.outShape[2]*r.outShape[3],v=r.outShape[2]*r.outShape[3],w=r.outShape[3],B=0;B<r.batchSize;++B)for(var y=B*p,C=B*n.strides[0],b=0;b<r.inChannels;++b)for(var x=0;x<r.outHeight;++x)for(var F=x*o-c,E=Math.max(0,F),I=Math.min(r.inHeight,u+F),S=y+x*v,T=0;T<r.outWidth;++T){for(var N=T*i-f,O=Math.max(0,N),K=Math.min(r.inWidth,l+N),P=h,D=0,R=0,L=E;L<I;L+=a){for(var G=C+L*n.strides[1],X=O;X<K;X+=s){var q=d[G+X*n.strides[2]+b];A==="max"&&q>P?P=q:A==="avg"&&(D+=q,R++)}if(isNaN(P))break}m[S+T*w+b]=A==="avg"?D/R:P}return g.toTensor()},t.prototype.maxPool=function(n,r){return this.pool(n,r,"max")},t.prototype.maxPoolPositions=function(n,r){for(var A=fe(r.outShape,"int32"),o=r.strideHeight,i=r.strideWidth,a=r.dilationHeight,s=r.dilationWidth,u=r.effectiveFilterHeight,l=r.effectiveFilterWidth,c=r.padInfo.top,f=r.padInfo.left,h=this.bufferSync(n),d=0;d<r.batchSize;++d)for(var g=0;g<r.inChannels;++g)for(var m=0;m<r.outHeight;++m){for(var p=m*o-c,v=p;v<0;)v+=a;for(var w=Math.min(r.inHeight,u+p),B=0;B<r.outWidth;++B){for(var y=B*i-f,C=y;C<0;)C+=s;for(var b=Math.min(r.inWidth,l+y),x=Number.NEGATIVE_INFINITY,F=-1,E=v;E<w;E+=a)for(var I=E-p,S=C;S<b;S+=s){var T=S-y,N=h.get(d,E,S,g);N>x&&(x=N,F=I*l+T)}A.set(F,d,m,B,g)}}return A.toTensor()},t.prototype.maxPoolBackprop=function(n,r,A,o){W([r,A],"maxPoolBackprop");for(var i=this.maxPoolPositions(r,o),a=o.strideHeight,s=o.strideWidth,u=o.dilationHeight,l=o.dilationWidth,c=o.effectiveFilterHeight,f=o.effectiveFilterWidth,h=f-1-o.padInfo.left,d=c-1-o.padInfo.top,g=fe(r.shape,"float32"),m=this.bufferSync(i),p=this.bufferSync(n),v=0;v<o.batchSize;++v)for(var w=0;w<o.inChannels;++w)for(var B=0;B<o.inHeight;++B)for(var y=0;y<o.inWidth;++y){for(var C=B-d,b=y-h,x=0,F=0;F<c;F+=u){var E=(C+F)/a;if(!(E<0||E>=o.outHeight||Math.floor(E)!==E))for(var I=0;I<f;I+=l){var S=(b+I)/s;if(!(S<0||S>=o.outWidth||Math.floor(S)!==S)){var T=c*f-1-m.get(v,E,S,w)===F*f+I?1:0;T!==0&&(x+=p.get(v,E,S,w)*T)}}}g.set(x,v,B,y,w)}return g.toTensor()},t.prototype.avgPoolBackprop=function(n,r,A){W([n,r],"avgPoolBackprop");for(var o=A.strideHeight,i=A.strideWidth,a=A.filterHeight,s=A.filterWidth,u=A.dilationHeight,l=A.dilationWidth,c=A.effectiveFilterHeight,f=A.effectiveFilterWidth,h=f-1-A.padInfo.left,d=c-1-A.padInfo.top,g=fe(r.shape,"float32"),m=1/(a*s),p=this.bufferSync(n),v=0;v<A.batchSize;++v)for(var w=0;w<A.inChannels;++w)for(var B=0;B<A.inHeight;++B)for(var y=0;y<A.inWidth;++y){for(var C=B-d,b=y-h,x=0,F=0;F<c;F+=u){var E=(C+F)/o;if(!(E<0||E>=A.outHeight||Math.floor(E)!==E))for(var I=0;I<f;I+=l){var S=(b+I)/i;S<0||S>=A.outWidth||Math.floor(S)!==S||(x+=p.get(v,E,S,w))}}g.set(x*m,v,B,y,w)}return g.toTensor()},t.prototype.pool3d=function(n,r,A){W(n,"pool3d");for(var o=r.strideDepth,i=r.strideHeight,a=r.strideWidth,s=r.dilationDepth,u=r.dilationHeight,l=r.dilationWidth,c=r.effectiveFilterDepth,f=r.effectiveFilterHeight,h=r.effectiveFilterWidth,d=r.padInfo.front,g=r.padInfo.top,m=r.padInfo.left,p=A==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,v=this.readSync(n.dataId),w=fe(r.outShape,n.dtype),B=w.values,y=r.outShape[1]*r.outShape[2]*r.outShape[3]*r.outShape[4],C=r.outShape[2]*r.outShape[3]*r.outShape[4],b=r.outShape[3]*r.outShape[4],x=r.outShape[4],F=0;F<r.batchSize;++F)for(var E=F*y,I=F*n.strides[0],S=0;S<r.inChannels;++S)for(var T=0;T<r.outDepth;++T){for(var N=T*o-d,O=N;O<0;)O+=s;for(var K=Math.min(r.inDepth,c+N),P=E+T*C,D=0;D<r.outHeight;++D){for(var R=D*i-g,L=R;L<0;)L+=u;for(var G=Math.min(r.inHeight,f+R),X=P+D*b,q=0;q<r.outWidth;++q){for(var ie=q*a-m,ae=ie;ae<0;)ae+=l;for(var se=Math.min(r.inWidth,h+ie),le=X+q*x,me=p,Be=0,Ye=0,we=O;we<K;we+=s){for(var Ie=I+we*n.strides[1],Fe=L;Fe<G;Fe+=u){for(var Xe=Ie+Fe*n.strides[2],Me=ae;Me<se;Me+=l){var Oe=v[Xe+Me*n.strides[3]+S];if(A==="max"&&Oe>me?me=Oe:A==="avg"&&(Be+=Oe,Ye++),isNaN(me))break}if(isNaN(me))break}if(isNaN(me))break}B[le+S]=A==="avg"?Be/Ye:me}}}return w.toTensor()},t.prototype.avgPool3d=function(n,r){return W(n,"avgPool3d"),this.pool3d(n,r,"avg").toFloat()},t.prototype.avgPool3dBackprop=function(n,r,A){W([n,r],"avgPool3dBackprop");for(var o=A.strideDepth,i=A.strideHeight,a=A.strideWidth,s=A.filterDepth,u=A.filterHeight,l=A.filterWidth,c=A.dilationDepth,f=A.dilationHeight,h=A.dilationWidth,d=A.effectiveFilterDepth,g=A.effectiveFilterHeight,m=A.effectiveFilterWidth,p=d-1-A.padInfo.front,v=m-1-A.padInfo.left,w=g-1-A.padInfo.top,B=fe(r.shape,"float32"),y=1/(s*u*l),C=this.bufferSync(n),b=0;b<A.batchSize;++b)for(var x=0;x<A.inChannels;++x)for(var F=0;F<A.inDepth;++F)for(var E=0;E<A.inHeight;++E)for(var I=0;I<A.inWidth;++I){for(var S=F-p,T=E-w,N=I-v,O=0,K=0;K<d;K+=c){var P=(S+K)/o;if(!(P<0||P>=A.outDepth||Math.floor(P)!==P))for(var D=0;D<g;D+=f){var R=(T+D)/i;if(!(R<0||R>=A.outHeight||Math.floor(R)!==R))for(var L=0;L<m;L+=h){var G=(N+L)/a;G<0||G>=A.outWidth||Math.floor(G)!==G||(O+=C.get(b,P,R,G,x))}}}B.set(O*y,b,F,E,I,x)}return B.toTensor()},t.prototype.maxPool3d=function(n,r){return W(n,"maxPool3d"),this.pool3d(n,r,"max").toFloat()},t.prototype.maxPool3dPositions=function(n,r){for(var A=fe(r.outShape,"int32"),o=r.strideDepth,i=r.strideHeight,a=r.strideWidth,s=r.dilationDepth,u=r.dilationHeight,l=r.dilationWidth,c=r.effectiveFilterDepth,f=r.effectiveFilterHeight,h=r.effectiveFilterWidth,d=r.padInfo.front,g=r.padInfo.top,m=r.padInfo.left,p=this.bufferSync(n),v=0;v<r.batchSize;++v)for(var w=0;w<r.inChannels;++w)for(var B=0;B<r.outDepth;++B){for(var y=B*o-d,C=y;C<0;)C+=s;for(var b=Math.min(r.inDepth,c+y),x=0;x<r.outHeight;++x){for(var F=x*i-g,E=F;E<0;)E+=u;for(var I=Math.min(r.inHeight,f+F),S=0;S<r.outWidth;++S){for(var T=S*a-m,N=T;N<0;)N+=l;for(var O=Math.min(r.inWidth,h+T),K=Number.NEGATIVE_INFINITY,P=-1,D=C;D<b;D+=s)for(var R=D-y,L=E;L<I;L+=u)for(var G=L-F,X=N;X<O;X+=l){var q=X-T,ie=p.get(v,D,L,X,w);ie>=K&&(K=ie,P=R*f*h+G*f+q)}A.set(P,v,B,x,S,w)}}}return A.toTensor()},t.prototype.maxPool3dBackprop=function(n,r,A,o){W([r,A],"maxPool3dBackprop");for(var i=this.maxPool3dPositions(r,o),a=o.strideDepth,s=o.strideHeight,u=o.strideWidth,l=o.dilationDepth,c=o.dilationHeight,f=o.dilationWidth,h=o.effectiveFilterDepth,d=o.effectiveFilterHeight,g=o.effectiveFilterWidth,m=h-1-o.padInfo.front,p=g-1-o.padInfo.left,v=d-1-o.padInfo.top,w=fe(r.shape,"float32"),B=this.bufferSync(i),y=this.bufferSync(n),C=0;C<o.batchSize;++C)for(var b=0;b<o.inChannels;++b)for(var x=0;x<o.inDepth;++x)for(var F=0;F<o.inHeight;++F)for(var E=0;E<o.inWidth;++E){for(var I=x-m,S=F-v,T=E-p,N=0,O=0;O<h;O+=l){var K=(I+O)/a;if(!(K<0||K>=o.outDepth||Math.floor(K)!==K))for(var P=0;P<d;P+=c){var D=(S+P)/s;if(!(D<0||D>=o.outHeight||Math.floor(D)!==D))for(var R=0;R<g;R+=f){var L=(T+R)/u;if(!(L<0||L>=o.outWidth||Math.floor(L)!==L)){var G=h*d*g-1-B.get(C,K,D,L,b)===O*d*g+P*g+R?1:0;G!==0&&(N+=y.get(C,K,D,L,b)*G)}}}}w.set(N,C,x,F,E,b)}return w.toTensor()},t.prototype.cast=function(n,r){return ky(n,r,this)},t.prototype.reshape=function(n,r){return Wh(n,r)},t.prototype.avgPool=function(n,r){return W(n,"avgPool"),this.pool(n,r,"avg").toFloat()},t.prototype.resizeBilinear=function(n,r,A,o){W(n,"resizeBilinear");for(var i=n.shape,a=i[0],s=i[1],u=i[2],l=i[3],c=this.readSync(n.dataId),f=new Float32Array(ne([a,r,A,l])),h=[o&&r>1?s-1:s,o&&A>1?u-1:u],d=[o&&r>1?r-1:r,o&&A>1?A-1:A],g=0,m=h[0]/d[0],p=h[1]/d[1],v=0;v<a;v++)for(var w=0;w<r;w++)for(var B=m*w,y=Math.floor(B),C=B-y,b=Math.min(s-1,Math.ceil(B)),x=v*n.strides[0]+y*n.strides[1],F=v*n.strides[0]+b*n.strides[1],E=0;E<A;E++)for(var I=p*E,S=Math.floor(I),T=I-S,N=Math.min(u-1,Math.ceil(I)),O=x+S*n.strides[2],K=F+S*n.strides[2],P=x+N*n.strides[2],D=F+N*n.strides[2],R=0;R<l;R++){var L=c[O+R],G=c[K+R],X=L+(c[P+R]-L)*T,q=X+(G+(c[D+R]-G)*T-X)*C;f[g++]=q}return xt(f,[a,r,A,l])},t.prototype.resizeBilinearBackprop=function(n,r,A){W([n,r],"resizeBilinearBackprop");for(var o=r.shape,i=o[0],a=o[1],s=o[2],u=o[3],l=n.shape,c=l[1],f=l[2],h=new Float32Array(i*a*s*u),d=[A&&c>1?a-1:a,A&&f>1?s-1:s],g=[A&&c>1?c-1:c,A&&f>1?f-1:f],m=d[0]/g[0],p=d[1]/g[1],v=this.readSync(n.dataId),w=0,B=0;B<i;B++)for(var y=B*r.strides[0],C=0;C<c;C++)for(var b=C*m,x=Math.floor(b),F=Math.min(Math.ceil(b),a-1),E=y+x*r.strides[1],I=y+F*r.strides[1],S=b-x,T=1-S,N=0;N<f;N++)for(var O=N*p,K=Math.floor(O),P=Math.min(Math.ceil(O),s-1),D=O-K,R=1-D,L=E+K*r.strides[2],G=E+P*r.strides[2],X=I+K*r.strides[2],q=I+P*r.strides[2],ie=T*R,ae=T*D,se=S*R,le=S*D,me=0;me<u;me++){var Be=v[w++];h[L+me]+=Be*ie,h[G+me]+=Be*ae,h[X+me]+=Be*se,h[q+me]+=Be*le}return $t(h,[i,s,a,u],r.dtype)},t.prototype.resizeNearestNeighbor=function(n,r,A,o){W(n,"resizeNearestNeighbor");for(var i=n.shape,a=i[0],s=i[1],u=i[2],l=i[3],c=this.readSync(n.dataId),f=new Float32Array(a*r*A*l),h=[o&&r>1?s-1:s,o&&A>1?u-1:u],d=[o&&r>1?r-1:r,o&&A>1?A-1:A],g=h[0]/d[0],m=h[1]/d[1],p=0,v=0;v<a;v++)for(var w=v*n.strides[0],B=0;B<r;B++)for(var y=g*B,C=w+Math.min(s-1,o?Math.round(y):Math.floor(y))*n.strides[1],b=0;b<A;b++)for(var x=m*b,F=C+Math.min(u-1,o?Math.round(x):Math.floor(x))*n.strides[2],E=0;E<l;E++){var I=c[F+E];f[p++]=I}return xt(f,[a,r,A,l],n.dtype)},t.prototype.resizeNearestNeighborBackprop=function(n,r,A){W([n,r],"resizeNearestNeighborBackprop");for(var o=r.shape,i=o[0],a=o[1],s=o[2],u=o[3],l=n.shape,c=l[1],f=l[2],h=new Float32Array(i*a*s*u),d=this.readSync(n.dataId),g=[A&&c>1?a-1:a,A&&f>1?s-1:s],m=[A&&c>1?c-1:c,A&&f>1?f-1:f],p=g[0]/m[0],v=g[1]/m[1],w=1/p,B=1/v,y=2*Math.ceil(w)+2,C=2*Math.ceil(B)+2,b=0;b<i;b++)for(var x=b*r.strides[0],F=0;F<a;F++)for(var E=x+F*r.strides[1],I=Math.floor(F*w),S=Math.floor(I-y/2),T=0;T<s;T++)for(var N=E+T*r.strides[2],O=Math.floor(T*B),K=Math.floor(O-C/2),P=0;P<u;P++){for(var D=0,R=0;R<y;R++){var L=R+S;if(!(L<0||L>=c)){var G=x+L*n.strides[1],X=L*p;if(F===Math.min(a-1,A?Math.round(X):Math.floor(X)))for(var q=0;q<C;q++){var ie=q+K;if(!(ie<0||ie>=f)){var ae=G+ie*n.strides[2],se=ie*v;T===Math.min(s-1,A?Math.round(se):Math.floor(se))&&(D+=d[ae+P])}}}}h[N+P]=D}return $t(h,r.shape,r.dtype)},t.prototype.batchNormalization=function(n,r,A,o,i,a){W([n,r,A,i,a],"batchNorm");for(var s=this.readSync(n.dataId),u=this.readSync(r.dataId),l=this.readSync(A.dataId),c=i?this.readSync(i.dataId):new Float32Array([1]),f=a?this.readSync(a.dataId):new Float32Array([0]),h=new Float32Array(s.length),d=f.length,g=c.length,m=l.length,p=u.length,v=0,w=0,B=0,y=0,C=0;C<s.length;++C)h[C]=f[v++]+(s[C]-u[w++])*c[B++]/Math.sqrt(l[y++]+o),v>=d&&(v=0),w>=p&&(w=0),B>=g&&(B=0),y>=m&&(y=0);return $t(h,n.shape)},t.prototype.localResponseNormalization4D=function(n,r,A,o,i){W(n,"localResponseNormalization4D");var a=n.shape[3],s=a-1,u=this.readSync(n.dataId),l=n.size,c=new Float32Array(l);function f(m){for(var p=m%a,v=m-p+Math.max(0,p-r),w=m-p+Math.min(p+r,s),B=0;v<=w;v++){var y=u[v];B+=y*y}return B}for(var h=0;h<l;h++){var d=f(h),g=u[h]*Math.pow(A+o*d,-i);c[h]=g}return $t(c,n.shape)},t.prototype.LRNGrad=function(n,r,A,o,i,a,s){W(n,"LRNGrad");for(var u=n.shape[3],l=this.readSync(n.dataId),c=this.readSync(r.dataId),f=this.readSync(A.dataId),h=new Float32Array(n.size),d=n.size,g=0;g<d;g++){for(var m=g%u,p=g-m+Math.max(0,m-o),v=g-m+Math.min(u,m+o+1),w=0,B=p;B<v;B++)w+=Math.pow(c[B],2);for(w=a*w+i,B=p;B<v;B++){var y=-2*a*s*c[B]*f[g]/w;g===B&&(y+=Math.pow(w,-s)),y*=l[g],h[B]+=y}}return $t(h,n.shape)},t.prototype.multinomial=function(n,r,A,o){W(n,"multinomial");for(var i=r?n:Lr(n),a=i.shape[0],s=i.shape[1],u=Te([a,A],"int32"),l=this.readSync(u.dataId),c=this.readSync(i.dataId),f=0;f<a;++f){var h=f*s,d=new Float32Array(s-1);d[0]=c[h];for(var g=1;g<d.length;++g)d[g]=d[g-1]+c[h+g];for(var m=Ol(o.toString()),p=f*A,v=0;v<A;++v){var w=m();l[p+v]=d.length;for(var B=0;B<d.length;B++)if(w<d[B]){l[p+v]=B;break}}}return u},t.prototype.oneHot=function(n,r,A,o){W(n,"oneHot");var i=new Float32Array(n.size*r);i.fill(o);for(var a=this.readSync(n.dataId),s=0;s<n.size;++s)a[s]>=0&&a[s]<r&&(i[s*r+a[s]]=A);return pA(i,[n.size,r],"int32")},t.prototype.nonMaxSuppression=function(n,r,A,o,i){return W(n,"nonMaxSuppression"),Ep(this.readSync(n.dataId),this.readSync(r.dataId),A,o,i)},t.prototype.fft=function(n){return this.fftBatch(n,!1)},t.prototype.ifft=function(n){return this.fftBatch(n,!0)},t.prototype.fftBatch=function(n,r){for(var A=n.shape[0],o=n.shape[1],i=fe(n.shape,"float32"),a=fe(n.shape,"float32"),s=xn(n).as2D(A,o),u=rr(n).as2D(A,o),l=0;l<A;l++)for(var c=s.slice([l,0],[1,o]),f=u.slice([l,0],[1,o]),h=Bt(c,f),d=this.readSync(this.fftImpl(h,r).dataId),g=0;g<o;g++){var m=jv(d,g);i.values[l*o+g]=m.real,a.values[l*o+g]=m.imag}return Bt(i.toTensor(),a.toTensor()).as2D(A,o)},t.prototype.fftImpl=function(n,r){var A=n.as1D(),o=A.size;if(this.isExponentOf2(o)){var i=this.fftRadix2(A,o,r).as2D(n.shape[0],n.shape[1]);return r&&(i=Bt(xn(i).div($(o)),rr(i).div($(o)))),i}var a=this.readSync(n.dataId),s=function(u){for(var l=new Float32Array(u.length/2),c=new Float32Array(u.length/2),f=0;f<u.length;f+=2)l[f/2]=u[f],c[f/2]=u[f+1];return{real:l,imag:c}}(this.fourierTransformByMatmul(a,o,r));return Bt(s.real,s.imag).as2D(n.shape[0],n.shape[1])},t.prototype.isExponentOf2=function(n){return(n&n-1)==0},t.prototype.fftRadix2=function(n,r,A){if(r===1)return n;var o=this.readSync(n.dataId),i=r/2,a=function(p){for(var v=Math.ceil(p.length/4),w=new Float32Array(v),B=new Float32Array(v),y=0;y<p.length;y+=4)w[Math.floor(y/4)]=p[y],B[Math.floor(y/4)]=p[y+1];return{real:w,imag:B}}(o),s=Bt(a.real,a.imag).as1D(),u=function(p){for(var v=Math.floor(p.length/4),w=new Float32Array(v),B=new Float32Array(v),y=2;y<p.length;y+=4)w[Math.floor(y/4)]=p[y],B[Math.floor(y/4)]=p[y+1];return{real:w,imag:B}}(o),l=Bt(u.real,u.imag).as1D();s=this.fftRadix2(s,i,A),l=this.fftRadix2(l,i,A);var c=function(p,v){for(var w=new Float32Array(p/2),B=new Float32Array(p/2),y=0;y<Math.ceil(p/2);y++){var C=(v?2:-2)*Math.PI*(y/p);w[y]=Math.cos(C),B[y]=Math.sin(C)}return{real:w,imag:B}}(r,A),f=Bt(c.real,c.imag).mul(l),h=s.add(f),d=s.sub(f),g=xn(h).concat(xn(d)),m=rr(h).concat(rr(d));return Bt(g,m).as1D()},t.prototype.fourierTransformByMatmul=function(n,r,A){for(var o=new Float32Array(2*r),i=0;i<r;i++){for(var a=0,s=0,u=0;u<r;u++){var l=L2(i*u,r,A),c=jv(n,u);a+=c.real*l.real-c.imag*l.imag,s+=c.real*l.imag+c.imag*l.real}A&&(a/=r,s/=r),N2(o,a,s,i)}return o},t.prototype.depthToSpace=function(n,r,A){U(A==="NHWC",function(){return"Only NHWC dataFormat supported on CPU for depthToSpace. Got "+A}),U(r>1,function(){return"blockSize should be > 1 for depthToSpace, but was: "+r});for(var o=n.shape[0],i=n.shape[1],a=n.shape[2],s=n.shape[3],u=i*r,l=a*r,c=s/(r*r),f=this.readSync(n.dataId),h=new Float32Array(o*u*l*c),d=0,g=0;g<o;++g)for(var m=0;m<u;++m)for(var p=Math.floor(m/r),v=m%r,w=0;w<l;++w)for(var B=Math.floor(w/r),y=(v*r+w%r)*c,C=0;C<c;++C){var b=C+y+s*(B+a*(p+i*g));h[d++]=f[b]}return $t(h,[o,u,l,c])},t.prototype.broadcastedBinaryOp=function(n,r,A,o){var i=pe(n.shape,r.shape),a=fe(i,A),s=this.readSync(n.dataId),u=this.readSync(r.dataId),l=nA(n.shape,i),c=nA(r.shape,i),f=a.values;if(l.length+c.length===0)for(var h=0;h<f.length;++h)f[h]=o(s[h%s.length],u[h%u.length]);else{var d=this.bufferSync(n),g=this.bufferSync(r),m=function(p){var v=a.indexToLoc(p),w=v.slice(-n.rank);l.forEach(function(b){return w[b]=0});var B=d.locToIndex(w),y=v.slice(-r.rank);c.forEach(function(b){return y[b]=0});var C=g.locToIndex(y);f[p]=o(s[B],u[C])};for(h=0;h<f.length;++h)m(h)}return a.toTensor()},t.prototype.broadcastedBinaryComplexOp=function(n,r,A){var o=pe(n.shape,r.shape),i=fe(o,"float32"),a=fe(o,"float32"),s=this.readSync(n.dataId),u=this.readSync(r.dataId),l=nA(n.shape,o),c=nA(r.shape,o),f=i.values,h=a.values;if(l.length+c.length===0)for(var d=0;d<f.length;d++){var g=d%s.length,m=d%u.length,p=A(s[2*g],s[2*g+1],u[2*m],u[2*m+1]);f[d]=p.real,h[d]=p.imag}else{var v=this.bufferSync(this.data.get(n.dataId).complexTensors.real),w=this.bufferSync(this.data.get(r.dataId).complexTensors.real),B=function(y){var C=i.indexToLoc(y),b=C.slice(-n.rank);l.forEach(function(S){return b[S]=0});var x=v.locToIndex(b),F=C.slice(-r.rank);c.forEach(function(S){return F[S]=0});var E=w.locToIndex(F),I=A(s[2*x],s[2*x+1],u[2*E],u[2*E+1]);f[y]=I.real,h[y]=I.imag};for(d=0;d<f.length;d++)B(d)}return this.complex(i.toTensor(),a.toTensor())},t.prototype.split=function(n,r,A){return Ty(n,r,A)},t.prototype.dispose=function(){},t.prototype.floatPrecision=function(){return 32},t.prototype.epsilon=function(){return 1e-7},t.prototype.cropAndResize=function(n,r,A,o,i,a){for(var s=n.shape,u=s[0],l=s[1],c=s[2],f=s[3],h=r.shape[0],d=o[0],g=o[1],m=fe([h,d,g,f],"float32"),p=this.readSync(r.dataId),v=this.readSync(A.dataId),w=this.readSync(n.dataId),B=n.strides,y=m.strides,C=0;C<h;C++){var b=4*C,x=p[b],F=p[b+1],E=p[b+2],I=p[b+3],S=v[C];if(!(S>=u))for(var T=d>1?(E-x)*(l-1)/(d-1):0,N=g>1?(I-F)*(c-1)/(g-1):0,O=0;O<d;O++){var K=d>1?x*(l-1)+O*T:.5*(x+E)*(l-1);if(K<0||K>l-1)for(var P=0;P<g;P++)for(var D=0;D<f;D++){var R=D+P*y[2]+O*y[1]+C*y[0];m.values[R]=a}else if(i==="bilinear"){var L=Math.floor(K),G=Math.ceil(K),X=K-L;for(P=0;P<g;P++)if((we=g>1?F*(c-1)+P*N:.5*(F+I)*(c-1))<0||we>c-1)for(D=0;D<f;D++)R=D+P*y[2]+O*y[1]+C*y[0],m.values[R]=a;else{var q=Math.floor(we),ie=Math.ceil(we),ae=we-q;for(D=0;D<f;D++){var se=w[R=D+q*B[2]+L*B[1]+S*B[0]],le=w[R=D+ie*B[2]+L*B[1]+S*B[0]],me=w[R=D+q*B[2]+G*B[1]+S*B[0]],Be=se+(le-se)*ae,Ye=me+(w[R=D+ie*B[2]+G*B[1]+S*B[0]]-me)*ae;R=D+P*y[2]+O*y[1]+C*y[0],m.values[R]=Be+(Ye-Be)*X}}}else for(P=0;P<g;++P){var we;if((we=g>1?F*(c-1)+P*N:.5*(F+I)*(c-1))<0||we>c-1)for(D=0;D<f;D++)R=D+P*y[2]+O*y[1]+C*y[0],m.values[R]=a;else{var Ie=Math.round(we),Fe=Math.round(K);for(D=0;D<f;D++){var Xe=D+Ie*B[2]+Fe*B[1]+S*B[0],Me=D+P*y[2]+O*y[1]+C*y[0];m.values[Me]=w[Xe]}}}}}return m.toTensor()},t.prototype.sparseToDense=function(n,r,A,o){var i=tl(0,n,A),a=i.sliceRank,s=i.numUpdates,u=i.sliceSize,l=i.strides,c=i.outputSize;return this.scatter(n,r,A,c,u,s,a,l,o,!1)},t.prototype.gatherND=function(n,r){var A=r.shape,o=A[A.length-1],i=by(n,r),a=i[0],s=i[1],u=i[2],l=i[3];if(s===0)return xt([],a,n.dtype);for(var c=new _a([s,u],n.dtype),f=this.readSync(r.dataId),h=this.readSync(n.dataId),d=0;d<s;d++){for(var g=[],m=0,p=0;p<o;p++){var v=f[d*o+p];m+=v*l[p],g.push(v)}if(m<0||m>=n.size/u)throw new Error("Invalid indices: "+g+" does not index into "+n.shape);for(var w=0;w<u;w++)c.values[d*u+w]=h[m*u+w]}return c.toTensor().reshape(a)},t.prototype.scatterND=function(n,r,A){var o=tl(0,n,A),i=o.sliceRank,a=o.numUpdates,s=o.sliceSize,u=o.strides,l=o.outputSize,c=$(0);return this.scatter(n,r,A,l,s,a,i,u,c,!0)},t.prototype.fill=function(n,r,A){var o=Gu(A=A||Ga(r),ne(n));return o.fill(r),k.makeTensor(o,n,A,this)},t.prototype.onesLike=function(n){if(n.dtype==="string")throw new Error("onesLike is not supported for string tensors");return this.fill(n.shape,1,n.dtype)},t.prototype.zerosLike=function(n){var r=Gu(n.dtype,ne(n.shape));return this.makeOutput(r,n.shape,n.dtype)},t.prototype.linspace=function(n,r,A){return Dy(n,r,A)},t.prototype.scatter=function(n,r,A,o,i,a,s,u,l,c){var f=[o/i,i],h=this.readSync(n.dataId),d=this.readSync(r.dataId);if(o===0)return xt([],A,r.dtype);var g=new _a(f,r.dtype);g.values.fill(this.readSync(l.dataId)[0]);for(var m=0;m<a;m++){for(var p=[],v=0,w=0;w<s;w++){var B=h[m*s+w];p.push(B),v+=B*u[w]}if(v<0||v>=o/i)throw new Error("Invalid indices: "+p+" does not index into "+A);for(var y=0;y<i;y++)c?g.values[v*i+y]+=d[m*i+y]:g.values[v*i+y]=r.rank===0?d[0]:d[m*i+y]}return g.toTensor().reshape(A)},t}(Sy);k.registerBackend("cpu",function(){return new A4},1);for(var af=0,vm=[{kernelName:"NonMaxSuppressionV5",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,A=t,o=A.boxes,i=A.scores,a=r,s=a.maxOutputSize,u=a.iouThreshold,l=a.scoreThreshold,c=a.softNmsSigma,f=n;W(o,"NonMaxSuppressionWithScore");var h=Qp(f.data.get(o.dataId).values,f.data.get(i.dataId).values,s,u,l,c);return[h.selectedIndices,h.selectedScores]}},{kernelName:"Square",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,A=n;W(r,"square");for(var o=A.data.get(r.dataId).values,i=new Float32Array(o.length),a=0;a<o.length;++a){var s=o[a];i[a]=s*s}return{dataId:A.write(i,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}},{kernelName:Ra,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t,A=r.a,o=r.b,i=n;W([A,o],Ra);var a=i.data.get(A.dataId).values,s=i.data.get(o.dataId).values,u=function(f,h,d,g,m,p){var v=pe(f,h),w=v.length,B=sr(v),y=Sa(m,ne(v)),C=f.length,b=h.length,x=sr(f),F=sr(h),E=nA(f,v),I=nA(h,v);if(E.length+I.length===0)for(var S=0;S<y.length;++S)y[S]=p(d[S%d.length],g[S%g.length]);else{var T=function(N){var O=dE(N,w,B),K=O.slice(-C);E.forEach(function(L){return K[L]=0});var P=Ov(K,C,x),D=O.slice(-b);I.forEach(function(L){return D[L]=0});var R=Ov(D,b,F);y[N]=p(d[P],g[R])};for(S=0;S<y.length;++S)T(S)}return[y,v]}(A.shape,o.shape,a,s,A.dtype,function(f,h){var d=f-h;return d*d}),l=u[0],c=u[1];return{dataId:i.write(l,c,A.dtype),shape:c,dtype:A.dtype}}}];af<vm.length;af++)Ay(vm[af]);var go,o4=function(e){this.variableNames=["A"];var t=Rt(),n=e[0],r=e[1];this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(`+r+".0, "+n+`.0);

        vec4 values = `+t.texture2D+`(A, uv);
        float value;
        if (depth == 0) {
          value = values.r;
        } else if (depth == 1) {
          value = values.g;
        } else if (depth == 2) {
          value = values.b;
        } else if (depth == 3) {
          value = values.a;
        }

        setOutput(floor(value * 255.0 + 0.5));
      }
    `},i4=function(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var t=Rt(),n=e[0],r=e[1];this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];

        vec4 result = vec4(0.);

        for(int row=0; row<=1; row++) {
          for(int col=0; col<=1; col++) {
            texC = coords[1] + row;
            depth = coords[2] + col;

            vec2 uv = (vec2(texC, texR) + halfCR) /
                       vec2(`+r+".0, "+n+`.0);
            vec4 values = `+t.texture2D+`(A, uv);
            float value;
            if (depth == 0) {
              value = values.r;
            } else if (depth == 1) {
              value = values.g;
            } else if (depth == 2) {
              value = values.b;
            } else if (depth == 3) {
              value = values.a;
            }

            result[row * 2 + col] = floor(value * 255.0 + 0.5);
          }
        }

        `+t.output+` = result;
      }
    `};for(var sf=0,mm=[{kernelName:"FromPixels",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,A=t.pixels,o=r.numChannels,i=typeof HTMLVideoElement<"u"&&A instanceof HTMLVideoElement,a=typeof HTMLImageElement<"u"&&A instanceof HTMLImageElement,s=i?[A.videoWidth,A.videoHeight]:[A.width,A.height],u=s[0],l=s[1],c=[l,u],f=[l,u,o];(a||i)&&(go==null&&(go=document.createElement("canvas").getContext("2d")),go.canvas.width=u,go.canvas.height=l,go.drawImage(A,0,0,u,l),A=go.canvas);var h=n.makeTensorInfo(c,"int32");n.texData.get(h.dataId).usage=ln.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(h.dataId),A);var d=V().getBool("WEBGL_PACK")?new i4(f):new o4(f),g=n.runWebGLProgram(d,[h],"int32");return n.disposeData(h.dataId),g}},{kernelName:"NonMaxSuppressionV5",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs;ju("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var A=t,o=A.boxes,i=A.scores,a=r,s=a.maxOutputSize,u=a.iouThreshold,l=a.scoreThreshold,c=a.softNmsSigma,f=n,h=Qp(f.readSync(o.dataId),f.readSync(i.dataId),s,u,l,c);return[h.selectedIndices,h.selectedScores]}},{kernelName:"Square",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,A=n,o=new he(r.shape,"return x * x;");return A.runWebGLProgram(o,[r],r.dtype)}},{kernelName:Ra,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t,A=r.a,o=r.b,i=n,a=V().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new xr("return (a - b) * (a - b);",A.shape,o.shape):new $e("return (a - b) * (a - b);",A.shape,o.shape);return i.compileAndRun(a,[A,o])}}];sf<mm.length;sf++)Ay(mm[sf]);for(var uf=0,wm=[{kernelName:"Square",gradFunc:function(e,t){var n=t[0];return{x:function(){return e.mul(n.toFloat().mul(2))}}}},{kernelName:Ra,gradFunc:function(e,t){var n=t[0],r=t[1],A=$(2);return{a:function(){return Ht(e,Ht(A,ct(n,r)))},b:function(){return Ht(e,Ht(A,ct(r,n)))}}}}];uf<wm.length;uf++)rE(wm[uf]);var a4=function(){function e(){}return e.prototype.fetch=function(t,n){return fetch(t,n)},e.prototype.now=function(){return performance.now()},e.prototype.encode=function(t,n){if(n!=="utf-8"&&n!=="utf8")throw new Error("Browser's encoder only supports utf-8, but got "+n);return this.textEncoder==null&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(t)},e.prototype.decode=function(t,n){return new TextDecoder(n).decode(t)},e}();V().get("IS_BROWSER")&&V().setPlatform("browser",new a4);var lf,s4=function(){return require("node-fetch")},u4=function(){function e(){this.util=require("util"),this.textEncoder=new this.util.TextEncoder}return e.prototype.fetch=function(t,n){return V().global.fetch!=null?V().global.fetch(t,n):(lf==null&&(lf=s4()),lf(t,n))},e.prototype.now=function(){var t=process.hrtime();return 1e3*t[0]+t[1]/1e6},e.prototype.encode=function(t,n){if(n!=="utf-8"&&n!=="utf8")throw new Error("Node built-in encoder only supports utf-8, but got "+n);return this.textEncoder.encode(t)},e.prototype.decode=function(t,n){return t.length===0?"":new this.util.TextDecoder(n).decode(t)},e}();V().get("IS_NODE")&&V().setPlatform("node",new u4);var Xh={float32:4,int32:4,uint16:2,uint8:1,bool:1},sl=4;function QC(e,t){for(var n={},r=0,A=function(a){var s=a.name,u=a.dtype,l=a.shape,c=ne(l),f=void 0;if("quantization"in a){var h=a.quantization;if(h.dtype!=="uint8"&&h.dtype!=="uint16")throw new Error("Weight "+a.name+" has unknown quantization dtype "+h.dtype+". Supported quantization dtypes are: 'uint8' and 'uint16'.");var d=Xh[h.dtype],g=e.slice(r,r+c*d),m=h.dtype==="uint8"?new Uint8Array(g):new Uint16Array(g);if(u==="float32")f=Float32Array.from(m,function(C){return C*h.scale+h.min});else{if(u!=="int32")throw new Error("Unsupported dtype in weight '"+s+"': "+u);f=Int32Array.from(m,function(C){return Math.round(C*h.scale+h.min)})}r+=c*d}else if(u==="string"){var p=ne(a.shape);f=[];for(var v=0;v<p;v++){var w=new Uint32Array(e.slice(r,r+sl))[0];r+=sl;var B=new Uint8Array(e.slice(r,r+w));f.push(B),r+=w}}else{var y=Xh[u];if(g=e.slice(r,r+c*y),u==="float32")f=new Float32Array(g);else if(u==="int32")f=new Int32Array(g);else{if(u!=="bool")throw new Error("Unsupported dtype in weight '"+s+"': "+u);f=new Uint8Array(g)}r+=c*y}n[s]=xt(f,l,u)},o=0,i=t;o<i.length;o++)A(i[o]);return n}function l4(e){if(e===null)throw new Error("Invalid input value: "+JSON.stringify(e));var t=0,n=[];e.forEach(function(o){if(t+=o.byteLength,n.push(o.byteLength===o.buffer.byteLength?o:new o.constructor(o)),!(o instanceof Float32Array||o instanceof Int32Array||o instanceof Uint8Array))throw new Error("Unsupported TypedArray subtype: "+o.constructor.name)});var r=new Uint8Array(t),A=0;return n.forEach(function(o){r.set(new Uint8Array(o.buffer),A),A+=o.byteLength}),r.buffer}var $h=typeof Buffer<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u");function Bm(e){return $h?Buffer.byteLength(e):new Blob([e]).size}function zp(e){var t=0;e.forEach(function(A){t+=A.byteLength});var n=new Uint8Array(t),r=0;return e.forEach(function(A){n.set(new Uint8Array(A),r),r+=A.byteLength}),n.buffer}function ym(e){for(e=e.trim();e.endsWith("/");)e=e.slice(0,e.length-1);var t=e.split("/");return t[t.length-1]}function Ja(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:e.modelTopology==null?0:Bm(JSON.stringify(e.modelTopology)),weightSpecsBytes:e.weightSpecs==null?0:Bm(JSON.stringify(e.weightSpecs)),weightDataBytes:e.weightData==null?0:e.weightData.byteLength}}var cn=function(){function e(){this.saveRouters=[],this.loadRouters=[]}return e.getInstance=function(){return e.instance==null&&(e.instance=new e),e.instance},e.registerSaveRouter=function(t){e.getInstance().saveRouters.push(t)},e.registerLoadRouter=function(t){e.getInstance().loadRouters.push(t)},e.getSaveHandlers=function(t){return e.getHandlers(t,"save")},e.getLoadHandlers=function(t,n){return e.getHandlers(t,"load",n)},e.getHandlers=function(t,n,r){var A=[];return(n==="load"?e.getInstance().loadRouters:e.getInstance().saveRouters).forEach(function(o){var i=o(t,r);i!==null&&A.push(i)}),A},e}(),Zo="://",gA=function(){function e(){this.managers={}}return e.getInstance=function(){return e.instance==null&&(e.instance=new e),e.instance},e.registerManager=function(t,n){U(t!=null,function(){return"scheme must not be undefined or null."}),t.endsWith(Zo)&&(t=t.slice(0,t.indexOf(Zo))),U(t.length>0,function(){return"scheme must not be an empty string."});var r=e.getInstance();U(r.managers[t]==null,function(){return"A model store manager is already registered for scheme '"+t+"'."}),r.managers[t]=n},e.getManager=function(t){var n=this.getInstance().managers[t];if(n==null)throw new Error("Cannot find model manager for scheme '"+t+"'");return n},e.getSchemes=function(){return Object.keys(this.getInstance().managers)},e}();function pu(e){if(e.indexOf(Zo)===-1)throw new Error("The url string provided does not contain a scheme. Supported schemes are: "+gA.getSchemes().join(","));return{scheme:e.split(Zo)[0],path:e.split(Zo)[1]}}function Cm(e,t,n){return n===void 0&&(n=!1),ee(this,void 0,void 0,function(){var r,A,o,i,a,s,u,l,c;return te(this,function(f){switch(f.label){case 0:return U(e!==t,function(){return"Old path and new path are the same: '"+e+"'"}),U((r=cn.getLoadHandlers(e)).length>0,function(){return"Copying failed because no load handler is found for source URL "+e+"."}),U(r.length<2,function(){return"Copying failed because more than one ("+r.length+") load handlers for source URL "+e+"."}),A=r[0],U((o=cn.getSaveHandlers(t)).length>0,function(){return"Copying failed because no save handler is found for destination URL "+t+"."}),U(o.length<2,function(){return"Copying failed because more than one ("+r.length+") save handlers for destination URL "+t+"."}),i=o[0],a=pu(e).scheme,s=pu(e).path,u=a===pu(e).scheme,[4,A.load()];case 1:return l=f.sent(),n&&u?[4,gA.getManager(a).removeModel(s)]:[3,3];case 2:f.sent(),f.label=3;case 3:return[4,i.save(l)];case 4:return c=f.sent(),!n||u?[3,6]:[4,gA.getManager(a).removeModel(s)];case 5:f.sent(),f.label=6;case 6:return[2,c.modelArtifactsInfo]}})})}var VA="models_store",rA="model_info_store";function UC(){if(!V().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");var e=window||self,t=e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB||e.shimIndexedDB;if(t==null)throw new Error("The current browser does not appear to support IndexedDB.");return t}function jh(e){var t=e.result;t.createObjectStore(VA,{keyPath:"modelPath"}),t.createObjectStore(rA,{keyPath:"modelPath"})}var ei=function(){function e(t){if(this.indexedDB=UC(),t==null||!t)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=t}return e.prototype.save=function(t){return ee(this,void 0,void 0,function(){return te(this,function(n){if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return[2,this.databaseAction(this.modelPath,t)]})})},e.prototype.load=function(){return ee(this,void 0,void 0,function(){return te(this,function(t){return[2,this.databaseAction(this.modelPath)]})})},e.prototype.databaseAction=function(t,n){var r=this;return new Promise(function(A,o){var i=r.indexedDB.open("tensorflowjs",1);i.onupgradeneeded=function(){return jh(i)},i.onsuccess=function(){var a=i.result;if(n==null){var s=a.transaction(VA,"readonly"),u=s.objectStore(VA).get(r.modelPath);u.onsuccess=function(){if(u.result==null)return a.close(),o(new Error("Cannot find model with path '"+r.modelPath+"' in IndexedDB."));A(u.result.modelArtifacts)},u.onerror=function(g){return a.close(),o(u.error)},s.oncomplete=function(){return a.close()}}else{var l,c=Ja(n),f=a.transaction(rA,"readwrite"),h=f.objectStore(rA),d=h.put({modelPath:r.modelPath,modelArtifactsInfo:c});d.onsuccess=function(){var g=(l=a.transaction(VA,"readwrite")).objectStore(VA).put({modelPath:r.modelPath,modelArtifacts:n,modelArtifactsInfo:c});g.onsuccess=function(){return A({modelArtifactsInfo:c})},g.onerror=function(m){var p=(h=f.objectStore(rA)).delete(r.modelPath);p.onsuccess=function(){return a.close(),o(g.error)},p.onerror=function(v){return a.close(),o(g.error)}}},d.onerror=function(g){return a.close(),o(d.error)},f.oncomplete=function(){l==null?a.close():l.oncomplete=function(){return a.close()}}}},i.onerror=function(a){return o(i.error)}})},e.URL_SCHEME="indexeddb://",e}(),xm=function(e){return V().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(ei.URL_SCHEME)?(t=e.slice(ei.URL_SCHEME.length),new ei(t)):null;var t};cn.registerSaveRouter(xm),cn.registerLoadRouter(xm);var c4=function(){function e(){this.indexedDB=UC()}return e.prototype.listModels=function(){return ee(this,void 0,void 0,function(){var t=this;return te(this,function(n){return[2,new Promise(function(r,A){var o=t.indexedDB.open("tensorflowjs",1);o.onupgradeneeded=function(){return jh(o)},o.onsuccess=function(){var i=o.result,a=i.transaction(rA,"readonly"),s=a.objectStore(rA).getAll();s.onsuccess=function(){for(var u={},l=0,c=s.result;l<c.length;l++){var f=c[l];u[f.modelPath]=f.modelArtifactsInfo}r(u)},s.onerror=function(u){return i.close(),A(s.error)},a.oncomplete=function(){return i.close()}},o.onerror=function(i){return A(o.error)}})]})})},e.prototype.removeModel=function(t){return ee(this,void 0,void 0,function(){var n=this;return te(this,function(r){var A;return t=(A=t).startsWith(ei.URL_SCHEME)?A.slice(ei.URL_SCHEME.length):A,[2,new Promise(function(o,i){var a=n.indexedDB.open("tensorflowjs",1);a.onupgradeneeded=function(){return jh(a)},a.onsuccess=function(){var s,u=a.result,l=u.transaction(rA,"readwrite"),c=l.objectStore(rA),f=c.get(t);f.onsuccess=function(){if(f.result==null)return u.close(),i(new Error("Cannot find model with path '"+t+"' in IndexedDB."));var h=c.delete(t),d=function(){var g=(s=u.transaction(VA,"readwrite")).objectStore(VA).delete(t);g.onsuccess=function(){return o(f.result.modelArtifactsInfo)},g.onerror=function(m){return i(f.error)}};h.onsuccess=d,h.onerror=function(g){return d(),u.close(),i(f.error)}},f.onerror=function(h){return u.close(),i(f.error)},l.oncomplete=function(){s==null?u.close():s.oncomplete=function(){return u.close()}}},a.onerror=function(s){return i(a.error)}})]})})},e}();if(V().getBool("IS_BROWSER"))try{gA.registerManager(ei.URL_SCHEME,new c4)}catch{}var Er="/",Uo="tensorflowjs_models",IC="info",f4="model_topology",h4="weight_specs",d4="weight_data",p4="model_metadata";function SC(e){return{info:[Uo,e,IC].join(Er),topology:[Uo,e,f4].join(Er),weightSpecs:[Uo,e,h4].join(Er),weightData:[Uo,e,d4].join(Er),modelMetadata:[Uo,e,p4].join(Er)}}function g4(e){var t=e.split(Er);if(t.length<3)throw new Error("Invalid key format: "+e);return t.slice(1,t.length-1).join(Er)}var ti=function(){function e(t){if(!V().getBool("IS_BROWSER")||typeof window>"u"||window.localStorage===void 0)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,t==null||!t)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=t,this.keys=SC(this.modelPath)}return e.prototype.save=function(t){return ee(this,void 0,void 0,function(){var n,r,A;return te(this,function(o){if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");n=JSON.stringify(t.modelTopology),r=JSON.stringify(t.weightSpecs),A=Ja(t);try{return this.LS.setItem(this.keys.info,JSON.stringify(A)),this.LS.setItem(this.keys.topology,n),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,function(i){if($h)return Buffer.from(i).toString("base64");for(var a=new Uint8Array(i),s="",u=0,l=a.length;u<l;u++)s+=String.fromCharCode(a[u]);return btoa(s)}(t.weightData)),this.LS.setItem(this.keys.modelMetadata,JSON.stringify({format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,userDefinedMetadata:t.userDefinedMetadata})),[2,{modelArtifactsInfo:A}]}catch{throw this.LS.removeItem(this.keys.info),this.LS.removeItem(this.keys.topology),this.LS.removeItem(this.keys.weightSpecs),this.LS.removeItem(this.keys.weightData),this.LS.removeItem(this.keys.modelMetadata),new Error("Failed to save model '"+this.modelPath+"' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes="+A.modelTopologyBytes+", weightSpecsBytes="+A.weightSpecsBytes+", weightDataBytes="+A.weightDataBytes+".")}return[2]})})},e.prototype.load=function(){return ee(this,void 0,void 0,function(){var t,n,r,A,o,i,a;return te(this,function(s){if((t=JSON.parse(this.LS.getItem(this.keys.info)))==null)throw new Error("In local storage, there is no model with name '"+this.modelPath+"'");if(t.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");if(n={},(r=JSON.parse(this.LS.getItem(this.keys.topology)))==null)throw new Error("In local storage, the topology of model '"+this.modelPath+"' is missing.");if(n.modelTopology=r,(A=JSON.parse(this.LS.getItem(this.keys.weightSpecs)))==null)throw new Error("In local storage, the weight specs of model '"+this.modelPath+"' are missing.");if(n.weightSpecs=A,(o=this.LS.getItem(this.keys.modelMetadata))!=null&&(i=JSON.parse(o),n.format=i.format,n.generatedBy=i.generatedBy,n.convertedBy=i.convertedBy,n.userDefinedMetadata=i.userDefinedMetadata),(a=this.LS.getItem(this.keys.weightData))==null)throw new Error("In local storage, the binary weight values of model '"+this.modelPath+"' are missing.");return n.weightData=function(u){if($h){var l=Buffer.from(u,"base64");return l.buffer.slice(l.byteOffset,l.byteOffset+l.byteLength)}for(var c=atob(u),f=new Uint8Array(c.length),h=0;h<c.length;++h)f.set([c.charCodeAt(h)],h);return f.buffer}(a),[2,n]})})},e.URL_SCHEME="localstorage://",e}(),Fm=function(e){return V().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(ti.URL_SCHEME)?(t=e.slice(ti.URL_SCHEME.length),new ti(t)):null;var t};cn.registerSaveRouter(Fm),cn.registerLoadRouter(Fm);var v4=function(){function e(){U(V().getBool("IS_BROWSER"),function(){return"Current environment is not a web browser"}),U(typeof window>"u"||window.localStorage!==void 0,function(){return"Current browser does not appear to support localStorage"}),this.LS=window.localStorage}return e.prototype.listModels=function(){return ee(this,void 0,void 0,function(){var t,n,r,A,o,i;return te(this,function(a){for(t={},n=Uo+Er,r=Er+IC,A=0;A<this.LS.length;++A)(o=this.LS.key(A)).startsWith(n)&&o.endsWith(r)&&(i=g4(o),t[i]=JSON.parse(this.LS.getItem(o)));return[2,t]})})},e.prototype.removeModel=function(t){return ee(this,void 0,void 0,function(){var n,r;return te(this,function(A){var o;if(t=(o=t).startsWith(ti.URL_SCHEME)?o.slice(ti.URL_SCHEME.length):o,n=SC(t),this.LS.getItem(n.info)==null)throw new Error("Cannot find model at path '"+t+"'");return r=JSON.parse(this.LS.getItem(n.info)),this.LS.removeItem(n.info),this.LS.removeItem(n.topology),this.LS.removeItem(n.weightSpecs),this.LS.removeItem(n.weightData),[2,r]})})},e}();if(V().getBool("IS_BROWSER"))try{gA.registerManager(ti.URL_SCHEME,new v4)}catch{}var m4="model",w4=".json",B4=".weights.bin";function bm(e){return new Promise(function(t){return setTimeout(t)}).then(e)}var cf=function(){function e(t){if(!V().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");t.startsWith(e.URL_SCHEME)&&(t=t.slice(e.URL_SCHEME.length)),t!=null&&t.length!==0||(t=m4),this.modelTopologyFileName=t+w4,this.weightDataFileName=t+B4}return e.prototype.save=function(t){return ee(this,void 0,void 0,function(){var n,r,A,o,i,a;return te(this,function(s){switch(s.label){case 0:if(typeof document>"u")throw new Error("Browser downloads are not supported in this environment since `document` is not present");if(n=window.URL.createObjectURL(new Blob([t.weightData],{type:"application/octet-stream"})),!(t.modelTopology instanceof ArrayBuffer))return[3,1];throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");case 1:return r=[{paths:["./"+this.weightDataFileName],weights:t.weightSpecs}],A={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,weightsManifest:r},o=window.URL.createObjectURL(new Blob([JSON.stringify(A)],{type:"application/json"})),(i=this.jsonAnchor==null?document.createElement("a"):this.jsonAnchor).download=this.modelTopologyFileName,i.href=o,[4,bm(function(){return i.dispatchEvent(new MouseEvent("click"))})];case 2:return s.sent(),t.weightData==null?[3,4]:((a=this.weightDataAnchor==null?document.createElement("a"):this.weightDataAnchor).download=this.weightDataFileName,a.href=n,[4,bm(function(){return a.dispatchEvent(new MouseEvent("click"))})]);case 3:s.sent(),s.label=4;case 4:return[2,{modelArtifactsInfo:Ja(t)}]}})})},e.URL_SCHEME="downloads://",e}(),y4=function(){function e(t){if(t==null||t.length<1)throw new Error("When calling browserFiles, at least 1 file is required, but received "+t);this.files=t}return e.prototype.load=function(){return ee(this,void 0,void 0,function(){var t,n,r=this;return te(this,function(A){return t=this.files[0],n=this.files.slice(1),[2,new Promise(function(o,i){var a=new FileReader;a.onload=function(s){var u=JSON.parse(s.target.result),l=u.modelTopology;if(l!=null){n.length===0&&o({modelTopology:l});var c=u.weightsManifest;if(c!=null){var f;try{f=r.checkManifestAndWeightFiles(c,n)}catch(m){return void i(m)}var h=[],d=[],g=[];c.forEach(function(m){m.paths.forEach(function(p){d.push(p),g.push(null)}),h.push.apply(h,m.weights)}),c.forEach(function(m){m.paths.forEach(function(p){var v=new FileReader;v.onload=function(w){var B=w.target.result,y=d.indexOf(p);g[y]=B,g.indexOf(null)===-1&&o({modelTopology:l,weightSpecs:h,weightData:zp(g),format:u.format,generatedBy:u.generatedBy,convertedBy:u.convertedBy,userDefinedMetadata:u.userDefinedMetadata})},v.onerror=function(w){return i("Failed to weights data from file of path '"+p+"'.")},v.readAsArrayBuffer(f[p])})})}else i(new Error("weightManifest field is missing from file "+t.name))}else i(new Error("modelTopology field is missing from file "+t.name))},a.onerror=function(s){return i("Failed to read model topology and weights manifest JSON from file '"+t.name+"'. BrowserFiles supports loading Keras-style tf.Model artifacts only.")},a.readAsText(t)})]})})},e.prototype.checkManifestAndWeightFiles=function(t,n){for(var r=[],A=n.map(function(s){return ym(s.name)}),o={},i=0,a=t;i<a.length;i++)a[i].paths.forEach(function(s){var u=ym(s);if(r.indexOf(u)!==-1)throw new Error("Duplicate file basename found in weights manifest: '"+u+"'");if(r.push(u),A.indexOf(u)===-1)throw new Error("Weight file with basename '"+u+"' is not provided.");o[s]=n[A.indexOf(u)]});if(r.length!==n.length)throw new Error("Mismatch in the number of files in weights manifest ("+r.length+") and the number of weight files provided ("+n.length+").");return o},e}();function Em(e,t,n,r){(function(o){U(o!=null&&Array.isArray(o)&&o.length>0,function(){return"promises must be a none empty array"})})(e),function(o,i){U(o>=0&&o<=1,function(){return"Progress fraction must be in range [0, 1], but got startFraction "+o}),U(i>=0&&i<=1,function(){return"Progress fraction must be in range [0, 1], but got endFraction "+i}),U(i>=o,function(){return"startFraction must be no more than endFraction, but got startFraction "+o+" and endFraction "+i})}(n=n??0,r=r??1);var A=0;return Promise.all(e.map(function(o){return o.then(function(i){var a=n+ ++A/e.length*(r-n);return t(a),i}),o}))}function _C(e,t){return ee(this,void 0,void 0,function(){var n,r,A,o,i,a,s,u,l;return te(this,function(c){switch(c.label){case 0:return t==null&&(t={}),n=t.fetchFunc==null?V().platform.fetch:t.fetchFunc,r=e.map(function(f){return n(f,t.requestInit,{isBinary:!0})}),A=0,o=.5,t.onProgress!=null?[3,2]:[4,Promise.all(r)];case 1:return i=c.sent(),[3,4];case 2:return[4,Em(r,t.onProgress,A,o)];case 3:i=c.sent(),c.label=4;case 4:return a=i.map(function(f){return f.arrayBuffer()}),s=.5,u=1,t.onProgress!=null?[3,6]:[4,Promise.all(a)];case 5:return l=c.sent(),[3,8];case 6:return[4,Em(a,t.onProgress,s,u)];case 7:l=c.sent(),c.label=8;case 8:return[2,l]}})})}function Qm(e){var t=this;return function(n,r,A){return r===void 0&&(r=""),ee(t,void 0,void 0,function(){var o,i,a,s,u,l,c,f,h,d;return te(this,function(g){switch(g.label){case 0:if(o=n.map(function(){return!1}),i={},a=A!=null?A.map(function(){return!1}):[],s=[],n.forEach(function(m,p){var v=0;m.weights.forEach(function(w){var B="quantization"in w?w.quantization.dtype:w.dtype,y=Xh[B]*ne(w.shape),C=function(){o[p]=!0,i[p]==null&&(i[p]=[]),i[p].push({manifestEntry:w,groupOffset:v,sizeBytes:y})};A!=null?A.forEach(function(b,x){b===w.name&&(C(),a[x]=!0)}):C(),s.push(w.name),v+=y})}),!a.every(function(m){return m}))throw u=A.filter(function(m,p){return!a[p]}),new Error("Could not find weights in manifest with names: "+u.join(", ")+`. 
Manifest JSON has weights with names: `+s.join(", ")+".");return l=o.reduce(function(m,p,v){return p&&m.push(v),m},[]),c=[],l.forEach(function(m){n[m].paths.forEach(function(p){var v=r+(r.endsWith("/")?"":"/")+p;c.push(v)})}),[4,e(c)];case 1:return f=g.sent(),h={},d=0,l.forEach(function(m){for(var p=n[m].paths.length,v=0,w=0;w<p;w++)v+=f[d+w].byteLength;for(var B=new ArrayBuffer(v),y=new Uint8Array(B),C=0,b=0;b<p;b++){var x=new Uint8Array(f[d+b]);y.set(x,C),C+=x.byteLength}i[m].forEach(function(F){var E=QC(B.slice(F.groupOffset,F.groupOffset+F.sizeBytes),[F.manifestEntry]);for(var I in E)h[I]=E[I]}),d+=p}),[2,h]}})})}}cn.registerSaveRouter(function(e){return V().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(cf.URL_SCHEME)?function(t){return t===void 0&&(t="model"),new cf(t)}(e.slice(cf.URL_SCHEME.length)):null});var kC=function(){function e(t,n){if(this.DEFAULT_METHOD="POST",n==null&&(n={}),this.weightPathPrefix=n.weightPathPrefix,this.onProgress=n.onProgress,n.fetchFunc!=null?(U(typeof n.fetchFunc=="function",function(){return"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"}),this.fetch=n.fetchFunc):this.fetch=V().platform.fetch,U(t!=null&&t.length>0,function(){return"URL path for http must not be null, undefined or empty."}),Array.isArray(t)&&U(t.length===2,function(){return"URL paths for http must have a length of 2, (actual length is "+t.length+")."}),this.path=t,n.requestInit!=null&&n.requestInit.body!=null)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=n.requestInit||{}}return e.prototype.save=function(t){return ee(this,void 0,void 0,function(){var n,r,A,o;return te(this,function(i){switch(i.label){case 0:if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");return(n=Object.assign({method:this.DEFAULT_METHOD},this.requestInit)).body=new FormData,r=[{paths:["./model.weights.bin"],weights:t.weightSpecs}],A={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,userDefinedMetadata:t.userDefinedMetadata,weightsManifest:r},n.body.append("model.json",new Blob([JSON.stringify(A)],{type:"application/json"}),"model.json"),t.weightData!=null&&n.body.append("model.weights.bin",new Blob([t.weightData],{type:"application/octet-stream"}),"model.weights.bin"),[4,this.fetch(this.path,n)];case 1:if((o=i.sent()).ok)return[2,{modelArtifactsInfo:Ja(t),responses:[o]}];throw new Error("BrowserHTTPRequest.save() failed due to HTTP response status "+o.status+".")}})})},e.prototype.load=function(){return ee(this,void 0,void 0,function(){var t,n,r,A,o,i,a,s,u,l,c,f;return te(this,function(h){switch(h.label){case 0:return[4,this.fetch(this.path,this.requestInit)];case 1:if(!(t=h.sent()).ok)throw new Error("Request to "+this.path+" failed with status code "+t.status+". Please verify this URL points to the model JSON of the model to load.");h.label=2;case 2:return h.trys.push([2,4,,5]),[4,t.json()];case 3:return n=h.sent(),[3,5];case 4:throw h.sent(),r="Failed to parse model JSON of response from "+this.path+".",this.path.endsWith(".pb")?r+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":r+=" Please make sure the server is serving valid JSON for this request.",new Error(r);case 5:if(A=n.modelTopology,o=n.weightsManifest,i=n.generatedBy,a=n.convertedBy,s=n.format,u=n.userDefinedMetadata,A==null&&o==null)throw new Error("The JSON from HTTP path "+this.path+" contains neither model topology or manifest for weights.");return o==null?[3,7]:[4,this.loadWeights(o)];case 6:f=h.sent(),l=f[0],c=f[1],h.label=7;case 7:return[2,{modelTopology:A,weightSpecs:l,weightData:c,userDefinedMetadata:u,generatedBy:i,convertedBy:a,format:s}]}})})},e.prototype.loadWeights=function(t){return ee(this,void 0,void 0,function(){var n,r,A,o,i,a,s,u,l,c,f;return te(this,function(h){switch(h.label){case 0:for(n=Array.isArray(this.path)?this.path[1]:this.path,r=function(d){var g=d.lastIndexOf("/"),m=d.lastIndexOf("?"),p=d.substring(0,g),v=m>g?d.substring(m):"";return[p+"/",v]}(n),A=r[0],o=r[1],i=this.weightPathPrefix||A,a=[],s=0,u=t;s<u.length;s++)l=u[s],a.push.apply(a,l.weights);return c=[],t.forEach(function(d){d.paths.forEach(function(g){c.push(i+g+o)})}),[4,_C(c,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress})];case 1:return f=h.sent(),[2,[a,zp(f)]]}})})},e.URL_SCHEME_REGEX=/^https?:\/\//,e}();function Yh(e){return e.match(kC.URL_SCHEME_REGEX)!=null}var Um=function(e,t){return typeof fetch>"u"?null:(Array.isArray(e)?e.every(function(n){return Yh(n)}):Yh(e))?qh(e,{onProgress:t}):null};function qh(e,t){return new kC(e,t)}cn.registerSaveRouter(Um),cn.registerLoadRouter(Um);var ff=function(){function e(t){this.modelArtifacts=t}return e.prototype.load=function(){return ee(this,void 0,void 0,function(){return te(this,function(t){return[2,this.modelArtifacts]})})},e}(),C4=function(){function e(t){this.saveHandler=t}return e.prototype.save=function(t){return ee(this,void 0,void 0,function(){return te(this,function(n){return[2,this.saveHandler(t)]})})},e}(),DC=Object.freeze({browserFiles:function(e){return new y4(e)},browserHTTPRequest:function(e,t){return qh(e,t)},concatenateArrayBuffers:zp,decodeWeights:QC,encodeWeights:function(e,t){return ee(this,void 0,void 0,function(){var n,r,A,o,i,a=this;return te(this,function(s){switch(s.label){case 0:for(n=[],r=[],A=Array.isArray(e)?e.map(function(u){return u.name}):Object.keys(e),o=function(u){var l=A[u],c=Array.isArray(e)?e[u].tensor:e[l];if(c.dtype!=="float32"&&c.dtype!=="int32"&&c.dtype!=="bool"&&c.dtype!=="string")throw new Error("Unsupported dtype in weight '"+l+"': "+c.dtype);var f={name:l,shape:c.shape,dtype:c.dtype};if(c.dtype==="string"){var h=new Promise(function(d){return ee(a,void 0,void 0,function(){var g,m,p,v,w,B,y;return te(this,function(C){switch(C.label){case 0:return[4,c.bytes()];case 1:for(g=C.sent(),m=g.reduce(function(b,x){return b+x.length},0)+sl*g.length,p=new Uint8Array(m),v=0,w=0;w<g.length;w++)B=g[w],y=new Uint8Array(new Uint32Array([B.length]).buffer),p.set(y,v),v+=sl,p.set(B,v),v+=B.length;return d(p),[2]}})})});r.push(h)}else r.push(c.data());t!=null&&(f.group=t),n.push(f)},i=0;i<A.length;++i)o(i);return[4,Promise.all(r)];case 1:return[2,{data:l4(s.sent()),specs:n}]}})})},fromMemory:function(e,t,n,r){return arguments.length===1?e.modelTopology!=null||e.weightSpecs!=null?new ff(e):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new ff({modelTopology:e})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new ff({modelTopology:e,weightSpecs:t,weightData:n,trainingConfig:r}))},getLoadHandlers:function(e,t){return cn.getLoadHandlers(e,t)},getModelArtifactsInfoForJSON:Ja,getSaveHandlers:function(e){return cn.getSaveHandlers(e)},http:qh,isHTTPScheme:Yh,loadWeights:function(e,t,n,r){return t===void 0&&(t=""),ee(this,void 0,void 0,function(){return te(this,function(A){return[2,Qm(function(o){return _C(o,{requestInit:r})})(e,t,n)]})})},registerLoadRouter:function(e){return cn.registerLoadRouter(e)},registerSaveRouter:function(e){return cn.registerSaveRouter(e)},weightsLoaderFactory:Qm,withSaveHandler:function(e){return new C4(e)},copyModel:function(e,t){return ee(this,void 0,void 0,function(){return te(this,function(n){return[2,Cm(e,t,!1)]})})},listModels:function(){return ee(this,void 0,void 0,function(){var e,t,n,r,A,o,i;return te(this,function(a){switch(a.label){case 0:e=gA.getSchemes(),t={},n=0,r=e,a.label=1;case 1:return n<r.length?(A=r[n],[4,gA.getManager(A).listModels()]):[3,4];case 2:for(i in o=a.sent())t[A+Zo+i]=o[i];a.label=3;case 3:return n++,[3,1];case 4:return[2,t]}})})},moveModel:function(e,t){return ee(this,void 0,void 0,function(){return te(this,function(n){return[2,Cm(e,t,!0)]})})},removeModel:function(e){return ee(this,void 0,void 0,function(){var t;return te(this,function(n){return t=pu(e),[2,gA.getManager(t.scheme).removeModel(t.path)]})})}}),vo;_({confusionMatrix_:function(e,t,n){var r=Q(e,"labels","confusionMatrix"),A=Q(t,"predictions","confusionMatrix");U(n==null||n>0&&Number.isInteger(n),function(){return"If provided, numClasses must be a positive integer, but got "+n}),U(r.rank===1,function(){return"Expected the rank of labels to be 1, but got "+r.rank}),U(A.rank===1,function(){return"Expected the rank of predictions to be 1, but got "+A.rank}),U(r.shape[0]===A.shape[0],function(){return"Mismatch in the number of examples: "+r.shape[0]+" vs. "+A.shape[0]+". Labels and predictions should have the same number of elements."}),U(n>0&&Number.isInteger(n),function(){return"numClasses is required to be a positive integer, but got "+n});var o=Kh(r.asType("int32"),n),i=Kh(A.asType("int32"),n);return o.transpose().matMul(i).asType("int32")}});var x4=_({fromPixels_:function(e,t){if(t===void 0&&(t=3),t>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(e==null)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");var n=!1,r=!1,A=!1,o=!1,i=!1;if(e.data instanceof Uint8Array)n=!0;else if(typeof ImageData<"u"&&e instanceof ImageData)r=!0;else if(typeof HTMLVideoElement<"u"&&e instanceof HTMLVideoElement)A=!0;else if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement)o=!0;else{if(e.getContext==null)throw new Error("pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was "+e.constructor.name);i=!0}if(A&&A&&e.readyState<2)throw new Error("The video element has not loaded data yet. Please wait for `loadeddata` event on the <video> element.");if(ry("FromPixels",k.backendName)!=null)return k.runKernel("FromPixels",{pixels:e},{numChannels:t});var a,s,u=A?[e.videoWidth,e.videoHeight]:[e.width,e.height],l=u[0],c=u[1];if(i?a=e.getContext("2d").getImageData(0,0,l,c).data:r||n?a=e.data:(o||A)&&(vo==null&&(vo=document.createElement("canvas").getContext("2d")),vo.canvas.width=l,vo.canvas.height=c,vo.drawImage(e,0,0,l,c),a=vo.getImageData(0,0,l,c).data),t===4)s=new Int32Array(a);else{var f=l*c;s=new Int32Array(f*t);for(var h=0;h<f;h++)for(var d=0;d<t;++d)s[h*t+d]=a[4*h+d]}return yp(s,[c,l,t],"int32")}}),Xp=Object.freeze({toPixels:function(e,t){return ee(this,void 0,void 0,function(){var n,r,A,o,i,a,s,u,l,c,f,h,d,g,m,p,v,w,B,y,C,b,x;return te(this,function(F){switch(F.label){case 0:if(n=Q(e,"img","toPixels"),e instanceof Ke||(n=n.toInt()),n.rank!==2&&n.rank!==3)throw new Error("toPixels only supports rank 2 or 3 tensors, got rank "+n.rank+".");if(r=n.shape.slice(0,2),A=r[0],o=r[1],(i=n.rank===2?1:n.shape[2])>4||i===2)throw new Error("toPixels only supports depth of size 1, 3 or 4 but got "+i);return[4,n.data()];case 1:return a=F.sent(),s=n.min(),u=n.max(),[4,Promise.all([s.data(),u.data()])];case 2:if(l=F.sent(),c=l[0],f=l[1],h=c[0],d=f[0],s.dispose(),u.dispose(),n.dtype==="float32"){if(h<0||d>1)throw new Error("Tensor values for a float32 Tensor must be in the range [0 - 1] but got range ["+h+" - "+d+"].")}else{if(n.dtype!=="int32")throw new Error("Unsupported type for toPixels: "+n.dtype+". Please use float32 or int32 tensors.");if(h<0||d>255)throw new Error("Tensor values for a int32 Tensor must be in the range [0 - 255] but got range ["+h+" - "+d+"].")}for(g=n.dtype==="float32"?255:1,m=new Uint8ClampedArray(o*A*4),p=0;p<A*o;++p)v=void 0,w=void 0,B=void 0,y=void 0,i===1?(v=a[p]*g,w=a[p]*g,B=a[p]*g,y=255):i===3?(v=a[3*p]*g,w=a[3*p+1]*g,B=a[3*p+2]*g,y=255):i===4&&(v=a[4*p]*g,w=a[4*p+1]*g,B=a[4*p+2]*g,y=a[4*p+3]*g),m[(C=4*p)+0]=Math.round(v),m[C+1]=Math.round(w),m[C+2]=Math.round(B),m[C+3]=Math.round(y);return t!=null&&(t.width=o,t.height=A,b=t.getContext("2d"),x=new ImageData(m,o,A),b.putImageData(x,0,0)),n!==e&&n.dispose(),[2,m]}})})},fromPixels:x4}),F4=function(){function e(){}return e.prototype.getClassName=function(){return this.constructor.className},e.fromConfig=function(t,n){return new t(n)},e}(),b4=function(){function e(){this.classNameMap={}}return e.getMap=function(){return e.instance==null&&(e.instance=new e),e.instance},e.register=function(t){e.getMap().classNameMap[t.className]=[t,t.fromConfig]},e}();function so(e){U(e.className!=null,function(){return"Class being registered does not have the static className property defined."}),U(typeof e.className=="string",function(){return"className is required to be a string, but got type "+typeof e.className}),U(e.className.length>0,function(){return"Class being registered has an empty-string as its className, which is disallowed."}),b4.register(e)}var uo=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return Vn(t,e),t.prototype.minimize=function(n,r,A){r===void 0&&(r=!1);var o=this.computeGradients(n,A),i=o.value,a=o.grads;if(A!=null){var s=A.map(function(u){return{name:u.name,tensor:a[u.name]}});this.applyGradients(s)}else this.applyGradients(a);return en(a),r?i:(i.dispose(),null)},Object.defineProperty(t.prototype,"iterations",{get:function(){return this.iterations_==null&&(this.iterations_=0),this.iterations_},enumerable:!0,configurable:!0}),t.prototype.incrementIterations=function(){this.iterations_=this.iterations+1},t.prototype.computeGradients=function(n,r){return T2(n,r)},t.prototype.dispose=function(){this.iterations_!=null&&en(this.iterations_)},t.prototype.saveIterations=function(){return ee(this,void 0,void 0,function(){return te(this,function(n){return this.iterations_==null&&(this.iterations_=0),[2,{name:"iter",tensor:$(this.iterations_,"int32")}]})})},t.prototype.getWeights=function(){return ee(this,void 0,void 0,function(){return te(this,function(n){throw new Error("getWeights() is not implemented for this optimizer yet.")})})},t.prototype.setWeights=function(n){return ee(this,void 0,void 0,function(){return te(this,function(r){throw new Error("setWeights() is not implemented for this optimizer class "+this.getClassName())})})},t.prototype.extractIterations=function(n){return ee(this,void 0,void 0,function(){var r;return te(this,function(A){switch(A.label){case 0:return r=this,[4,n[0].tensor.data()];case 1:return r.iterations_=A.sent()[0],[2,n.slice(1)]}})})},t}(F4);Object.defineProperty(uo,Symbol.hasInstance,{value:function(e){return e.minimize!=null&&e.computeGradients!=null&&e.applyGradients!=null}});var E4=function(e){function t(n,r,A){A===void 0&&(A=null);var o=e.call(this)||this;return o.learningRate=n,o.rho=r,o.epsilon=A,o.accumulatedGrads=[],o.accumulatedUpdates=[],A==null&&(o.epsilon=k.backend.epsilon()),o}return Vn(t,e),t.prototype.applyGradients=function(n){var r=this;(Array.isArray(n)?n.map(function(A){return A.name}):Object.keys(n)).forEach(function(A,o){var i=k.registeredVariables[A];r.accumulatedGrads[o]==null&&(r.accumulatedGrads[o]={originalName:A+"/accum_grad",variable:J(function(){return ye(i).variable(!1)})}),r.accumulatedUpdates[o]==null&&(r.accumulatedUpdates[o]={originalName:A+"/accum_var",variable:J(function(){return ye(i).variable(!1)})});var a=Array.isArray(n)?n[o].tensor:n[A];if(a!=null){var s=r.accumulatedGrads[o].variable,u=r.accumulatedUpdates[o].variable;J(function(){var l=s.mul(r.rho).add(a.square().mul(1-r.rho)),c=u.add(r.epsilon).sqrt().div(s.add(r.epsilon).sqrt()).mul(a),f=u.mul(r.rho).add(c.square().mul(1-r.rho));s.assign(l),u.assign(f);var h=c.mul(-r.learningRate).add(i);i.assign(h)})}}),this.incrementIterations()},t.prototype.dispose=function(){this.accumulatedUpdates!=null&&(en(this.accumulatedGrads.map(function(n){return n.variable})),en(this.accumulatedUpdates.map(function(n){return n.variable})))},t.prototype.getWeights=function(){return ee(this,void 0,void 0,function(){var n;return te(this,function(r){switch(r.label){case 0:return n=this.accumulatedGrads.concat(this.accumulatedUpdates),[4,this.saveIterations()];case 1:return[2,[r.sent()].concat(n.map(function(A){return{name:A.originalName,tensor:A.variable}}))]}})})},t.prototype.setWeights=function(n){return ee(this,void 0,void 0,function(){var r;return te(this,function(A){switch(A.label){case 0:return[4,this.extractIterations(n)];case 1:return n=A.sent(),r=n.length/2,this.accumulatedGrads=n.slice(0,r).map(function(o){return{originalName:o.name,variable:o.tensor.variable(!1)}}),this.accumulatedUpdates=n.slice(r,2*r).map(function(o){return{originalName:o.name,variable:o.tensor.variable(!1)}}),[2]}})})},t.prototype.getConfig=function(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}},t.fromConfig=function(n,r){return new n(r.learningRate,r.rho,r.epsilon)},t.className="Adadelta",t}(uo);so(E4);var Q4=function(e){function t(n,r){r===void 0&&(r=.1);var A=e.call(this)||this;return A.learningRate=n,A.initialAccumulatorValue=r,A.accumulatedGrads=[],A}return Vn(t,e),t.prototype.applyGradients=function(n){var r=this;(Array.isArray(n)?n.map(function(A){return A.name}):Object.keys(n)).forEach(function(A,o){var i=k.registeredVariables[A];r.accumulatedGrads[o]==null&&(r.accumulatedGrads[o]={originalName:A+"/accumulator",variable:J(function(){return ur(i.shape,r.initialAccumulatorValue).variable(!1)})});var a=Array.isArray(n)?n[o].tensor:n[A];if(a!=null){var s=r.accumulatedGrads[o].variable;J(function(){var u=s.add(a.square());s.assign(u);var l=a.div(u.add(k.backend.epsilon()).sqrt()).mul(-r.learningRate).add(i);i.assign(l)})}}),this.incrementIterations()},t.prototype.dispose=function(){this.accumulatedGrads!=null&&en(this.accumulatedGrads.map(function(n){return n.variable}))},t.prototype.getWeights=function(){return ee(this,void 0,void 0,function(){return te(this,function(n){switch(n.label){case 0:return[4,this.saveIterations()];case 1:return[2,[n.sent()].concat(this.accumulatedGrads.map(function(r){return{name:r.originalName,tensor:r.variable}}))]}})})},t.prototype.setWeights=function(n){return ee(this,void 0,void 0,function(){return te(this,function(r){switch(r.label){case 0:return[4,this.extractIterations(n)];case 1:return n=r.sent(),this.accumulatedGrads=n.map(function(A){return{originalName:A.name,variable:A.tensor.variable(!1)}}),[2]}})})},t.prototype.getConfig=function(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}},t.fromConfig=function(n,r){return new n(r.learningRate,r.initialAccumulatorValue)},t.className="Adagrad",t}(uo);so(Q4);var U4=function(e){function t(n,r,A,o){o===void 0&&(o=null);var i=e.call(this)||this;return i.learningRate=n,i.beta1=r,i.beta2=A,i.epsilon=o,i.accumulatedFirstMoment=[],i.accumulatedSecondMoment=[],J(function(){i.accBeta1=$(r).variable(),i.accBeta2=$(A).variable()}),o==null&&(i.epsilon=k.backend.epsilon()),i}return Vn(t,e),t.prototype.applyGradients=function(n){var r=this,A=Array.isArray(n)?n.map(function(o){return o.name}):Object.keys(n);J(function(){var o=ct(1,r.accBeta1),i=ct(1,r.accBeta2);A.forEach(function(a,s){var u=k.registeredVariables[a];r.accumulatedFirstMoment[s]==null&&(r.accumulatedFirstMoment[s]={originalName:a+"/m",variable:J(function(){return ye(u).variable(!1)})}),r.accumulatedSecondMoment[s]==null&&(r.accumulatedSecondMoment[s]={originalName:a+"/v",variable:J(function(){return ye(u).variable(!1)})});var l=Array.isArray(n)?n[s].tensor:n[a];if(l!=null){var c=r.accumulatedFirstMoment[s].variable,f=r.accumulatedSecondMoment[s].variable,h=c.mul(r.beta1).add(l.mul(1-r.beta1)),d=f.mul(r.beta2).add(l.square().mul(1-r.beta2)),g=h.div(o),m=d.div(i);c.assign(h),f.assign(d);var p=g.div(m.sqrt().add(r.epsilon)).mul(-r.learningRate).add(u);u.assign(p)}}),r.accBeta1.assign(r.accBeta1.mul(r.beta1)),r.accBeta2.assign(r.accBeta2.mul(r.beta2))}),this.incrementIterations()},t.prototype.dispose=function(){this.accBeta1.dispose(),this.accBeta2.dispose(),this.accumulatedFirstMoment!=null&&en(this.accumulatedFirstMoment.map(function(n){return n.variable})),this.accumulatedSecondMoment!=null&&en(this.accumulatedSecondMoment.map(function(n){return n.variable}))},t.prototype.getWeights=function(){return ee(this,void 0,void 0,function(){var n;return te(this,function(r){switch(r.label){case 0:return n=this.accumulatedFirstMoment.concat(this.accumulatedSecondMoment),[4,this.saveIterations()];case 1:return[2,[r.sent()].concat(n.map(function(A){return{name:A.originalName,tensor:A.variable}}))]}})})},t.prototype.setWeights=function(n){return ee(this,void 0,void 0,function(){var r,A=this;return te(this,function(o){switch(o.label){case 0:return[4,this.extractIterations(n)];case 1:return n=o.sent(),J(function(){A.accBeta1.assign(il(A.beta1,A.iterations_+1)),A.accBeta2.assign(il(A.beta2,A.iterations_+1))}),r=n.length/2,this.accumulatedFirstMoment=n.slice(0,r).map(function(i){return{originalName:i.name,variable:i.tensor.variable(!1)}}),this.accumulatedSecondMoment=n.slice(r,2*r).map(function(i){return{originalName:i.name,variable:i.tensor.variable(!1)}}),[2]}})})},t.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}},t.fromConfig=function(n,r){return new n(r.learningRate,r.beta1,r.beta2,r.epsilon)},t.className="Adam",t}(uo);so(U4);var I4=function(e){function t(n,r,A,o,i){o===void 0&&(o=null),i===void 0&&(i=0);var a=e.call(this)||this;return a.learningRate=n,a.beta1=r,a.beta2=A,a.epsilon=o,a.decay=i,a.accumulatedFirstMoment=[],a.accumulatedWeightedInfNorm=[],J(function(){a.iteration=$(0).variable(),a.accBeta1=$(r).variable()}),o==null&&(a.epsilon=k.backend.epsilon()),a}return Vn(t,e),t.prototype.applyGradients=function(n){var r=this,A=Array.isArray(n)?n.map(function(o){return o.name}):Object.keys(n);J(function(){var o=ct(1,r.accBeta1),i=Nn(-r.learningRate,r.iteration.mul(r.decay).add(1));A.forEach(function(a,s){var u=k.registeredVariables[a];r.accumulatedFirstMoment[s]==null&&(r.accumulatedFirstMoment[s]={originalName:a+"/m",variable:ye(u).variable(!1)}),r.accumulatedWeightedInfNorm[s]==null&&(r.accumulatedWeightedInfNorm[s]={originalName:a+"/v",variable:ye(u).variable(!1)});var l=Array.isArray(n)?n[s].tensor:n[a];if(l!=null){var c=r.accumulatedFirstMoment[s].variable,f=r.accumulatedWeightedInfNorm[s].variable,h=c.mul(r.beta1).add(l.mul(1-r.beta1)),d=f.mul(r.beta2),g=l.abs(),m=d.maximum(g);c.assign(h),f.assign(m);var p=i.div(o).mul(h.div(m.add(r.epsilon))).add(u);u.assign(p)}}),r.iteration.assign(r.iteration.add(1)),r.accBeta1.assign(r.accBeta1.mul(r.beta1))}),this.incrementIterations()},t.prototype.dispose=function(){this.accBeta1.dispose(),this.iteration.dispose(),this.accumulatedFirstMoment!=null&&en(this.accumulatedFirstMoment.map(function(n){return n.variable})),this.accumulatedWeightedInfNorm!=null&&en(this.accumulatedWeightedInfNorm.map(function(n){return n.variable}))},t.prototype.getWeights=function(){return ee(this,void 0,void 0,function(){return te(this,function(n){throw new Error("getWeights() is not implemented for Adamax yet.")})})},t.prototype.setWeights=function(n){return ee(this,void 0,void 0,function(){return te(this,function(r){throw new Error("setWeights() is not implemented for Adamax yet.")})})},t.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}},t.fromConfig=function(n,r){return new n(r.learningRate,r.beta1,r.beta2,r.epsilon,r.decay)},t.className="Adamax",t}(uo);so(I4);var RC=function(e){function t(n){var r=e.call(this)||this;return r.learningRate=n,r.setLearningRate(n),r}return Vn(t,e),t.prototype.applyGradients=function(n){var r=this;(Array.isArray(n)?n.map(function(A){return A.name}):Object.keys(n)).forEach(function(A,o){var i=Array.isArray(n)?n[o].tensor:n[A];if(i!=null){var a=k.registeredVariables[A];J(function(){var s=r.c.mul(i).add(a);a.assign(s)})}}),this.incrementIterations()},t.prototype.setLearningRate=function(n){this.learningRate=n,this.c!=null&&this.c.dispose(),this.c=jE($(-n))},t.prototype.dispose=function(){this.c.dispose()},t.prototype.getWeights=function(){return ee(this,void 0,void 0,function(){return te(this,function(n){switch(n.label){case 0:return[4,this.saveIterations()];case 1:return[2,[n.sent()]]}})})},t.prototype.setWeights=function(n){return ee(this,void 0,void 0,function(){return te(this,function(r){switch(r.label){case 0:return[4,this.extractIterations(n)];case 1:if((n=r.sent()).length!==0)throw new Error("SGD optimizer does not have settable weights.");return[2]}})})},t.prototype.getConfig=function(){return{learningRate:this.learningRate}},t.fromConfig=function(n,r){return new n(r.learningRate)},t.className="SGD",t}(uo);so(RC);var S4=function(e){function t(n,r,A){A===void 0&&(A=!1);var o=e.call(this,n)||this;return o.learningRate=n,o.momentum=r,o.useNesterov=A,o.accumulations=[],o.m=$(o.momentum),o}return Vn(t,e),t.prototype.applyGradients=function(n){var r=this;(Array.isArray(n)?n.map(function(A){return A.name}):Object.keys(n)).forEach(function(A,o){var i=k.registeredVariables[A];r.accumulations[o]==null&&(r.accumulations[o]={originalName:A+"/momentum",variable:J(function(){return ye(i).variable(!1)})});var a=r.accumulations[o].variable,s=Array.isArray(n)?n[o].tensor:n[A];s!=null&&J(function(){var u,l=r.m.mul(a).add(s);u=r.useNesterov?r.c.mul(s.add(l.mul(r.m))).add(i):r.c.mul(l).add(i),a.assign(l),i.assign(u)})}),this.incrementIterations()},t.prototype.dispose=function(){this.m.dispose(),this.accumulations!=null&&en(this.accumulations.map(function(n){return n.variable}))},t.prototype.setMomentum=function(n){this.momentum=n},t.prototype.getWeights=function(){return ee(this,void 0,void 0,function(){return te(this,function(n){switch(n.label){case 0:return[4,this.saveIterations()];case 1:return[2,[n.sent()].concat(this.accumulations.map(function(r){return{name:r.originalName,tensor:r.variable}}))]}})})},t.prototype.setWeights=function(n){return ee(this,void 0,void 0,function(){return te(this,function(r){switch(r.label){case 0:return[4,this.extractIterations(n)];case 1:return n=r.sent(),this.accumulations=n.map(function(A){return{originalName:A.name,variable:A.tensor.variable(!1)}}),[2]}})})},t.prototype.getConfig=function(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}},t.fromConfig=function(n,r){return new n(r.learningRate,r.momentum,r.useNesterov)},t.className="Momentum",t}(RC);so(S4);var _4=function(e){function t(n,r,A,o,i){r===void 0&&(r=.9),A===void 0&&(A=0),o===void 0&&(o=null),i===void 0&&(i=!1);var a=e.call(this)||this;if(a.learningRate=n,a.decay=r,a.momentum=A,a.epsilon=o,a.accumulatedMeanSquares=[],a.accumulatedMoments=[],a.accumulatedMeanGrads=[],a.centered=i,o==null&&(a.epsilon=k.backend.epsilon()),n==null)throw new Error("learningRate for RMSPropOptimizer must be defined.");return a}return Vn(t,e),t.prototype.applyGradients=function(n){var r=this;(Array.isArray(n)?n.map(function(A){return A.name}):Object.keys(n)).forEach(function(A,o){var i=k.registeredVariables[A];r.accumulatedMeanSquares[o]==null&&(r.accumulatedMeanSquares[o]={originalName:A+"/rms",variable:J(function(){return ye(i).variable(!1)})}),r.accumulatedMoments[o]==null&&(r.accumulatedMoments[o]={originalName:A+"/momentum",variable:J(function(){return ye(i).variable(!1)})}),r.accumulatedMeanGrads[o]==null&&r.centered&&(r.accumulatedMeanGrads[o]={originalName:A+"/mg",variable:J(function(){return ye(i).variable(!1)})});var a=Array.isArray(n)?n[o].tensor:n[A];if(a!=null){var s=r.accumulatedMeanSquares[o].variable,u=r.accumulatedMoments[o].variable;J(function(){var l=s.mul(r.decay).add(a.square().mul(1-r.decay));if(r.centered){var c=r.accumulatedMeanGrads[o].variable,f=c.mul(r.decay).add(a.mul(1-r.decay)),h=u.mul(r.momentum).add(a.mul(r.learningRate).div(l.sub(f.square().add(r.epsilon)).sqrt()));s.assign(l),c.assign(f),u.assign(h);var d=i.sub(h);i.assign(d)}else{var g=s.mul(r.decay).add(a.square().mul(1-r.decay));h=u.mul(r.momentum).add(a.mul(r.learningRate).div(g.add(r.epsilon).sqrt())),s.assign(g),u.assign(h),d=i.sub(h),i.assign(d)}})}}),this.incrementIterations()},t.prototype.dispose=function(){this.accumulatedMeanSquares!=null&&en(this.accumulatedMeanSquares.map(function(n){return n.variable})),this.accumulatedMeanGrads!=null&&this.centered&&en(this.accumulatedMeanGrads.map(function(n){return n.variable})),this.accumulatedMoments!=null&&en(this.accumulatedMoments.map(function(n){return n.variable}))},t.prototype.getWeights=function(){return ee(this,void 0,void 0,function(){var n;return te(this,function(r){switch(r.label){case 0:return n=this.accumulatedMeanSquares.concat(this.accumulatedMoments),this.centered&&n.push.apply(n,this.accumulatedMeanGrads),[4,this.saveIterations()];case 1:return[2,[r.sent()].concat(n.map(function(A){return{name:A.originalName,tensor:A.variable}}))]}})})},t.prototype.setWeights=function(n){return ee(this,void 0,void 0,function(){var r;return te(this,function(A){switch(A.label){case 0:return[4,this.extractIterations(n)];case 1:return n=A.sent(),r=this.centered?n.length/3:n.length/2,this.accumulatedMeanSquares=n.slice(0,r).map(function(o){return{originalName:o.name,variable:o.tensor.variable(!1)}}),this.accumulatedMoments=n.slice(r,2*r).map(function(o){return{originalName:o.name,variable:o.tensor.variable(!1)}}),this.centered&&(this.accumulatedMeanGrads=n.slice(2*r,3*r).map(function(o){return{originalName:o.name,variable:o.tensor.variable(!1)}})),[2]}})})},t.prototype.getConfig=function(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}},t.fromConfig=function(n,r){return new n(r.learningRate,r.decay,r.momentum,r.epsilon,r.centered)},t.className="RMSProp",t}(uo);so(_4);Ke.prototype.squaredDifference=function(e){return jy(this,e)},M=r4;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Jh=function(e,t){return Jh=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var A in r)r.hasOwnProperty(A)&&(n[A]=r[A])},Jh(e,t)};function ce(e,t){Jh(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var Dt=function(){return Dt=Object.assign||function(t){for(var n,r=1,A=arguments.length;r<A;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},Dt.apply(this,arguments)};function Ae(e,t,n,r){function A(o){return o instanceof n?o:new n(function(i){i(o)})}return new(n||(n=Promise))(function(o,i){function a(l){try{u(r.next(l))}catch(c){i(c)}}function s(l){try{u(r.throw(l))}catch(c){i(c)}}function u(l){l.done?o(l.value):A(l.value).then(a,s)}u((r=r.apply(e,[])).next())})}function oe(e,t){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,A,o,i;return i={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function a(u){return function(l){return s([u,l])}}function s(u){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,A&&(o=u[0]&2?A.return:u[0]?A.throw||((o=A.return)&&o.call(A),0):A.next)&&!(o=o.call(A,u[1])).done)return o;switch(A=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return n.label++,{value:u[1],done:!1};case 5:n.label++,A=u[1],u=[0];continue;case 7:u=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){n=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){n.label=u[1];break}if(u[0]===6&&n.label<o[1]){n.label=o[1],o=u;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(u);break}o[2]&&n.ops.pop(),n.trys.pop();continue}u=t.call(e,n)}catch(l){u=[6,l],A=0}finally{r=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function aa(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var r=Array(e),A=0,t=0;t<n;t++)for(var o=arguments[t],i=0,a=o.length;i<a;i++,A++)r[A]=o[i];return r}var ni=function(){function e(t,n){if(!XA(t)||!XA(n))throw new Error("Dimensions.constructor - expected width and height to be valid numbers, instead have "+JSON.stringify({width:t,height:n}));this._width=t,this._height=n}return Object.defineProperty(e.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),e.prototype.reverse=function(){return new e(1/this.width,1/this.height)},e}();function $l(e,t){return e instanceof Ke&&e.shape.length===t}function k4(e){return $l(e,2)}function jl(e){return $l(e,3)}function vA(e){return $l(e,4)}function D4(e){return e%1!==0}function Im(e){return e%2===0}function R4(e,t){t===void 0&&(t=2);var n=Math.pow(10,t);return Math.floor(e*n)/n}function Sm(e){return e&&e.width&&e.height}function T4(e,t){var n=e.width,r=e.height,A=t/Math.max(r,n);return new ni(Math.round(n*A),Math.round(r*A))}function $p(e){return e.reduce(function(t,n){return t.add(n)},new be(0,0)).div(new be(e.length,e.length))}function Ta(e,t,n){return Array(e).fill(0).map(function(r,A){return t+A*n})}function XA(e){return!!e&&e!==1/0&&e!==-1/0&&!isNaN(e)||e===0}function _m(e){return XA(e)&&0<=e&&e<=1}var be=function(){function e(t,n){this._x=t,this._y=n}return Object.defineProperty(e.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),e.prototype.add=function(t){return new e(this.x+t.x,this.y+t.y)},e.prototype.sub=function(t){return new e(this.x-t.x,this.y-t.y)},e.prototype.mul=function(t){return new e(this.x*t.x,this.y*t.y)},e.prototype.div=function(t){return new e(this.x/t.x,this.y/t.y)},e.prototype.abs=function(){return new e(Math.abs(this.x),Math.abs(this.y))},e.prototype.magnitude=function(){return Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2))},e.prototype.floor=function(){return new e(Math.floor(this.x),Math.floor(this.y))},e}(),xA=function(){function e(t,n){n===void 0&&(n=!0);var r=t||{},A=[r.left,r.top,r.right,r.bottom].every(XA),o=[r.x,r.y,r.width,r.height].every(XA);if(!o&&!A)throw new Error("Box.constructor - expected box to be IBoundingBox | IRect, instead have "+JSON.stringify(r));var i=o?[r.x,r.y,r.width,r.height]:[r.left,r.top,r.right-r.left,r.bottom-r.top],a=i[0],s=i[1],u=i[2],l=i[3];e.assertIsValidBox({x:a,y:s,width:u,height:l},"Box.constructor",n),this._x=a,this._y=s,this._width=u,this._height=l}return e.isRect=function(t){return!!t&&[t.x,t.y,t.width,t.height].every(XA)},e.assertIsValidBox=function(t,n,r){if(r===void 0&&(r=!1),!e.isRect(t))throw new Error(n+" - invalid box: "+JSON.stringify(t)+", expected object with properties x, y, width, height");if(!r&&(t.width<0||t.height<0))throw new Error(n+" - width ("+t.width+") and height ("+t.height+") must be positive numbers")},Object.defineProperty(e.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"left",{get:function(){return this.x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"top",{get:function(){return this.y},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){return this.x+this.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"area",{get:function(){return this.width*this.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"topLeft",{get:function(){return new be(this.left,this.top)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"topRight",{get:function(){return new be(this.right,this.top)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottomLeft",{get:function(){return new be(this.left,this.bottom)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottomRight",{get:function(){return new be(this.right,this.bottom)},enumerable:!0,configurable:!0}),e.prototype.round=function(){var t=[this.x,this.y,this.width,this.height].map(function(i){return Math.round(i)}),n=t[0],r=t[1],A=t[2],o=t[3];return new e({x:n,y:r,width:A,height:o})},e.prototype.floor=function(){var t=[this.x,this.y,this.width,this.height].map(function(i){return Math.floor(i)}),n=t[0],r=t[1],A=t[2],o=t[3];return new e({x:n,y:r,width:A,height:o})},e.prototype.toSquare=function(){var t=this,n=t.x,r=t.y,A=t.width,o=t.height,i=Math.abs(A-o);return A<o&&(n-=i/2,A+=i),o<A&&(r-=i/2,o+=i),new e({x:n,y:r,width:A,height:o})},e.prototype.rescale=function(t){var n=Sm(t)?t.width:t,r=Sm(t)?t.height:t;return new e({x:this.x*n,y:this.y*r,width:this.width*n,height:this.height*r})},e.prototype.pad=function(t,n){var r=[this.x-t/2,this.y-n/2,this.width+t,this.height+n],A=r[0],o=r[1],i=r[2],a=r[3];return new e({x:A,y:o,width:i,height:a})},e.prototype.clipAtImageBorders=function(t,n){var r=this,A=r.x,o=r.y,i=r.right,a=r.bottom,s=Math.max(A,0),u=Math.max(o,0),l=i-s,c=a-u,f=Math.min(l,t-s),h=Math.min(c,n-u);return new e({x:s,y:u,width:f,height:h}).floor()},e.prototype.shift=function(t,n){var r=this,A=r.width,o=r.height,i=this.x+t,a=this.y+n;return new e({x:i,y:a,width:A,height:o})},e.prototype.padAtBorders=function(t,n){var r=this.width+1,A=this.height+1,o=1,i=1,a=r,s=A,u=this.left,l=this.top,c=this.right,f=this.bottom;return c>n&&(a=-c+n+r,c=n),f>t&&(s=-f+t+A,f=t),u<1&&(s=2-u,u=1),l<1&&(s=2-l,l=1),{dy:i,edy:s,dx:o,edx:a,y:l,ey:f,x:u,ex:c,w:r,h:A}},e.prototype.calibrate=function(t){return new e({left:this.left+t.left*this.width,top:this.top+t.top*this.height,right:this.right+t.right*this.width,bottom:this.bottom+t.bottom*this.height}).toSquare().round()},e}(),Yl=function(e){ce(t,e);function t(n,r,A,o,i){return i===void 0&&(i=!1),e.call(this,{left:n,top:r,right:A,bottom:o},i)||this}return t}(xA),TC=function(){function e(t,n,r,A,o){this._imageDims=new ni(o.width,o.height),this._score=t,this._classScore=n,this._className=r,this._box=new xA(A).rescale(this._imageDims)}return Object.defineProperty(e.prototype,"score",{get:function(){return this._score},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"classScore",{get:function(){return this._classScore},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"className",{get:function(){return this._className},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"box",{get:function(){return this._box},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageDims",{get:function(){return this._imageDims},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageWidth",{get:function(){return this.imageDims.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageHeight",{get:function(){return this.imageDims.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"relativeBox",{get:function(){return new xA(this._box).rescale(this.imageDims.reverse())},enumerable:!0,configurable:!0}),e.prototype.forSize=function(t,n){return new e(this.score,this.classScore,this.className,this.relativeBox,{width:t,height:n})},e}(),dr=function(e){ce(t,e);function t(n,r,A){return e.call(this,n,n,"",r,A)||this}return t.prototype.forSize=function(n,r){var A=e.prototype.forSize.call(this,n,r),o=A.score,i=A.relativeBox,a=A.imageDims;return new t(o,i,a)},t}(TC);function H4(e,t,n){n===void 0&&(n=!0);var r=Math.max(0,Math.min(e.right,t.right)-Math.max(e.left,t.left)),A=Math.max(0,Math.min(e.bottom,t.bottom)-Math.max(e.top,t.top)),o=r*A;return n?o/(e.area+t.area-o):o/Math.min(e.area,t.area)}function N4(e){var t=e.map(function(a){return a.x}),n=e.map(function(a){return a.y}),r=t.reduce(function(a,s){return s<a?s:a},1/0),A=n.reduce(function(a,s){return s<a?s:a},1/0),o=t.reduce(function(a,s){return a<s?s:a},0),i=n.reduce(function(a,s){return a<s?s:a},0);return new Yl(r,A,o,i)}function Ha(e,t,n,r){r===void 0&&(r=!0);for(var A=t.map(function(a,s){return{score:a,boxIndex:s}}).sort(function(a,s){return a.score-s.score}).map(function(a){return a.boxIndex}),o=[],i=function(){var a=A.pop();o.push(a);for(var s=A,u=[],l=0;l<s.length;l++){var c=s[l],f=e[a],h=e[c];u.push(H4(f,h,r))}A=A.filter(function(d,g){return u[g]<=n})};A.length>0;)i();return o}function Za(e,t){return J(function(){var n=t[0],r=t[1],A=t[2],o=ur(aa(e.shape.slice(0,3),[1]),n),i=ur(aa(e.shape.slice(0,3),[1]),r),a=ur(aa(e.shape.slice(0,3),[1]),A),s=st([o,i,a],3);return ct(e,s)})}function L4(e,t){return t===void 0&&(t=!1),J(function(){var n=e.shape.slice(1),r=n[0],A=n[1];if(r===A)return e;var o=Math.abs(r-A),i=Math.round(o*(t?.5:1)),a=r>A?2:1,s=function(h){var d=e.shape.slice();return d[a]=h,ur(d,0)},u=s(i),l=o-u.shape[a],c=t&&l?s(l):null,f=[c,e,u].filter(function(h){return!!h}).map(function(h){return h.toFloat()});return st(f,a)})}function hf(e){return 1/(1+Math.exp(-e))}var jp=function(e){ce(t,e);function t(n,r,A,o,i){return i===void 0&&(i=!1),e.call(this,{x:n,y:r,width:A,height:o},i)||this}return t}(xA),M4=.5,O4=.43,P4=.45,ul=function(){function e(t,n,r){r===void 0&&(r=new be(0,0));var A=n.width,o=n.height;this._imgDims=new ni(A,o),this._shift=r,this._positions=t.map(function(i){return i.mul(new be(A,o)).add(r)})}return Object.defineProperty(e.prototype,"shift",{get:function(){return new be(this._shift.x,this._shift.y)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageWidth",{get:function(){return this._imgDims.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageHeight",{get:function(){return this._imgDims.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"positions",{get:function(){return this._positions},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"relativePositions",{get:function(){var t=this;return this._positions.map(function(n){return n.sub(t._shift).div(new be(t.imageWidth,t.imageHeight))})},enumerable:!0,configurable:!0}),e.prototype.forSize=function(t,n){return new this.constructor(this.relativePositions,{width:t,height:n})},e.prototype.shiftBy=function(t,n){return new this.constructor(this.relativePositions,this._imgDims,new be(t,n))},e.prototype.shiftByPoint=function(t){return this.shiftBy(t.x,t.y)},e.prototype.align=function(t,n){if(n===void 0&&(n={}),t){var r=t instanceof dr?t.box.floor():new xA(t);return this.shiftBy(r.x,r.y).align(null,n)}var A=Object.assign({},{useDlibAlignment:!1,minBoxPadding:.2},n),o=A.useDlibAlignment,i=A.minBoxPadding;return o?this.alignDlib():this.alignMinBbox(i)},e.prototype.alignDlib=function(){var t=this.getRefPointsForAlignment(),n=t[0],r=t[1],A=t[2],o=function(c){return A.sub(c).magnitude()},i=(o(n)+o(r))/2,a=Math.floor(i/P4),s=$p(t),u=Math.floor(Math.max(0,s.x-M4*a)),l=Math.floor(Math.max(0,s.y-O4*a));return new jp(u,l,Math.min(a,this.imageWidth+u),Math.min(a,this.imageHeight+l))},e.prototype.alignMinBbox=function(t){var n=N4(this.positions);return n.pad(n.width*t,n.height*t)},e.prototype.getRefPointsForAlignment=function(){throw new Error("getRefPointsForAlignment not implemented by base class")},e}(),K4=function(e){ce(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getRefPointsForAlignment=function(){var n=this.positions;return[n[0],n[1],$p([n[3],n[4]])]},t}(ul),V4=function(e){ce(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getJawOutline=function(){return this.positions.slice(0,17)},t.prototype.getLeftEyeBrow=function(){return this.positions.slice(17,22)},t.prototype.getRightEyeBrow=function(){return this.positions.slice(22,27)},t.prototype.getNose=function(){return this.positions.slice(27,36)},t.prototype.getLeftEye=function(){return this.positions.slice(36,42)},t.prototype.getRightEye=function(){return this.positions.slice(42,48)},t.prototype.getMouth=function(){return this.positions.slice(48,68)},t.prototype.getRefPointsForAlignment=function(){return[this.getLeftEye(),this.getRightEye(),this.getMouth()].map($p)},t}(ul),km=function(){function e(t,n){this._label=t,this._distance=n}return Object.defineProperty(e.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"distance",{get:function(){return this._distance},enumerable:!0,configurable:!0}),e.prototype.toString=function(t){return t===void 0&&(t=!0),""+this.label+(t?" ("+R4(this.distance)+")":"")},e}(),Dm=function(e){ce(t,e);function t(n,r){var A=e.call(this,n)||this;return A._label=r,A}return t.assertIsValidLabeledBox=function(n,r){if(xA.assertIsValidBox(n,r),!XA(n.label))throw new Error(r+" - expected property label ("+n.label+") to be a number")},Object.defineProperty(t.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),t}(xA),Is=function(){function e(t,n){if(typeof t!="string")throw new Error("LabeledFaceDescriptors - constructor expected label to be a string");if(!Array.isArray(n)||n.some(function(r){return!(r instanceof Float32Array)}))throw new Error("LabeledFaceDescriptors - constructor expected descriptors to be an array of Float32Array");this._label=t,this._descriptors=n}return Object.defineProperty(e.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"descriptors",{get:function(){return this._descriptors},enumerable:!0,configurable:!0}),e.prototype.toJSON=function(){return{label:this.label,descriptors:this.descriptors.map(function(t){return Array.from(t)})}},e.fromJSON=function(t){var n=t.descriptors.map(function(r){return new Float32Array(r)});return new e(t.label,n)},e}();(function(e){ce(t,e);function t(n,r,A,o){var i=e.call(this,n,r)||this;return i._score=A,i._classScore=o,i}return t.assertIsValidPredictedBox=function(n,r){if(Dm.assertIsValidLabeledBox(n,r),!_m(n.score)||!_m(n.classScore))throw new Error(r+" - expected properties score ("+n.score+") and ("+n.classScore+") to be a number between [0, 1]")},Object.defineProperty(t.prototype,"score",{get:function(){return this._score},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"classScore",{get:function(){return this._classScore},enumerable:!0,configurable:!0}),t})(Dm);function W4(e){return e.detection instanceof dr}function Yp(e,t){var n={detection:t};return Object.assign({},e,n)}function HC(){var e=window.fetch||function(){throw new Error("fetch - missing fetch implementation for browser environment")},t=function(){throw new Error("readFile - filesystem not available for browser environment")};return{Canvas:HTMLCanvasElement,CanvasRenderingContext2D,Image:HTMLImageElement,ImageData,Video:HTMLVideoElement,createCanvasElement:function(){return document.createElement("canvas")},createImageElement:function(){return document.createElement("img")},fetch:e,readFile:t}}function NC(e){var t="";if(!e)try{e=require("fs")}catch(r){t=r.toString()}var n=e?function(r){return new Promise(function(A,o){e.readFile(r,function(i,a){return i?o(i):A(a)})})}:function(){throw new Error("readFile - failed to require fs in nodejs environment with error: "+t)};return{readFile:n}}function LC(){var e=global.Canvas||global.HTMLCanvasElement,t=global.Image||global.HTMLImageElement,n=function(){if(e)return new e;throw new Error("createCanvasElement - missing Canvas implementation for nodejs environment")},r=function(){if(t)return new t;throw new Error("createImageElement - missing Image implementation for nodejs environment")},A=global.fetch||function(){throw new Error("fetch - missing fetch implementation for nodejs environment")},o=NC();return Dt({Canvas:e||function(){function i(){}return i}(),CanvasRenderingContext2D:global.CanvasRenderingContext2D||function(){function i(){}return i}(),Image:t||function(){function i(){}return i}(),ImageData:global.ImageData||function(){function i(){}return i}(),Video:global.HTMLVideoElement||function(){function i(){}return i}(),createCanvasElement:n,createImageElement:r,fetch:A},o)}function MC(){return typeof window=="object"&&typeof document<"u"&&typeof HTMLImageElement<"u"&&typeof HTMLCanvasElement<"u"&&typeof HTMLVideoElement<"u"&&typeof ImageData<"u"&&typeof CanvasRenderingContext2D<"u"}function OC(){return typeof global=="object"&&typeof require=="function"&&typeof yx<"u"&&typeof process<"u"&&!!process.version}var At;function G4(){if(!At)throw new Error("getEnv - environment is not defined, check isNodejs() and isBrowser()");return At}function Zh(e){At=e}function qp(){MC()&&Zh(HC()),OC()&&Zh(LC())}function z4(e){if(At||qp(),!At)throw new Error("monkeyPatch - environment is not defined, check isNodejs() and isBrowser()");var t=e.Canvas,n=t===void 0?At.Canvas:t,r=e.Image,A=r===void 0?At.Image:r;At.Canvas=n,At.Image=A,At.createCanvasElement=e.createCanvasElement||function(){return new n},At.createImageElement=e.createImageElement||function(){return new A},At.ImageData=e.ImageData||At.ImageData,At.Video=e.Video||At.Video,At.fetch=e.fetch||At.fetch,At.readFile=e.readFile||At.readFile}var Lt={getEnv:G4,setEnv:Zh,initialize:qp,createBrowserEnv:HC,createFileSystem:NC,createNodejsEnv:LC,monkeyPatch:z4,isBrowser:MC,isNodejs:OC};qp();function PC(e){return!Lt.isNodejs()&&typeof e=="string"?document.getElementById(e):e}function no(e){var t=Lt.getEnv(),n=t.Canvas,r=t.CanvasRenderingContext2D;if(e instanceof r)return e;var A=PC(e);if(!(A instanceof n))throw new Error("resolveContext2d - expected canvas to be of instance of Canvas");var o=A.getContext("2d");if(!o)throw new Error("resolveContext2d - canvas 2d context is null");return o}var Rm;(function(e){e.TOP_LEFT="TOP_LEFT",e.TOP_RIGHT="TOP_RIGHT",e.BOTTOM_LEFT="BOTTOM_LEFT",e.BOTTOM_RIGHT="BOTTOM_RIGHT"})(Rm||(Rm={}));function KC(e){var t=Lt.getEnv(),n=t.Image,r=t.Video;return e instanceof n&&e.complete||e instanceof r&&e.readyState>=3}function X4(e){return new Promise(function(t,n){if(e instanceof Lt.getEnv().Canvas||KC(e))return t();function r(o){o.currentTarget&&(o.currentTarget.removeEventListener("load",r),o.currentTarget.removeEventListener("error",A),t(o))}function A(o){o.currentTarget&&(o.currentTarget.removeEventListener("load",r),o.currentTarget.removeEventListener("error",A),n(o))}e.addEventListener("load",r),e.addEventListener("error",A)})}function VC(e){var t=Lt.getEnv(),n=t.Image,r=t.Video;return e instanceof n?new ni(e.naturalWidth,e.naturalHeight):e instanceof r?new ni(e.videoWidth,e.videoHeight):new ni(e.width,e.height)}function ql(e){var t=e.width,n=e.height,r=Lt.getEnv().createCanvasElement,A=r();return A.width=t,A.height=n,A}function Jp(e,t){var n=Lt.getEnv().ImageData;if(!(e instanceof n)&&!KC(e))throw new Error("createCanvasFromMedia - media has not finished loading yet");var r=VC(e),A=r.width,o=r.height,i=ql({width:A,height:o});return e instanceof n?no(i).putImageData(e,0,0):no(i).drawImage(e,0,0,A,o),i}function $4(e,t){return Ae(this,void 0,void 0,function(){var n,r,A,o,i,a;return oe(this,function(s){switch(s.label){case 0:return n=Lt.getEnv().createCanvasElement(),r=e.shape.slice(vA(e)?1:0),A=r[0],o=r[1],i=r[2],a=J(function(){return e.as3D(A,o,i).toInt()}),[4,Xp.toPixels(a,n)];case 1:return s.sent(),a.dispose(),[2,n]}})})}function Tm(e){var t=Lt.getEnv(),n=t.Image,r=t.Canvas,A=t.Video;return e instanceof n||e instanceof r||e instanceof A}function j4(e,t,n){n===void 0&&(n=!1);var r=Lt.getEnv(),A=r.Image,o=r.Canvas;if(!(e instanceof A||e instanceof o))throw new Error("imageToSquare - expected arg0 to be HTMLImageElement | HTMLCanvasElement");var i=VC(e),a=t/Math.max(i.height,i.width),s=a*i.width,u=a*i.height,l=ql({width:t,height:t}),c=e instanceof o?e:Jp(e),f=Math.abs(s-u)/2,h=n&&s<u?f:0,d=n&&u<s?f:0;return no(l).drawImage(c,h,d,s,u),l}var ll=function(){function e(t,n){var r=this;if(n===void 0&&(n=!1),this._imageTensors=[],this._canvases=[],this._treatAsBatchInput=!1,this._inputDimensions=[],!Array.isArray(t))throw new Error("NetInput.constructor - expected inputs to be an Array of TResolvedNetInput or to be instanceof tf.Tensor4D, instead have "+t);this._treatAsBatchInput=n,this._batchSize=t.length,t.forEach(function(A,o){if(jl(A)){r._imageTensors[o]=A,r._inputDimensions[o]=A.shape;return}if(vA(A)){var i=A.shape[0];if(i!==1)throw new Error("NetInput - tf.Tensor4D with batchSize "+i+" passed, but not supported in input array");r._imageTensors[o]=A,r._inputDimensions[o]=A.shape.slice(1);return}var a=A instanceof Lt.getEnv().Canvas?A:Jp(A);r._canvases[o]=a,r._inputDimensions[o]=[a.height,a.width,3]})}return Object.defineProperty(e.prototype,"imageTensors",{get:function(){return this._imageTensors},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canvases",{get:function(){return this._canvases},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isBatchInput",{get:function(){return this.batchSize>1||this._treatAsBatchInput},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"batchSize",{get:function(){return this._batchSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inputDimensions",{get:function(){return this._inputDimensions},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inputSize",{get:function(){return this._inputSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"reshapedInputDimensions",{get:function(){var t=this;return Ta(this.batchSize,0,1).map(function(n,r){return t.getReshapedInputDimensions(r)})},enumerable:!0,configurable:!0}),e.prototype.getInput=function(t){return this.canvases[t]||this.imageTensors[t]},e.prototype.getInputDimensions=function(t){return this._inputDimensions[t]},e.prototype.getInputHeight=function(t){return this._inputDimensions[t][0]},e.prototype.getInputWidth=function(t){return this._inputDimensions[t][1]},e.prototype.getReshapedInputDimensions=function(t){if(typeof this.inputSize!="number")throw new Error("getReshapedInputDimensions - inputSize not set, toBatchTensor has not been called yet");var n=this.getInputWidth(t),r=this.getInputHeight(t);return T4({width:n,height:r},this.inputSize)},e.prototype.toBatchTensor=function(t,n){var r=this;return n===void 0&&(n=!0),this._inputSize=t,J(function(){var A=Ta(r.batchSize,0,1).map(function(i){var a=r.getInput(i);if(a instanceof Ke){var s=vA(a)?a:a.expandDims();return s=L4(s,n),(s.shape[1]!==t||s.shape[2]!==t)&&(s=Pp.resizeBilinear(s,[t,t])),s.as3D(t,t,3)}if(a instanceof Lt.getEnv().Canvas)return Xp.fromPixels(j4(a,t,n));throw new Error("toBatchTensor - at batchIdx "+i+", expected input to be instanceof tf.Tensor or instanceof HTMLCanvasElement, instead have "+a)}),o=dn(A.map(function(i){return i.toFloat()})).as4D(r.batchSize,t,t,3);return o})},e}();function mt(e){return Ae(this,void 0,void 0,function(){var t,n,r;return oe(this,function(A){switch(A.label){case 0:if(e instanceof ll)return[2,e];if(t=Array.isArray(e)?e:[e],!t.length)throw new Error("toNetInput - empty array passed as input");return n=function(o){return Array.isArray(e)?" at input index "+o+":":""},r=t.map(PC),r.forEach(function(o,i){if(!Tm(o)&&!jl(o)&&!vA(o))throw typeof t[i]=="string"?new Error("toNetInput -"+n(i)+" string passed, but could not resolve HTMLElement for element id "+t[i]):new Error("toNetInput -"+n(i)+" expected media to be of type HTMLImageElement | HTMLVideoElement | HTMLCanvasElement | tf.Tensor3D, or to be an element id");if(vA(o)){var a=o.shape[0];if(a!==1)throw new Error("toNetInput -"+n(i)+" tf.Tensor4D with batchSize "+a+" passed, but not supported in input array")}}),[4,Promise.all(r.map(function(o){return Tm(o)&&X4(o)}))];case 1:return A.sent(),[2,new ll(r,Array.isArray(e))]}})})}function Zp(e,t){return Ae(this,void 0,void 0,function(){var n,r,A,o,i,a,s;return oe(this,function(u){switch(u.label){case 0:return n=Lt.getEnv().Canvas,r=e,e instanceof n?[3,5]:[4,mt(e)];case 1:if(A=u.sent(),A.batchSize>1)throw new Error("extractFaces - batchSize > 1 not supported");return o=A.getInput(0),o instanceof n?(i=o,[3,4]):[3,2];case 2:return[4,$4(o)];case 3:i=u.sent(),u.label=4;case 4:r=i,u.label=5;case 5:return a=no(r),s=t.map(function(l){return l instanceof dr?l.forSize(r.width,r.height).box.floor():l}).map(function(l){return l.clipAtImageBorders(r.width,r.height)}),[2,s.map(function(l){var c=l.x,f=l.y,h=l.width,d=l.height,g=ql({width:h,height:d});return no(g).putImageData(a.getImageData(c,f,h,d),0,0),g})]}})})}function eg(e,t){return Ae(this,void 0,void 0,function(){return oe(this,function(n){if(!jl(e)&&!vA(e))throw new Error("extractFaceTensors - expected image tensor to be 3D or 4D");if(vA(e)&&e.shape[0]>1)throw new Error("extractFaceTensors - batchSize > 1 not supported");return[2,J(function(){var r=e.shape.slice(vA(e)?1:0),A=r[0],o=r[1],i=r[2],a=t.map(function(u){return u instanceof dr?u.forSize(o,A).box:u}).map(function(u){return u.clipAtImageBorders(o,A)}),s=a.map(function(u){var l=u.x,c=u.y,f=u.width,h=u.height;return gC(e.as3D(A,o,i),[c,l,0],[h,f,i])});return s})]})})}function Y4(e,t){return Ae(this,void 0,void 0,function(){var n,r;return oe(this,function(A){switch(A.label){case 0:return n=Lt.getEnv().fetch,[4,n(e,t)];case 1:if(r=A.sent(),!(r.status<400))throw new Error("failed to fetch: ("+r.status+") "+r.statusText+", from url: "+r.url);return[2,r]}})})}function q4(e){return Ae(this,void 0,void 0,function(){return oe(this,function(t){switch(t.label){case 0:return[4,Y4(e)];case 1:return[2,t.sent().json()]}})})}function WC(e,t){var n=t+"-weights_manifest.json";if(!e)return{modelBaseUri:"",manifestUri:n};if(e==="/")return{modelBaseUri:"/",manifestUri:"/"+n};var r=e.startsWith("http://")?"http://":e.startsWith("https://")?"https://":"";e=e.replace(r,"");var A=e.split("/").filter(function(a){return a}),o=e.endsWith(".json")?A[A.length-1]:n,i=r+(e.endsWith(".json")?A.slice(0,A.length-1):A).join("/");return i=e.startsWith("/")?"/"+i:i,{modelBaseUri:i,manifestUri:i==="/"?"/"+o:i+"/"+o}}function J4(e,t){return Ae(this,void 0,void 0,function(){var n,r,A,o;return oe(this,function(i){switch(i.label){case 0:return n=WC(e,t),r=n.manifestUri,A=n.modelBaseUri,[4,q4(r)];case 1:return o=i.sent(),[2,DC.loadWeights(o,A)]}})})}var Or=function(){function e(t){this._name=t,this._params=void 0,this._paramMappings=[]}return Object.defineProperty(e.prototype,"params",{get:function(){return this._params},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"paramMappings",{get:function(){return this._paramMappings},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isLoaded",{get:function(){return!!this.params},enumerable:!0,configurable:!0}),e.prototype.getParamFromPath=function(t){var n=this.traversePropertyPath(t),r=n.obj,A=n.objProp;return r[A]},e.prototype.reassignParamFromPath=function(t,n){var r=this.traversePropertyPath(t),A=r.obj,o=r.objProp;A[o].dispose(),A[o]=n},e.prototype.getParamList=function(){var t=this;return this._paramMappings.map(function(n){var r=n.paramPath;return{path:r,tensor:t.getParamFromPath(r)}})},e.prototype.getTrainableParams=function(){return this.getParamList().filter(function(t){return t.tensor instanceof hi})},e.prototype.getFrozenParams=function(){return this.getParamList().filter(function(t){return!(t.tensor instanceof hi)})},e.prototype.variable=function(){var t=this;this.getFrozenParams().forEach(function(n){var r=n.path,A=n.tensor;t.reassignParamFromPath(r,A.variable())})},e.prototype.freeze=function(){var t=this;this.getTrainableParams().forEach(function(n){var r=n.path,A=n.tensor,o=xt(A.dataSync());A.dispose(),t.reassignParamFromPath(r,o)})},e.prototype.dispose=function(t){t===void 0&&(t=!0),this.getParamList().forEach(function(n){if(t&&n.tensor.isDisposed)throw new Error("param tensor has already been disposed for path "+n.path);n.tensor.dispose()}),this._params=void 0},e.prototype.serializeParams=function(){return new Float32Array(this.getParamList().map(function(t){var n=t.tensor;return Array.from(n.dataSync())}).reduce(function(t,n){return t.concat(n)}))},e.prototype.load=function(t){return Ae(this,void 0,void 0,function(){return oe(this,function(n){switch(n.label){case 0:return t instanceof Float32Array?(this.extractWeights(t),[2]):[4,this.loadFromUri(t)];case 1:return n.sent(),[2]}})})},e.prototype.loadFromUri=function(t){return Ae(this,void 0,void 0,function(){var n;return oe(this,function(r){switch(r.label){case 0:if(t&&typeof t!="string")throw new Error(this._name+".loadFromUri - expected model uri");return[4,J4(t,this.getDefaultModelName())];case 1:return n=r.sent(),this.loadFromWeightMap(n),[2]}})})},e.prototype.loadFromDisk=function(t){return Ae(this,void 0,void 0,function(){var n,r,A,o,i,a,s,u,l,c;return oe(this,function(f){switch(f.label){case 0:if(t&&typeof t!="string")throw new Error(this._name+".loadFromDisk - expected model file path");return n=Lt.getEnv().readFile,r=WC(t,this.getDefaultModelName()),A=r.manifestUri,o=r.modelBaseUri,i=function(h){return Promise.all(h.map(function(d){return n(d).then(function(g){return g.buffer})}))},a=DC.weightsLoaderFactory(i),l=(u=JSON).parse,[4,n(A)];case 1:return s=l.apply(u,[f.sent().toString()]),[4,a(s,o)];case 2:return c=f.sent(),this.loadFromWeightMap(c),[2]}})})},e.prototype.loadFromWeightMap=function(t){var n=this.extractParamsFromWeigthMap(t),r=n.paramMappings,A=n.params;this._paramMappings=r,this._params=A},e.prototype.extractWeights=function(t){var n=this.extractParams(t),r=n.paramMappings,A=n.params;this._paramMappings=r,this._params=A},e.prototype.traversePropertyPath=function(t){if(!this.params)throw new Error("traversePropertyPath - model has no loaded params");var n=t.split("/").reduce(function(o,i){if(!o.nextObj.hasOwnProperty(i))throw new Error("traversePropertyPath - object does not have property "+i+", for path "+t);return{obj:o.nextObj,objProp:i,nextObj:o.nextObj[i]}},{nextObj:this.params}),r=n.obj,A=n.objProp;if(!r||!A||!(r[A]instanceof Ke))throw new Error("traversePropertyPath - parameter is not a tensor, for path "+t);return{obj:r,objProp:A}},e}();function fn(e,t,n){return J(function(){var r=Hp(e,t.depthwise_filter,t.pointwise_filter,n,"same");return r=de(r,t.bias),r})}function df(e,t,n){return n===void 0&&(n=!1),J(function(){var r=Ve(n?de(_n(e,t.conv0.filters,[2,2],"same"),t.conv0.bias):fn(e,t.conv0,[2,2])),A=fn(r,t.conv1,[1,1]),o=Ve(de(r,A)),i=fn(o,t.conv2,[1,1]);return Ve(de(r,de(A,i)))})}function Ss(e,t,n,r){return n===void 0&&(n=!1),r===void 0&&(r=!0),J(function(){var A=Ve(n?de(_n(e,t.conv0.filters,r?[2,2]:[1,1],"same"),t.conv0.bias):fn(e,t.conv0,r?[2,2]:[1,1])),o=fn(A,t.conv1,[1,1]),i=Ve(de(A,o)),a=fn(i,t.conv2,[1,1]),s=Ve(de(A,de(o,a))),u=fn(s,t.conv3,[1,1]);return Ve(de(A,de(o,de(a,u))))})}function Pn(e,t,n,r){return n===void 0&&(n="same"),r===void 0&&(r=!1),J(function(){var A=de(_n(e,t.filters,[1,1],n),t.bias);return r?Ve(A):A})}function Pr(e,t){Object.keys(e).forEach(function(n){t.some(function(r){return r.originalPath===n})||e[n].dispose()})}function Jl(e,t){return function(n,r,A,o){var i=$t(e(n*r*A*A),[A,A,n,r]),a=rt(e(r));return t.push({paramPath:o+"/filters"},{paramPath:o+"/bias"}),{filters:i,bias:a}}}function tg(e,t){return function(n,r,A){var o=pA(e(n*r),[n,r]),i=rt(e(r));return t.push({paramPath:A+"/weights"},{paramPath:A+"/bias"}),{weights:o,bias:i}}}var GC=function(){function e(t,n,r){this.depthwise_filter=t,this.pointwise_filter=n,this.bias=r}return e}();function ng(e,t){return function(n,r,A){var o=$t(e(9*n),[3,3,n,1]),i=$t(e(n*r),[1,1,n,r]),a=rt(e(r));return t.push({paramPath:A+"/depthwise_filter"},{paramPath:A+"/pointwise_filter"},{paramPath:A+"/bias"}),new GC(o,i,a)}}function rg(e){return function(t){var n=e(t+"/depthwise_filter",4),r=e(t+"/pointwise_filter",4),A=e(t+"/bias",1);return new GC(n,r,A)}}function SA(e,t){return function(n,r,A){var o=e[n];if(!$l(o,r))throw new Error("expected weightMap["+n+"] to be a Tensor"+r+"D, instead have "+o);return t.push({originalPath:n,paramPath:A||n}),o}}function Kr(e){var t=e;function n(A){var o=t.slice(0,A);return t=t.slice(A),o}function r(){return t}return{extractWeights:n,getRemainingWeights:r}}function zC(e,t){var n=Jl(e,t),r=ng(e,t);function A(i,a,s,u){u===void 0&&(u=!1);var l=u?n(i,a,3,s+"/conv0"):r(i,a,s+"/conv0"),c=r(a,a,s+"/conv1"),f=r(a,a,s+"/conv2");return{conv0:l,conv1:c,conv2:f}}function o(i,a,s,u){u===void 0&&(u=!1);var l=A(i,a,s,u),c=l.conv0,f=l.conv1,h=l.conv2,d=r(a,a,s+"/conv3");return{conv0:c,conv1:f,conv2:h,conv3:d}}return{extractDenseBlock3Params:A,extractDenseBlock4Params:o}}function Z4(e){var t=[],n=Kr(e),r=n.extractWeights,A=n.getRemainingWeights,o=zC(r,t).extractDenseBlock4Params,i=o(3,32,"dense0",!0),a=o(32,64,"dense1"),s=o(64,128,"dense2"),u=o(128,256,"dense3");if(A().length!==0)throw new Error("weights remaing after extract: "+A().length);return{paramMappings:t,params:{dense0:i,dense1:a,dense2:s,dense3:u}}}function XC(e){return function(t){var n=e(t+"/filters",4),r=e(t+"/bias",1);return{filters:n,bias:r}}}function $C(e,t){var n=SA(e,t),r=XC(n),A=rg(n);function o(a,s){s===void 0&&(s=!1);var u=s?r(a+"/conv0"):A(a+"/conv0"),l=A(a+"/conv1"),c=A(a+"/conv2");return{conv0:u,conv1:l,conv2:c}}function i(a,s){s===void 0&&(s=!1);var u=s?r(a+"/conv0"):A(a+"/conv0"),l=A(a+"/conv1"),c=A(a+"/conv2"),f=A(a+"/conv3");return{conv0:u,conv1:l,conv2:c,conv3:f}}return{extractDenseBlock3Params:o,extractDenseBlock4Params:i}}function e_(e){var t=[],n=$C(e,t).extractDenseBlock4Params,r={dense0:n("dense0",!0),dense1:n("dense1"),dense2:n("dense2"),dense3:n("dense3")};return Pr(e,t),{params:r,paramMappings:t}}var jC=function(e){ce(t,e);function t(){return e.call(this,"FaceFeatureExtractor")||this}return t.prototype.forwardInput=function(n){var r=this.params;if(!r)throw new Error("FaceFeatureExtractor - load model before inference");return J(function(){var A=n.toBatchTensor(112,!0),o=[122.782,117.001,104.298],i=Za(A,o).div($(255)),a=Ss(i,r.dense0,!0);return a=Ss(a,r.dense1),a=Ss(a,r.dense2),a=Ss(a,r.dense3),a=qa(a,[7,7],[2,2],"valid"),a})},t.prototype.forward=function(n){return Ae(this,void 0,void 0,function(){var r;return oe(this,function(A){switch(A.label){case 0:return r=this.forwardInput,[4,mt(n)];case 1:return[2,r.apply(this,[A.sent()])]}})})},t.prototype.getDefaultModelName=function(){return"face_feature_extractor_model"},t.prototype.extractParamsFromWeigthMap=function(n){return e_(n)},t.prototype.extractParams=function(n){return Z4(n)},t}(Or);function Ar(e,t){return J(function(){return de(Gl(e,t.weights),t.bias)})}function t_(e,t,n){var r=[],A=Kr(e),o=A.extractWeights,i=A.getRemainingWeights,a=tg(o,r),s=a(t,n,"fc");if(i().length!==0)throw new Error("weights remaing after extract: "+i().length);return{paramMappings:r,params:{fc:s}}}function n_(e){var t=[],n=SA(e,t);function r(o){var i=n(o+"/weights",2),a=n(o+"/bias",1);return{weights:i,bias:a}}var A={fc:r("fc")};return Pr(e,t),{params:A,paramMappings:t}}function YC(e){var t={},n={};return Object.keys(e).forEach(function(r){var A=r.startsWith("fc")?n:t;A[r]=e[r]}),{featureExtractorMap:t,classifierMap:n}}var qC=function(e){ce(t,e);function t(n,r){var A=e.call(this,n)||this;return A._faceFeatureExtractor=r,A}return Object.defineProperty(t.prototype,"faceFeatureExtractor",{get:function(){return this._faceFeatureExtractor},enumerable:!0,configurable:!0}),t.prototype.runNet=function(n){var r=this,A=this.params;if(!A)throw new Error(this._name+" - load model before inference");return J(function(){var o=n instanceof ll?r.faceFeatureExtractor.forwardInput(n):n;return Ar(o.as2D(o.shape[0],-1),A.fc)})},t.prototype.dispose=function(n){n===void 0&&(n=!0),this.faceFeatureExtractor.dispose(n),e.prototype.dispose.call(this,n)},t.prototype.loadClassifierParams=function(n){var r=this.extractClassifierParams(n),A=r.params,o=r.paramMappings;this._params=A,this._paramMappings=o},t.prototype.extractClassifierParams=function(n){return t_(n,this.getClassifierChannelsIn(),this.getClassifierChannelsOut())},t.prototype.extractParamsFromWeigthMap=function(n){var r=YC(n),A=r.featureExtractorMap,o=r.classifierMap;return this.faceFeatureExtractor.loadFromWeightMap(A),n_(o)},t.prototype.extractParams=function(n){var r=this.getClassifierChannelsIn(),A=this.getClassifierChannelsOut(),o=A*r+A,i=n.slice(0,n.length-o),a=n.slice(n.length-o);return this.faceFeatureExtractor.extractWeights(i),this.extractClassifierParams(a)},t}(Or),Hm=["neutral","happy","sad","angry","fearful","disgusted","surprised"],r_=function(){function e(t){var n=this;if(t.length!==7)throw new Error("FaceExpressions.constructor - expected probabilities.length to be 7, have: "+t.length);Hm.forEach(function(r,A){n[r]=t[A]})}return e.prototype.asSortedArray=function(){var t=this;return Hm.map(function(n){return{expression:n,probability:t[n]}}).sort(function(n,r){return r.probability-n.probability})},e}(),A_=function(e){ce(t,e);function t(n){return n===void 0&&(n=new jC),e.call(this,"FaceExpressionNet",n)||this}return t.prototype.forwardInput=function(n){var r=this;return J(function(){return Lr(r.runNet(n))})},t.prototype.forward=function(n){return Ae(this,void 0,void 0,function(){var r;return oe(this,function(A){switch(A.label){case 0:return r=this.forwardInput,[4,mt(n)];case 1:return[2,r.apply(this,[A.sent()])]}})})},t.prototype.predictExpressions=function(n){return Ae(this,void 0,void 0,function(){var r,A,o,i,a=this;return oe(this,function(s){switch(s.label){case 0:return[4,mt(n)];case 1:return r=s.sent(),[4,this.forwardInput(r)];case 2:return A=s.sent(),[4,Promise.all(ut(A).map(function(u){return Ae(a,void 0,void 0,function(){var l;return oe(this,function(c){switch(c.label){case 0:return[4,u.data()];case 1:return l=c.sent(),u.dispose(),[2,l]}})})}))];case 3:return o=s.sent(),A.dispose(),i=o.map(function(u){return new r_(u)}),[2,r.isBatchInput?i:i[0]]}})})},t.prototype.getDefaultModelName=function(){return"face_expression_model"},t.prototype.getClassifierChannelsIn=function(){return 256},t.prototype.getClassifierChannelsOut=function(){return 7},t}(qC);function JC(e,t){var n={expressions:t};return Object.assign({},e,n)}function o_(e){return W4(e)&&e.landmarks instanceof ul&&e.unshiftedLandmarks instanceof ul&&e.alignedRect instanceof dr}function Ag(e,t){var n=e.detection.box,r=t.shiftBy(n.x,n.y),A=r.align(),o=e.detection.imageDims,i=new dr(e.detection.score,A.rescale(o.reverse()),o),a={landmarks:r,unshiftedLandmarks:t,alignedRect:i};return Object.assign({},e,a)}function i_(e,t){var n=Jl(e,t),r=ng(e,t);function A(i,a,s){var u=r(i,a,s+"/separable_conv0"),l=r(a,a,s+"/separable_conv1"),c=n(i,a,1,s+"/expansion_conv");return{separable_conv0:u,separable_conv1:l,expansion_conv:c}}function o(i,a){var s=r(i,i,a+"/separable_conv0"),u=r(i,i,a+"/separable_conv1"),l=r(i,i,a+"/separable_conv2");return{separable_conv0:s,separable_conv1:u,separable_conv2:l}}return{extractConvParams:n,extractSeparableConvParams:r,extractReductionBlockParams:A,extractMainBlockParams:o}}function a_(e,t){var n=[],r=Kr(e),A=r.extractWeights,o=r.getRemainingWeights,i=i_(A,n),a=i.extractConvParams,s=i.extractSeparableConvParams,u=i.extractReductionBlockParams,l=i.extractMainBlockParams,c=a(3,32,3,"entry_flow/conv_in"),f=u(32,64,"entry_flow/reduction_block_0"),h=u(64,128,"entry_flow/reduction_block_1"),d={conv_in:c,reduction_block_0:f,reduction_block_1:h},g={};Ta(t,0,1).forEach(function(w){g["main_block_"+w]=l(128,"middle_flow/main_block_"+w)});var m=u(128,256,"exit_flow/reduction_block"),p=s(256,512,"exit_flow/separable_conv"),v={reduction_block:m,separable_conv:p};if(o().length!==0)throw new Error("weights remaing after extract: "+o().length);return{paramMappings:n,params:{entry_flow:d,middle_flow:g,exit_flow:v}}}function s_(e,t){var n=SA(e,t),r=XC(n),A=rg(n);function o(a){var s=A(a+"/separable_conv0"),u=A(a+"/separable_conv1"),l=r(a+"/expansion_conv");return{separable_conv0:s,separable_conv1:u,expansion_conv:l}}function i(a){var s=A(a+"/separable_conv0"),u=A(a+"/separable_conv1"),l=A(a+"/separable_conv2");return{separable_conv0:s,separable_conv1:u,separable_conv2:l}}return{extractConvParams:r,extractSeparableConvParams:A,extractReductionBlockParams:o,extractMainBlockParams:i}}function u_(e,t){var n=[],r=s_(e,n),A=r.extractConvParams,o=r.extractSeparableConvParams,i=r.extractReductionBlockParams,a=r.extractMainBlockParams,s=A("entry_flow/conv_in"),u=i("entry_flow/reduction_block_0"),l=i("entry_flow/reduction_block_1"),c={conv_in:s,reduction_block_0:u,reduction_block_1:l},f={};Ta(t,0,1).forEach(function(m){f["main_block_"+m]=a("middle_flow/main_block_"+m)});var h=i("exit_flow/reduction_block"),d=o("exit_flow/separable_conv"),g={reduction_block:h,separable_conv:d};return Pr(e,n),{params:{entry_flow:c,middle_flow:f,exit_flow:g},paramMappings:n}}function ZC(e,t,n){return de(_n(e,t.filters,n,"same"),t.bias)}function pf(e,t,n){n===void 0&&(n=!0);var r=n?Ve(e):e;return r=fn(r,t.separable_conv0,[1,1]),r=fn(Ve(r),t.separable_conv1,[1,1]),r=dt(r,[3,3],[2,2],"same"),r=de(r,ZC(e,t.expansion_conv,[2,2])),r}function l_(e,t){var n=fn(Ve(e),t.separable_conv0,[1,1]);return n=fn(Ve(n),t.separable_conv1,[1,1]),n=fn(Ve(n),t.separable_conv2,[1,1]),n=de(n,e),n}var c_=function(e){ce(t,e);function t(n){var r=e.call(this,"TinyXception")||this;return r._numMainBlocks=n,r}return t.prototype.forwardInput=function(n){var r=this,A=this.params;if(!A)throw new Error("TinyXception - load model before inference");return J(function(){var o=n.toBatchTensor(112,!0),i=[122.782,117.001,104.298],a=Za(o,i).div($(256)),s=Ve(ZC(a,A.entry_flow.conv_in,[2,2]));return s=pf(s,A.entry_flow.reduction_block_0,!1),s=pf(s,A.entry_flow.reduction_block_1),Ta(r._numMainBlocks,0,1).forEach(function(u){s=l_(s,A.middle_flow["main_block_"+u])}),s=pf(s,A.exit_flow.reduction_block),s=Ve(fn(s,A.exit_flow.separable_conv,[1,1])),s})},t.prototype.forward=function(n){return Ae(this,void 0,void 0,function(){var r;return oe(this,function(A){switch(A.label){case 0:return r=this.forwardInput,[4,mt(n)];case 1:return[2,r.apply(this,[A.sent()])]}})})},t.prototype.getDefaultModelName=function(){return"tiny_xception_model"},t.prototype.extractParamsFromWeigthMap=function(n){return u_(n,this._numMainBlocks)},t.prototype.extractParams=function(n){return a_(n,this._numMainBlocks)},t}(Or);function f_(e){var t=[],n=Kr(e),r=n.extractWeights,A=n.getRemainingWeights,o=tg(r,t),i=o(512,1,"fc/age"),a=o(512,2,"fc/gender");if(A().length!==0)throw new Error("weights remaing after extract: "+A().length);return{paramMappings:t,params:{fc:{age:i,gender:a}}}}function h_(e){var t=[],n=SA(e,t);function r(o){var i=n(o+"/weights",2),a=n(o+"/bias",1);return{weights:i,bias:a}}var A={fc:{age:r("fc/age"),gender:r("fc/gender")}};return Pr(e,t),{params:A,paramMappings:t}}var cl;(function(e){e.FEMALE="female",e.MALE="male"})(cl||(cl={}));var d_=function(e){ce(t,e);function t(n){n===void 0&&(n=new c_(2));var r=e.call(this,"AgeGenderNet")||this;return r._faceFeatureExtractor=n,r}return Object.defineProperty(t.prototype,"faceFeatureExtractor",{get:function(){return this._faceFeatureExtractor},enumerable:!0,configurable:!0}),t.prototype.runNet=function(n){var r=this,A=this.params;if(!A)throw new Error(this._name+" - load model before inference");return J(function(){var o=n instanceof ll?r.faceFeatureExtractor.forwardInput(n):n,i=qa(o,[7,7],[2,2],"valid").as2D(o.shape[0],-1),a=Ar(i,A.fc.age).as1D(),s=Ar(i,A.fc.gender);return{age:a,gender:s}})},t.prototype.forwardInput=function(n){var r=this;return J(function(){var A=r.runNet(n),o=A.age,i=A.gender;return{age:o,gender:Lr(i)}})},t.prototype.forward=function(n){return Ae(this,void 0,void 0,function(){var r;return oe(this,function(A){switch(A.label){case 0:return r=this.forwardInput,[4,mt(n)];case 1:return[2,r.apply(this,[A.sent()])]}})})},t.prototype.predictAgeAndGender=function(n){return Ae(this,void 0,void 0,function(){var r,A,o,i,a,s,u=this;return oe(this,function(l){switch(l.label){case 0:return[4,mt(n)];case 1:return r=l.sent(),[4,this.forwardInput(r)];case 2:return A=l.sent(),o=ut(A.age),i=ut(A.gender),a=o.map(function(c,f){return{ageTensor:c,genderTensor:i[f]}}),[4,Promise.all(a.map(function(c){var f=c.ageTensor,h=c.genderTensor;return Ae(u,void 0,void 0,function(){var d,g,m,p,v;return oe(this,function(w){switch(w.label){case 0:return[4,f.data()];case 1:return d=w.sent()[0],[4,h.data()];case 2:return g=w.sent()[0],m=g>.5,p=m?cl.MALE:cl.FEMALE,v=m?g:1-g,f.dispose(),h.dispose(),[2,{age:d,gender:p,genderProbability:v}]}})})}))];case 3:return s=l.sent(),A.age.dispose(),A.gender.dispose(),[2,r.isBatchInput?s:s[0]]}})})},t.prototype.getDefaultModelName=function(){return"age_gender_model"},t.prototype.dispose=function(n){n===void 0&&(n=!0),this.faceFeatureExtractor.dispose(n),e.prototype.dispose.call(this,n)},t.prototype.loadClassifierParams=function(n){var r=this.extractClassifierParams(n),A=r.params,o=r.paramMappings;this._params=A,this._paramMappings=o},t.prototype.extractClassifierParams=function(n){return f_(n)},t.prototype.extractParamsFromWeigthMap=function(n){var r=YC(n),A=r.featureExtractorMap,o=r.classifierMap;return this.faceFeatureExtractor.loadFromWeightMap(A),h_(o)},t.prototype.extractParams=function(n){var r=1539,A=n.slice(0,n.length-r),o=n.slice(n.length-r);return this.faceFeatureExtractor.extractWeights(A),this.extractClassifierParams(o)},t}(Or),e1=function(e){ce(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.postProcess=function(n,r,A){var o=A.map(function(a){var s=a.width,u=a.height,l=r/Math.max(u,s);return{width:s*l,height:u*l}}),i=o.length;return J(function(){var a=function(f,h){return dn([ur([68],f),ur([68],h)],1).as2D(1,136).as1D()},s=function(f,h){var d=o[f],g=d.width,m=d.height;return h(g,m)?Math.abs(g-m)/2:0},u=function(f){return s(f,function(h,d){return h<d})},l=function(f){return s(f,function(h,d){return d<h})},c=n.mul(ur([i,136],r)).sub(dn(Array.from(Array(i),function(f,h){return a(u(h),l(h))}))).div(dn(Array.from(Array(i),function(f,h){return a(o[h].width,o[h].height)})));return c})},t.prototype.forwardInput=function(n){var r=this;return J(function(){var A=r.runNet(n);return r.postProcess(A,n.inputSize,n.inputDimensions.map(function(o){var i=o[0],a=o[1];return{height:i,width:a}}))})},t.prototype.forward=function(n){return Ae(this,void 0,void 0,function(){var r;return oe(this,function(A){switch(A.label){case 0:return r=this.forwardInput,[4,mt(n)];case 1:return[2,r.apply(this,[A.sent()])]}})})},t.prototype.detectLandmarks=function(n){return Ae(this,void 0,void 0,function(){var r,A,o,i=this;return oe(this,function(a){switch(a.label){case 0:return[4,mt(n)];case 1:return r=a.sent(),A=J(function(){return ut(i.forwardInput(r))}),[4,Promise.all(A.map(function(s,u){return Ae(i,void 0,void 0,function(){var l,c,f,h,d;return oe(this,function(g){switch(g.label){case 0:return f=(c=Array).from,[4,s.data()];case 1:return l=f.apply(c,[g.sent()]),h=l.filter(function(m,p){return Im(p)}),d=l.filter(function(m,p){return!Im(p)}),[2,new V4(Array(68).fill(0).map(function(m,p){return new be(h[p],d[p])}),{height:r.getInputHeight(u),width:r.getInputWidth(u)})]}})})}))];case 2:return o=a.sent(),A.forEach(function(s){return s.dispose()}),[2,r.isBatchInput?o:o[0]]}})})},t.prototype.getClassifierChannelsOut=function(){return 136},t}(qC),t1=function(e){ce(t,e);function t(n){return n===void 0&&(n=new jC),e.call(this,"FaceLandmark68Net",n)||this}return t.prototype.getDefaultModelName=function(){return"face_landmark_68_model"},t.prototype.getClassifierChannelsIn=function(){return 256},t}(e1);function p_(e){var t=[],n=$C(e,t).extractDenseBlock3Params,r={dense0:n("dense0",!0),dense1:n("dense1"),dense2:n("dense2")};return Pr(e,t),{params:r,paramMappings:t}}function g_(e){var t=[],n=Kr(e),r=n.extractWeights,A=n.getRemainingWeights,o=zC(r,t).extractDenseBlock3Params,i=o(3,32,"dense0",!0),a=o(32,64,"dense1"),s=o(64,128,"dense2");if(A().length!==0)throw new Error("weights remaing after extract: "+A().length);return{paramMappings:t,params:{dense0:i,dense1:a,dense2:s}}}var v_=function(e){ce(t,e);function t(){return e.call(this,"TinyFaceFeatureExtractor")||this}return t.prototype.forwardInput=function(n){var r=this.params;if(!r)throw new Error("TinyFaceFeatureExtractor - load model before inference");return J(function(){var A=n.toBatchTensor(112,!0),o=[122.782,117.001,104.298],i=Za(A,o).div($(255)),a=df(i,r.dense0,!0);return a=df(a,r.dense1),a=df(a,r.dense2),a=qa(a,[14,14],[2,2],"valid"),a})},t.prototype.forward=function(n){return Ae(this,void 0,void 0,function(){var r;return oe(this,function(A){switch(A.label){case 0:return r=this.forwardInput,[4,mt(n)];case 1:return[2,r.apply(this,[A.sent()])]}})})},t.prototype.getDefaultModelName=function(){return"face_feature_extractor_tiny_model"},t.prototype.extractParamsFromWeigthMap=function(n){return p_(n)},t.prototype.extractParams=function(n){return g_(n)},t}(Or),m_=function(e){ce(t,e);function t(n){return n===void 0&&(n=new v_),e.call(this,"FaceLandmark68TinyNet",n)||this}return t.prototype.getDefaultModelName=function(){return"face_landmark_68_tiny_model"},t.prototype.getClassifierChannelsIn=function(){return 128},t}(e1);(function(e){ce(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t})(t1);function w_(e,t){return de(Ht(e,t.weights),t.biases)}function og(e,t,n,r,A){A===void 0&&(A="same");var o=t.conv,i=o.filters,a=o.bias,s=_n(e,i,n,A);return s=de(s,a),s=w_(s,t.scale),r?Ve(s):s}function B_(e,t){return og(e,t,[1,1],!0)}function n1(e,t){return og(e,t,[1,1],!1)}function r1(e,t){return og(e,t,[2,2],!0,"valid")}function y_(e,t){function n(a,s,u){var l=e(a),c=l.length/(s*u*u);if(D4(c))throw new Error("depth has to be an integer: "+c+", weights.length: "+l.length+", numFilters: "+s+", filterSize: "+u);return J(function(){return CA($t(l,[s,c,u,u]),[2,3,1,0])})}function r(a,s,u,l){var c=n(a,s,u),f=rt(e(s));return t.push({paramPath:l+"/filters"},{paramPath:l+"/bias"}),{filters:c,bias:f}}function A(a,s){var u=rt(e(a)),l=rt(e(a));return t.push({paramPath:s+"/weights"},{paramPath:s+"/biases"}),{weights:u,biases:l}}function o(a,s,u,l){var c=r(a,s,u,l+"/conv"),f=A(s,l+"/scale");return{conv:c,scale:f}}function i(a,s,u,l,c){c===void 0&&(c=!1);var f=o((c?.5:1)*a,s,u,l+"/conv1"),h=o(a,s,u,l+"/conv2");return{conv1:f,conv2:h}}return{extractConvLayerParams:o,extractResidualLayerParams:i}}function C_(e){var t=Kr(e),n=t.extractWeights,r=t.getRemainingWeights,A=[],o=y_(n,A),i=o.extractConvLayerParams,a=o.extractResidualLayerParams,s=i(4704,32,7,"conv32_down"),u=a(9216,32,3,"conv32_1"),l=a(9216,32,3,"conv32_2"),c=a(9216,32,3,"conv32_3"),f=a(36864,64,3,"conv64_down",!0),h=a(36864,64,3,"conv64_1"),d=a(36864,64,3,"conv64_2"),g=a(36864,64,3,"conv64_3"),m=a(147456,128,3,"conv128_down",!0),p=a(147456,128,3,"conv128_1"),v=a(147456,128,3,"conv128_2"),w=a(589824,256,3,"conv256_down",!0),B=a(589824,256,3,"conv256_1"),y=a(589824,256,3,"conv256_2"),C=a(589824,256,3,"conv256_down_out"),b=J(function(){return CA(pA(n(256*128),[128,256]),[1,0])});if(A.push({paramPath:"fc"}),r().length!==0)throw new Error("weights remaing after extract: "+r().length);var x={conv32_down:s,conv32_1:u,conv32_2:l,conv32_3:c,conv64_down:f,conv64_1:h,conv64_2:d,conv64_3:g,conv128_down:m,conv128_1:p,conv128_2:v,conv256_down:w,conv256_1:B,conv256_2:y,conv256_down_out:C,fc:b};return{params:x,paramMappings:A}}function x_(e,t){var n=SA(e,t);function r(i){var a=n(i+"/scale/weights",1),s=n(i+"/scale/biases",1);return{weights:a,biases:s}}function A(i){var a=n(i+"/conv/filters",4),s=n(i+"/conv/bias",1),u=r(i);return{conv:{filters:a,bias:s},scale:u}}function o(i){return{conv1:A(i+"/conv1"),conv2:A(i+"/conv2")}}return{extractConvLayerParams:A,extractResidualLayerParams:o}}function F_(e){var t=[],n=x_(e,t),r=n.extractConvLayerParams,A=n.extractResidualLayerParams,o=r("conv32_down"),i=A("conv32_1"),a=A("conv32_2"),s=A("conv32_3"),u=A("conv64_down"),l=A("conv64_1"),c=A("conv64_2"),f=A("conv64_3"),h=A("conv128_down"),d=A("conv128_1"),g=A("conv128_2"),m=A("conv256_down"),p=A("conv256_1"),v=A("conv256_2"),w=A("conv256_down_out"),B=e.fc;if(t.push({originalPath:"fc",paramPath:"fc"}),!k4(B))throw new Error("expected weightMap[fc] to be a Tensor2D, instead have "+B);var y={conv32_down:o,conv32_1:i,conv32_2:a,conv32_3:s,conv64_down:u,conv64_1:l,conv64_2:c,conv64_3:f,conv128_down:h,conv128_1:d,conv128_2:g,conv256_down:m,conv256_1:p,conv256_2:v,conv256_down_out:w,fc:B};return Pr(e,t),{params:y,paramMappings:t}}function Yn(e,t){var n=B_(e,t.conv1);return n=n1(n,t.conv2),n=de(n,e),n=Ve(n),n}function _s(e,t){var n=r1(e,t.conv1);n=n1(n,t.conv2);var r=qa(e,2,2,"valid"),A=Te(r.shape),o=r.shape[3]!==n.shape[3],i=r.shape[1]!==n.shape[1]||r.shape[2]!==n.shape[2];if(i){var a=aa(n.shape);a[1]=1;var s=Te(a);n=st([n,s],1);var u=aa(n.shape);u[2]=1;var l=Te(u);n=st([n,l],2)}return r=o?st([r,A],3):r,n=de(r,n),n=Ve(n),n}var b_=function(e){ce(t,e);function t(){return e.call(this,"FaceRecognitionNet")||this}return t.prototype.forwardInput=function(n){var r=this.params;if(!r)throw new Error("FaceRecognitionNet - load model before inference");return J(function(){var A=n.toBatchTensor(150,!0).toFloat(),o=[122.782,117.001,104.298],i=Za(A,o).div($(256)),a=r1(i,r.conv32_down);a=dt(a,3,2,"valid"),a=Yn(a,r.conv32_1),a=Yn(a,r.conv32_2),a=Yn(a,r.conv32_3),a=_s(a,r.conv64_down),a=Yn(a,r.conv64_1),a=Yn(a,r.conv64_2),a=Yn(a,r.conv64_3),a=_s(a,r.conv128_down),a=Yn(a,r.conv128_1),a=Yn(a,r.conv128_2),a=_s(a,r.conv256_down),a=Yn(a,r.conv256_1),a=Yn(a,r.conv256_2),a=_s(a,r.conv256_down_out);var s=a.mean([1,2]),u=Gl(s,r.fc);return u})},t.prototype.forward=function(n){return Ae(this,void 0,void 0,function(){var r;return oe(this,function(A){switch(A.label){case 0:return r=this.forwardInput,[4,mt(n)];case 1:return[2,r.apply(this,[A.sent()])]}})})},t.prototype.computeFaceDescriptor=function(n){return Ae(this,void 0,void 0,function(){var r,A,o,i=this;return oe(this,function(a){switch(a.label){case 0:return[4,mt(n)];case 1:return r=a.sent(),A=J(function(){return ut(i.forwardInput(r))}),[4,Promise.all(A.map(function(s){return s.data()}))];case 2:return o=a.sent(),A.forEach(function(s){return s.dispose()}),[2,r.isBatchInput?o:o[0]]}})})},t.prototype.getDefaultModelName=function(){return"face_recognition_model"},t.prototype.extractParamsFromWeigthMap=function(n){return F_(n)},t.prototype.extractParams=function(n){return C_(n)},t}(Or);function A1(e,t){var n={descriptor:t};return Object.assign({},e,n)}function o1(e,t){var n={age:t};return Object.assign({},e,n)}function i1(e,t,n){var r={gender:t,genderProbability:n};return Object.assign({},e,r)}var a1=function(){function e(t){var n=t===void 0?{}:t,r=n.minFaceSize,A=n.scaleFactor,o=n.maxNumScales,i=n.scoreThresholds,a=n.scaleSteps;if(this._name="MtcnnOptions",this._minFaceSize=r||20,this._scaleFactor=A||.709,this._maxNumScales=o||10,this._scoreThresholds=i||[.6,.7,.7],this._scaleSteps=a,typeof this._minFaceSize!="number"||this._minFaceSize<0)throw new Error(this._name+" - expected minFaceSize to be a number > 0");if(typeof this._scaleFactor!="number"||this._scaleFactor<=0||this._scaleFactor>=1)throw new Error(this._name+" - expected scaleFactor to be a number between 0 and 1");if(typeof this._maxNumScales!="number"||this._maxNumScales<0)throw new Error(this._name+" - expected maxNumScales to be a number > 0");if(!Array.isArray(this._scoreThresholds)||this._scoreThresholds.length!==3||this._scoreThresholds.some(function(s){return typeof s!="number"}))throw new Error(this._name+" - expected scoreThresholds to be an array of numbers of length 3");if(this._scaleSteps&&(!Array.isArray(this._scaleSteps)||this._scaleSteps.some(function(s){return typeof s!="number"})))throw new Error(this._name+" - expected scaleSteps to be an array of numbers")}return Object.defineProperty(e.prototype,"minFaceSize",{get:function(){return this._minFaceSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scaleFactor",{get:function(){return this._scaleFactor},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxNumScales",{get:function(){return this._maxNumScales},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scoreThresholds",{get:function(){return this._scoreThresholds},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scaleSteps",{get:function(){return this._scaleSteps},enumerable:!0,configurable:!0}),e}();function E_(e,t){function n(s,u){var l=$t(e(9*s),[3,3,s,1]),c=rt(e(s)),f=rt(e(s)),h=rt(e(s)),d=rt(e(s));return t.push({paramPath:u+"/filters"},{paramPath:u+"/batch_norm_scale"},{paramPath:u+"/batch_norm_offset"},{paramPath:u+"/batch_norm_mean"},{paramPath:u+"/batch_norm_variance"}),{filters:l,batch_norm_scale:c,batch_norm_offset:f,batch_norm_mean:h,batch_norm_variance:d}}function r(s,u,l,c,f){var h=$t(e(s*u*l*l),[l,l,s,u]),d=rt(e(u));return t.push({paramPath:c+"/filters"},{paramPath:c+"/"+(f?"batch_norm_offset":"bias")}),{filters:h,bias:d}}function A(s,u,l,c){var f=r(s,u,l,c,!0),h=f.filters,d=f.bias;return{filters:h,batch_norm_offset:d}}function o(s,u,l){var c=n(s,l+"/depthwise_conv"),f=A(s,u,1,l+"/pointwise_conv");return{depthwise_conv:c,pointwise_conv:f}}function i(){var s=A(3,32,3,"mobilenetv1/conv_0"),u=o(32,64,"mobilenetv1/conv_1"),l=o(64,128,"mobilenetv1/conv_2"),c=o(128,128,"mobilenetv1/conv_3"),f=o(128,256,"mobilenetv1/conv_4"),h=o(256,256,"mobilenetv1/conv_5"),d=o(256,512,"mobilenetv1/conv_6"),g=o(512,512,"mobilenetv1/conv_7"),m=o(512,512,"mobilenetv1/conv_8"),p=o(512,512,"mobilenetv1/conv_9"),v=o(512,512,"mobilenetv1/conv_10"),w=o(512,512,"mobilenetv1/conv_11"),B=o(512,1024,"mobilenetv1/conv_12"),y=o(1024,1024,"mobilenetv1/conv_13");return{conv_0:s,conv_1:u,conv_2:l,conv_3:c,conv_4:f,conv_5:h,conv_6:d,conv_7:g,conv_8:m,conv_9:p,conv_10:v,conv_11:w,conv_12:B,conv_13:y}}function a(){var s=A(1024,256,1,"prediction_layer/conv_0"),u=A(256,512,3,"prediction_layer/conv_1"),l=A(512,128,1,"prediction_layer/conv_2"),c=A(128,256,3,"prediction_layer/conv_3"),f=A(256,128,1,"prediction_layer/conv_4"),h=A(128,256,3,"prediction_layer/conv_5"),d=A(256,64,1,"prediction_layer/conv_6"),g=A(64,128,3,"prediction_layer/conv_7"),m=r(512,12,1,"prediction_layer/box_predictor_0/box_encoding_predictor"),p=r(512,9,1,"prediction_layer/box_predictor_0/class_predictor"),v=r(1024,24,1,"prediction_layer/box_predictor_1/box_encoding_predictor"),w=r(1024,18,1,"prediction_layer/box_predictor_1/class_predictor"),B=r(512,24,1,"prediction_layer/box_predictor_2/box_encoding_predictor"),y=r(512,18,1,"prediction_layer/box_predictor_2/class_predictor"),C=r(256,24,1,"prediction_layer/box_predictor_3/box_encoding_predictor"),b=r(256,18,1,"prediction_layer/box_predictor_3/class_predictor"),x=r(256,24,1,"prediction_layer/box_predictor_4/box_encoding_predictor"),F=r(256,18,1,"prediction_layer/box_predictor_4/class_predictor"),E=r(128,24,1,"prediction_layer/box_predictor_5/box_encoding_predictor"),I=r(128,18,1,"prediction_layer/box_predictor_5/class_predictor"),S={box_encoding_predictor:m,class_predictor:p},T={box_encoding_predictor:v,class_predictor:w},N={box_encoding_predictor:B,class_predictor:y},O={box_encoding_predictor:C,class_predictor:b},K={box_encoding_predictor:x,class_predictor:F},P={box_encoding_predictor:E,class_predictor:I};return{conv_0:s,conv_1:u,conv_2:l,conv_3:c,conv_4:f,conv_5:h,conv_6:d,conv_7:g,box_predictor_0:S,box_predictor_1:T,box_predictor_2:N,box_predictor_3:O,box_predictor_4:K,box_predictor_5:P}}return{extractMobilenetV1Params:i,extractPredictionLayerParams:a}}function Q_(e){var t=[],n=Kr(e),r=n.extractWeights,A=n.getRemainingWeights,o=E_(r,t),i=o.extractMobilenetV1Params,a=o.extractPredictionLayerParams,s=i(),u=a(),l=yp(r(5118*4),[1,5118,4]),c={extra_dim:l};if(t.push({paramPath:"output_layer/extra_dim"}),A().length!==0)throw new Error("weights remaing after extract: "+A().length);return{params:{mobilenetv1:s,prediction_layer:u,output_layer:c},paramMappings:t}}function U_(e,t){var n=SA(e,t);function r(u,l,c){var f=n(u+"/Conv2d_"+l+"_pointwise/weights",4,c+"/filters"),h=n(u+"/Conv2d_"+l+"_pointwise/convolution_bn_offset",1,c+"/batch_norm_offset");return{filters:f,batch_norm_offset:h}}function A(u){var l="mobilenetv1/conv_"+u,c="MobilenetV1/Conv2d_"+u+"_depthwise",f=l+"/depthwise_conv",h=l+"/pointwise_conv",d=n(c+"/depthwise_weights",4,f+"/filters"),g=n(c+"/BatchNorm/gamma",1,f+"/batch_norm_scale"),m=n(c+"/BatchNorm/beta",1,f+"/batch_norm_offset"),p=n(c+"/BatchNorm/moving_mean",1,f+"/batch_norm_mean"),v=n(c+"/BatchNorm/moving_variance",1,f+"/batch_norm_variance");return{depthwise_conv:{filters:d,batch_norm_scale:g,batch_norm_offset:m,batch_norm_mean:p,batch_norm_variance:v},pointwise_conv:r("MobilenetV1",u,h)}}function o(){return{conv_0:r("MobilenetV1",0,"mobilenetv1/conv_0"),conv_1:A(1),conv_2:A(2),conv_3:A(3),conv_4:A(4),conv_5:A(5),conv_6:A(6),conv_7:A(7),conv_8:A(8),conv_9:A(9),conv_10:A(10),conv_11:A(11),conv_12:A(12),conv_13:A(13)}}function i(u,l){var c=n(u+"/weights",4,l+"/filters"),f=n(u+"/biases",1,l+"/bias");return{filters:c,bias:f}}function a(u){var l=i("Prediction/BoxPredictor_"+u+"/BoxEncodingPredictor","prediction_layer/box_predictor_"+u+"/box_encoding_predictor"),c=i("Prediction/BoxPredictor_"+u+"/ClassPredictor","prediction_layer/box_predictor_"+u+"/class_predictor");return{box_encoding_predictor:l,class_predictor:c}}function s(){return{conv_0:r("Prediction",0,"prediction_layer/conv_0"),conv_1:r("Prediction",1,"prediction_layer/conv_1"),conv_2:r("Prediction",2,"prediction_layer/conv_2"),conv_3:r("Prediction",3,"prediction_layer/conv_3"),conv_4:r("Prediction",4,"prediction_layer/conv_4"),conv_5:r("Prediction",5,"prediction_layer/conv_5"),conv_6:r("Prediction",6,"prediction_layer/conv_6"),conv_7:r("Prediction",7,"prediction_layer/conv_7"),box_predictor_0:a(0),box_predictor_1:a(1),box_predictor_2:a(2),box_predictor_3:a(3),box_predictor_4:a(4),box_predictor_5:a(5)}}return{extractMobilenetV1Params:o,extractPredictionLayerParams:s}}function I_(e){var t=[],n=U_(e,t),r=n.extractMobilenetV1Params,A=n.extractPredictionLayerParams,o=e["Output/extra_dim"];if(t.push({originalPath:"Output/extra_dim",paramPath:"output_layer/extra_dim"}),!jl(o))throw new Error("expected weightMap['Output/extra_dim'] to be a Tensor3D, instead have "+o);var i={mobilenetv1:r(),prediction_layer:A(),output_layer:{extra_dim:o}};return Pr(e,t),{params:i,paramMappings:t}}function Zn(e,t,n){return J(function(){var r=_n(e,t.filters,n,"same");return r=de(r,t.batch_norm_offset),kp(r,0,6)})}var S_=.0010000000474974513;function __(e,t,n){return J(function(){var r=Wl(e,t.filters,n,"same");return r=tC(r,t.batch_norm_mean,t.batch_norm_variance,t.batch_norm_offset,t.batch_norm_scale,S_),kp(r,0,6)})}function k_(e){return[2,4,6,12].some(function(t){return t===e})?[2,2]:[1,1]}function D_(e,t){return J(function(){var n=null,r=Zn(e,t.conv_0,[2,2]),A=[t.conv_1,t.conv_2,t.conv_3,t.conv_4,t.conv_5,t.conv_6,t.conv_7,t.conv_8,t.conv_9,t.conv_10,t.conv_11,t.conv_12,t.conv_13];if(A.forEach(function(o,i){var a=i+1,s=k_(a);r=__(r,o.depthwise_conv,s),r=Zn(r,o.pointwise_conv,[1,1]),a===11&&(n=r)}),n===null)throw new Error("mobileNetV1 - output of conv layer 11 is null");return{out:r,conv11:n}})}function R_(e,t,n,r,A){var o=e.shape[0],i=Math.min(n,o),a=t.map(function(l,c){return{score:l,boxIndex:c}}).filter(function(l){return l.score>A}).sort(function(l,c){return c.score-l.score}),s=function(l){return l<=r?1:0},u=[];return a.forEach(function(l){if(!(u.length>=i)){for(var c=l.score,f=u.length-1;f>=0;--f){var h=T_(e,l.boxIndex,u[f]);if(h!==0&&(l.score*=s(h),l.score<=A))break}c===l.score&&u.push(l.boxIndex)}}),u}function T_(e,t,n){var r=e.arraySync(),A=Math.min(r[t][0],r[t][2]),o=Math.min(r[t][1],r[t][3]),i=Math.max(r[t][0],r[t][2]),a=Math.max(r[t][1],r[t][3]),s=Math.min(r[n][0],r[n][2]),u=Math.min(r[n][1],r[n][3]),l=Math.max(r[n][0],r[n][2]),c=Math.max(r[n][1],r[n][3]),f=(i-A)*(a-o),h=(l-s)*(c-u);if(f<=0||h<=0)return 0;var d=Math.max(A,s),g=Math.max(o,u),m=Math.min(i,l),p=Math.min(a,c),v=Math.max(m-d,0)*Math.max(p-g,0);return v/(f+h-v)}function H_(e){var t=ut(CA(e,[1,0])),n=[ct(t[2],t[0]),ct(t[3],t[1])],r=[de(t[0],Nn(n[0],$(2))),de(t[1],Nn(n[1],$(2)))];return{sizes:n,centers:r}}function N_(e,t){var n=H_(e),r=n.sizes,A=n.centers,o=ut(CA(t,[1,0])),i=Nn(Ht(zh(Nn(o[2],$(5))),r[0]),$(2)),a=de(Ht(Nn(o[0],$(10)),r[0]),A[0]),s=Nn(Ht(zh(Nn(o[3],$(5))),r[1]),$(2)),u=de(Ht(Nn(o[1],$(10)),r[1]),A[1]);return CA(dn([ct(a,i),ct(u,s),de(a,i),de(u,s)]),[1,0])}function L_(e,t,n){return J(function(){var r=e.shape[0],A=N_(Ln(qo(n.extra_dim,[r,1,1]),[-1,4]),Ln(e,[-1,4]));A=Ln(A,[r,A.shape[0]/r,4]);var o=qy(lr(t,[0,0,1],[-1,-1,-1])),i=lr(o,[0,0,0],[-1,-1,1]);i=Ln(i,[r,i.shape[1]]);var a=ut(A),s=ut(i);return{boxes:a,scores:s}})}function mo(e,t){return J(function(){var n=e.shape[0],r=Ln(Pn(e,t.box_encoding_predictor),[n,-1,1,4]),A=Ln(Pn(e,t.class_predictor),[n,-1,3]);return{boxPredictionEncoding:r,classPrediction:A}})}function M_(e,t,n){return J(function(){var r=Zn(e,n.conv_0,[1,1]),A=Zn(r,n.conv_1,[2,2]),o=Zn(A,n.conv_2,[1,1]),i=Zn(o,n.conv_3,[2,2]),a=Zn(i,n.conv_4,[1,1]),s=Zn(a,n.conv_5,[2,2]),u=Zn(s,n.conv_6,[1,1]),l=Zn(u,n.conv_7,[2,2]),c=mo(t,n.box_predictor_0),f=mo(e,n.box_predictor_1),h=mo(A,n.box_predictor_2),d=mo(i,n.box_predictor_3),g=mo(s,n.box_predictor_4),m=mo(l,n.box_predictor_5),p=st([c.boxPredictionEncoding,f.boxPredictionEncoding,h.boxPredictionEncoding,d.boxPredictionEncoding,g.boxPredictionEncoding,m.boxPredictionEncoding],1),v=st([c.classPrediction,f.classPrediction,h.classPrediction,d.classPrediction,g.classPrediction,m.classPrediction],1);return{boxPredictions:p,classPredictions:v}})}var Zl=function(){function e(t){var n=t===void 0?{}:t,r=n.minConfidence,A=n.maxResults;if(this._name="SsdMobilenetv1Options",this._minConfidence=r||.5,this._maxResults=A||100,typeof this._minConfidence!="number"||this._minConfidence<=0||this._minConfidence>=1)throw new Error(this._name+" - expected minConfidence to be a number between 0 and 1");if(typeof this._maxResults!="number")throw new Error(this._name+" - expected maxResults to be a number")}return Object.defineProperty(e.prototype,"minConfidence",{get:function(){return this._minConfidence},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxResults",{get:function(){return this._maxResults},enumerable:!0,configurable:!0}),e}(),s1=function(e){ce(t,e);function t(){return e.call(this,"SsdMobilenetv1")||this}return t.prototype.forwardInput=function(n){var r=this.params;if(!r)throw new Error("SsdMobilenetv1 - load model before inference");return J(function(){var A=n.toBatchTensor(512,!1).toFloat(),o=ct(Ht(A,$(.007843137718737125)),$(1)),i=D_(o,r.mobilenetv1),a=M_(i.out,i.conv11,r.prediction_layer),s=a.boxPredictions,u=a.classPredictions;return L_(s,u,r.output_layer)})},t.prototype.forward=function(n){return Ae(this,void 0,void 0,function(){var r;return oe(this,function(A){switch(A.label){case 0:return r=this.forwardInput,[4,mt(n)];case 1:return[2,r.apply(this,[A.sent()])]}})})},t.prototype.locateFaces=function(n,r){return r===void 0&&(r={}),Ae(this,void 0,void 0,function(){var A,o,i,a,s,u,l,c,f,h,d,g,m,p,v,w,B,y,C,b,x;return oe(this,function(F){switch(F.label){case 0:return A=new Zl(r),o=A.maxResults,i=A.minConfidence,[4,mt(n)];case 1:for(a=F.sent(),s=this.forwardInput(a),u=s.boxes,l=s.scores,c=u[0],f=l[0],h=1;h<u.length;h++)u[h].dispose(),l[h].dispose();return m=(g=Array).from,[4,f.data()];case 2:return d=m.apply(g,[F.sent()]),p=.5,v=R_(c,d,o,p,i),w=a.getReshapedInputDimensions(0),B=a.inputSize,y=B/w.width,C=B/w.height,b=c.arraySync(),x=v.map(function(E){var I=[Math.max(0,b[E][0]),Math.min(1,b[E][2])].map(function(P){return P*C}),S=I[0],T=I[1],N=[Math.max(0,b[E][1]),Math.min(1,b[E][3])].map(function(P){return P*y}),O=N[0],K=N[1];return new dr(d[E],new jp(O,S,K-O,T-S),{height:a.getInputHeight(0),width:a.getInputWidth(0)})}),c.dispose(),f.dispose(),[2,x]}})})},t.prototype.getDefaultModelName=function(){return"ssd_mobilenetv1_model"},t.prototype.extractParamsFromWeigthMap=function(n){return I_(n)},t.prototype.extractParams=function(n){return Q_(n)},t}(Or);(function(e){ce(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t})(s1);var O_=.4,P_=[new be(.738768,.874946),new be(2.42204,2.65704),new be(4.30971,7.04493),new be(10.246,4.59428),new be(12.6868,11.8741)],K_=[new be(1.603231,2.094468),new be(6.041143,7.080126),new be(2.882459,3.518061),new be(4.266906,5.178857),new be(9.041765,10.66308)],V_=[117.001,114.697,97.404],W_="tiny_yolov2_model",G_="tiny_yolov2_separable_conv_model",ks=function(e){return typeof e=="number"};function z_(e){if(!e)throw new Error("invalid config: "+e);if(typeof e.withSeparableConvs!="boolean")throw new Error("config.withSeparableConvs has to be a boolean, have: "+e.withSeparableConvs);if(!ks(e.iouThreshold)||e.iouThreshold<0||e.iouThreshold>1)throw new Error("config.iouThreshold has to be a number between [0, 1], have: "+e.iouThreshold);if(!Array.isArray(e.classes)||!e.classes.length||!e.classes.every(function(t){return typeof t=="string"}))throw new Error("config.classes has to be an array class names: string[], have: "+JSON.stringify(e.classes));if(!Array.isArray(e.anchors)||!e.anchors.length||!e.anchors.map(function(t){return t||{}}).every(function(t){return ks(t.x)&&ks(t.y)}))throw new Error("config.anchors has to be an array of { x: number, y: number }, have: "+JSON.stringify(e.anchors));if(e.meanRgb&&(!Array.isArray(e.meanRgb)||e.meanRgb.length!==3||!e.meanRgb.every(ks)))throw new Error("config.meanRgb has to be an array of shape [number, number, number], have: "+JSON.stringify(e.meanRgb))}function ig(e){return J(function(){var t=Ht(e,$(.10000000149011612));return de(Ve(ct(e,t)),t)})}function Gr(e,t){return J(function(){var n=io(e,[[0,0],[1,1],[1,1],[0,0]]);return n=_n(n,t.conv.filters,[1,1],"valid"),n=ct(n,t.bn.sub),n=Ht(n,t.bn.truediv),n=de(n,t.conv.bias),ig(n)})}function zr(e,t){return J(function(){var n=io(e,[[0,0],[1,1],[1,1],[0,0]]);return n=Hp(n,t.depthwise_filter,t.pointwise_filter,[1,1],"valid"),n=de(n,t.bias),ig(n)})}function X_(e,t){var n=Jl(e,t);function r(i,a){var s=rt(e(i)),u=rt(e(i));return t.push({paramPath:a+"/sub"},{paramPath:a+"/truediv"}),{sub:s,truediv:u}}function A(i,a,s){var u=n(i,a,3,s+"/conv"),l=r(a,s+"/bn");return{conv:u,bn:l}}var o=ng(e,t);return{extractConvParams:n,extractConvWithBatchNormParams:A,extractSeparableConvParams:o}}function $_(e,t,n,r){var A=Kr(e),o=A.extractWeights,i=A.getRemainingWeights,a=[],s=X_(o,a),u=s.extractConvParams,l=s.extractConvWithBatchNormParams,c=s.extractSeparableConvParams,f;if(t.withSeparableConvs){var h=r[0],d=r[1],g=r[2],m=r[3],p=r[4],v=r[5],w=r[6],B=r[7],y=r[8],C=t.isFirstLayerConv2d?u(h,d,3,"conv0"):c(h,d,"conv0"),b=c(d,g,"conv1"),x=c(g,m,"conv2"),F=c(m,p,"conv3"),E=c(p,v,"conv4"),I=c(v,w,"conv5"),S=B?c(w,B,"conv6"):void 0,T=y?c(B,y,"conv7"):void 0,N=u(y||B||w,5*n,1,"conv8");f={conv0:C,conv1:b,conv2:x,conv3:F,conv4:E,conv5:I,conv6:S,conv7:T,conv8:N}}else{var h=r[0],d=r[1],g=r[2],m=r[3],p=r[4],v=r[5],w=r[6],B=r[7],y=r[8],C=l(h,d,"conv0"),b=l(d,g,"conv1"),x=l(g,m,"conv2"),F=l(m,p,"conv3"),E=l(p,v,"conv4"),I=l(v,w,"conv5"),S=l(w,B,"conv6"),T=l(B,y,"conv7"),N=u(y,5*n,1,"conv8");f={conv0:C,conv1:b,conv2:x,conv3:F,conv4:E,conv5:I,conv6:S,conv7:T,conv8:N}}if(i().length!==0)throw new Error("weights remaing after extract: "+i().length);return{params:f,paramMappings:a}}function j_(e,t){var n=SA(e,t);function r(a){var s=n(a+"/sub",1),u=n(a+"/truediv",1);return{sub:s,truediv:u}}function A(a){var s=n(a+"/filters",4),u=n(a+"/bias",1);return{filters:s,bias:u}}function o(a){var s=A(a+"/conv"),u=r(a+"/bn");return{conv:s,bn:u}}var i=rg(n);return{extractConvParams:A,extractConvWithBatchNormParams:o,extractSeparableConvParams:i}}function Y_(e,t){var n=[],r=j_(e,n),A=r.extractConvParams,o=r.extractConvWithBatchNormParams,i=r.extractSeparableConvParams,a;if(t.withSeparableConvs){var s=t.filterSizes&&t.filterSizes.length||9;a={conv0:t.isFirstLayerConv2d?A("conv0"):i("conv0"),conv1:i("conv1"),conv2:i("conv2"),conv3:i("conv3"),conv4:i("conv4"),conv5:i("conv5"),conv6:s>7?i("conv6"):void 0,conv7:s>8?i("conv7"):void 0,conv8:A("conv8")}}else a={conv0:o("conv0"),conv1:o("conv1"),conv2:o("conv2"),conv3:o("conv3"),conv4:o("conv4"),conv5:o("conv5"),conv6:o("conv6"),conv7:o("conv7"),conv8:A("conv8")};return Pr(e,n),{params:a,paramMappings:n}}var Nm;(function(e){e[e.XS=224]="XS",e[e.SM=320]="SM",e[e.MD=416]="MD",e[e.LG=608]="LG"})(Nm||(Nm={}));var ag=function(){function e(t){var n=t===void 0?{}:t,r=n.inputSize,A=n.scoreThreshold;if(this._name="TinyYolov2Options",this._inputSize=r||416,this._scoreThreshold=A||.5,typeof this._inputSize!="number"||this._inputSize%32!==0)throw new Error(this._name+" - expected inputSize to be a number divisible by 32");if(typeof this._scoreThreshold!="number"||this._scoreThreshold<=0||this._scoreThreshold>=1)throw new Error(this._name+" - expected scoreThreshold to be a number between 0 and 1")}return Object.defineProperty(e.prototype,"inputSize",{get:function(){return this._inputSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scoreThreshold",{get:function(){return this._scoreThreshold},enumerable:!0,configurable:!0}),e}(),u1=function(e){ce(t,e);function t(n){var r=e.call(this,"TinyYolov2")||this;return z_(n),r._config=n,r}return Object.defineProperty(t.prototype,"config",{get:function(){return this._config},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"withClassScores",{get:function(){return this.config.withClassScores||this.config.classes.length>1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"boxEncodingSize",{get:function(){return 5+(this.withClassScores?this.config.classes.length:0)},enumerable:!0,configurable:!0}),t.prototype.runTinyYolov2=function(n,r){var A=Gr(n,r.conv0);return A=dt(A,[2,2],[2,2],"same"),A=Gr(A,r.conv1),A=dt(A,[2,2],[2,2],"same"),A=Gr(A,r.conv2),A=dt(A,[2,2],[2,2],"same"),A=Gr(A,r.conv3),A=dt(A,[2,2],[2,2],"same"),A=Gr(A,r.conv4),A=dt(A,[2,2],[2,2],"same"),A=Gr(A,r.conv5),A=dt(A,[2,2],[1,1],"same"),A=Gr(A,r.conv6),A=Gr(A,r.conv7),Pn(A,r.conv8,"valid",!1)},t.prototype.runMobilenet=function(n,r){var A=this.config.isFirstLayerConv2d?ig(Pn(n,r.conv0,"valid",!1)):zr(n,r.conv0);return A=dt(A,[2,2],[2,2],"same"),A=zr(A,r.conv1),A=dt(A,[2,2],[2,2],"same"),A=zr(A,r.conv2),A=dt(A,[2,2],[2,2],"same"),A=zr(A,r.conv3),A=dt(A,[2,2],[2,2],"same"),A=zr(A,r.conv4),A=dt(A,[2,2],[2,2],"same"),A=zr(A,r.conv5),A=dt(A,[2,2],[1,1],"same"),A=r.conv6?zr(A,r.conv6):A,A=r.conv7?zr(A,r.conv7):A,Pn(A,r.conv8,"valid",!1)},t.prototype.forwardInput=function(n,r){var A=this,o=this.params;if(!o)throw new Error("TinyYolov2 - load model before inference");return J(function(){var i=n.toBatchTensor(r,!1).toFloat();return i=A.config.meanRgb?Za(i,A.config.meanRgb):i,i=i.div($(256)),A.config.withSeparableConvs?A.runMobilenet(i,o):A.runTinyYolov2(i,o)})},t.prototype.forward=function(n,r){return Ae(this,void 0,void 0,function(){var A;return oe(this,function(o){switch(o.label){case 0:return A=this.forwardInput,[4,mt(n)];case 1:return[4,A.apply(this,[o.sent(),r])];case 2:return[2,o.sent()]}})})},t.prototype.detect=function(n,r){return r===void 0&&(r={}),Ae(this,void 0,void 0,function(){var A,o,i,a,s,u,l,c,f,h,d,g,m,p,v=this;return oe(this,function(w){switch(w.label){case 0:return A=new ag(r),o=A.inputSize,i=A.scoreThreshold,[4,mt(n)];case 1:return a=w.sent(),[4,this.forwardInput(a,o)];case 2:return s=w.sent(),u=J(function(){return ut(s)[0].expandDims()}),l={width:a.getInputWidth(0),height:a.getInputHeight(0)},[4,this.extractBoxes(u,a.getReshapedInputDimensions(0),i)];case 3:return c=w.sent(),s.dispose(),u.dispose(),f=c.map(function(B){return B.box}),h=c.map(function(B){return B.score}),d=c.map(function(B){return B.classScore}),g=c.map(function(B){return v.config.classes[B.label]}),m=Ha(f.map(function(B){return B.rescale(o)}),h,this.config.iouThreshold,!0),p=m.map(function(B){return new TC(h[B],d[B],g[B],f[B],l)}),[2,p]}})})},t.prototype.getDefaultModelName=function(){return""},t.prototype.extractParamsFromWeigthMap=function(n){return Y_(n,this.config)},t.prototype.extractParams=function(n){var r=this.config.filterSizes||t.DEFAULT_FILTER_SIZES,A=r?r.length:void 0;if(A!==7&&A!==8&&A!==9)throw new Error("TinyYolov2 - expected 7 | 8 | 9 convolutional filters, but found "+A+" filterSizes in config");return $_(n,this.config,this.boxEncodingSize,r)},t.prototype.extractBoxes=function(n,r,A){return Ae(this,void 0,void 0,function(){var o,i,a,s,u,l,c,f,h,d,g,m,p,v,w,B,y,C,b,x,F,E,I,S,T,N,O,K,P,D=this;return oe(this,function(R){switch(R.label){case 0:return o=r.width,i=r.height,a=Math.max(o,i),s=a/o,u=a/i,l=n.shape[1],c=this.config.anchors.length,f=J(function(){var L=n.reshape([l,l,c,D.boxEncodingSize]),G=L.slice([0,0,0,0],[l,l,c,4]),X=L.slice([0,0,0,4],[l,l,c,1]),q=D.withClassScores?Lr(L.slice([0,0,0,5],[l,l,c,D.config.classes.length]),3):$(0);return[G,X,q]}),h=f[0],d=f[1],g=f[2],m=[],[4,d.array()];case 1:return p=R.sent(),[4,h.array()];case 2:v=R.sent(),w=0,R.label=3;case 3:if(!(w<l))return[3,12];B=0,R.label=4;case 4:if(!(B<l))return[3,11];y=0,R.label=5;case 5:return y<c?(C=hf(p[w][B][y][0]),!A||C>A?(b=(B+hf(v[w][B][y][0]))/l*s,x=(w+hf(v[w][B][y][1]))/l*u,F=Math.exp(v[w][B][y][2])*this.config.anchors[y].x/l*s,E=Math.exp(v[w][B][y][3])*this.config.anchors[y].y/l*u,I=b-F/2,S=x-E/2,T={row:w,col:B,anchor:y},this.withClassScores?[4,this.extractPredictedClass(g,T)]:[3,7]):[3,9]):[3,10];case 6:return P=R.sent(),[3,8];case 7:P={classScore:1,label:0},R.label=8;case 8:N=P,O=N.classScore,K=N.label,m.push(Dt({box:new Yl(I,S,I+F,S+E),score:C,classScore:C*O,label:K},T)),R.label=9;case 9:return y++,[3,5];case 10:return B++,[3,4];case 11:return w++,[3,3];case 12:return h.dispose(),d.dispose(),g.dispose(),[2,m]}})})},t.prototype.extractPredictedClass=function(n,r){return Ae(this,void 0,void 0,function(){var A,o,i,a;return oe(this,function(s){switch(s.label){case 0:return A=r.row,o=r.col,i=r.anchor,[4,n.array()];case 1:return a=s.sent(),[2,Array(this.config.classes.length).fill(0).map(function(u,l){return a[A][o][i][l]}).map(function(u,l){return{classScore:u,label:l}}).reduce(function(u,l){return u.classScore>l.classScore?u:l})]}})})},t.DEFAULT_FILTER_SIZES=[3,16,32,64,128,256,512,1024,1024],t}(Or),q_=function(e){ce(t,e);function t(n){n===void 0&&(n=!0);var r=this,A=Object.assign({},{withSeparableConvs:n,iouThreshold:O_,classes:["face"]},n?{anchors:K_,meanRgb:V_}:{anchors:P_,withClassScores:!0});return r=e.call(this,A)||this,r}return Object.defineProperty(t.prototype,"withSeparableConvs",{get:function(){return this.config.withSeparableConvs},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"anchors",{get:function(){return this.config.anchors},enumerable:!0,configurable:!0}),t.prototype.locateFaces=function(n,r){return Ae(this,void 0,void 0,function(){var A;return oe(this,function(o){switch(o.label){case 0:return[4,this.detect(n,r)];case 1:return A=o.sent(),[2,A.map(function(i){return new dr(i.score,i.relativeBox,{width:i.imageWidth,height:i.imageHeight})})]}})})},t.prototype.getDefaultModelName=function(){return this.withSeparableConvs?G_:W_},t.prototype.extractParamsFromWeigthMap=function(n){return e.prototype.extractParamsFromWeigthMap.call(this,n)},t}(u1),l1=function(e){ce(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n._name="TinyFaceDetectorOptions",n}return t}(ag),es=function(){function e(){}return e.prototype.then=function(t){return Ae(this,void 0,void 0,function(){var n;return oe(this,function(r){switch(r.label){case 0:return n=t,[4,this.run()];case 1:return[2,n.apply(void 0,[r.sent()])]}})})},e.prototype.run=function(){return Ae(this,void 0,void 0,function(){return oe(this,function(t){throw new Error("ComposableTask - run is not implemented")})})},e}();function ec(e,t,n,r,A){return A===void 0&&(A=function(o){var i=o.alignedRect;return i}),Ae(this,void 0,void 0,function(){var o,i,a,s,u;return oe(this,function(l){switch(l.label){case 0:return o=e.map(function(c){return o_(c)?A(c):c.detection}),a=r,a?[3,5]:t instanceof Ke?[4,eg(t,o)]:[3,2];case 1:return s=l.sent(),[3,4];case 2:return[4,Zp(t,o)];case 3:s=l.sent(),l.label=4;case 4:a=s,l.label=5;case 5:return i=a,[4,n(i)];case 6:return u=l.sent(),i.forEach(function(c){return c instanceof Ke&&c.dispose()}),[2,u]}})})}function sg(e,t,n,r,A){return Ae(this,void 0,void 0,function(){var o=this;return oe(this,function(i){return[2,ec([e],t,function(a){return Ae(o,void 0,void 0,function(){return oe(this,function(s){return[2,n(a[0])]})})},r,A)]})})}function J_(e){return J(function(){return dn(ut(e,3).reverse(),3)})}var Ds=2,fl=12;function Z_(e,t){var n=Jl(e,t),r=tg(e,t);function A(u,l){var c=rt(e(u));return t.push({paramPath:l}),c}function o(u,l,c){c===void 0&&(c=!1);var f=n(u[0],u[1],3,l+"/conv1"),h=A(u[1],l+"/prelu1_alpha"),d=n(u[1],u[2],3,l+"/conv2"),g=A(u[2],l+"/prelu2_alpha"),m=n(u[2],u[3],c?2:3,l+"/conv3"),p=A(u[3],l+"/prelu3_alpha");return{conv1:f,prelu1_alpha:h,conv2:d,prelu2_alpha:g,conv3:m,prelu3_alpha:p}}function i(){var u=o([3,10,16,32],"pnet"),l=n(32,2,1,"pnet/conv4_1"),c=n(32,4,1,"pnet/conv4_2");return Dt(Dt({},u),{conv4_1:l,conv4_2:c})}function a(){var u=o([3,28,48,64],"rnet",!0),l=r(576,128,"rnet/fc1"),c=A(128,"rnet/prelu4_alpha"),f=r(128,2,"rnet/fc2_1"),h=r(128,4,"rnet/fc2_2");return Dt(Dt({},u),{fc1:l,prelu4_alpha:c,fc2_1:f,fc2_2:h})}function s(){var u=o([3,32,64,64],"onet"),l=n(64,128,2,"onet/conv4"),c=A(128,"onet/prelu4_alpha"),f=r(1152,256,"onet/fc1"),h=A(256,"onet/prelu5_alpha"),d=r(256,2,"onet/fc2_1"),g=r(256,4,"onet/fc2_2"),m=r(256,10,"onet/fc2_3");return Dt(Dt({},u),{conv4:l,prelu4_alpha:c,fc1:f,prelu5_alpha:h,fc2_1:d,fc2_2:g,fc2_3:m})}return{extractPNetParams:i,extractRNetParams:a,extractONetParams:s}}function ek(e){var t=Kr(e),n=t.extractWeights,r=t.getRemainingWeights,A=[],o=Z_(n,A),i=o.extractPNetParams,a=o.extractRNetParams,s=o.extractONetParams,u=i(),l=a(),c=s();if(r().length!==0)throw new Error("weights remaing after extract: "+r().length);return{params:{pnet:u,rnet:l,onet:c},paramMappings:A}}function tk(e,t){var n=SA(e,t);function r(l){var c=n(l+"/weights",4,l+"/filters"),f=n(l+"/bias",1);return{filters:c,bias:f}}function A(l){var c=n(l+"/weights",2),f=n(l+"/bias",1);return{weights:c,bias:f}}function o(l){return n(l,1)}function i(l){var c=r(l+"/conv1"),f=o(l+"/prelu1_alpha"),h=r(l+"/conv2"),d=o(l+"/prelu2_alpha"),g=r(l+"/conv3"),m=o(l+"/prelu3_alpha");return{conv1:c,prelu1_alpha:f,conv2:h,prelu2_alpha:d,conv3:g,prelu3_alpha:m}}function a(){var l=i("pnet"),c=r("pnet/conv4_1"),f=r("pnet/conv4_2");return Dt(Dt({},l),{conv4_1:c,conv4_2:f})}function s(){var l=i("rnet"),c=A("rnet/fc1"),f=o("rnet/prelu4_alpha"),h=A("rnet/fc2_1"),d=A("rnet/fc2_2");return Dt(Dt({},l),{fc1:c,prelu4_alpha:f,fc2_1:h,fc2_2:d})}function u(){var l=i("onet"),c=r("onet/conv4"),f=o("onet/prelu4_alpha"),h=A("onet/fc1"),d=o("onet/prelu5_alpha"),g=A("onet/fc2_1"),m=A("onet/fc2_2"),p=A("onet/fc2_3");return Dt(Dt({},l),{conv4:c,prelu4_alpha:f,fc1:h,prelu5_alpha:d,fc2_1:g,fc2_2:m,fc2_3:p})}return{extractPNetParams:a,extractRNetParams:s,extractONetParams:u}}function nk(e){var t=[],n=tk(e,t),r=n.extractPNetParams,A=n.extractRNetParams,o=n.extractONetParams,i=r(),a=A(),s=o();return Pr(e,t),{params:{pnet:i,rnet:a,onet:s},paramMappings:t}}function ed(e,t){var n=t[0],r=t[1];return{height:Math.floor(n*e),width:Math.floor(r*e)}}function rk(e,t,n){for(var r=n[0],A=n[1],o=fl/e,i=[],a=Math.min(r,A)*o,s=0;a>=12;)i.push(o*Math.pow(t,s)),a=a*t,s+=1;return i}var ug=function(e){ce(t,e);function t(n,r,A,o){return e.call(this,{left:n,top:r,right:A,bottom:o},!0)||this}return t}(xA);function c1(e){return J(function(){return Ht(ct(e,$(127.5)),$(.0078125))})}function ri(e,t){return J(function(){return de(Ve(e),Ht(t,ol(Ve(ol(e)))))})}function lg(e,t,n){return n===void 0&&(n=!1),J(function(){var r=Pn(e,t.conv1,"valid");return r=ri(r,t.prelu1_alpha),r=dt(r,n?[2,2]:[3,3],[2,2],"same"),r=Pn(r,t.conv2,"valid"),r=ri(r,t.prelu2_alpha),r=n?r:dt(r,[3,3],[2,2],"valid"),r=Pn(r,t.conv3,"valid"),r=ri(r,t.prelu3_alpha),r})}function Ak(e,t){return J(function(){var n=lg(e,t,!0),r=Pn(n,t.conv4_1,"valid"),A=yn(zl(r,3),3),o=Lr(ct(r,A),3),i=Pn(n,t.conv4_2,"valid");return{prob:o,regions:i}})}function ok(e,t){return J(function(){var n=ed(t,e.shape.slice(1)),r=n.height,A=n.width,o=Pp.resizeBilinear(e,[r,A]),i=c1(o);return CA(i,[0,2,1,3])})}function ik(e,t,n,r){for(var A=[],o=e.arraySync(),i=0;i<e.shape[0];i++)for(var a=0;a<e.shape[1];a++)o[i][a]>=r&&A.push(new be(a,i));var s=A.map(function(u){var l=new Yl(Math.round((u.y*Ds+1)/n),Math.round((u.x*Ds+1)/n),Math.round((u.y*Ds+fl)/n),Math.round((u.x*Ds+fl)/n)),c=o[u.y][u.x],f=t.arraySync(),h=new ug(f[u.y][u.x][0],f[u.y][u.x][1],f[u.y][u.x][2],f[u.y][u.x][3]);return{cell:l,score:c,region:h}});return s}function ak(e,t,n,r,A){A.stage1=[];var o=t.map(function(f){return J(function(){var h={scale:f},d=ok(e,f),g=Date.now(),m=Ak(d,r),p=m.prob,v=m.regions;h.pnet=Date.now()-g;var w=ut(ut(p,3)[1])[0],B=ut(v)[0];return{scoresTensor:w,regionsTensor:B,scale:f,statsForScale:h}})}),i=o.map(function(f){var h=f.scoresTensor,d=f.regionsTensor,g=f.scale,m=f.statsForScale,p=ik(h,d,g,n);if(h.dispose(),d.dispose(),!p.length)return A.stage1.push(m),[];var v=Date.now(),w=Ha(p.map(function(B){return B.cell}),p.map(function(B){return B.score}),.5);return m.nms=Date.now()-v,m.numBoxes=w.length,A.stage1.push(m),w.map(function(B){return p[B]})}),a=i.reduce(function(f,h){return f.concat(h)},[]),s=[],u=[];if(a.length>0){var l=Date.now(),c=Ha(a.map(function(f){return f.cell}),a.map(function(f){return f.score}),.7);A.stage1_nms=Date.now()-l,u=c.map(function(f){return a[f].score}),s=c.map(function(f){return a[f]}).map(function(f){var h=f.cell,d=f.region;return new Yl(h.left+d.left*h.width,h.top+d.top*h.height,h.right+d.right*h.width,h.bottom+d.bottom*h.height).toSquare().round()})}return{boxes:s,scores:u}}function f1(e,t,n){var r=n.width,A=n.height;return Ae(this,void 0,void 0,function(){var o,i,a,s=this;return oe(this,function(u){switch(u.label){case 0:return o=no(e),[4,Promise.all(t.map(function(l){return Ae(s,void 0,void 0,function(){var c,f,h,d,g,m,p,v;return oe(this,function(w){return c=l.padAtBorders(e.height,e.width),f=c.y,h=c.ey,d=c.x,g=c.ex,m=d-1,p=f-1,v=o.getImageData(m,p,g-m,h-p),[2,Lt.isNodejs()?Jp(v):createImageBitmap(v)]})})}))];case 1:return i=u.sent(),a=[],i.forEach(function(l){var c=ql({width:r,height:A}),f=no(c);f.drawImage(l,0,0,r,A);for(var h=f.getImageData(0,0,r,A).data,d=[],g=0;g<h.length;g+=4)d.push(h[g+2]),d.push(h[g+1]),d.push(h[g]);a.push(d)}),[2,a.map(function(l){var c=J(function(){var f=CA($t(l,[1,r,A,3]),[0,2,1,3]).toFloat();return c1(f)});return c})]}})})}function sk(e,t){return J(function(){var n=lg(e,t),r=Ln(n,[n.shape[0],t.fc1.weights.shape[0]]),A=Ar(r,t.fc1),o=ri(A,t.prelu4_alpha),i=Ar(o,t.fc2_1),a=yn(zl(i,1),1),s=Lr(ct(i,a),1),u=Ar(o,t.fc2_2),l=ut(s,1)[1];return{scores:l,regions:u}})}function uk(e,t,n,r,A){return Ae(this,void 0,void 0,function(){var o,i,a,s,u,l,c,f,h,d,g,m,p,v;return oe(this,function(w){switch(w.label){case 0:return o=Date.now(),[4,f1(e,t,{width:24,height:24})];case 1:return i=w.sent(),A.stage2_extractImagePatches=Date.now()-o,o=Date.now(),a=i.map(function(B){var y=sk(B,r);return B.dispose(),y}),A.stage2_rnet=Date.now()-o,s=a.length>1?st(a.map(function(B){return B.scores})):a[0].scores,c=(l=Array).from,[4,s.data()];case 2:return u=c.apply(l,[w.sent()]),s.dispose(),f=u.map(function(B,y){return{score:B,idx:y}}).filter(function(B){return B.score>n}).map(function(B){var y=B.idx;return y}),h=f.map(function(B){return t[B]}),d=f.map(function(B){return u[B]}),g=[],m=[],h.length>0&&(o=Date.now(),p=Ha(h,d,.7),A.stage2_nms=Date.now()-o,v=p.map(function(B){var y=a[f[B]].regions.arraySync();return new ug(y[0][0],y[0][1],y[0][2],y[0][3])}),m=p.map(function(B){return d[B]}),g=p.map(function(B,y){return h[B].calibrate(v[y])})),a.forEach(function(B){B.regions.dispose(),B.scores.dispose()}),[2,{boxes:g,scores:m}]}})})}function lk(e,t){return J(function(){var n=lg(e,t);n=dt(n,[2,2],[2,2],"same"),n=Pn(n,t.conv4,"valid"),n=ri(n,t.prelu4_alpha);var r=Ln(n,[n.shape[0],t.fc1.weights.shape[0]]),A=Ar(r,t.fc1),o=ri(A,t.prelu5_alpha),i=Ar(o,t.fc2_1),a=yn(zl(i,1),1),s=Lr(ct(i,a),1),u=Ar(o,t.fc2_2),l=Ar(o,t.fc2_3),c=ut(s,1)[1];return{scores:c,regions:u,points:l}})}function ck(e,t,n,r,A){return Ae(this,void 0,void 0,function(){var o,i,a,s,u,l,c,f,h,d,g,m,p,v,w;return oe(this,function(B){switch(B.label){case 0:return o=Date.now(),[4,f1(e,t,{width:48,height:48})];case 1:return i=B.sent(),A.stage3_extractImagePatches=Date.now()-o,o=Date.now(),a=i.map(function(y){var C=lk(y,r);return y.dispose(),C}),A.stage3_onet=Date.now()-o,s=a.length>1?st(a.map(function(y){return y.scores})):a[0].scores,c=(l=Array).from,[4,s.data()];case 2:return u=c.apply(l,[B.sent()]),s.dispose(),f=u.map(function(y,C){return{score:y,idx:C}}).filter(function(y){return y.score>n}).map(function(y){var C=y.idx;return C}),h=f.map(function(y){var C=a[y].regions.arraySync();return new ug(C[0][0],C[0][1],C[0][2],C[0][3])}),d=f.map(function(y,C){return t[y].calibrate(h[C])}),g=f.map(function(y){return u[y]}),m=[],p=[],v=[],d.length>0&&(o=Date.now(),w=Ha(d,g,.7,!1),A.stage3_nms=Date.now()-o,m=w.map(function(y){return d[y]}),p=w.map(function(y){return g[y]}),v=w.map(function(y,C){return Array(5).fill(0).map(function(b,x){var F=a[y].points.arraySync();return new be(F[0][x]*(m[C].width+1)+m[C].left,F[0][x+5]*(m[C].height+1)+m[C].top)})})),a.forEach(function(y){y.regions.dispose(),y.scores.dispose(),y.points.dispose()}),[2,{boxes:m,scores:p,points:v}]}})})}var fk=function(e){ce(t,e);function t(){return e.call(this,"Mtcnn")||this}return t.prototype.load=function(n){return Ae(this,void 0,void 0,function(){return oe(this,function(r){return console.warn("mtcnn is deprecated and will be removed soon"),[2,e.prototype.load.call(this,n)]})})},t.prototype.loadFromDisk=function(n){return Ae(this,void 0,void 0,function(){return oe(this,function(r){return console.warn("mtcnn is deprecated and will be removed soon"),[2,e.prototype.loadFromDisk.call(this,n)]})})},t.prototype.forwardInput=function(n,r){return r===void 0&&(r={}),Ae(this,void 0,void 0,function(){var A,o,i,a,s,u,l,c,f,h,d,g,m,p,v,w,B,y,C,b,x;return oe(this,function(F){switch(F.label){case 0:if(A=this.params,!A)throw new Error("Mtcnn - load model before inference");if(o=n.canvases[0],!o)throw new Error("Mtcnn - inputCanvas is not defined, note that passing tensors into Mtcnn.forwardInput is not supported yet.");return i={},a=Date.now(),s=J(function(){return J_(yn(Xp.fromPixels(o)).toFloat())}),u=function(E){return s.dispose(),i.total=Date.now()-a,E},l=s.shape.slice(1),c=l[0],f=l[1],h=new a1(r),d=h.minFaceSize,g=h.scaleFactor,m=h.maxNumScales,p=h.scoreThresholds,v=h.scaleSteps,w=(v||rk(d,g,[c,f])).filter(function(E){var I=ed(E,[c,f]);return Math.min(I.width,I.height)>fl}).slice(0,m),i.scales=w,i.pyramid=w.map(function(E){return ed(E,[c,f])}),B=Date.now(),[4,ak(s,w,p[0],A.pnet,i)];case 1:return y=F.sent(),i.total_stage1=Date.now()-B,y.boxes.length?(i.stage2_numInputBoxes=y.boxes.length,B=Date.now(),[4,uk(o,y.boxes,p[1],A.rnet,i)]):[2,u({results:[],stats:i})];case 2:return C=F.sent(),i.total_stage2=Date.now()-B,C.boxes.length?(i.stage3_numInputBoxes=C.boxes.length,B=Date.now(),[4,ck(o,C.boxes,p[2],A.onet,i)]):[2,u({results:[],stats:i})];case 3:return b=F.sent(),i.total_stage3=Date.now()-B,x=b.boxes.map(function(E,I){return Ag(Yp({},new dr(b.scores[I],new jp(E.left/f,E.top/c,E.width/f,E.height/c),{height:c,width:f})),new K4(b.points[I].map(function(S){return S.sub(new be(E.left,E.top)).div(new be(E.width,E.height))}),{width:E.width,height:E.height}))}),[2,u({results:x,stats:i})]}})})},t.prototype.forward=function(n,r){return r===void 0&&(r={}),Ae(this,void 0,void 0,function(){var A;return oe(this,function(o){switch(o.label){case 0:return A=this.forwardInput,[4,mt(n)];case 1:return[4,A.apply(this,[o.sent(),r])];case 2:return[2,o.sent().results]}})})},t.prototype.forwardWithStats=function(n,r){return r===void 0&&(r={}),Ae(this,void 0,void 0,function(){var A;return oe(this,function(o){switch(o.label){case 0:return A=this.forwardInput,[4,mt(n)];case 1:return[2,A.apply(this,[o.sent(),r])]}})})},t.prototype.getDefaultModelName=function(){return"mtcnn_model"},t.prototype.extractParamsFromWeigthMap=function(n){return nk(n)},t.prototype.extractParams=function(n){return ek(n)},t}(Or),hk=.4,dk=[new be(1.603231,2.094468),new be(6.041143,7.080126),new be(2.882459,3.518061),new be(4.266906,5.178857),new be(9.041765,10.66308)],pk=[117.001,114.697,97.404],gk=function(e){ce(t,e);function t(){var n=this,r={withSeparableConvs:!0,iouThreshold:hk,classes:["face"],anchors:dk,meanRgb:pk,isFirstLayerConv2d:!0,filterSizes:[3,16,32,64,128,256,512]};return n=e.call(this,r)||this,n}return Object.defineProperty(t.prototype,"anchors",{get:function(){return this.config.anchors},enumerable:!0,configurable:!0}),t.prototype.locateFaces=function(n,r){return Ae(this,void 0,void 0,function(){var A;return oe(this,function(o){switch(o.label){case 0:return[4,this.detect(n,r)];case 1:return A=o.sent(),[2,A.map(function(i){return new dr(i.score,i.relativeBox,{width:i.imageWidth,height:i.imageHeight})})]}})})},t.prototype.getDefaultModelName=function(){return"tiny_face_detector_model"},t.prototype.extractParamsFromWeigthMap=function(n){return e.prototype.extractParamsFromWeigthMap.call(this,n)},t}(u1),Pt={ssdMobilenetv1:new s1,tinyFaceDetector:new gk,tinyYolov2:new q_,mtcnn:new fk,faceLandmark68Net:new t1,faceLandmark68TinyNet:new m_,faceRecognitionNet:new b_,faceExpressionNet:new A_,ageGenderNet:new d_},h1=function(e){ce(t,e);function t(n,r,A){var o=e.call(this)||this;return o.parentTask=n,o.input=r,o.extractedFaces=A,o}return t}(es),cg=function(e){ce(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.run=function(){return Ae(this,void 0,void 0,function(){var n,r,A=this;return oe(this,function(o){switch(o.label){case 0:return[4,this.parentTask];case 1:return n=o.sent(),[4,ec(n,this.input,function(i){return Ae(A,void 0,void 0,function(){return oe(this,function(a){switch(a.label){case 0:return[4,Promise.all(i.map(function(s){return Pt.faceExpressionNet.predictExpressions(s)}))];case 1:return[2,a.sent()]}})})},this.extractedFaces)];case 2:return r=o.sent(),[2,n.map(function(i,a){return JC(i,r[a])})]}})})},t.prototype.withAgeAndGender=function(){return new pg(this,this.input)},t}(h1),fg=function(e){ce(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.run=function(){return Ae(this,void 0,void 0,function(){var n,r;return oe(this,function(A){switch(A.label){case 0:return[4,this.parentTask];case 1:return n=A.sent(),n?[4,sg(n,this.input,function(o){return Pt.faceExpressionNet.predictExpressions(o)},this.extractedFaces)]:[2];case 2:return r=A.sent(),[2,JC(n,r)]}})})},t.prototype.withAgeAndGender=function(){return new gg(this,this.input)},t}(h1),hg=function(e){ce(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.withAgeAndGender=function(){return new vg(this,this.input)},t.prototype.withFaceDescriptors=function(){return new wg(this,this.input)},t}(cg),dg=function(e){ce(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.withAgeAndGender=function(){return new mg(this,this.input)},t.prototype.withFaceDescriptor=function(){return new Bg(this,this.input)},t}(fg),d1=function(e){ce(t,e);function t(n,r,A){var o=e.call(this)||this;return o.parentTask=n,o.input=r,o.extractedFaces=A,o}return t}(es),pg=function(e){ce(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.run=function(){return Ae(this,void 0,void 0,function(){var n,r,A=this;return oe(this,function(o){switch(o.label){case 0:return[4,this.parentTask];case 1:return n=o.sent(),[4,ec(n,this.input,function(i){return Ae(A,void 0,void 0,function(){return oe(this,function(a){switch(a.label){case 0:return[4,Promise.all(i.map(function(s){return Pt.ageGenderNet.predictAgeAndGender(s)}))];case 1:return[2,a.sent()]}})})},this.extractedFaces)];case 2:return r=o.sent(),[2,n.map(function(i,a){var s=r[a],u=s.age,l=s.gender,c=s.genderProbability;return o1(i1(i,l,c),u)})]}})})},t.prototype.withFaceExpressions=function(){return new cg(this,this.input)},t}(d1),gg=function(e){ce(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.run=function(){return Ae(this,void 0,void 0,function(){var n,r,A,o,i;return oe(this,function(a){switch(a.label){case 0:return[4,this.parentTask];case 1:return n=a.sent(),n?[4,sg(n,this.input,function(s){return Pt.ageGenderNet.predictAgeAndGender(s)},this.extractedFaces)]:[2];case 2:return r=a.sent(),A=r.age,o=r.gender,i=r.genderProbability,[2,o1(i1(n,o,i),A)]}})})},t.prototype.withFaceExpressions=function(){return new fg(this,this.input)},t}(d1),vg=function(e){ce(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.withFaceExpressions=function(){return new hg(this,this.input)},t.prototype.withFaceDescriptors=function(){return new wg(this,this.input)},t}(pg),mg=function(e){ce(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.withFaceExpressions=function(){return new dg(this,this.input)},t.prototype.withFaceDescriptor=function(){return new Bg(this,this.input)},t}(gg),p1=function(e){ce(t,e);function t(n,r){var A=e.call(this)||this;return A.parentTask=n,A.input=r,A}return t}(es),wg=function(e){ce(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.run=function(){return Ae(this,void 0,void 0,function(){var n,r;return oe(this,function(A){switch(A.label){case 0:return[4,this.parentTask];case 1:return n=A.sent(),[4,ec(n,this.input,function(o){return Promise.all(o.map(function(i){return Pt.faceRecognitionNet.computeFaceDescriptor(i)}))},null,function(o){return o.landmarks.align(null,{useDlibAlignment:!0})})];case 2:return r=A.sent(),[2,r.map(function(o,i){return A1(n[i],o)})]}})})},t.prototype.withFaceExpressions=function(){return new hg(this,this.input)},t.prototype.withAgeAndGender=function(){return new vg(this,this.input)},t}(p1),Bg=function(e){ce(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.run=function(){return Ae(this,void 0,void 0,function(){var n,r;return oe(this,function(A){switch(A.label){case 0:return[4,this.parentTask];case 1:return n=A.sent(),n?[4,sg(n,this.input,function(o){return Pt.faceRecognitionNet.computeFaceDescriptor(o)},null,function(o){return o.landmarks.align(null,{useDlibAlignment:!0})})]:[2];case 2:return r=A.sent(),[2,A1(n,r)]}})})},t.prototype.withFaceExpressions=function(){return new dg(this,this.input)},t.prototype.withAgeAndGender=function(){return new mg(this,this.input)},t}(p1),g1=function(e){ce(t,e);function t(n,r,A){var o=e.call(this)||this;return o.parentTask=n,o.input=r,o.useTinyLandmarkNet=A,o}return Object.defineProperty(t.prototype,"landmarkNet",{get:function(){return this.useTinyLandmarkNet?Pt.faceLandmark68TinyNet:Pt.faceLandmark68Net},enumerable:!0,configurable:!0}),t}(es),vk=function(e){ce(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.run=function(){return Ae(this,void 0,void 0,function(){var n,r,A,o,i,a=this;return oe(this,function(s){switch(s.label){case 0:return[4,this.parentTask];case 1:return n=s.sent(),r=n.map(function(u){return u.detection}),this.input instanceof Ke?[4,eg(this.input,r)]:[3,3];case 2:return o=s.sent(),[3,5];case 3:return[4,Zp(this.input,r)];case 4:o=s.sent(),s.label=5;case 5:return A=o,[4,Promise.all(A.map(function(u){return a.landmarkNet.detectLandmarks(u)}))];case 6:return i=s.sent(),A.forEach(function(u){return u instanceof Ke&&u.dispose()}),[2,n.map(function(u,l){return Ag(u,i[l])})]}})})},t.prototype.withFaceExpressions=function(){return new hg(this,this.input)},t.prototype.withAgeAndGender=function(){return new vg(this,this.input)},t.prototype.withFaceDescriptors=function(){return new wg(this,this.input)},t}(g1),mk=function(e){ce(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.run=function(){return Ae(this,void 0,void 0,function(){var n,r,A,o,i;return oe(this,function(a){switch(a.label){case 0:return[4,this.parentTask];case 1:return n=a.sent(),n?(r=n.detection,this.input instanceof Ke?[4,eg(this.input,[r])]:[3,3]):[2];case 2:return o=a.sent(),[3,5];case 3:return[4,Zp(this.input,[r])];case 4:o=a.sent(),a.label=5;case 5:return A=o,[4,this.landmarkNet.detectLandmarks(A[0])];case 6:return i=a.sent(),A.forEach(function(s){return s instanceof Ke&&s.dispose()}),[2,Ag(n,i)]}})})},t.prototype.withFaceExpressions=function(){return new dg(this,this.input)},t.prototype.withAgeAndGender=function(){return new mg(this,this.input)},t.prototype.withFaceDescriptor=function(){return new Bg(this,this.input)},t}(g1),v1=function(e){ce(t,e);function t(n,r){r===void 0&&(r=new Zl);var A=e.call(this)||this;return A.input=n,A.options=r,A}return t}(es),wk=function(e){ce(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.run=function(){return Ae(this,void 0,void 0,function(){var n,r,A,o;return oe(this,function(i){switch(i.label){case 0:return n=this,r=n.input,A=n.options,A instanceof a1?[4,Pt.mtcnn.forward(r,A)]:[3,2];case 1:return[2,i.sent().map(function(a){return a.detection})];case 2:if(o=A instanceof l1?function(a){return Pt.tinyFaceDetector.locateFaces(a,A)}:A instanceof Zl?function(a){return Pt.ssdMobilenetv1.locateFaces(a,A)}:A instanceof ag?function(a){return Pt.tinyYolov2.locateFaces(a,A)}:null,!o)throw new Error("detectFaces - expected options to be instance of TinyFaceDetectorOptions | SsdMobilenetv1Options | MtcnnOptions | TinyYolov2Options");return[2,o(r)]}})})},t.prototype.runAndExtendWithFaceDetections=function(){var n=this;return new Promise(function(r){return Ae(n,void 0,void 0,function(){var A;return oe(this,function(o){switch(o.label){case 0:return[4,this.run()];case 1:return A=o.sent(),[2,r(A.map(function(i){return Yp({},i)}))]}})})})},t.prototype.withFaceLandmarks=function(n){return n===void 0&&(n=!1),new vk(this.runAndExtendWithFaceDetections(),this.input,n)},t.prototype.withFaceExpressions=function(){return new cg(this.runAndExtendWithFaceDetections(),this.input)},t.prototype.withAgeAndGender=function(){return new pg(this.runAndExtendWithFaceDetections(),this.input)},t}(v1),Bk=function(e){ce(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.run=function(){return Ae(this,void 0,void 0,function(){var n,r;return oe(this,function(A){switch(A.label){case 0:return[4,new wk(this.input,this.options)];case 1:return n=A.sent(),r=n[0],n.forEach(function(o){o.score>r.score&&(r=o)}),[2,r]}})})},t.prototype.runAndExtendWithFaceDetection=function(){var n=this;return new Promise(function(r){return Ae(n,void 0,void 0,function(){var A;return oe(this,function(o){switch(o.label){case 0:return[4,this.run()];case 1:return A=o.sent(),[2,r(A?Yp({},A):void 0)]}})})})},t.prototype.withFaceLandmarks=function(n){return n===void 0&&(n=!1),new mk(this.runAndExtendWithFaceDetection(),this.input,n)},t.prototype.withFaceExpressions=function(){return new fg(this.runAndExtendWithFaceDetection(),this.input)},t.prototype.withAgeAndGender=function(){return new gg(this.runAndExtendWithFaceDetection(),this.input)},t}(v1);function yk(e,t){return t===void 0&&(t=new Zl),new Bk(e,t)}function Ck(e,t){if(e.length!==t.length)throw new Error("euclideanDistance: arr1.length !== arr2.length");var n=Array.from(e),r=Array.from(t);return Math.sqrt(n.map(function(A,o){return A-r[o]}).reduce(function(A,o){return A+Math.pow(o,2)},0))}(function(){function e(t,n){n===void 0&&(n=.6),this._distanceThreshold=n;var r=Array.isArray(t)?t:[t];if(!r.length)throw new Error("FaceRecognizer.constructor - expected atleast one input");var A=1,o=function(){return"person "+A++};this._labeledDescriptors=r.map(function(i){if(i instanceof Is)return i;if(i instanceof Float32Array)return new Is(o(),[i]);if(i.descriptor&&i.descriptor instanceof Float32Array)return new Is(o(),[i.descriptor]);throw new Error("FaceRecognizer.constructor - expected inputs to be of type LabeledFaceDescriptors | WithFaceDescriptor<any> | Float32Array | Array<LabeledFaceDescriptors | WithFaceDescriptor<any> | Float32Array>")})}return Object.defineProperty(e.prototype,"labeledDescriptors",{get:function(){return this._labeledDescriptors},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"distanceThreshold",{get:function(){return this._distanceThreshold},enumerable:!0,configurable:!0}),e.prototype.computeMeanDistance=function(t,n){return n.map(function(r){return Ck(r,t)}).reduce(function(r,A){return r+A},0)/(n.length||1)},e.prototype.matchDescriptor=function(t){var n=this;return this.labeledDescriptors.map(function(r){var A=r.descriptors,o=r.label;return new km(o,n.computeMeanDistance(t,A))}).reduce(function(r,A){return r.distance<A.distance?r:A})},e.prototype.findBestMatch=function(t){var n=this.matchDescriptor(t);return n.distance<this.distanceThreshold?n:new km("unknown",n.distance)},e.prototype.toJSON=function(){return{distanceThreshold:this.distanceThreshold,labeledDescriptors:this.labeledDescriptors.map(function(t){return t.toJSON()})}},e.fromJSON=function(t){var n=t.labeledDescriptors.map(function(r){return Is.fromJSON(r)});return new e(n,t.distanceThreshold)},e})();/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var td=function(e,t){return td=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var A in r)Object.prototype.hasOwnProperty.call(r,A)&&(n[A]=r[A])},td(e,t)};function Gn(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");td(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var nd=function(){return nd=Object.assign||function(t){for(var n,r=1,A=arguments.length;r<A;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},nd.apply(this,arguments)};function Mt(e,t,n,r){function A(o){return o instanceof n?o:new n(function(i){i(o)})}return new(n||(n=Promise))(function(o,i){function a(l){try{u(r.next(l))}catch(c){i(c)}}function s(l){try{u(r.throw(l))}catch(c){i(c)}}function u(l){l.done?o(l.value):A(l.value).then(a,s)}u((r=r.apply(e,[])).next())})}function It(e,t){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,A,o,i;return i={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function a(u){return function(l){return s([u,l])}}function s(u){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,A&&(o=u[0]&2?A.return:u[0]?A.throw||((o=A.return)&&o.call(A),0):A.next)&&!(o=o.call(A,u[1])).done)return o;switch(A=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return n.label++,{value:u[1],done:!1};case 5:n.label++,A=u[1],u=[0];continue;case 7:u=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){n=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){n.label=u[1];break}if(u[0]===6&&n.label<o[1]){n.label=o[1],o=u;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(u);break}o[2]&&n.ops.pop(),n.trys.pop();continue}u=t.call(e,n)}catch(l){u=[6,l],A=0}finally{r=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function Rs(e,t,n){if(arguments.length===2)for(var r=0,A=t.length,o;r<A;r++)(o||!(r in t))&&(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||t)}var Tr=function(){function e(t,n,r,A){this.left=t,this.top=n,this.width=r,this.height=A}return e.prototype.add=function(t,n,r,A){return new e(this.left+t,this.top+n,this.width+r,this.height+A)},e.fromClientRect=function(t,n){return new e(n.left+t.windowBounds.left,n.top+t.windowBounds.top,n.width,n.height)},e.fromDOMRectList=function(t,n){var r=Array.from(n).find(function(A){return A.width!==0});return r?new e(r.left+t.windowBounds.left,r.top+t.windowBounds.top,r.width,r.height):e.EMPTY},e.EMPTY=new e(0,0,0,0),e}(),tc=function(e,t){return Tr.fromClientRect(e,t.getBoundingClientRect())},xk=function(e){var t=e.body,n=e.documentElement;if(!t||!n)throw new Error("Unable to get document size");var r=Math.max(Math.max(t.scrollWidth,n.scrollWidth),Math.max(t.offsetWidth,n.offsetWidth),Math.max(t.clientWidth,n.clientWidth)),A=Math.max(Math.max(t.scrollHeight,n.scrollHeight),Math.max(t.offsetHeight,n.offsetHeight),Math.max(t.clientHeight,n.clientHeight));return new Tr(0,0,r,A)},nc=function(e){for(var t=[],n=0,r=e.length;n<r;){var A=e.charCodeAt(n++);if(A>=55296&&A<=56319&&n<r){var o=e.charCodeAt(n++);(o&64512)===56320?t.push(((A&1023)<<10)+(o&1023)+65536):(t.push(A),n--)}else t.push(A)}return t},Je=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(String.fromCodePoint)return String.fromCodePoint.apply(String,e);var n=e.length;if(!n)return"";for(var r=[],A=-1,o="";++A<n;){var i=e[A];i<=65535?r.push(i):(i-=65536,r.push((i>>10)+55296,i%1024+56320)),(A+1===n||r.length>16384)&&(o+=String.fromCharCode.apply(String,r),r.length=0)}return o},Lm="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Fk=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Ts=0;Ts<Lm.length;Ts++)Fk[Lm.charCodeAt(Ts)]=Ts;var Mm="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Vi=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Hs=0;Hs<Mm.length;Hs++)Vi[Mm.charCodeAt(Hs)]=Hs;var bk=function(e){var t=e.length*.75,n=e.length,r,A=0,o,i,a,s;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);var u=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(t):new Array(t),l=Array.isArray(u)?u:new Uint8Array(u);for(r=0;r<n;r+=4)o=Vi[e.charCodeAt(r)],i=Vi[e.charCodeAt(r+1)],a=Vi[e.charCodeAt(r+2)],s=Vi[e.charCodeAt(r+3)],l[A++]=o<<2|i>>4,l[A++]=(i&15)<<4|a>>2,l[A++]=(a&3)<<6|s&63;return u},Ek=function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n.push(e[r+1]<<8|e[r]);return n},Qk=function(e){for(var t=e.length,n=[],r=0;r<t;r+=4)n.push(e[r+3]<<24|e[r+2]<<16|e[r+1]<<8|e[r]);return n},$A=5,yg=11,gf=2,Uk=yg-$A,m1=65536>>$A,Ik=1<<$A,vf=Ik-1,Sk=1024>>$A,_k=m1+Sk,kk=_k,Dk=32,Rk=kk+Dk,Tk=65536>>yg,Hk=1<<Uk,Nk=Hk-1,Om=function(e,t,n){return e.slice?e.slice(t,n):new Uint16Array(Array.prototype.slice.call(e,t,n))},Lk=function(e,t,n){return e.slice?e.slice(t,n):new Uint32Array(Array.prototype.slice.call(e,t,n))},Mk=function(e,t){var n=bk(e),r=Array.isArray(n)?Qk(n):new Uint32Array(n),A=Array.isArray(n)?Ek(n):new Uint16Array(n),o=24,i=Om(A,o/2,r[4]/2),a=r[5]===2?Om(A,(o+r[4])/2):Lk(r,Math.ceil((o+r[4])/4));return new Ok(r[0],r[1],r[2],r[3],i,a)},Ok=function(){function e(t,n,r,A,o,i){this.initialValue=t,this.errorValue=n,this.highStart=r,this.highValueIndex=A,this.index=o,this.data=i}return e.prototype.get=function(t){var n;if(t>=0){if(t<55296||t>56319&&t<=65535)return n=this.index[t>>$A],n=(n<<gf)+(t&vf),this.data[n];if(t<=65535)return n=this.index[m1+(t-55296>>$A)],n=(n<<gf)+(t&vf),this.data[n];if(t<this.highStart)return n=Rk-Tk+(t>>yg),n=this.index[n],n+=t>>$A&Nk,n=this.index[n],n=(n<<gf)+(t&vf),this.data[n];if(t<=1114111)return this.data[this.highValueIndex]}return this.errorValue},e}(),Pm="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Pk=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Ns=0;Ns<Pm.length;Ns++)Pk[Pm.charCodeAt(Ns)]=Ns;var Kk="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",Km=50,Vk=1,w1=2,B1=3,Wk=4,Gk=5,Vm=7,y1=8,Wm=9,AA=10,rd=11,Gm=12,Ad=13,zk=14,Wi=15,od=16,Ls=17,Ti=18,Xk=19,zm=20,id=21,Hi=22,mf=23,wo=24,An=25,Gi=26,zi=27,Bo=28,$k=29,LA=30,jk=31,Ms=32,Os=33,ad=34,sd=35,ud=36,Na=37,ld=38,gu=39,vu=40,wf=41,C1=42,Yk=43,qk=[9001,65288],x1="!",ve="×",Ps="÷",cd=Mk(Kk),yr=[LA,ud],fd=[Vk,w1,B1,Gk],F1=[AA,y1],Xm=[zi,Gi],Jk=fd.concat(F1),$m=[ld,gu,vu,ad,sd],Zk=[Wi,Ad],eD=function(e,t){t===void 0&&(t="strict");var n=[],r=[],A=[];return e.forEach(function(o,i){var a=cd.get(o);if(a>Km?(A.push(!0),a-=Km):A.push(!1),["normal","auto","loose"].indexOf(t)!==-1&&[8208,8211,12316,12448].indexOf(o)!==-1)return r.push(i),n.push(od);if(a===Wk||a===rd){if(i===0)return r.push(i),n.push(LA);var s=n[i-1];return Jk.indexOf(s)===-1?(r.push(r[i-1]),n.push(s)):(r.push(i),n.push(LA))}if(r.push(i),a===jk)return n.push(t==="strict"?id:Na);if(a===C1||a===$k)return n.push(LA);if(a===Yk)return o>=131072&&o<=196605||o>=196608&&o<=262141?n.push(Na):n.push(LA);n.push(a)}),[r,n,A]},Bf=function(e,t,n,r){var A=r[n];if(Array.isArray(e)?e.indexOf(A)!==-1:e===A)for(var o=n;o<=r.length;){o++;var i=r[o];if(i===t)return!0;if(i!==AA)break}if(A===AA)for(var o=n;o>0;){o--;var a=r[o];if(Array.isArray(e)?e.indexOf(a)!==-1:e===a)for(var s=n;s<=r.length;){s++;var i=r[s];if(i===t)return!0;if(i!==AA)break}if(a!==AA)break}return!1},jm=function(e,t){for(var n=e;n>=0;){var r=t[n];if(r===AA)n--;else return r}return 0},tD=function(e,t,n,r,A){if(n[r]===0)return ve;var o=r-1;if(Array.isArray(A)&&A[o]===!0)return ve;var i=o-1,a=o+1,s=t[o],u=i>=0?t[i]:0,l=t[a];if(s===w1&&l===B1)return ve;if(fd.indexOf(s)!==-1)return x1;if(fd.indexOf(l)!==-1||F1.indexOf(l)!==-1)return ve;if(jm(o,t)===y1)return Ps;if(cd.get(e[o])===rd||(s===Ms||s===Os)&&cd.get(e[a])===rd||s===Vm||l===Vm||s===Wm||[AA,Ad,Wi].indexOf(s)===-1&&l===Wm||[Ls,Ti,Xk,wo,Bo].indexOf(l)!==-1||jm(o,t)===Hi||Bf(mf,Hi,o,t)||Bf([Ls,Ti],id,o,t)||Bf(Gm,Gm,o,t))return ve;if(s===AA)return Ps;if(s===mf||l===mf)return ve;if(l===od||s===od)return Ps;if([Ad,Wi,id].indexOf(l)!==-1||s===zk||u===ud&&Zk.indexOf(s)!==-1||s===Bo&&l===ud||l===zm||yr.indexOf(l)!==-1&&s===An||yr.indexOf(s)!==-1&&l===An||s===zi&&[Na,Ms,Os].indexOf(l)!==-1||[Na,Ms,Os].indexOf(s)!==-1&&l===Gi||yr.indexOf(s)!==-1&&Xm.indexOf(l)!==-1||Xm.indexOf(s)!==-1&&yr.indexOf(l)!==-1||[zi,Gi].indexOf(s)!==-1&&(l===An||[Hi,Wi].indexOf(l)!==-1&&t[a+1]===An)||[Hi,Wi].indexOf(s)!==-1&&l===An||s===An&&[An,Bo,wo].indexOf(l)!==-1)return ve;if([An,Bo,wo,Ls,Ti].indexOf(l)!==-1)for(var c=o;c>=0;){var f=t[c];if(f===An)return ve;if([Bo,wo].indexOf(f)!==-1)c--;else break}if([zi,Gi].indexOf(l)!==-1)for(var c=[Ls,Ti].indexOf(s)!==-1?i:o;c>=0;){var f=t[c];if(f===An)return ve;if([Bo,wo].indexOf(f)!==-1)c--;else break}if(ld===s&&[ld,gu,ad,sd].indexOf(l)!==-1||[gu,ad].indexOf(s)!==-1&&[gu,vu].indexOf(l)!==-1||[vu,sd].indexOf(s)!==-1&&l===vu||$m.indexOf(s)!==-1&&[zm,Gi].indexOf(l)!==-1||$m.indexOf(l)!==-1&&s===zi||yr.indexOf(s)!==-1&&yr.indexOf(l)!==-1||s===wo&&yr.indexOf(l)!==-1||yr.concat(An).indexOf(s)!==-1&&l===Hi&&qk.indexOf(e[a])===-1||yr.concat(An).indexOf(l)!==-1&&s===Ti)return ve;if(s===wf&&l===wf){for(var h=n[o],d=1;h>0&&(h--,t[h]===wf);)d++;if(d%2!==0)return ve}return s===Ms&&l===Os?ve:Ps},nD=function(e,t){t||(t={lineBreak:"normal",wordBreak:"normal"});var n=eD(e,t.lineBreak),r=n[0],A=n[1],o=n[2];(t.wordBreak==="break-all"||t.wordBreak==="break-word")&&(A=A.map(function(a){return[An,LA,C1].indexOf(a)!==-1?Na:a}));var i=t.wordBreak==="keep-all"?o.map(function(a,s){return a&&e[s]>=19968&&e[s]<=40959}):void 0;return[r,A,i]},rD=function(){function e(t,n,r,A){this.codePoints=t,this.required=n===x1,this.start=r,this.end=A}return e.prototype.slice=function(){return Je.apply(void 0,this.codePoints.slice(this.start,this.end))},e}(),AD=function(e,t){var n=nc(e),r=nD(n,t),A=r[0],o=r[1],i=r[2],a=n.length,s=0,u=0;return{next:function(){if(u>=a)return{done:!0,value:null};for(var l=ve;u<a&&(l=tD(n,o,A,++u,i))===ve;);if(l!==ve||u===a){var c=new rD(n,l,s,u);return s=u,{value:c,done:!1}}return{done:!0,value:null}}}},oD=1,iD=2,ts=4,Ym=8,hl=10,qm=47,sa=92,aD=9,sD=32,Ks=34,Ni=61,uD=35,lD=36,cD=37,Vs=39,Ws=40,Li=41,fD=95,zt=45,hD=33,dD=60,pD=62,gD=64,vD=91,mD=93,wD=61,BD=123,Gs=63,yD=125,Jm=124,CD=126,xD=128,Zm=65533,yf=42,WA=43,FD=44,bD=58,ED=59,La=46,QD=0,UD=8,ID=11,SD=14,_D=31,kD=127,qn=-1,b1=48,E1=97,Q1=101,DD=102,RD=117,TD=122,U1=65,I1=69,S1=70,HD=85,ND=90,_t=function(e){return e>=b1&&e<=57},LD=function(e){return e>=55296&&e<=57343},yo=function(e){return _t(e)||e>=U1&&e<=S1||e>=E1&&e<=DD},MD=function(e){return e>=E1&&e<=TD},OD=function(e){return e>=U1&&e<=ND},PD=function(e){return MD(e)||OD(e)},KD=function(e){return e>=xD},zs=function(e){return e===hl||e===aD||e===sD},dl=function(e){return PD(e)||KD(e)||e===fD},ew=function(e){return dl(e)||_t(e)||e===zt},VD=function(e){return e>=QD&&e<=UD||e===ID||e>=SD&&e<=_D||e===kD},qr=function(e,t){return e!==sa?!1:t!==hl},Xs=function(e,t,n){return e===zt?dl(t)||qr(t,n):dl(e)?!0:!!(e===sa&&qr(e,t))},Cf=function(e,t,n){return e===WA||e===zt?_t(t)?!0:t===La&&_t(n):_t(e===La?t:e)},WD=function(e){var t=0,n=1;(e[t]===WA||e[t]===zt)&&(e[t]===zt&&(n=-1),t++);for(var r=[];_t(e[t]);)r.push(e[t++]);var A=r.length?parseInt(Je.apply(void 0,r),10):0;e[t]===La&&t++;for(var o=[];_t(e[t]);)o.push(e[t++]);var i=o.length,a=i?parseInt(Je.apply(void 0,o),10):0;(e[t]===I1||e[t]===Q1)&&t++;var s=1;(e[t]===WA||e[t]===zt)&&(e[t]===zt&&(s=-1),t++);for(var u=[];_t(e[t]);)u.push(e[t++]);var l=u.length?parseInt(Je.apply(void 0,u),10):0;return n*(A+a*Math.pow(10,-i))*Math.pow(10,s*l)},GD={type:2},zD={type:3},XD={type:4},$D={type:13},jD={type:8},YD={type:21},qD={type:9},JD={type:10},ZD={type:11},eR={type:12},tR={type:14},$s={type:23},nR={type:1},rR={type:25},AR={type:24},oR={type:26},iR={type:27},aR={type:28},sR={type:29},uR={type:31},hd={type:32},_1=function(){function e(){this._value=[]}return e.prototype.write=function(t){this._value=this._value.concat(nc(t))},e.prototype.read=function(){for(var t=[],n=this.consumeToken();n!==hd;)t.push(n),n=this.consumeToken();return t},e.prototype.consumeToken=function(){var t=this.consumeCodePoint();switch(t){case Ks:return this.consumeStringToken(Ks);case uD:var n=this.peekCodePoint(0),r=this.peekCodePoint(1),A=this.peekCodePoint(2);if(ew(n)||qr(r,A)){var o=Xs(n,r,A)?iD:oD,i=this.consumeName();return{type:5,value:i,flags:o}}break;case lD:if(this.peekCodePoint(0)===Ni)return this.consumeCodePoint(),$D;break;case Vs:return this.consumeStringToken(Vs);case Ws:return GD;case Li:return zD;case yf:if(this.peekCodePoint(0)===Ni)return this.consumeCodePoint(),tR;break;case WA:if(Cf(t,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(t),this.consumeNumericToken();break;case FD:return XD;case zt:var a=t,s=this.peekCodePoint(0),u=this.peekCodePoint(1);if(Cf(a,s,u))return this.reconsumeCodePoint(t),this.consumeNumericToken();if(Xs(a,s,u))return this.reconsumeCodePoint(t),this.consumeIdentLikeToken();if(s===zt&&u===pD)return this.consumeCodePoint(),this.consumeCodePoint(),AR;break;case La:if(Cf(t,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(t),this.consumeNumericToken();break;case qm:if(this.peekCodePoint(0)===yf)for(this.consumeCodePoint();;){var l=this.consumeCodePoint();if(l===yf&&(l=this.consumeCodePoint(),l===qm))return this.consumeToken();if(l===qn)return this.consumeToken()}break;case bD:return oR;case ED:return iR;case dD:if(this.peekCodePoint(0)===hD&&this.peekCodePoint(1)===zt&&this.peekCodePoint(2)===zt)return this.consumeCodePoint(),this.consumeCodePoint(),rR;break;case gD:var c=this.peekCodePoint(0),f=this.peekCodePoint(1),h=this.peekCodePoint(2);if(Xs(c,f,h)){var i=this.consumeName();return{type:7,value:i}}break;case vD:return aR;case sa:if(qr(t,this.peekCodePoint(0)))return this.reconsumeCodePoint(t),this.consumeIdentLikeToken();break;case mD:return sR;case wD:if(this.peekCodePoint(0)===Ni)return this.consumeCodePoint(),jD;break;case BD:return ZD;case yD:return eR;case RD:case HD:var d=this.peekCodePoint(0),g=this.peekCodePoint(1);return d===WA&&(yo(g)||g===Gs)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(t),this.consumeIdentLikeToken();case Jm:if(this.peekCodePoint(0)===Ni)return this.consumeCodePoint(),qD;if(this.peekCodePoint(0)===Jm)return this.consumeCodePoint(),YD;break;case CD:if(this.peekCodePoint(0)===Ni)return this.consumeCodePoint(),JD;break;case qn:return hd}return zs(t)?(this.consumeWhiteSpace(),uR):_t(t)?(this.reconsumeCodePoint(t),this.consumeNumericToken()):dl(t)?(this.reconsumeCodePoint(t),this.consumeIdentLikeToken()):{type:6,value:Je(t)}},e.prototype.consumeCodePoint=function(){var t=this._value.shift();return typeof t>"u"?-1:t},e.prototype.reconsumeCodePoint=function(t){this._value.unshift(t)},e.prototype.peekCodePoint=function(t){return t>=this._value.length?-1:this._value[t]},e.prototype.consumeUnicodeRangeToken=function(){for(var t=[],n=this.consumeCodePoint();yo(n)&&t.length<6;)t.push(n),n=this.consumeCodePoint();for(var r=!1;n===Gs&&t.length<6;)t.push(n),n=this.consumeCodePoint(),r=!0;if(r){var A=parseInt(Je.apply(void 0,t.map(function(s){return s===Gs?b1:s})),16),o=parseInt(Je.apply(void 0,t.map(function(s){return s===Gs?S1:s})),16);return{type:30,start:A,end:o}}var i=parseInt(Je.apply(void 0,t),16);if(this.peekCodePoint(0)===zt&&yo(this.peekCodePoint(1))){this.consumeCodePoint(),n=this.consumeCodePoint();for(var a=[];yo(n)&&a.length<6;)a.push(n),n=this.consumeCodePoint();var o=parseInt(Je.apply(void 0,a),16);return{type:30,start:i,end:o}}else return{type:30,start:i,end:i}},e.prototype.consumeIdentLikeToken=function(){var t=this.consumeName();return t.toLowerCase()==="url"&&this.peekCodePoint(0)===Ws?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===Ws?(this.consumeCodePoint(),{type:19,value:t}):{type:20,value:t}},e.prototype.consumeUrlToken=function(){var t=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===qn)return{type:22,value:""};var n=this.peekCodePoint(0);if(n===Vs||n===Ks){var r=this.consumeStringToken(this.consumeCodePoint());return r.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===qn||this.peekCodePoint(0)===Li)?(this.consumeCodePoint(),{type:22,value:r.value}):(this.consumeBadUrlRemnants(),$s)}for(;;){var A=this.consumeCodePoint();if(A===qn||A===Li)return{type:22,value:Je.apply(void 0,t)};if(zs(A))return this.consumeWhiteSpace(),this.peekCodePoint(0)===qn||this.peekCodePoint(0)===Li?(this.consumeCodePoint(),{type:22,value:Je.apply(void 0,t)}):(this.consumeBadUrlRemnants(),$s);if(A===Ks||A===Vs||A===Ws||VD(A))return this.consumeBadUrlRemnants(),$s;if(A===sa)if(qr(A,this.peekCodePoint(0)))t.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),$s;else t.push(A)}},e.prototype.consumeWhiteSpace=function(){for(;zs(this.peekCodePoint(0));)this.consumeCodePoint()},e.prototype.consumeBadUrlRemnants=function(){for(;;){var t=this.consumeCodePoint();if(t===Li||t===qn)return;qr(t,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},e.prototype.consumeStringSlice=function(t){for(var n=5e4,r="";t>0;){var A=Math.min(n,t);r+=Je.apply(void 0,this._value.splice(0,A)),t-=A}return this._value.shift(),r},e.prototype.consumeStringToken=function(t){var n="",r=0;do{var A=this._value[r];if(A===qn||A===void 0||A===t)return n+=this.consumeStringSlice(r),{type:0,value:n};if(A===hl)return this._value.splice(0,r),nR;if(A===sa){var o=this._value[r+1];o!==qn&&o!==void 0&&(o===hl?(n+=this.consumeStringSlice(r),r=-1,this._value.shift()):qr(A,o)&&(n+=this.consumeStringSlice(r),n+=Je(this.consumeEscapedCodePoint()),r=-1))}r++}while(!0)},e.prototype.consumeNumber=function(){var t=[],n=ts,r=this.peekCodePoint(0);for((r===WA||r===zt)&&t.push(this.consumeCodePoint());_t(this.peekCodePoint(0));)t.push(this.consumeCodePoint());r=this.peekCodePoint(0);var A=this.peekCodePoint(1);if(r===La&&_t(A))for(t.push(this.consumeCodePoint(),this.consumeCodePoint()),n=Ym;_t(this.peekCodePoint(0));)t.push(this.consumeCodePoint());r=this.peekCodePoint(0),A=this.peekCodePoint(1);var o=this.peekCodePoint(2);if((r===I1||r===Q1)&&((A===WA||A===zt)&&_t(o)||_t(A)))for(t.push(this.consumeCodePoint(),this.consumeCodePoint()),n=Ym;_t(this.peekCodePoint(0));)t.push(this.consumeCodePoint());return[WD(t),n]},e.prototype.consumeNumericToken=function(){var t=this.consumeNumber(),n=t[0],r=t[1],A=this.peekCodePoint(0),o=this.peekCodePoint(1),i=this.peekCodePoint(2);if(Xs(A,o,i)){var a=this.consumeName();return{type:15,number:n,flags:r,unit:a}}return A===cD?(this.consumeCodePoint(),{type:16,number:n,flags:r}):{type:17,number:n,flags:r}},e.prototype.consumeEscapedCodePoint=function(){var t=this.consumeCodePoint();if(yo(t)){for(var n=Je(t);yo(this.peekCodePoint(0))&&n.length<6;)n+=Je(this.consumeCodePoint());zs(this.peekCodePoint(0))&&this.consumeCodePoint();var r=parseInt(n,16);return r===0||LD(r)||r>1114111?Zm:r}return t===qn?Zm:t},e.prototype.consumeName=function(){for(var t="";;){var n=this.consumeCodePoint();if(ew(n))t+=Je(n);else if(qr(n,this.peekCodePoint(0)))t+=Je(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(n),t}},e}(),k1=function(){function e(t){this._tokens=t}return e.create=function(t){var n=new _1;return n.write(t),new e(n.read())},e.parseValue=function(t){return e.create(t).parseComponentValue()},e.parseValues=function(t){return e.create(t).parseComponentValues()},e.prototype.parseComponentValue=function(){for(var t=this.consumeToken();t.type===31;)t=this.consumeToken();if(t.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(t);var n=this.consumeComponentValue();do t=this.consumeToken();while(t.type===31);if(t.type===32)return n;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},e.prototype.parseComponentValues=function(){for(var t=[];;){var n=this.consumeComponentValue();if(n.type===32)return t;t.push(n),t.push()}},e.prototype.consumeComponentValue=function(){var t=this.consumeToken();switch(t.type){case 11:case 28:case 2:return this.consumeSimpleBlock(t.type);case 19:return this.consumeFunction(t)}return t},e.prototype.consumeSimpleBlock=function(t){for(var n={type:t,values:[]},r=this.consumeToken();;){if(r.type===32||cR(r,t))return n;this.reconsumeToken(r),n.values.push(this.consumeComponentValue()),r=this.consumeToken()}},e.prototype.consumeFunction=function(t){for(var n={name:t.value,values:[],type:18};;){var r=this.consumeToken();if(r.type===32||r.type===3)return n;this.reconsumeToken(r),n.values.push(this.consumeComponentValue())}},e.prototype.consumeToken=function(){var t=this._tokens.shift();return typeof t>"u"?hd:t},e.prototype.reconsumeToken=function(t){this._tokens.unshift(t)},e}(),ns=function(e){return e.type===15},Ci=function(e){return e.type===17},Se=function(e){return e.type===20},lR=function(e){return e.type===0},dd=function(e,t){return Se(e)&&e.value===t},D1=function(e){return e.type!==31},gi=function(e){return e.type!==31&&e.type!==4},pr=function(e){var t=[],n=[];return e.forEach(function(r){if(r.type===4){if(n.length===0)throw new Error("Error parsing function args, zero tokens for arg");t.push(n),n=[];return}r.type!==31&&n.push(r)}),n.length&&t.push(n),t},cR=function(e,t){return t===11&&e.type===12||t===28&&e.type===29?!0:t===2&&e.type===3},FA=function(e){return e.type===17||e.type===15},tt=function(e){return e.type===16||FA(e)},R1=function(e){return e.length>1?[e[0],e[1]]:[e[0]]},Ft={type:17,number:0,flags:ts},Cg={type:16,number:50,flags:ts},oA={type:16,number:100,flags:ts},Xi=function(e,t,n){var r=e[0],A=e[1];return[_e(r,t),_e(typeof A<"u"?A:r,n)]},_e=function(e,t){if(e.type===16)return e.number/100*t;if(ns(e))switch(e.unit){case"rem":case"em":return 16*e.number;case"px":default:return e.number}return e.number},T1="deg",H1="grad",N1="rad",L1="turn",rc={name:"angle",parse:function(e,t){if(t.type===15)switch(t.unit){case T1:return Math.PI*t.number/180;case H1:return Math.PI/200*t.number;case N1:return t.number;case L1:return Math.PI*2*t.number}throw new Error("Unsupported angle type")}},M1=function(e){return e.type===15&&(e.unit===T1||e.unit===H1||e.unit===N1||e.unit===L1)},O1=function(e){var t=e.filter(Se).map(function(n){return n.value}).join(" ");switch(t){case"to bottom right":case"to right bottom":case"left top":case"top left":return[Ft,Ft];case"to top":case"bottom":return En(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[Ft,oA];case"to right":case"left":return En(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[oA,oA];case"to bottom":case"top":return En(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[oA,Ft];case"to left":case"right":return En(270)}return 0},En=function(e){return Math.PI*e/180},mA={name:"color",parse:function(e,t){if(t.type===18){var n=fR[t.name];if(typeof n>"u")throw new Error('Attempting to parse an unsupported color function "'+t.name+'"');return n(e,t.values)}if(t.type===5){if(t.value.length===3){var r=t.value.substring(0,1),A=t.value.substring(1,2),o=t.value.substring(2,3);return iA(parseInt(r+r,16),parseInt(A+A,16),parseInt(o+o,16),1)}if(t.value.length===4){var r=t.value.substring(0,1),A=t.value.substring(1,2),o=t.value.substring(2,3),i=t.value.substring(3,4);return iA(parseInt(r+r,16),parseInt(A+A,16),parseInt(o+o,16),parseInt(i+i,16)/255)}if(t.value.length===6){var r=t.value.substring(0,2),A=t.value.substring(2,4),o=t.value.substring(4,6);return iA(parseInt(r,16),parseInt(A,16),parseInt(o,16),1)}if(t.value.length===8){var r=t.value.substring(0,2),A=t.value.substring(2,4),o=t.value.substring(4,6),i=t.value.substring(6,8);return iA(parseInt(r,16),parseInt(A,16),parseInt(o,16),parseInt(i,16)/255)}}if(t.type===20){var a=Sr[t.value.toUpperCase()];if(typeof a<"u")return a}return Sr.TRANSPARENT}},wA=function(e){return(255&e)===0},ht=function(e){var t=255&e,n=255&e>>8,r=255&e>>16,A=255&e>>24;return t<255?"rgba("+A+","+r+","+n+","+t/255+")":"rgb("+A+","+r+","+n+")"},iA=function(e,t,n,r){return(e<<24|t<<16|n<<8|Math.round(r*255)<<0)>>>0},tw=function(e,t){if(e.type===17)return e.number;if(e.type===16){var n=t===3?1:255;return t===3?e.number/100*n:Math.round(e.number/100*n)}return 0},nw=function(e,t){var n=t.filter(gi);if(n.length===3){var r=n.map(tw),A=r[0],o=r[1],i=r[2];return iA(A,o,i,1)}if(n.length===4){var a=n.map(tw),A=a[0],o=a[1],i=a[2],s=a[3];return iA(A,o,i,s)}return 0};function xf(e,t,n){return n<0&&(n+=1),n>=1&&(n-=1),n<1/6?(t-e)*n*6+e:n<1/2?t:n<2/3?(t-e)*6*(2/3-n)+e:e}var rw=function(e,t){var n=t.filter(gi),r=n[0],A=n[1],o=n[2],i=n[3],a=(r.type===17?En(r.number):rc.parse(e,r))/(Math.PI*2),s=tt(A)?A.number/100:0,u=tt(o)?o.number/100:0,l=typeof i<"u"&&tt(i)?_e(i,1):1;if(s===0)return iA(u*255,u*255,u*255,1);var c=u<=.5?u*(s+1):u+s-u*s,f=u*2-c,h=xf(f,c,a+1/3),d=xf(f,c,a),g=xf(f,c,a-1/3);return iA(h*255,d*255,g*255,l)},fR={hsl:rw,hsla:rw,rgb:nw,rgba:nw},ua=function(e,t){return mA.parse(e,k1.create(t).parseComponentValue())},Sr={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},hR={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(e,t){return t.map(function(n){if(Se(n))switch(n.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},dR={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Ac=function(e,t){var n=mA.parse(e,t[0]),r=t[1];return r&&tt(r)?{color:n,stop:r}:{color:n,stop:null}},Aw=function(e,t){var n=e[0],r=e[e.length-1];n.stop===null&&(n.stop=Ft),r.stop===null&&(r.stop=oA);for(var A=[],o=0,i=0;i<e.length;i++){var a=e[i].stop;if(a!==null){var s=_e(a,t);s>o?A.push(s):A.push(o),o=s}else A.push(null)}for(var u=null,i=0;i<A.length;i++){var l=A[i];if(l===null)u===null&&(u=i);else if(u!==null){for(var c=i-u,f=A[u-1],h=(l-f)/(c+1),d=1;d<=c;d++)A[u+d-1]=h*d;u=null}}return e.map(function(g,m){var p=g.color;return{color:p,stop:Math.max(Math.min(1,A[m]/t),0)}})},pR=function(e,t,n){var r=t/2,A=n/2,o=_e(e[0],t)-r,i=A-_e(e[1],n);return(Math.atan2(i,o)+Math.PI*2)%(Math.PI*2)},gR=function(e,t,n){var r=typeof e=="number"?e:pR(e,t,n),A=Math.abs(t*Math.sin(r))+Math.abs(n*Math.cos(r)),o=t/2,i=n/2,a=A/2,s=Math.sin(r-Math.PI/2)*a,u=Math.cos(r-Math.PI/2)*a;return[A,o-u,o+u,i-s,i+s]},Dn=function(e,t){return Math.sqrt(e*e+t*t)},ow=function(e,t,n,r,A){var o=[[0,0],[0,t],[e,0],[e,t]];return o.reduce(function(i,a){var s=a[0],u=a[1],l=Dn(n-s,r-u);return(A?l<i.optimumDistance:l>i.optimumDistance)?{optimumCorner:a,optimumDistance:l}:i},{optimumDistance:A?1/0:-1/0,optimumCorner:null}).optimumCorner},vR=function(e,t,n,r,A){var o=0,i=0;switch(e.size){case 0:e.shape===0?o=i=Math.min(Math.abs(t),Math.abs(t-r),Math.abs(n),Math.abs(n-A)):e.shape===1&&(o=Math.min(Math.abs(t),Math.abs(t-r)),i=Math.min(Math.abs(n),Math.abs(n-A)));break;case 2:if(e.shape===0)o=i=Math.min(Dn(t,n),Dn(t,n-A),Dn(t-r,n),Dn(t-r,n-A));else if(e.shape===1){var a=Math.min(Math.abs(n),Math.abs(n-A))/Math.min(Math.abs(t),Math.abs(t-r)),s=ow(r,A,t,n,!0),u=s[0],l=s[1];o=Dn(u-t,(l-n)/a),i=a*o}break;case 1:e.shape===0?o=i=Math.max(Math.abs(t),Math.abs(t-r),Math.abs(n),Math.abs(n-A)):e.shape===1&&(o=Math.max(Math.abs(t),Math.abs(t-r)),i=Math.max(Math.abs(n),Math.abs(n-A)));break;case 3:if(e.shape===0)o=i=Math.max(Dn(t,n),Dn(t,n-A),Dn(t-r,n),Dn(t-r,n-A));else if(e.shape===1){var a=Math.max(Math.abs(n),Math.abs(n-A))/Math.max(Math.abs(t),Math.abs(t-r)),c=ow(r,A,t,n,!1),u=c[0],l=c[1];o=Dn(u-t,(l-n)/a),i=a*o}break}return Array.isArray(e.size)&&(o=_e(e.size[0],r),i=e.size.length===2?_e(e.size[1],A):o),[o,i]},mR=function(e,t){var n=En(180),r=[];return pr(t).forEach(function(A,o){if(o===0){var i=A[0];if(i.type===20&&i.value==="to"){n=O1(A);return}else if(M1(i)){n=rc.parse(e,i);return}}var a=Ac(e,A);r.push(a)}),{angle:n,stops:r,type:1}},js=function(e,t){var n=En(180),r=[];return pr(t).forEach(function(A,o){if(o===0){var i=A[0];if(i.type===20&&["top","left","right","bottom"].indexOf(i.value)!==-1){n=O1(A);return}else if(M1(i)){n=(rc.parse(e,i)+En(270))%En(360);return}}var a=Ac(e,A);r.push(a)}),{angle:n,stops:r,type:1}},wR=function(e,t){var n=En(180),r=[],A=1,o=0,i=3,a=[];return pr(t).forEach(function(s,u){var l=s[0];if(u===0){if(Se(l)&&l.value==="linear"){A=1;return}else if(Se(l)&&l.value==="radial"){A=2;return}}if(l.type===18){if(l.name==="from"){var c=mA.parse(e,l.values[0]);r.push({stop:Ft,color:c})}else if(l.name==="to"){var c=mA.parse(e,l.values[0]);r.push({stop:oA,color:c})}else if(l.name==="color-stop"){var f=l.values.filter(gi);if(f.length===2){var c=mA.parse(e,f[1]),h=f[0];Ci(h)&&r.push({stop:{type:16,number:h.number*100,flags:h.flags},color:c})}}}}),A===1?{angle:(n+En(180))%En(360),stops:r,type:A}:{size:i,shape:o,stops:r,position:a,type:A}},P1="closest-side",K1="farthest-side",V1="closest-corner",W1="farthest-corner",G1="circle",z1="ellipse",X1="cover",$1="contain",BR=function(e,t){var n=0,r=3,A=[],o=[];return pr(t).forEach(function(i,a){var s=!0;if(a===0){var u=!1;s=i.reduce(function(c,f){if(u)if(Se(f))switch(f.value){case"center":return o.push(Cg),c;case"top":case"left":return o.push(Ft),c;case"right":case"bottom":return o.push(oA),c}else(tt(f)||FA(f))&&o.push(f);else if(Se(f))switch(f.value){case G1:return n=0,!1;case z1:return n=1,!1;case"at":return u=!0,!1;case P1:return r=0,!1;case X1:case K1:return r=1,!1;case $1:case V1:return r=2,!1;case W1:return r=3,!1}else if(FA(f)||tt(f))return Array.isArray(r)||(r=[]),r.push(f),!1;return c},s)}if(s){var l=Ac(e,i);A.push(l)}}),{size:r,shape:n,stops:A,position:o,type:2}},Ys=function(e,t){var n=0,r=3,A=[],o=[];return pr(t).forEach(function(i,a){var s=!0;if(a===0?s=i.reduce(function(l,c){if(Se(c))switch(c.value){case"center":return o.push(Cg),!1;case"top":case"left":return o.push(Ft),!1;case"right":case"bottom":return o.push(oA),!1}else if(tt(c)||FA(c))return o.push(c),!1;return l},s):a===1&&(s=i.reduce(function(l,c){if(Se(c))switch(c.value){case G1:return n=0,!1;case z1:return n=1,!1;case $1:case P1:return r=0,!1;case K1:return r=1,!1;case V1:return r=2,!1;case X1:case W1:return r=3,!1}else if(FA(c)||tt(c))return Array.isArray(r)||(r=[]),r.push(c),!1;return l},s)),s){var u=Ac(e,i);A.push(u)}}),{size:r,shape:n,stops:A,position:o,type:2}},yR=function(e){return e.type===1},CR=function(e){return e.type===2},xg={name:"image",parse:function(e,t){if(t.type===22){var n={url:t.value,type:0};return e.cache.addImage(t.value),n}if(t.type===18){var r=j1[t.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported image function "'+t.name+'"');return r(e,t.values)}throw new Error("Unsupported image type "+t.type)}};function xR(e){return!(e.type===20&&e.value==="none")&&(e.type!==18||!!j1[e.name])}var j1={"linear-gradient":mR,"-moz-linear-gradient":js,"-ms-linear-gradient":js,"-o-linear-gradient":js,"-webkit-linear-gradient":js,"radial-gradient":BR,"-moz-radial-gradient":Ys,"-ms-radial-gradient":Ys,"-o-radial-gradient":Ys,"-webkit-radial-gradient":Ys,"-webkit-gradient":wR},FR={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(e,t){if(t.length===0)return[];var n=t[0];return n.type===20&&n.value==="none"?[]:t.filter(function(r){return gi(r)&&xR(r)}).map(function(r){return xg.parse(e,r)})}},bR={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(e,t){return t.map(function(n){if(Se(n))switch(n.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},ER={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(e,t){return pr(t).map(function(n){return n.filter(tt)}).map(R1)}},QR={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(e,t){return pr(t).map(function(n){return n.filter(Se).map(function(r){return r.value}).join(" ")}).map(UR)}},UR=function(e){switch(e){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},Ai;(function(e){e.AUTO="auto",e.CONTAIN="contain",e.COVER="cover"})(Ai||(Ai={}));var IR={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(e,t){return pr(t).map(function(n){return n.filter(SR)})}},SR=function(e){return Se(e)||tt(e)},oc=function(e){return{name:"border-"+e+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},_R=oc("top"),kR=oc("right"),DR=oc("bottom"),RR=oc("left"),ic=function(e){return{name:"border-radius-"+e,initialValue:"0 0",prefix:!1,type:1,parse:function(t,n){return R1(n.filter(tt))}}},TR=ic("top-left"),HR=ic("top-right"),NR=ic("bottom-right"),LR=ic("bottom-left"),ac=function(e){return{name:"border-"+e+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(t,n){switch(n){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},MR=ac("top"),OR=ac("right"),PR=ac("bottom"),KR=ac("left"),sc=function(e){return{name:"border-"+e+"-width",initialValue:"0",type:0,prefix:!1,parse:function(t,n){return ns(n)?n.number:0}}},VR=sc("top"),WR=sc("right"),GR=sc("bottom"),zR=sc("left"),XR={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},$R={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(e,t){switch(t){case"rtl":return 1;case"ltr":default:return 0}}},jR={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(e,t){return t.filter(Se).reduce(function(n,r){return n|YR(r.value)},0)}},YR=function(e){switch(e){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},qR={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},JR={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(e,t){return t.type===20&&t.value==="normal"?0:t.type===17||t.type===15?t.number:0}},pl;(function(e){e.NORMAL="normal",e.STRICT="strict"})(pl||(pl={}));var ZR={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"strict":return pl.STRICT;case"normal":default:return pl.NORMAL}}},eT={name:"line-height",initialValue:"normal",prefix:!1,type:4},iw=function(e,t){return Se(e)&&e.value==="normal"?1.2*t:e.type===17?t*e.number:tt(e)?_e(e,t):t},tT={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(e,t){return t.type===20&&t.value==="none"?null:xg.parse(e,t)}},nT={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(e,t){switch(t){case"inside":return 0;case"outside":default:return 1}}},pd={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},uc=function(e){return{name:"margin-"+e,initialValue:"0",prefix:!1,type:4}},rT=uc("top"),AT=uc("right"),oT=uc("bottom"),iT=uc("left"),aT={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(e,t){return t.filter(Se).map(function(n){switch(n.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},sT={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"break-word":return"break-word";case"normal":default:return"normal"}}},lc=function(e){return{name:"padding-"+e,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},uT=lc("top"),lT=lc("right"),cT=lc("bottom"),fT=lc("left"),hT={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(e,t){switch(t){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},dT={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(e,t){switch(t){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},pT={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return t.length===1&&dd(t[0],"none")?[]:pr(t).map(function(n){for(var r={color:Sr.TRANSPARENT,offsetX:Ft,offsetY:Ft,blur:Ft},A=0,o=0;o<n.length;o++){var i=n[o];FA(i)?(A===0?r.offsetX=i:A===1?r.offsetY=i:r.blur=i,A++):r.color=mA.parse(e,i)}return r})}},gT={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},vT={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(e,t){if(t.type===20&&t.value==="none")return null;if(t.type===18){var n=BT[t.name];if(typeof n>"u")throw new Error('Attempting to parse an unsupported transform function "'+t.name+'"');return n(t.values)}return null}},mT=function(e){var t=e.filter(function(n){return n.type===17}).map(function(n){return n.number});return t.length===6?t:null},wT=function(e){var t=e.filter(function(s){return s.type===17}).map(function(s){return s.number}),n=t[0],r=t[1];t[2],t[3];var A=t[4],o=t[5];t[6],t[7],t[8],t[9],t[10],t[11];var i=t[12],a=t[13];return t[14],t[15],t.length===16?[n,r,A,o,i,a]:null},BT={matrix:mT,matrix3d:wT},aw={type:16,number:50,flags:ts},yT=[aw,aw],CT={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(e,t){var n=t.filter(tt);return n.length!==2?yT:[n[0],n[1]]}},xT={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},la;(function(e){e.NORMAL="normal",e.BREAK_ALL="break-all",e.KEEP_ALL="keep-all"})(la||(la={}));var FT={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"break-all":return la.BREAK_ALL;case"keep-all":return la.KEEP_ALL;case"normal":default:return la.NORMAL}}},bT={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(e,t){if(t.type===20)return{auto:!0,order:0};if(Ci(t))return{auto:!1,order:t.number};throw new Error("Invalid z-index number parsed")}},Y1={name:"time",parse:function(e,t){if(t.type===15)switch(t.unit.toLowerCase()){case"s":return 1e3*t.number;case"ms":return t.number}throw new Error("Unsupported time type")}},ET={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(e,t){return Ci(t)?t.number:1}},QT={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},UT={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(e,t){return t.filter(Se).map(function(n){switch(n.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(n){return n!==0})}},IT={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(e,t){var n=[],r=[];return t.forEach(function(A){switch(A.type){case 20:case 0:n.push(A.value);break;case 17:n.push(A.number.toString());break;case 4:r.push(n.join(" ")),n.length=0;break}}),n.length&&r.push(n.join(" ")),r.map(function(A){return A.indexOf(" ")===-1?A:"'"+A+"'"})}},ST={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},_T={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(e,t){if(Ci(t))return t.number;if(Se(t))switch(t.value){case"bold":return 700;case"normal":default:return 400}return 400}},kT={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return t.filter(Se).map(function(n){return n.value})}},DT={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},it=function(e,t){return(e&t)!==0},RT={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(e,t){if(t.length===0)return[];var n=t[0];return n.type===20&&n.value==="none"?[]:t}},TT={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(t.length===0)return null;var n=t[0];if(n.type===20&&n.value==="none")return null;for(var r=[],A=t.filter(D1),o=0;o<A.length;o++){var i=A[o],a=A[o+1];if(i.type===20){var s=a&&Ci(a)?a.number:1;r.push({counter:i.value,increment:s})}}return r}},HT={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(t.length===0)return[];for(var n=[],r=t.filter(D1),A=0;A<r.length;A++){var o=r[A],i=r[A+1];if(Se(o)&&o.value!=="none"){var a=i&&Ci(i)?i.number:0;n.push({counter:o.value,reset:a})}}return n}},NT={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(e,t){return t.filter(ns).map(function(n){return Y1.parse(e,n)})}},LT={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(t.length===0)return null;var n=t[0];if(n.type===20&&n.value==="none")return null;var r=[],A=t.filter(lR);if(A.length%2!==0)return null;for(var o=0;o<A.length;o+=2){var i=A[o].value,a=A[o+1].value;r.push({open:i,close:a})}return r}},sw=function(e,t,n){if(!e)return"";var r=e[Math.min(t,e.length-1)];return r?n?r.open:r.close:""},MT={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return t.length===1&&dd(t[0],"none")?[]:pr(t).map(function(n){for(var r={color:255,offsetX:Ft,offsetY:Ft,blur:Ft,spread:Ft,inset:!1},A=0,o=0;o<n.length;o++){var i=n[o];dd(i,"inset")?r.inset=!0:FA(i)?(A===0?r.offsetX=i:A===1?r.offsetY=i:A===2?r.blur=i:r.spread=i,A++):r.color=mA.parse(e,i)}return r})}},OT={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(e,t){var n=[0,1,2],r=[];return t.filter(Se).forEach(function(A){switch(A.value){case"stroke":r.push(1);break;case"fill":r.push(0);break;case"markers":r.push(2);break}}),n.forEach(function(A){r.indexOf(A)===-1&&r.push(A)}),r}},PT={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},KT={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(e,t){return ns(t)?t.number:0}},VT=function(){function e(t,n){var r,A;this.animationDuration=Y(t,NT,n.animationDuration),this.backgroundClip=Y(t,hR,n.backgroundClip),this.backgroundColor=Y(t,dR,n.backgroundColor),this.backgroundImage=Y(t,FR,n.backgroundImage),this.backgroundOrigin=Y(t,bR,n.backgroundOrigin),this.backgroundPosition=Y(t,ER,n.backgroundPosition),this.backgroundRepeat=Y(t,QR,n.backgroundRepeat),this.backgroundSize=Y(t,IR,n.backgroundSize),this.borderTopColor=Y(t,_R,n.borderTopColor),this.borderRightColor=Y(t,kR,n.borderRightColor),this.borderBottomColor=Y(t,DR,n.borderBottomColor),this.borderLeftColor=Y(t,RR,n.borderLeftColor),this.borderTopLeftRadius=Y(t,TR,n.borderTopLeftRadius),this.borderTopRightRadius=Y(t,HR,n.borderTopRightRadius),this.borderBottomRightRadius=Y(t,NR,n.borderBottomRightRadius),this.borderBottomLeftRadius=Y(t,LR,n.borderBottomLeftRadius),this.borderTopStyle=Y(t,MR,n.borderTopStyle),this.borderRightStyle=Y(t,OR,n.borderRightStyle),this.borderBottomStyle=Y(t,PR,n.borderBottomStyle),this.borderLeftStyle=Y(t,KR,n.borderLeftStyle),this.borderTopWidth=Y(t,VR,n.borderTopWidth),this.borderRightWidth=Y(t,WR,n.borderRightWidth),this.borderBottomWidth=Y(t,GR,n.borderBottomWidth),this.borderLeftWidth=Y(t,zR,n.borderLeftWidth),this.boxShadow=Y(t,MT,n.boxShadow),this.color=Y(t,XR,n.color),this.direction=Y(t,$R,n.direction),this.display=Y(t,jR,n.display),this.float=Y(t,qR,n.cssFloat),this.fontFamily=Y(t,IT,n.fontFamily),this.fontSize=Y(t,ST,n.fontSize),this.fontStyle=Y(t,DT,n.fontStyle),this.fontVariant=Y(t,kT,n.fontVariant),this.fontWeight=Y(t,_T,n.fontWeight),this.letterSpacing=Y(t,JR,n.letterSpacing),this.lineBreak=Y(t,ZR,n.lineBreak),this.lineHeight=Y(t,eT,n.lineHeight),this.listStyleImage=Y(t,tT,n.listStyleImage),this.listStylePosition=Y(t,nT,n.listStylePosition),this.listStyleType=Y(t,pd,n.listStyleType),this.marginTop=Y(t,rT,n.marginTop),this.marginRight=Y(t,AT,n.marginRight),this.marginBottom=Y(t,oT,n.marginBottom),this.marginLeft=Y(t,iT,n.marginLeft),this.opacity=Y(t,ET,n.opacity);var o=Y(t,aT,n.overflow);this.overflowX=o[0],this.overflowY=o[o.length>1?1:0],this.overflowWrap=Y(t,sT,n.overflowWrap),this.paddingTop=Y(t,uT,n.paddingTop),this.paddingRight=Y(t,lT,n.paddingRight),this.paddingBottom=Y(t,cT,n.paddingBottom),this.paddingLeft=Y(t,fT,n.paddingLeft),this.paintOrder=Y(t,OT,n.paintOrder),this.position=Y(t,dT,n.position),this.textAlign=Y(t,hT,n.textAlign),this.textDecorationColor=Y(t,QT,(r=n.textDecorationColor)!==null&&r!==void 0?r:n.color),this.textDecorationLine=Y(t,UT,(A=n.textDecorationLine)!==null&&A!==void 0?A:n.textDecoration),this.textShadow=Y(t,pT,n.textShadow),this.textTransform=Y(t,gT,n.textTransform),this.transform=Y(t,vT,n.transform),this.transformOrigin=Y(t,CT,n.transformOrigin),this.visibility=Y(t,xT,n.visibility),this.webkitTextStrokeColor=Y(t,PT,n.webkitTextStrokeColor),this.webkitTextStrokeWidth=Y(t,KT,n.webkitTextStrokeWidth),this.wordBreak=Y(t,FT,n.wordBreak),this.zIndex=Y(t,bT,n.zIndex)}return e.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},e.prototype.isTransparent=function(){return wA(this.backgroundColor)},e.prototype.isTransformed=function(){return this.transform!==null},e.prototype.isPositioned=function(){return this.position!==0},e.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},e.prototype.isFloating=function(){return this.float!==0},e.prototype.isInlineLevel=function(){return it(this.display,4)||it(this.display,33554432)||it(this.display,268435456)||it(this.display,536870912)||it(this.display,67108864)||it(this.display,134217728)},e}(),WT=function(){function e(t,n){this.content=Y(t,RT,n.content),this.quotes=Y(t,LT,n.quotes)}return e}(),uw=function(){function e(t,n){this.counterIncrement=Y(t,TT,n.counterIncrement),this.counterReset=Y(t,HT,n.counterReset)}return e}(),Y=function(e,t,n){var r=new _1,A=n!==null&&typeof n<"u"?n.toString():t.initialValue;r.write(A);var o=new k1(r.read());switch(t.type){case 2:var i=o.parseComponentValue();return t.parse(e,Se(i)?i.value:t.initialValue);case 0:return t.parse(e,o.parseComponentValue());case 1:return t.parse(e,o.parseComponentValues());case 4:return o.parseComponentValue();case 3:switch(t.format){case"angle":return rc.parse(e,o.parseComponentValue());case"color":return mA.parse(e,o.parseComponentValue());case"image":return xg.parse(e,o.parseComponentValue());case"length":var a=o.parseComponentValue();return FA(a)?a:Ft;case"length-percentage":var s=o.parseComponentValue();return tt(s)?s:Ft;case"time":return Y1.parse(e,o.parseComponentValue())}break}},GT="data-html2canvas-debug",zT=function(e){var t=e.getAttribute(GT);switch(t){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},gd=function(e,t){var n=zT(e);return n===1||t===n},gr=function(){function e(t,n){if(this.context=t,this.textNodes=[],this.elements=[],this.flags=0,gd(n,3))debugger;this.styles=new VT(t,window.getComputedStyle(n,null)),wd(n)&&(this.styles.animationDuration.some(function(r){return r>0})&&(n.style.animationDuration="0s"),this.styles.transform!==null&&(n.style.transform="none")),this.bounds=tc(this.context,n),gd(n,4)&&(this.flags|=16)}return e}(),XT="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",lw="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",$i=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var qs=0;qs<lw.length;qs++)$i[lw.charCodeAt(qs)]=qs;var $T=function(e){var t=e.length*.75,n=e.length,r,A=0,o,i,a,s;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);var u=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(t):new Array(t),l=Array.isArray(u)?u:new Uint8Array(u);for(r=0;r<n;r+=4)o=$i[e.charCodeAt(r)],i=$i[e.charCodeAt(r+1)],a=$i[e.charCodeAt(r+2)],s=$i[e.charCodeAt(r+3)],l[A++]=o<<2|i>>4,l[A++]=(i&15)<<4|a>>2,l[A++]=(a&3)<<6|s&63;return u},jT=function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n.push(e[r+1]<<8|e[r]);return n},YT=function(e){for(var t=e.length,n=[],r=0;r<t;r+=4)n.push(e[r+3]<<24|e[r+2]<<16|e[r+1]<<8|e[r]);return n},jA=5,Fg=11,Ff=2,qT=Fg-jA,q1=65536>>jA,JT=1<<jA,bf=JT-1,ZT=1024>>jA,eH=q1+ZT,tH=eH,nH=32,rH=tH+nH,AH=65536>>Fg,oH=1<<qT,iH=oH-1,cw=function(e,t,n){return e.slice?e.slice(t,n):new Uint16Array(Array.prototype.slice.call(e,t,n))},aH=function(e,t,n){return e.slice?e.slice(t,n):new Uint32Array(Array.prototype.slice.call(e,t,n))},sH=function(e,t){var n=$T(e),r=Array.isArray(n)?YT(n):new Uint32Array(n),A=Array.isArray(n)?jT(n):new Uint16Array(n),o=24,i=cw(A,o/2,r[4]/2),a=r[5]===2?cw(A,(o+r[4])/2):aH(r,Math.ceil((o+r[4])/4));return new uH(r[0],r[1],r[2],r[3],i,a)},uH=function(){function e(t,n,r,A,o,i){this.initialValue=t,this.errorValue=n,this.highStart=r,this.highValueIndex=A,this.index=o,this.data=i}return e.prototype.get=function(t){var n;if(t>=0){if(t<55296||t>56319&&t<=65535)return n=this.index[t>>jA],n=(n<<Ff)+(t&bf),this.data[n];if(t<=65535)return n=this.index[q1+(t-55296>>jA)],n=(n<<Ff)+(t&bf),this.data[n];if(t<this.highStart)return n=rH-AH+(t>>Fg),n=this.index[n],n+=t>>jA&iH,n=this.index[n],n=(n<<Ff)+(t&bf),this.data[n];if(t<=1114111)return this.data[this.highValueIndex]}return this.errorValue},e}(),fw="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",lH=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Js=0;Js<fw.length;Js++)lH[fw.charCodeAt(Js)]=Js;var cH=1,Ef=2,Qf=3,hw=4,dw=5,fH=7,pw=8,Uf=9,If=10,gw=11,vw=12,mw=13,ww=14,Sf=15,hH=function(e){for(var t=[],n=0,r=e.length;n<r;){var A=e.charCodeAt(n++);if(A>=55296&&A<=56319&&n<r){var o=e.charCodeAt(n++);(o&64512)===56320?t.push(((A&1023)<<10)+(o&1023)+65536):(t.push(A),n--)}else t.push(A)}return t},dH=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(String.fromCodePoint)return String.fromCodePoint.apply(String,e);var n=e.length;if(!n)return"";for(var r=[],A=-1,o="";++A<n;){var i=e[A];i<=65535?r.push(i):(i-=65536,r.push((i>>10)+55296,i%1024+56320)),(A+1===n||r.length>16384)&&(o+=String.fromCharCode.apply(String,r),r.length=0)}return o},pH=sH(XT),mn="×",_f="÷",gH=function(e){return pH.get(e)},vH=function(e,t,n){var r=n-2,A=t[r],o=t[n-1],i=t[n];if(o===Ef&&i===Qf)return mn;if(o===Ef||o===Qf||o===hw||i===Ef||i===Qf||i===hw)return _f;if(o===pw&&[pw,Uf,gw,vw].indexOf(i)!==-1||(o===gw||o===Uf)&&(i===Uf||i===If)||(o===vw||o===If)&&i===If||i===mw||i===dw||i===fH||o===cH)return mn;if(o===mw&&i===ww){for(;A===dw;)A=t[--r];if(A===ww)return mn}if(o===Sf&&i===Sf){for(var a=0;A===Sf;)a++,A=t[--r];if(a%2===0)return mn}return _f},mH=function(e){var t=hH(e),n=t.length,r=0,A=0,o=t.map(gH);return{next:function(){if(r>=n)return{done:!0,value:null};for(var i=mn;r<n&&(i=vH(t,o,++r))===mn;);if(i!==mn||r===n){var a=dH.apply(null,t.slice(A,r));return A=r,{value:a,done:!1}}return{done:!0,value:null}}}},wH=function(e){for(var t=mH(e),n=[],r;!(r=t.next()).done;)r.value&&n.push(r.value.slice());return n},BH=function(e){var t=123;if(e.createRange){var n=e.createRange();if(n.getBoundingClientRect){var r=e.createElement("boundtest");r.style.height=t+"px",r.style.display="block",e.body.appendChild(r),n.selectNode(r);var A=n.getBoundingClientRect(),o=Math.round(A.height);if(e.body.removeChild(r),o===t)return!0}}return!1},yH=function(e){var t=e.createElement("boundtest");t.style.width="50px",t.style.display="block",t.style.fontSize="12px",t.style.letterSpacing="0px",t.style.wordSpacing="0px",e.body.appendChild(t);var n=e.createRange();t.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var r=t.firstChild,A=nc(r.data).map(function(s){return Je(s)}),o=0,i={},a=A.every(function(s,u){n.setStart(r,o),n.setEnd(r,o+s.length);var l=n.getBoundingClientRect();o+=s.length;var c=l.x>i.x||l.y>i.y;return i=l,u===0?!0:c});return e.body.removeChild(t),a},CH=function(){return typeof new Image().crossOrigin<"u"},xH=function(){return typeof new XMLHttpRequest().responseType=="string"},FH=function(e){var t=new Image,n=e.createElement("canvas"),r=n.getContext("2d");if(!r)return!1;t.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{r.drawImage(t,0,0),n.toDataURL()}catch{return!1}return!0},Bw=function(e){return e[0]===0&&e[1]===255&&e[2]===0&&e[3]===255},bH=function(e){var t=e.createElement("canvas"),n=100;t.width=n,t.height=n;var r=t.getContext("2d");if(!r)return Promise.reject(!1);r.fillStyle="rgb(0, 255, 0)",r.fillRect(0,0,n,n);var A=new Image,o=t.toDataURL();A.src=o;var i=vd(n,n,0,0,A);return r.fillStyle="red",r.fillRect(0,0,n,n),yw(i).then(function(a){r.drawImage(a,0,0);var s=r.getImageData(0,0,n,n).data;r.fillStyle="red",r.fillRect(0,0,n,n);var u=e.createElement("div");return u.style.backgroundImage="url("+o+")",u.style.height=n+"px",Bw(s)?yw(vd(n,n,0,0,u)):Promise.reject(!1)}).then(function(a){return r.drawImage(a,0,0),Bw(r.getImageData(0,0,n,n).data)}).catch(function(){return!1})},vd=function(e,t,n,r,A){var o="http://www.w3.org/2000/svg",i=document.createElementNS(o,"svg"),a=document.createElementNS(o,"foreignObject");return i.setAttributeNS(null,"width",e.toString()),i.setAttributeNS(null,"height",t.toString()),a.setAttributeNS(null,"width","100%"),a.setAttributeNS(null,"height","100%"),a.setAttributeNS(null,"x",n.toString()),a.setAttributeNS(null,"y",r.toString()),a.setAttributeNS(null,"externalResourcesRequired","true"),i.appendChild(a),a.appendChild(A),i},yw=function(e){return new Promise(function(t,n){var r=new Image;r.onload=function(){return t(r)},r.onerror=n,r.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(e))})},yt={get SUPPORT_RANGE_BOUNDS(){var e=BH(document);return Object.defineProperty(yt,"SUPPORT_RANGE_BOUNDS",{value:e}),e},get SUPPORT_WORD_BREAKING(){var e=yt.SUPPORT_RANGE_BOUNDS&&yH(document);return Object.defineProperty(yt,"SUPPORT_WORD_BREAKING",{value:e}),e},get SUPPORT_SVG_DRAWING(){var e=FH(document);return Object.defineProperty(yt,"SUPPORT_SVG_DRAWING",{value:e}),e},get SUPPORT_FOREIGNOBJECT_DRAWING(){var e=typeof Array.from=="function"&&typeof window.fetch=="function"?bH(document):Promise.resolve(!1);return Object.defineProperty(yt,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:e}),e},get SUPPORT_CORS_IMAGES(){var e=CH();return Object.defineProperty(yt,"SUPPORT_CORS_IMAGES",{value:e}),e},get SUPPORT_RESPONSE_TYPE(){var e=xH();return Object.defineProperty(yt,"SUPPORT_RESPONSE_TYPE",{value:e}),e},get SUPPORT_CORS_XHR(){var e="withCredentials"in new XMLHttpRequest;return Object.defineProperty(yt,"SUPPORT_CORS_XHR",{value:e}),e},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var e=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(yt,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:e}),e}},ca=function(){function e(t,n){this.text=t,this.bounds=n}return e}(),EH=function(e,t,n,r){var A=IH(t,n),o=[],i=0;return A.forEach(function(a){if(n.textDecorationLine.length||a.trim().length>0)if(yt.SUPPORT_RANGE_BOUNDS){var s=Cw(r,i,a.length).getClientRects();if(s.length>1){var u=bg(a),l=0;u.forEach(function(f){o.push(new ca(f,Tr.fromDOMRectList(e,Cw(r,l+i,f.length).getClientRects()))),l+=f.length})}else o.push(new ca(a,Tr.fromDOMRectList(e,s)))}else{var c=r.splitText(a.length);o.push(new ca(a,QH(e,r))),r=c}else yt.SUPPORT_RANGE_BOUNDS||(r=r.splitText(a.length));i+=a.length}),o},QH=function(e,t){var n=t.ownerDocument;if(n){var r=n.createElement("html2canvaswrapper");r.appendChild(t.cloneNode(!0));var A=t.parentNode;if(A){A.replaceChild(r,t);var o=tc(e,r);return r.firstChild&&A.replaceChild(r.firstChild,r),o}}return Tr.EMPTY},Cw=function(e,t,n){var r=e.ownerDocument;if(!r)throw new Error("Node has no owner document");var A=r.createRange();return A.setStart(e,t),A.setEnd(e,t+n),A},bg=function(e){if(yt.SUPPORT_NATIVE_TEXT_SEGMENTATION){var t=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(t.segment(e)).map(function(n){return n.segment})}return wH(e)},UH=function(e,t){if(yt.SUPPORT_NATIVE_TEXT_SEGMENTATION){var n=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(n.segment(e)).map(function(r){return r.segment})}return _H(e,t)},IH=function(e,t){return t.letterSpacing!==0?bg(e):UH(e,t)},SH=[32,160,4961,65792,65793,4153,4241],_H=function(e,t){for(var n=AD(e,{lineBreak:t.lineBreak,wordBreak:t.overflowWrap==="break-word"?"break-word":t.wordBreak}),r=[],A,o=function(){if(A.value){var i=A.value.slice(),a=nc(i),s="";a.forEach(function(u){SH.indexOf(u)===-1?s+=Je(u):(s.length&&r.push(s),r.push(Je(u)),s="")}),s.length&&r.push(s)}};!(A=n.next()).done;)o();return r},kH=function(){function e(t,n,r){this.text=DH(n.data,r.textTransform),this.textBounds=EH(t,this.text,r,n)}return e}(),DH=function(e,t){switch(t){case 1:return e.toLowerCase();case 3:return e.replace(RH,TH);case 2:return e.toUpperCase();default:return e}},RH=/(^|\s|:|-|\(|\))([a-z])/g,TH=function(e,t,n){return e.length>0?t+n.toUpperCase():e},J1=function(e){Gn(t,e);function t(n,r){var A=e.call(this,n,r)||this;return A.src=r.currentSrc||r.src,A.intrinsicWidth=r.naturalWidth,A.intrinsicHeight=r.naturalHeight,A.context.cache.addImage(A.src),A}return t}(gr),Z1=function(e){Gn(t,e);function t(n,r){var A=e.call(this,n,r)||this;return A.canvas=r,A.intrinsicWidth=r.width,A.intrinsicHeight=r.height,A}return t}(gr),ex=function(e){Gn(t,e);function t(n,r){var A=e.call(this,n,r)||this,o=new XMLSerializer,i=tc(n,r);return r.setAttribute("width",i.width+"px"),r.setAttribute("height",i.height+"px"),A.svg="data:image/svg+xml,"+encodeURIComponent(o.serializeToString(r)),A.intrinsicWidth=r.width.baseVal.value,A.intrinsicHeight=r.height.baseVal.value,A.context.cache.addImage(A.svg),A}return t}(gr),tx=function(e){Gn(t,e);function t(n,r){var A=e.call(this,n,r)||this;return A.value=r.value,A}return t}(gr),md=function(e){Gn(t,e);function t(n,r){var A=e.call(this,n,r)||this;return A.start=r.start,A.reversed=typeof r.reversed=="boolean"&&r.reversed===!0,A}return t}(gr),HH=[{type:15,flags:0,unit:"px",number:3}],NH=[{type:16,flags:0,number:50}],LH=function(e){return e.width>e.height?new Tr(e.left+(e.width-e.height)/2,e.top,e.height,e.height):e.width<e.height?new Tr(e.left,e.top+(e.height-e.width)/2,e.width,e.width):e},MH=function(e){var t=e.type===OH?new Array(e.value.length+1).join("•"):e.value;return t.length===0?e.placeholder||"":t},gl="checkbox",vl="radio",OH="password",xw=707406591,Eg=function(e){Gn(t,e);function t(n,r){var A=e.call(this,n,r)||this;switch(A.type=r.type.toLowerCase(),A.checked=r.checked,A.value=MH(r),(A.type===gl||A.type===vl)&&(A.styles.backgroundColor=3739148031,A.styles.borderTopColor=A.styles.borderRightColor=A.styles.borderBottomColor=A.styles.borderLeftColor=2779096575,A.styles.borderTopWidth=A.styles.borderRightWidth=A.styles.borderBottomWidth=A.styles.borderLeftWidth=1,A.styles.borderTopStyle=A.styles.borderRightStyle=A.styles.borderBottomStyle=A.styles.borderLeftStyle=1,A.styles.backgroundClip=[0],A.styles.backgroundOrigin=[0],A.bounds=LH(A.bounds)),A.type){case gl:A.styles.borderTopRightRadius=A.styles.borderTopLeftRadius=A.styles.borderBottomRightRadius=A.styles.borderBottomLeftRadius=HH;break;case vl:A.styles.borderTopRightRadius=A.styles.borderTopLeftRadius=A.styles.borderBottomRightRadius=A.styles.borderBottomLeftRadius=NH;break}return A}return t}(gr),nx=function(e){Gn(t,e);function t(n,r){var A=e.call(this,n,r)||this,o=r.options[r.selectedIndex||0];return A.value=o&&o.text||"",A}return t}(gr),rx=function(e){Gn(t,e);function t(n,r){var A=e.call(this,n,r)||this;return A.value=r.value,A}return t}(gr),Ax=function(e){Gn(t,e);function t(n,r){var A=e.call(this,n,r)||this;A.src=r.src,A.width=parseInt(r.width,10)||0,A.height=parseInt(r.height,10)||0,A.backgroundColor=A.styles.backgroundColor;try{if(r.contentWindow&&r.contentWindow.document&&r.contentWindow.document.documentElement){A.tree=ix(n,r.contentWindow.document.documentElement);var o=r.contentWindow.document.documentElement?ua(n,getComputedStyle(r.contentWindow.document.documentElement).backgroundColor):Sr.TRANSPARENT,i=r.contentWindow.document.body?ua(n,getComputedStyle(r.contentWindow.document.body).backgroundColor):Sr.TRANSPARENT;A.backgroundColor=wA(o)?wA(i)?A.styles.backgroundColor:i:o}}catch{}return A}return t}(gr),PH=["OL","UL","MENU"],mu=function(e,t,n,r){for(var A=t.firstChild,o=void 0;A;A=o)if(o=A.nextSibling,ax(A)&&A.data.trim().length>0)n.textNodes.push(new kH(e,A,n.styles));else if(Vo(A))if(cx(A)&&A.assignedNodes)A.assignedNodes().forEach(function(a){return mu(e,a,n,r)});else{var i=ox(e,A);i.styles.isVisible()&&(KH(A,i,r)?i.flags|=4:VH(i.styles)&&(i.flags|=2),PH.indexOf(A.tagName)!==-1&&(i.flags|=8),n.elements.push(i),A.slot,A.shadowRoot?mu(e,A.shadowRoot,i,r):!ml(A)&&!sx(A)&&!wl(A)&&mu(e,A,i,r))}},ox=function(e,t){return Bd(t)?new J1(e,t):ux(t)?new Z1(e,t):sx(t)?new ex(e,t):WH(t)?new tx(e,t):GH(t)?new md(e,t):zH(t)?new Eg(e,t):wl(t)?new nx(e,t):ml(t)?new rx(e,t):lx(t)?new Ax(e,t):new gr(e,t)},ix=function(e,t){var n=ox(e,t);return n.flags|=4,mu(e,t,n,n),n},KH=function(e,t,n){return t.styles.isPositionedWithZIndex()||t.styles.opacity<1||t.styles.isTransformed()||Qg(e)&&n.styles.isTransparent()},VH=function(e){return e.isPositioned()||e.isFloating()},ax=function(e){return e.nodeType===Node.TEXT_NODE},Vo=function(e){return e.nodeType===Node.ELEMENT_NODE},wd=function(e){return Vo(e)&&typeof e.style<"u"&&!wu(e)},wu=function(e){return typeof e.className=="object"},WH=function(e){return e.tagName==="LI"},GH=function(e){return e.tagName==="OL"},zH=function(e){return e.tagName==="INPUT"},XH=function(e){return e.tagName==="HTML"},sx=function(e){return e.tagName==="svg"},Qg=function(e){return e.tagName==="BODY"},ux=function(e){return e.tagName==="CANVAS"},Fw=function(e){return e.tagName==="VIDEO"},Bd=function(e){return e.tagName==="IMG"},lx=function(e){return e.tagName==="IFRAME"},bw=function(e){return e.tagName==="STYLE"},$H=function(e){return e.tagName==="SCRIPT"},ml=function(e){return e.tagName==="TEXTAREA"},wl=function(e){return e.tagName==="SELECT"},cx=function(e){return e.tagName==="SLOT"},Ew=function(e){return e.tagName.indexOf("-")>0},jH=function(){function e(){this.counters={}}return e.prototype.getCounterValue=function(t){var n=this.counters[t];return n&&n.length?n[n.length-1]:1},e.prototype.getCounterValues=function(t){var n=this.counters[t];return n||[]},e.prototype.pop=function(t){var n=this;t.forEach(function(r){return n.counters[r].pop()})},e.prototype.parse=function(t){var n=this,r=t.counterIncrement,A=t.counterReset,o=!0;r!==null&&r.forEach(function(a){var s=n.counters[a.counter];s&&a.increment!==0&&(o=!1,s.length||s.push(1),s[Math.max(0,s.length-1)]+=a.increment)});var i=[];return o&&A.forEach(function(a){var s=n.counters[a.counter];i.push(a.counter),s||(s=n.counters[a.counter]=[]),s.push(a.reset)}),i},e}(),Qw={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},Uw={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["Ք","Փ","Ւ","Ց","Ր","Տ","Վ","Ս","Ռ","Ջ","Պ","Չ","Ո","Շ","Ն","Յ","Մ","Ճ","Ղ","Ձ","Հ","Կ","Ծ","Խ","Լ","Ի","Ժ","Թ","Ը","Է","Զ","Ե","Դ","Գ","Բ","Ա"]},YH={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["י׳","ט׳","ח׳","ז׳","ו׳","ה׳","ד׳","ג׳","ב׳","א׳","ת","ש","ר","ק","צ","פ","ע","ס","נ","מ","ל","כ","יט","יח","יז","טז","טו","י","ט","ח","ז","ו","ה","ד","ג","ב","א"]},qH={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["ჵ","ჰ","ჯ","ჴ","ხ","ჭ","წ","ძ","ც","ჩ","შ","ყ","ღ","ქ","ფ","ჳ","ტ","ს","რ","ჟ","პ","ო","ჲ","ნ","მ","ლ","კ","ი","თ","ჱ","ზ","ვ","ე","დ","გ","ბ","ა"]},Co=function(e,t,n,r,A,o){return e<t||e>n?Ma(e,A,o.length>0):r.integers.reduce(function(i,a,s){for(;e>=a;)e-=a,i+=r.values[s];return i},"")+o},fx=function(e,t,n,r){var A="";do n||e--,A=r(e)+A,e/=t;while(e*t>=t);return A},qe=function(e,t,n,r,A){var o=n-t+1;return(e<0?"-":"")+(fx(Math.abs(e),o,r,function(i){return Je(Math.floor(i%o)+t)})+A)},kA=function(e,t,n){n===void 0&&(n=". ");var r=t.length;return fx(Math.abs(e),r,!1,function(A){return t[Math.floor(A%r)]})+n},Io=1,Xr=2,$r=4,ji=8,Cr=function(e,t,n,r,A,o){if(e<-9999||e>9999)return Ma(e,4,A.length>0);var i=Math.abs(e),a=A;if(i===0)return t[0]+a;for(var s=0;i>0&&s<=4;s++){var u=i%10;u===0&&it(o,Io)&&a!==""?a=t[u]+a:u>1||u===1&&s===0||u===1&&s===1&&it(o,Xr)||u===1&&s===1&&it(o,$r)&&e>100||u===1&&s>1&&it(o,ji)?a=t[u]+(s>0?n[s-1]:"")+a:u===1&&s>0&&(a=n[s-1]+a),i=Math.floor(i/10)}return(e<0?r:"")+a},Iw="十百千萬",Sw="拾佰仟萬",_w="マイナス",kf="마이너스",Ma=function(e,t,n){var r=n?". ":"",A=n?"、":"",o=n?", ":"",i=n?" ":"";switch(t){case 0:return"•"+i;case 1:return"◦"+i;case 2:return"◾"+i;case 5:var a=qe(e,48,57,!0,r);return a.length<4?"0"+a:a;case 4:return kA(e,"〇一二三四五六七八九",A);case 6:return Co(e,1,3999,Qw,3,r).toLowerCase();case 7:return Co(e,1,3999,Qw,3,r);case 8:return qe(e,945,969,!1,r);case 9:return qe(e,97,122,!1,r);case 10:return qe(e,65,90,!1,r);case 11:return qe(e,1632,1641,!0,r);case 12:case 49:return Co(e,1,9999,Uw,3,r);case 35:return Co(e,1,9999,Uw,3,r).toLowerCase();case 13:return qe(e,2534,2543,!0,r);case 14:case 30:return qe(e,6112,6121,!0,r);case 15:return kA(e,"子丑寅卯辰巳午未申酉戌亥",A);case 16:return kA(e,"甲乙丙丁戊己庚辛壬癸",A);case 17:case 48:return Cr(e,"零一二三四五六七八九",Iw,"負",A,Xr|$r|ji);case 47:return Cr(e,"零壹貳參肆伍陸柒捌玖",Sw,"負",A,Io|Xr|$r|ji);case 42:return Cr(e,"零一二三四五六七八九",Iw,"负",A,Xr|$r|ji);case 41:return Cr(e,"零壹贰叁肆伍陆柒捌玖",Sw,"负",A,Io|Xr|$r|ji);case 26:return Cr(e,"〇一二三四五六七八九","十百千万",_w,A,0);case 25:return Cr(e,"零壱弐参四伍六七八九","拾百千万",_w,A,Io|Xr|$r);case 31:return Cr(e,"영일이삼사오육칠팔구","십백천만",kf,o,Io|Xr|$r);case 33:return Cr(e,"零一二三四五六七八九","十百千萬",kf,o,0);case 32:return Cr(e,"零壹貳參四五六七八九","拾百千",kf,o,Io|Xr|$r);case 18:return qe(e,2406,2415,!0,r);case 20:return Co(e,1,19999,qH,3,r);case 21:return qe(e,2790,2799,!0,r);case 22:return qe(e,2662,2671,!0,r);case 22:return Co(e,1,10999,YH,3,r);case 23:return kA(e,"あいうえおかきくけこさしすせそたちつてとなにぬねのはひふへほまみむめもやゆよらりるれろわゐゑをん");case 24:return kA(e,"いろはにほへとちりぬるをわかよたれそつねならむうゐのおくやまけふこえてあさきゆめみしゑひもせす");case 27:return qe(e,3302,3311,!0,r);case 28:return kA(e,"アイウエオカキクケコサシスセソタチツテトナニヌネノハヒフヘホマミムメモヤユヨラリルレロワヰヱヲン",A);case 29:return kA(e,"イロハニホヘトチリヌルヲワカヨタレソツネナラムウヰノオクヤマケフコエテアサキユメミシヱヒモセス",A);case 34:return qe(e,3792,3801,!0,r);case 37:return qe(e,6160,6169,!0,r);case 38:return qe(e,4160,4169,!0,r);case 39:return qe(e,2918,2927,!0,r);case 40:return qe(e,1776,1785,!0,r);case 43:return qe(e,3046,3055,!0,r);case 44:return qe(e,3174,3183,!0,r);case 45:return qe(e,3664,3673,!0,r);case 46:return qe(e,3872,3881,!0,r);case 3:default:return qe(e,48,57,!0,r)}},hx="data-html2canvas-ignore",kw=function(){function e(t,n,r){if(this.context=t,this.options=r,this.scrolledElements=[],this.referenceElement=n,this.counters=new jH,this.quoteDepth=0,!n.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(n.ownerDocument.documentElement,!1)}return e.prototype.toIFrame=function(t,n){var r=this,A=JH(t,n);if(!A.contentWindow)return Promise.reject("Unable to find iframe window");var o=t.defaultView.pageXOffset,i=t.defaultView.pageYOffset,a=A.contentWindow,s=a.document,u=tN(A).then(function(){return Mt(r,void 0,void 0,function(){var l,c;return It(this,function(f){switch(f.label){case 0:return this.scrolledElements.forEach(oN),a&&(a.scrollTo(n.left,n.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(a.scrollY!==n.top||a.scrollX!==n.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(a.scrollX-n.left,a.scrollY-n.top,0,0))),l=this.options.onclone,c=this.clonedReferenceElement,typeof c>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:s.fonts&&s.fonts.ready?[4,s.fonts.ready]:[3,2];case 1:f.sent(),f.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,eN(s)]:[3,4];case 3:f.sent(),f.label=4;case 4:return typeof l=="function"?[2,Promise.resolve().then(function(){return l(s,c)}).then(function(){return A})]:[2,A]}})})});return s.open(),s.write(rN(document.doctype)+"<html></html>"),AN(this.referenceElement.ownerDocument,o,i),s.replaceChild(s.adoptNode(this.documentElement),s.documentElement),s.close(),u},e.prototype.createElementClone=function(t){if(gd(t,2))debugger;if(ux(t))return this.createCanvasClone(t);if(Fw(t))return this.createVideoClone(t);if(bw(t))return this.createStyleClone(t);var n=t.cloneNode(!1);return Bd(n)&&(Bd(t)&&t.currentSrc&&t.currentSrc!==t.src&&(n.src=t.currentSrc,n.srcset=""),n.loading==="lazy"&&(n.loading="eager")),Ew(n)?this.createCustomElementClone(n):n},e.prototype.createCustomElementClone=function(t){var n=document.createElement("html2canvascustomelement");return Df(t.style,n),n},e.prototype.createStyleClone=function(t){try{var n=t.sheet;if(n&&n.cssRules){var r=[].slice.call(n.cssRules,0).reduce(function(o,i){return i&&typeof i.cssText=="string"?o+i.cssText:o},""),A=t.cloneNode(!1);return A.textContent=r,A}}catch(o){if(this.context.logger.error("Unable to access cssRules property",o),o.name!=="SecurityError")throw o}return t.cloneNode(!1)},e.prototype.createCanvasClone=function(t){var n;if(this.options.inlineImages&&t.ownerDocument){var r=t.ownerDocument.createElement("img");try{return r.src=t.toDataURL(),r}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",t)}}var A=t.cloneNode(!1);try{A.width=t.width,A.height=t.height;var o=t.getContext("2d"),i=A.getContext("2d");if(i)if(!this.options.allowTaint&&o)i.putImageData(o.getImageData(0,0,t.width,t.height),0,0);else{var a=(n=t.getContext("webgl2"))!==null&&n!==void 0?n:t.getContext("webgl");if(a){var s=a.getContextAttributes();(s==null?void 0:s.preserveDrawingBuffer)===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",t)}i.drawImage(t,0,0)}return A}catch{this.context.logger.info("Unable to clone canvas as it is tainted",t)}return A},e.prototype.createVideoClone=function(t){var n=t.ownerDocument.createElement("canvas");n.width=t.offsetWidth,n.height=t.offsetHeight;var r=n.getContext("2d");try{return r&&(r.drawImage(t,0,0,n.width,n.height),this.options.allowTaint||r.getImageData(0,0,n.width,n.height)),n}catch{this.context.logger.info("Unable to clone video as it is tainted",t)}var A=t.ownerDocument.createElement("canvas");return A.width=t.offsetWidth,A.height=t.offsetHeight,A},e.prototype.appendChildNode=function(t,n,r){(!Vo(n)||!$H(n)&&!n.hasAttribute(hx)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(n)))&&(!this.options.copyStyles||!Vo(n)||!bw(n))&&t.appendChild(this.cloneNode(n,r))},e.prototype.cloneChildNodes=function(t,n,r){for(var A=this,o=t.shadowRoot?t.shadowRoot.firstChild:t.firstChild;o;o=o.nextSibling)if(Vo(o)&&cx(o)&&typeof o.assignedNodes=="function"){var i=o.assignedNodes();i.length&&i.forEach(function(a){return A.appendChildNode(n,a,r)})}else this.appendChildNode(n,o,r)},e.prototype.cloneNode=function(t,n){if(ax(t))return document.createTextNode(t.data);if(!t.ownerDocument)return t.cloneNode(!1);var r=t.ownerDocument.defaultView;if(r&&Vo(t)&&(wd(t)||wu(t))){var A=this.createElementClone(t);A.style.transitionProperty="none";var o=r.getComputedStyle(t),i=r.getComputedStyle(t,":before"),a=r.getComputedStyle(t,":after");this.referenceElement===t&&wd(A)&&(this.clonedReferenceElement=A),Qg(A)&&sN(A);var s=this.counters.parse(new uw(this.context,o)),u=this.resolvePseudoContent(t,A,i,fa.BEFORE);Ew(t)&&(n=!0),Fw(t)||this.cloneChildNodes(t,A,n),u&&A.insertBefore(u,A.firstChild);var l=this.resolvePseudoContent(t,A,a,fa.AFTER);return l&&A.appendChild(l),this.counters.pop(s),(o&&(this.options.copyStyles||wu(t))&&!lx(t)||n)&&Df(o,A),(t.scrollTop!==0||t.scrollLeft!==0)&&this.scrolledElements.push([A,t.scrollLeft,t.scrollTop]),(ml(t)||wl(t))&&(ml(A)||wl(A))&&(A.value=t.value),A}return t.cloneNode(!1)},e.prototype.resolvePseudoContent=function(t,n,r,A){var o=this;if(r){var i=r.content,a=n.ownerDocument;if(!(!a||!i||i==="none"||i==="-moz-alt-content"||r.display==="none")){this.counters.parse(new uw(this.context,r));var s=new WT(this.context,r),u=a.createElement("html2canvaspseudoelement");Df(r,u),s.content.forEach(function(c){if(c.type===0)u.appendChild(a.createTextNode(c.value));else if(c.type===22){var f=a.createElement("img");f.src=c.value,f.style.opacity="1",u.appendChild(f)}else if(c.type===18){if(c.name==="attr"){var h=c.values.filter(Se);h.length&&u.appendChild(a.createTextNode(t.getAttribute(h[0].value)||""))}else if(c.name==="counter"){var d=c.values.filter(gi),g=d[0],m=d[1];if(g&&Se(g)){var p=o.counters.getCounterValue(g.value),v=m&&Se(m)?pd.parse(o.context,m.value):3;u.appendChild(a.createTextNode(Ma(p,v,!1)))}}else if(c.name==="counters"){var w=c.values.filter(gi),g=w[0],B=w[1],m=w[2];if(g&&Se(g)){var y=o.counters.getCounterValues(g.value),C=m&&Se(m)?pd.parse(o.context,m.value):3,b=B&&B.type===0?B.value:"",x=y.map(function(I){return Ma(I,C,!1)}).join(b);u.appendChild(a.createTextNode(x))}}}else if(c.type===20)switch(c.value){case"open-quote":u.appendChild(a.createTextNode(sw(s.quotes,o.quoteDepth++,!0)));break;case"close-quote":u.appendChild(a.createTextNode(sw(s.quotes,--o.quoteDepth,!1)));break;default:u.appendChild(a.createTextNode(c.value))}}),u.className=yd+" "+Cd;var l=A===fa.BEFORE?" "+yd:" "+Cd;return wu(n)?n.className.baseValue+=l:n.className+=l,u}}},e.destroy=function(t){return t.parentNode?(t.parentNode.removeChild(t),!0):!1},e}(),fa;(function(e){e[e.BEFORE=0]="BEFORE",e[e.AFTER=1]="AFTER"})(fa||(fa={}));var JH=function(e,t){var n=e.createElement("iframe");return n.className="html2canvas-container",n.style.visibility="hidden",n.style.position="fixed",n.style.left="-10000px",n.style.top="0px",n.style.border="0",n.width=t.width.toString(),n.height=t.height.toString(),n.scrolling="no",n.setAttribute(hx,"true"),e.body.appendChild(n),n},ZH=function(e){return new Promise(function(t){if(e.complete){t();return}if(!e.src){t();return}e.onload=t,e.onerror=t})},eN=function(e){return Promise.all([].slice.call(e.images,0).map(ZH))},tN=function(e){return new Promise(function(t,n){var r=e.contentWindow;if(!r)return n("No window assigned for iframe");var A=r.document;r.onload=e.onload=function(){r.onload=e.onload=null;var o=setInterval(function(){A.body.childNodes.length>0&&A.readyState==="complete"&&(clearInterval(o),t(e))},50)}})},nN=["all","d","content"],Df=function(e,t){for(var n=e.length-1;n>=0;n--){var r=e.item(n);nN.indexOf(r)===-1&&t.style.setProperty(r,e.getPropertyValue(r))}return t},rN=function(e){var t="";return e&&(t+="<!DOCTYPE ",e.name&&(t+=e.name),e.internalSubset&&(t+=e.internalSubset),e.publicId&&(t+='"'+e.publicId+'"'),e.systemId&&(t+='"'+e.systemId+'"'),t+=">"),t},AN=function(e,t,n){e&&e.defaultView&&(t!==e.defaultView.pageXOffset||n!==e.defaultView.pageYOffset)&&e.defaultView.scrollTo(t,n)},oN=function(e){var t=e[0],n=e[1],r=e[2];t.scrollLeft=n,t.scrollTop=r},iN=":before",aN=":after",yd="___html2canvas___pseudoelement_before",Cd="___html2canvas___pseudoelement_after",Dw=`{
    content: "" !important;
    display: none !important;
}`,sN=function(e){uN(e,"."+yd+iN+Dw+`
         .`+Cd+aN+Dw)},uN=function(e,t){var n=e.ownerDocument;if(n){var r=n.createElement("style");r.textContent=t,e.appendChild(r)}},dx=function(){function e(){}return e.getOrigin=function(t){var n=e._link;return n?(n.href=t,n.href=n.href,n.protocol+n.hostname+n.port):"about:blank"},e.isSameOrigin=function(t){return e.getOrigin(t)===e._origin},e.setContext=function(t){e._link=t.document.createElement("a"),e._origin=e.getOrigin(t.location.href)},e._origin="about:blank",e}(),lN=function(){function e(t,n){this.context=t,this._options=n,this._cache={}}return e.prototype.addImage=function(t){var n=Promise.resolve();return this.has(t)||(Tf(t)||dN(t))&&(this._cache[t]=this.loadImage(t)).catch(function(){}),n},e.prototype.match=function(t){return this._cache[t]},e.prototype.loadImage=function(t){return Mt(this,void 0,void 0,function(){var n,r,A,o,i=this;return It(this,function(a){switch(a.label){case 0:return n=dx.isSameOrigin(t),r=!Rf(t)&&this._options.useCORS===!0&&yt.SUPPORT_CORS_IMAGES&&!n,A=!Rf(t)&&!n&&!Tf(t)&&typeof this._options.proxy=="string"&&yt.SUPPORT_CORS_XHR&&!r,!n&&this._options.allowTaint===!1&&!Rf(t)&&!Tf(t)&&!A&&!r?[2]:(o=t,A?[4,this.proxy(o)]:[3,2]);case 1:o=a.sent(),a.label=2;case 2:return this.context.logger.debug("Added image "+t.substring(0,256)),[4,new Promise(function(s,u){var l=new Image;l.onload=function(){return s(l)},l.onerror=u,(pN(o)||r)&&(l.crossOrigin="anonymous"),l.src=o,l.complete===!0&&setTimeout(function(){return s(l)},500),i._options.imageTimeout>0&&setTimeout(function(){return u("Timed out ("+i._options.imageTimeout+"ms) loading image")},i._options.imageTimeout)})];case 3:return[2,a.sent()]}})})},e.prototype.has=function(t){return typeof this._cache[t]<"u"},e.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},e.prototype.proxy=function(t){var n=this,r=this._options.proxy;if(!r)throw new Error("No proxy defined");var A=t.substring(0,256);return new Promise(function(o,i){var a=yt.SUPPORT_RESPONSE_TYPE?"blob":"text",s=new XMLHttpRequest;s.onload=function(){if(s.status===200)if(a==="text")o(s.response);else{var c=new FileReader;c.addEventListener("load",function(){return o(c.result)},!1),c.addEventListener("error",function(f){return i(f)},!1),c.readAsDataURL(s.response)}else i("Failed to proxy resource "+A+" with status code "+s.status)},s.onerror=i;var u=r.indexOf("?")>-1?"&":"?";if(s.open("GET",""+r+u+"url="+encodeURIComponent(t)+"&responseType="+a),a!=="text"&&s instanceof XMLHttpRequest&&(s.responseType=a),n._options.imageTimeout){var l=n._options.imageTimeout;s.timeout=l,s.ontimeout=function(){return i("Timed out ("+l+"ms) proxying "+A)}}s.send()})},e}(),cN=/^data:image\/svg\+xml/i,fN=/^data:image\/.*;base64,/i,hN=/^data:image\/.*/i,dN=function(e){return yt.SUPPORT_SVG_DRAWING||!gN(e)},Rf=function(e){return hN.test(e)},pN=function(e){return fN.test(e)},Tf=function(e){return e.substr(0,4)==="blob"},gN=function(e){return e.substr(-3).toLowerCase()==="svg"||cN.test(e)},j=function(){function e(t,n){this.type=0,this.x=t,this.y=n}return e.prototype.add=function(t,n){return new e(this.x+t,this.y+n)},e}(),xo=function(e,t,n){return new j(e.x+(t.x-e.x)*n,e.y+(t.y-e.y)*n)},Zs=function(){function e(t,n,r,A){this.type=1,this.start=t,this.startControl=n,this.endControl=r,this.end=A}return e.prototype.subdivide=function(t,n){var r=xo(this.start,this.startControl,t),A=xo(this.startControl,this.endControl,t),o=xo(this.endControl,this.end,t),i=xo(r,A,t),a=xo(A,o,t),s=xo(i,a,t);return n?new e(this.start,r,i,s):new e(s,a,o,this.end)},e.prototype.add=function(t,n){return new e(this.start.add(t,n),this.startControl.add(t,n),this.endControl.add(t,n),this.end.add(t,n))},e.prototype.reverse=function(){return new e(this.end,this.endControl,this.startControl,this.start)},e}(),Cn=function(e){return e.type===1},vN=function(){function e(t){var n=t.styles,r=t.bounds,A=Xi(n.borderTopLeftRadius,r.width,r.height),o=A[0],i=A[1],a=Xi(n.borderTopRightRadius,r.width,r.height),s=a[0],u=a[1],l=Xi(n.borderBottomRightRadius,r.width,r.height),c=l[0],f=l[1],h=Xi(n.borderBottomLeftRadius,r.width,r.height),d=h[0],g=h[1],m=[];m.push((o+s)/r.width),m.push((d+c)/r.width),m.push((i+g)/r.height),m.push((u+f)/r.height);var p=Math.max.apply(Math,m);p>1&&(o/=p,i/=p,s/=p,u/=p,c/=p,f/=p,d/=p,g/=p);var v=r.width-s,w=r.height-f,B=r.width-c,y=r.height-g,C=n.borderTopWidth,b=n.borderRightWidth,x=n.borderBottomWidth,F=n.borderLeftWidth,E=_e(n.paddingTop,t.bounds.width),I=_e(n.paddingRight,t.bounds.width),S=_e(n.paddingBottom,t.bounds.width),T=_e(n.paddingLeft,t.bounds.width);this.topLeftBorderDoubleOuterBox=o>0||i>0?Ne(r.left+F/3,r.top+C/3,o-F/3,i-C/3,Ee.TOP_LEFT):new j(r.left+F/3,r.top+C/3),this.topRightBorderDoubleOuterBox=o>0||i>0?Ne(r.left+v,r.top+C/3,s-b/3,u-C/3,Ee.TOP_RIGHT):new j(r.left+r.width-b/3,r.top+C/3),this.bottomRightBorderDoubleOuterBox=c>0||f>0?Ne(r.left+B,r.top+w,c-b/3,f-x/3,Ee.BOTTOM_RIGHT):new j(r.left+r.width-b/3,r.top+r.height-x/3),this.bottomLeftBorderDoubleOuterBox=d>0||g>0?Ne(r.left+F/3,r.top+y,d-F/3,g-x/3,Ee.BOTTOM_LEFT):new j(r.left+F/3,r.top+r.height-x/3),this.topLeftBorderDoubleInnerBox=o>0||i>0?Ne(r.left+F*2/3,r.top+C*2/3,o-F*2/3,i-C*2/3,Ee.TOP_LEFT):new j(r.left+F*2/3,r.top+C*2/3),this.topRightBorderDoubleInnerBox=o>0||i>0?Ne(r.left+v,r.top+C*2/3,s-b*2/3,u-C*2/3,Ee.TOP_RIGHT):new j(r.left+r.width-b*2/3,r.top+C*2/3),this.bottomRightBorderDoubleInnerBox=c>0||f>0?Ne(r.left+B,r.top+w,c-b*2/3,f-x*2/3,Ee.BOTTOM_RIGHT):new j(r.left+r.width-b*2/3,r.top+r.height-x*2/3),this.bottomLeftBorderDoubleInnerBox=d>0||g>0?Ne(r.left+F*2/3,r.top+y,d-F*2/3,g-x*2/3,Ee.BOTTOM_LEFT):new j(r.left+F*2/3,r.top+r.height-x*2/3),this.topLeftBorderStroke=o>0||i>0?Ne(r.left+F/2,r.top+C/2,o-F/2,i-C/2,Ee.TOP_LEFT):new j(r.left+F/2,r.top+C/2),this.topRightBorderStroke=o>0||i>0?Ne(r.left+v,r.top+C/2,s-b/2,u-C/2,Ee.TOP_RIGHT):new j(r.left+r.width-b/2,r.top+C/2),this.bottomRightBorderStroke=c>0||f>0?Ne(r.left+B,r.top+w,c-b/2,f-x/2,Ee.BOTTOM_RIGHT):new j(r.left+r.width-b/2,r.top+r.height-x/2),this.bottomLeftBorderStroke=d>0||g>0?Ne(r.left+F/2,r.top+y,d-F/2,g-x/2,Ee.BOTTOM_LEFT):new j(r.left+F/2,r.top+r.height-x/2),this.topLeftBorderBox=o>0||i>0?Ne(r.left,r.top,o,i,Ee.TOP_LEFT):new j(r.left,r.top),this.topRightBorderBox=s>0||u>0?Ne(r.left+v,r.top,s,u,Ee.TOP_RIGHT):new j(r.left+r.width,r.top),this.bottomRightBorderBox=c>0||f>0?Ne(r.left+B,r.top+w,c,f,Ee.BOTTOM_RIGHT):new j(r.left+r.width,r.top+r.height),this.bottomLeftBorderBox=d>0||g>0?Ne(r.left,r.top+y,d,g,Ee.BOTTOM_LEFT):new j(r.left,r.top+r.height),this.topLeftPaddingBox=o>0||i>0?Ne(r.left+F,r.top+C,Math.max(0,o-F),Math.max(0,i-C),Ee.TOP_LEFT):new j(r.left+F,r.top+C),this.topRightPaddingBox=s>0||u>0?Ne(r.left+Math.min(v,r.width-b),r.top+C,v>r.width+b?0:Math.max(0,s-b),Math.max(0,u-C),Ee.TOP_RIGHT):new j(r.left+r.width-b,r.top+C),this.bottomRightPaddingBox=c>0||f>0?Ne(r.left+Math.min(B,r.width-F),r.top+Math.min(w,r.height-x),Math.max(0,c-b),Math.max(0,f-x),Ee.BOTTOM_RIGHT):new j(r.left+r.width-b,r.top+r.height-x),this.bottomLeftPaddingBox=d>0||g>0?Ne(r.left+F,r.top+Math.min(y,r.height-x),Math.max(0,d-F),Math.max(0,g-x),Ee.BOTTOM_LEFT):new j(r.left+F,r.top+r.height-x),this.topLeftContentBox=o>0||i>0?Ne(r.left+F+T,r.top+C+E,Math.max(0,o-(F+T)),Math.max(0,i-(C+E)),Ee.TOP_LEFT):new j(r.left+F+T,r.top+C+E),this.topRightContentBox=s>0||u>0?Ne(r.left+Math.min(v,r.width+F+T),r.top+C+E,v>r.width+F+T?0:s-F+T,u-(C+E),Ee.TOP_RIGHT):new j(r.left+r.width-(b+I),r.top+C+E),this.bottomRightContentBox=c>0||f>0?Ne(r.left+Math.min(B,r.width-(F+T)),r.top+Math.min(w,r.height+C+E),Math.max(0,c-(b+I)),f-(x+S),Ee.BOTTOM_RIGHT):new j(r.left+r.width-(b+I),r.top+r.height-(x+S)),this.bottomLeftContentBox=d>0||g>0?Ne(r.left+F+T,r.top+y,Math.max(0,d-(F+T)),g-(x+S),Ee.BOTTOM_LEFT):new j(r.left+F+T,r.top+r.height-(x+S))}return e}(),Ee;(function(e){e[e.TOP_LEFT=0]="TOP_LEFT",e[e.TOP_RIGHT=1]="TOP_RIGHT",e[e.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",e[e.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(Ee||(Ee={}));var Ne=function(e,t,n,r,A){var o=4*((Math.sqrt(2)-1)/3),i=n*o,a=r*o,s=e+n,u=t+r;switch(A){case Ee.TOP_LEFT:return new Zs(new j(e,u),new j(e,u-a),new j(s-i,t),new j(s,t));case Ee.TOP_RIGHT:return new Zs(new j(e,t),new j(e+i,t),new j(s,u-a),new j(s,u));case Ee.BOTTOM_RIGHT:return new Zs(new j(s,t),new j(s,t+a),new j(e+i,u),new j(e,u));case Ee.BOTTOM_LEFT:default:return new Zs(new j(s,u),new j(s-i,u),new j(e,t+a),new j(e,t))}},Bl=function(e){return[e.topLeftBorderBox,e.topRightBorderBox,e.bottomRightBorderBox,e.bottomLeftBorderBox]},mN=function(e){return[e.topLeftContentBox,e.topRightContentBox,e.bottomRightContentBox,e.bottomLeftContentBox]},yl=function(e){return[e.topLeftPaddingBox,e.topRightPaddingBox,e.bottomRightPaddingBox,e.bottomLeftPaddingBox]},wN=function(){function e(t,n,r){this.offsetX=t,this.offsetY=n,this.matrix=r,this.type=0,this.target=6}return e}(),eu=function(){function e(t,n){this.path=t,this.target=n,this.type=1}return e}(),BN=function(){function e(t){this.opacity=t,this.type=2,this.target=6}return e}(),yN=function(e){return e.type===0},px=function(e){return e.type===1},CN=function(e){return e.type===2},Rw=function(e,t){return e.length===t.length?e.some(function(n,r){return n===t[r]}):!1},xN=function(e,t,n,r,A){return e.map(function(o,i){switch(i){case 0:return o.add(t,n);case 1:return o.add(t+r,n);case 2:return o.add(t+r,n+A);case 3:return o.add(t,n+A)}return o})},gx=function(){function e(t){this.element=t,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return e}(),vx=function(){function e(t,n){if(this.container=t,this.parent=n,this.effects=[],this.curves=new vN(this.container),this.container.styles.opacity<1&&this.effects.push(new BN(this.container.styles.opacity)),this.container.styles.transform!==null){var r=this.container.bounds.left+this.container.styles.transformOrigin[0].number,A=this.container.bounds.top+this.container.styles.transformOrigin[1].number,o=this.container.styles.transform;this.effects.push(new wN(r,A,o))}if(this.container.styles.overflowX!==0){var i=Bl(this.curves),a=yl(this.curves);Rw(i,a)?this.effects.push(new eu(i,6)):(this.effects.push(new eu(i,2)),this.effects.push(new eu(a,4)))}}return e.prototype.getEffects=function(t){for(var n=[2,3].indexOf(this.container.styles.position)===-1,r=this.parent,A=this.effects.slice(0);r;){var o=r.effects.filter(function(s){return!px(s)});if(n||r.container.styles.position!==0||!r.parent){if(A.unshift.apply(A,o),n=[2,3].indexOf(r.container.styles.position)===-1,r.container.styles.overflowX!==0){var i=Bl(r.curves),a=yl(r.curves);Rw(i,a)||A.unshift(new eu(a,6))}}else A.unshift.apply(A,o);r=r.parent}return A.filter(function(s){return it(s.target,t)})},e}(),xd=function(e,t,n,r){e.container.elements.forEach(function(A){var o=it(A.flags,4),i=it(A.flags,2),a=new vx(A,e);it(A.styles.display,2048)&&r.push(a);var s=it(A.flags,8)?[]:r;if(o||i){var u=o||A.styles.isPositioned()?n:t,l=new gx(a);if(A.styles.isPositioned()||A.styles.opacity<1||A.styles.isTransformed()){var c=A.styles.zIndex.order;if(c<0){var f=0;u.negativeZIndex.some(function(d,g){return c>d.element.container.styles.zIndex.order?(f=g,!1):f>0}),u.negativeZIndex.splice(f,0,l)}else if(c>0){var h=0;u.positiveZIndex.some(function(d,g){return c>=d.element.container.styles.zIndex.order?(h=g+1,!1):h>0}),u.positiveZIndex.splice(h,0,l)}else u.zeroOrAutoZIndexOrTransformedOrOpacity.push(l)}else A.styles.isFloating()?u.nonPositionedFloats.push(l):u.nonPositionedInlineLevel.push(l);xd(a,l,o?l:n,s)}else A.styles.isInlineLevel()?t.inlineLevel.push(a):t.nonInlineLevel.push(a),xd(a,t,n,s);it(A.flags,8)&&mx(A,s)})},mx=function(e,t){for(var n=e instanceof md?e.start:1,r=e instanceof md?e.reversed:!1,A=0;A<t.length;A++){var o=t[A];o.container instanceof tx&&typeof o.container.value=="number"&&o.container.value!==0&&(n=o.container.value),o.listValue=Ma(n,o.container.styles.listStyleType,!0),n+=r?-1:1}},FN=function(e){var t=new vx(e,null),n=new gx(t),r=[];return xd(t,n,n,r),mx(t.container,r),n},Tw=function(e,t){switch(t){case 0:return Qn(e.topLeftBorderBox,e.topLeftPaddingBox,e.topRightBorderBox,e.topRightPaddingBox);case 1:return Qn(e.topRightBorderBox,e.topRightPaddingBox,e.bottomRightBorderBox,e.bottomRightPaddingBox);case 2:return Qn(e.bottomRightBorderBox,e.bottomRightPaddingBox,e.bottomLeftBorderBox,e.bottomLeftPaddingBox);case 3:default:return Qn(e.bottomLeftBorderBox,e.bottomLeftPaddingBox,e.topLeftBorderBox,e.topLeftPaddingBox)}},bN=function(e,t){switch(t){case 0:return Qn(e.topLeftBorderBox,e.topLeftBorderDoubleOuterBox,e.topRightBorderBox,e.topRightBorderDoubleOuterBox);case 1:return Qn(e.topRightBorderBox,e.topRightBorderDoubleOuterBox,e.bottomRightBorderBox,e.bottomRightBorderDoubleOuterBox);case 2:return Qn(e.bottomRightBorderBox,e.bottomRightBorderDoubleOuterBox,e.bottomLeftBorderBox,e.bottomLeftBorderDoubleOuterBox);case 3:default:return Qn(e.bottomLeftBorderBox,e.bottomLeftBorderDoubleOuterBox,e.topLeftBorderBox,e.topLeftBorderDoubleOuterBox)}},EN=function(e,t){switch(t){case 0:return Qn(e.topLeftBorderDoubleInnerBox,e.topLeftPaddingBox,e.topRightBorderDoubleInnerBox,e.topRightPaddingBox);case 1:return Qn(e.topRightBorderDoubleInnerBox,e.topRightPaddingBox,e.bottomRightBorderDoubleInnerBox,e.bottomRightPaddingBox);case 2:return Qn(e.bottomRightBorderDoubleInnerBox,e.bottomRightPaddingBox,e.bottomLeftBorderDoubleInnerBox,e.bottomLeftPaddingBox);case 3:default:return Qn(e.bottomLeftBorderDoubleInnerBox,e.bottomLeftPaddingBox,e.topLeftBorderDoubleInnerBox,e.topLeftPaddingBox)}},QN=function(e,t){switch(t){case 0:return tu(e.topLeftBorderStroke,e.topRightBorderStroke);case 1:return tu(e.topRightBorderStroke,e.bottomRightBorderStroke);case 2:return tu(e.bottomRightBorderStroke,e.bottomLeftBorderStroke);case 3:default:return tu(e.bottomLeftBorderStroke,e.topLeftBorderStroke)}},tu=function(e,t){var n=[];return Cn(e)?n.push(e.subdivide(.5,!1)):n.push(e),Cn(t)?n.push(t.subdivide(.5,!0)):n.push(t),n},Qn=function(e,t,n,r){var A=[];return Cn(e)?A.push(e.subdivide(.5,!1)):A.push(e),Cn(n)?A.push(n.subdivide(.5,!0)):A.push(n),Cn(r)?A.push(r.subdivide(.5,!0).reverse()):A.push(r),Cn(t)?A.push(t.subdivide(.5,!1).reverse()):A.push(t),A},wx=function(e){var t=e.bounds,n=e.styles;return t.add(n.borderLeftWidth,n.borderTopWidth,-(n.borderRightWidth+n.borderLeftWidth),-(n.borderTopWidth+n.borderBottomWidth))},Cl=function(e){var t=e.styles,n=e.bounds,r=_e(t.paddingLeft,n.width),A=_e(t.paddingRight,n.width),o=_e(t.paddingTop,n.width),i=_e(t.paddingBottom,n.width);return n.add(r+t.borderLeftWidth,o+t.borderTopWidth,-(t.borderRightWidth+t.borderLeftWidth+r+A),-(t.borderTopWidth+t.borderBottomWidth+o+i))},UN=function(e,t){return e===0?t.bounds:e===2?Cl(t):wx(t)},IN=function(e,t){return e===0?t.bounds:e===2?Cl(t):wx(t)},Hf=function(e,t,n){var r=UN(So(e.styles.backgroundOrigin,t),e),A=IN(So(e.styles.backgroundClip,t),e),o=SN(So(e.styles.backgroundSize,t),n,r),i=o[0],a=o[1],s=Xi(So(e.styles.backgroundPosition,t),r.width-i,r.height-a),u=_N(So(e.styles.backgroundRepeat,t),s,o,r,A),l=Math.round(r.left+s[0]),c=Math.round(r.top+s[1]);return[u,l,c,i,a]},Fo=function(e){return Se(e)&&e.value===Ai.AUTO},nu=function(e){return typeof e=="number"},SN=function(e,t,n){var r=t[0],A=t[1],o=t[2],i=e[0],a=e[1];if(!i)return[0,0];if(tt(i)&&a&&tt(a))return[_e(i,n.width),_e(a,n.height)];var s=nu(o);if(Se(i)&&(i.value===Ai.CONTAIN||i.value===Ai.COVER)){if(nu(o)){var u=n.width/n.height;return u<o!=(i.value===Ai.COVER)?[n.width,n.width/o]:[n.height*o,n.height]}return[n.width,n.height]}var l=nu(r),c=nu(A),f=l||c;if(Fo(i)&&(!a||Fo(a))){if(l&&c)return[r,A];if(!s&&!f)return[n.width,n.height];if(f&&s){var h=l?r:A*o,d=c?A:r/o;return[h,d]}var g=l?r:n.width,m=c?A:n.height;return[g,m]}if(s){var p=0,v=0;return tt(i)?p=_e(i,n.width):tt(a)&&(v=_e(a,n.height)),Fo(i)?p=v*o:(!a||Fo(a))&&(v=p/o),[p,v]}var w=null,B=null;if(tt(i)?w=_e(i,n.width):a&&tt(a)&&(B=_e(a,n.height)),w!==null&&(!a||Fo(a))&&(B=l&&c?w/r*A:n.height),B!==null&&Fo(i)&&(w=l&&c?B/A*r:n.width),w!==null&&B!==null)return[w,B];throw new Error("Unable to calculate background-size for element")},So=function(e,t){var n=e[t];return typeof n>"u"?e[0]:n},_N=function(e,t,n,r,A){var o=t[0],i=t[1],a=n[0],s=n[1];switch(e){case 2:return[new j(Math.round(r.left),Math.round(r.top+i)),new j(Math.round(r.left+r.width),Math.round(r.top+i)),new j(Math.round(r.left+r.width),Math.round(s+r.top+i)),new j(Math.round(r.left),Math.round(s+r.top+i))];case 3:return[new j(Math.round(r.left+o),Math.round(r.top)),new j(Math.round(r.left+o+a),Math.round(r.top)),new j(Math.round(r.left+o+a),Math.round(r.height+r.top)),new j(Math.round(r.left+o),Math.round(r.height+r.top))];case 1:return[new j(Math.round(r.left+o),Math.round(r.top+i)),new j(Math.round(r.left+o+a),Math.round(r.top+i)),new j(Math.round(r.left+o+a),Math.round(r.top+i+s)),new j(Math.round(r.left+o),Math.round(r.top+i+s))];default:return[new j(Math.round(A.left),Math.round(A.top)),new j(Math.round(A.left+A.width),Math.round(A.top)),new j(Math.round(A.left+A.width),Math.round(A.height+A.top)),new j(Math.round(A.left),Math.round(A.height+A.top))]}},kN="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",Hw="Hidden Text",DN=function(){function e(t){this._data={},this._document=t}return e.prototype.parseMetrics=function(t,n){var r=this._document.createElement("div"),A=this._document.createElement("img"),o=this._document.createElement("span"),i=this._document.body;r.style.visibility="hidden",r.style.fontFamily=t,r.style.fontSize=n,r.style.margin="0",r.style.padding="0",r.style.whiteSpace="nowrap",i.appendChild(r),A.src=kN,A.width=1,A.height=1,A.style.margin="0",A.style.padding="0",A.style.verticalAlign="baseline",o.style.fontFamily=t,o.style.fontSize=n,o.style.margin="0",o.style.padding="0",o.appendChild(this._document.createTextNode(Hw)),r.appendChild(o),r.appendChild(A);var a=A.offsetTop-o.offsetTop+2;r.removeChild(o),r.appendChild(this._document.createTextNode(Hw)),r.style.lineHeight="normal",A.style.verticalAlign="super";var s=A.offsetTop-r.offsetTop+2;return i.removeChild(r),{baseline:a,middle:s}},e.prototype.getMetrics=function(t,n){var r=t+" "+n;return typeof this._data[r]>"u"&&(this._data[r]=this.parseMetrics(t,n)),this._data[r]},e}(),Bx=function(){function e(t,n){this.context=t,this.options=n}return e}(),RN=1e4,TN=function(e){Gn(t,e);function t(n,r){var A=e.call(this,n,r)||this;return A._activeEffects=[],A.canvas=r.canvas?r.canvas:document.createElement("canvas"),A.ctx=A.canvas.getContext("2d"),r.canvas||(A.canvas.width=Math.floor(r.width*r.scale),A.canvas.height=Math.floor(r.height*r.scale),A.canvas.style.width=r.width+"px",A.canvas.style.height=r.height+"px"),A.fontMetrics=new DN(document),A.ctx.scale(A.options.scale,A.options.scale),A.ctx.translate(-r.x,-r.y),A.ctx.textBaseline="bottom",A._activeEffects=[],A.context.logger.debug("Canvas renderer initialized ("+r.width+"x"+r.height+") with scale "+r.scale),A}return t.prototype.applyEffects=function(n){for(var r=this;this._activeEffects.length;)this.popEffect();n.forEach(function(A){return r.applyEffect(A)})},t.prototype.applyEffect=function(n){this.ctx.save(),CN(n)&&(this.ctx.globalAlpha=n.opacity),yN(n)&&(this.ctx.translate(n.offsetX,n.offsetY),this.ctx.transform(n.matrix[0],n.matrix[1],n.matrix[2],n.matrix[3],n.matrix[4],n.matrix[5]),this.ctx.translate(-n.offsetX,-n.offsetY)),px(n)&&(this.path(n.path),this.ctx.clip()),this._activeEffects.push(n)},t.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},t.prototype.renderStack=function(n){return Mt(this,void 0,void 0,function(){var r;return It(this,function(A){switch(A.label){case 0:return r=n.element.container.styles,r.isVisible()?[4,this.renderStackContent(n)]:[3,2];case 1:A.sent(),A.label=2;case 2:return[2]}})})},t.prototype.renderNode=function(n){return Mt(this,void 0,void 0,function(){return It(this,function(r){switch(r.label){case 0:if(it(n.container.flags,16))debugger;return n.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(n)]:[3,3];case 1:return r.sent(),[4,this.renderNodeContent(n)];case 2:r.sent(),r.label=3;case 3:return[2]}})})},t.prototype.renderTextWithLetterSpacing=function(n,r,A){var o=this;if(r===0)this.ctx.fillText(n.text,n.bounds.left,n.bounds.top+A);else{var i=bg(n.text);i.reduce(function(a,s){return o.ctx.fillText(s,a,n.bounds.top+A),a+o.ctx.measureText(s).width},n.bounds.left)}},t.prototype.createFontStyle=function(n){var r=n.fontVariant.filter(function(i){return i==="normal"||i==="small-caps"}).join(""),A=ON(n.fontFamily).join(", "),o=ns(n.fontSize)?""+n.fontSize.number+n.fontSize.unit:n.fontSize.number+"px";return[[n.fontStyle,r,n.fontWeight,o,A].join(" "),A,o]},t.prototype.renderTextNode=function(n,r){return Mt(this,void 0,void 0,function(){var A,o,i,a,s,u,l,c,f=this;return It(this,function(h){return A=this.createFontStyle(r),o=A[0],i=A[1],a=A[2],this.ctx.font=o,this.ctx.direction=r.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",s=this.fontMetrics.getMetrics(i,a),u=s.baseline,l=s.middle,c=r.paintOrder,n.textBounds.forEach(function(d){c.forEach(function(g){switch(g){case 0:f.ctx.fillStyle=ht(r.color),f.renderTextWithLetterSpacing(d,r.letterSpacing,u);var m=r.textShadow;m.length&&d.text.trim().length&&(m.slice(0).reverse().forEach(function(p){f.ctx.shadowColor=ht(p.color),f.ctx.shadowOffsetX=p.offsetX.number*f.options.scale,f.ctx.shadowOffsetY=p.offsetY.number*f.options.scale,f.ctx.shadowBlur=p.blur.number,f.renderTextWithLetterSpacing(d,r.letterSpacing,u)}),f.ctx.shadowColor="",f.ctx.shadowOffsetX=0,f.ctx.shadowOffsetY=0,f.ctx.shadowBlur=0),r.textDecorationLine.length&&(f.ctx.fillStyle=ht(r.textDecorationColor||r.color),r.textDecorationLine.forEach(function(p){switch(p){case 1:f.ctx.fillRect(d.bounds.left,Math.round(d.bounds.top+u),d.bounds.width,1);break;case 2:f.ctx.fillRect(d.bounds.left,Math.round(d.bounds.top),d.bounds.width,1);break;case 3:f.ctx.fillRect(d.bounds.left,Math.ceil(d.bounds.top+l),d.bounds.width,1);break}}));break;case 1:r.webkitTextStrokeWidth&&d.text.trim().length&&(f.ctx.strokeStyle=ht(r.webkitTextStrokeColor),f.ctx.lineWidth=r.webkitTextStrokeWidth,f.ctx.lineJoin=window.chrome?"miter":"round",f.ctx.strokeText(d.text,d.bounds.left,d.bounds.top+u)),f.ctx.strokeStyle="",f.ctx.lineWidth=0,f.ctx.lineJoin="miter";break}})}),[2]})})},t.prototype.renderReplacedElement=function(n,r,A){if(A&&n.intrinsicWidth>0&&n.intrinsicHeight>0){var o=Cl(n),i=yl(r);this.path(i),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(A,0,0,n.intrinsicWidth,n.intrinsicHeight,o.left,o.top,o.width,o.height),this.ctx.restore()}},t.prototype.renderNodeContent=function(n){return Mt(this,void 0,void 0,function(){var r,A,o,i,a,s,v,v,u,l,c,f,B,h,d,y,g,m,p,v,w,B,y;return It(this,function(C){switch(C.label){case 0:this.applyEffects(n.getEffects(4)),r=n.container,A=n.curves,o=r.styles,i=0,a=r.textNodes,C.label=1;case 1:return i<a.length?(s=a[i],[4,this.renderTextNode(s,o)]):[3,4];case 2:C.sent(),C.label=3;case 3:return i++,[3,1];case 4:if(!(r instanceof J1))return[3,8];C.label=5;case 5:return C.trys.push([5,7,,8]),[4,this.context.cache.match(r.src)];case 6:return v=C.sent(),this.renderReplacedElement(r,A,v),[3,8];case 7:return C.sent(),this.context.logger.error("Error loading image "+r.src),[3,8];case 8:if(r instanceof Z1&&this.renderReplacedElement(r,A,r.canvas),!(r instanceof ex))return[3,12];C.label=9;case 9:return C.trys.push([9,11,,12]),[4,this.context.cache.match(r.svg)];case 10:return v=C.sent(),this.renderReplacedElement(r,A,v),[3,12];case 11:return C.sent(),this.context.logger.error("Error loading svg "+r.svg.substring(0,255)),[3,12];case 12:return r instanceof Ax&&r.tree?(u=new t(this.context,{scale:this.options.scale,backgroundColor:r.backgroundColor,x:0,y:0,width:r.width,height:r.height}),[4,u.render(r.tree)]):[3,14];case 13:l=C.sent(),r.width&&r.height&&this.ctx.drawImage(l,0,0,r.width,r.height,r.bounds.left,r.bounds.top,r.bounds.width,r.bounds.height),C.label=14;case 14:if(r instanceof Eg&&(c=Math.min(r.bounds.width,r.bounds.height),r.type===gl?r.checked&&(this.ctx.save(),this.path([new j(r.bounds.left+c*.39363,r.bounds.top+c*.79),new j(r.bounds.left+c*.16,r.bounds.top+c*.5549),new j(r.bounds.left+c*.27347,r.bounds.top+c*.44071),new j(r.bounds.left+c*.39694,r.bounds.top+c*.5649),new j(r.bounds.left+c*.72983,r.bounds.top+c*.23),new j(r.bounds.left+c*.84,r.bounds.top+c*.34085),new j(r.bounds.left+c*.39363,r.bounds.top+c*.79)]),this.ctx.fillStyle=ht(xw),this.ctx.fill(),this.ctx.restore()):r.type===vl&&r.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(r.bounds.left+c/2,r.bounds.top+c/2,c/4,0,Math.PI*2,!0),this.ctx.fillStyle=ht(xw),this.ctx.fill(),this.ctx.restore())),HN(r)&&r.value.length){switch(f=this.createFontStyle(o),B=f[0],h=f[1],d=this.fontMetrics.getMetrics(B,h).baseline,this.ctx.font=B,this.ctx.fillStyle=ht(o.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=LN(r.styles.textAlign),y=Cl(r),g=0,r.styles.textAlign){case 1:g+=y.width/2;break;case 2:g+=y.width;break}m=y.add(g,0,0,-y.height/2+1),this.ctx.save(),this.path([new j(y.left,y.top),new j(y.left+y.width,y.top),new j(y.left+y.width,y.top+y.height),new j(y.left,y.top+y.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new ca(r.value,m),o.letterSpacing,d),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!it(r.styles.display,2048))return[3,20];if(r.styles.listStyleImage===null)return[3,19];if(p=r.styles.listStyleImage,p.type!==0)return[3,18];v=void 0,w=p.url,C.label=15;case 15:return C.trys.push([15,17,,18]),[4,this.context.cache.match(w)];case 16:return v=C.sent(),this.ctx.drawImage(v,r.bounds.left-(v.width+10),r.bounds.top),[3,18];case 17:return C.sent(),this.context.logger.error("Error loading list-style-image "+w),[3,18];case 18:return[3,20];case 19:n.listValue&&r.styles.listStyleType!==-1&&(B=this.createFontStyle(o)[0],this.ctx.font=B,this.ctx.fillStyle=ht(o.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",y=new Tr(r.bounds.left,r.bounds.top+_e(r.styles.paddingTop,r.bounds.width),r.bounds.width,iw(o.lineHeight,o.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new ca(n.listValue,y),o.letterSpacing,iw(o.lineHeight,o.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),C.label=20;case 20:return[2]}})})},t.prototype.renderStackContent=function(n){return Mt(this,void 0,void 0,function(){var r,A,p,o,i,p,a,s,p,u,l,p,c,f,p,h,d,p,g,m,p;return It(this,function(v){switch(v.label){case 0:if(it(n.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(n.element)];case 1:v.sent(),r=0,A=n.negativeZIndex,v.label=2;case 2:return r<A.length?(p=A[r],[4,this.renderStack(p)]):[3,5];case 3:v.sent(),v.label=4;case 4:return r++,[3,2];case 5:return[4,this.renderNodeContent(n.element)];case 6:v.sent(),o=0,i=n.nonInlineLevel,v.label=7;case 7:return o<i.length?(p=i[o],[4,this.renderNode(p)]):[3,10];case 8:v.sent(),v.label=9;case 9:return o++,[3,7];case 10:a=0,s=n.nonPositionedFloats,v.label=11;case 11:return a<s.length?(p=s[a],[4,this.renderStack(p)]):[3,14];case 12:v.sent(),v.label=13;case 13:return a++,[3,11];case 14:u=0,l=n.nonPositionedInlineLevel,v.label=15;case 15:return u<l.length?(p=l[u],[4,this.renderStack(p)]):[3,18];case 16:v.sent(),v.label=17;case 17:return u++,[3,15];case 18:c=0,f=n.inlineLevel,v.label=19;case 19:return c<f.length?(p=f[c],[4,this.renderNode(p)]):[3,22];case 20:v.sent(),v.label=21;case 21:return c++,[3,19];case 22:h=0,d=n.zeroOrAutoZIndexOrTransformedOrOpacity,v.label=23;case 23:return h<d.length?(p=d[h],[4,this.renderStack(p)]):[3,26];case 24:v.sent(),v.label=25;case 25:return h++,[3,23];case 26:g=0,m=n.positiveZIndex,v.label=27;case 27:return g<m.length?(p=m[g],[4,this.renderStack(p)]):[3,30];case 28:v.sent(),v.label=29;case 29:return g++,[3,27];case 30:return[2]}})})},t.prototype.mask=function(n){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(n.slice(0).reverse()),this.ctx.closePath()},t.prototype.path=function(n){this.ctx.beginPath(),this.formatPath(n),this.ctx.closePath()},t.prototype.formatPath=function(n){var r=this;n.forEach(function(A,o){var i=Cn(A)?A.start:A;o===0?r.ctx.moveTo(i.x,i.y):r.ctx.lineTo(i.x,i.y),Cn(A)&&r.ctx.bezierCurveTo(A.startControl.x,A.startControl.y,A.endControl.x,A.endControl.y,A.end.x,A.end.y)})},t.prototype.renderRepeat=function(n,r,A,o){this.path(n),this.ctx.fillStyle=r,this.ctx.translate(A,o),this.ctx.fill(),this.ctx.translate(-A,-o)},t.prototype.resizeImage=function(n,r,A){var o;if(n.width===r&&n.height===A)return n;var i=(o=this.canvas.ownerDocument)!==null&&o!==void 0?o:document,a=i.createElement("canvas");a.width=Math.max(1,r),a.height=Math.max(1,A);var s=a.getContext("2d");return s.drawImage(n,0,0,n.width,n.height,0,0,r,A),a},t.prototype.renderBackgroundImage=function(n){return Mt(this,void 0,void 0,function(){var r,A,o,i,a,s;return It(this,function(u){switch(u.label){case 0:r=n.styles.backgroundImage.length-1,A=function(l){var c,f,h,E,K,P,T,N,x,d,E,K,P,T,N,g,m,p,v,w,B,y,C,b,x,F,E,I,S,T,N,O,K,P,D,R,L,G,X,q,ie,ae;return It(this,function(se){switch(se.label){case 0:if(l.type!==0)return[3,5];c=void 0,f=l.url,se.label=1;case 1:return se.trys.push([1,3,,4]),[4,o.context.cache.match(f)];case 2:return c=se.sent(),[3,4];case 3:return se.sent(),o.context.logger.error("Error loading background-image "+f),[3,4];case 4:return c&&(h=Hf(n,r,[c.width,c.height,c.width/c.height]),E=h[0],K=h[1],P=h[2],T=h[3],N=h[4],x=o.ctx.createPattern(o.resizeImage(c,T,N),"repeat"),o.renderRepeat(E,x,K,P)),[3,6];case 5:yR(l)?(d=Hf(n,r,[null,null,null]),E=d[0],K=d[1],P=d[2],T=d[3],N=d[4],g=gR(l.angle,T,N),m=g[0],p=g[1],v=g[2],w=g[3],B=g[4],y=document.createElement("canvas"),y.width=T,y.height=N,C=y.getContext("2d"),b=C.createLinearGradient(p,w,v,B),Aw(l.stops,m).forEach(function(le){return b.addColorStop(le.stop,ht(le.color))}),C.fillStyle=b,C.fillRect(0,0,T,N),T>0&&N>0&&(x=o.ctx.createPattern(y,"repeat"),o.renderRepeat(E,x,K,P))):CR(l)&&(F=Hf(n,r,[null,null,null]),E=F[0],I=F[1],S=F[2],T=F[3],N=F[4],O=l.position.length===0?[Cg]:l.position,K=_e(O[0],T),P=_e(O[O.length-1],N),D=vR(l,K,P,T,N),R=D[0],L=D[1],R>0&&L>0&&(G=o.ctx.createRadialGradient(I+K,S+P,0,I+K,S+P,R),Aw(l.stops,R*2).forEach(function(le){return G.addColorStop(le.stop,ht(le.color))}),o.path(E),o.ctx.fillStyle=G,R!==L?(X=n.bounds.left+.5*n.bounds.width,q=n.bounds.top+.5*n.bounds.height,ie=L/R,ae=1/ie,o.ctx.save(),o.ctx.translate(X,q),o.ctx.transform(1,0,0,ie,0,0),o.ctx.translate(-X,-q),o.ctx.fillRect(I,ae*(S-q)+q,T,N*ae),o.ctx.restore()):o.ctx.fill())),se.label=6;case 6:return r--,[2]}})},o=this,i=0,a=n.styles.backgroundImage.slice(0).reverse(),u.label=1;case 1:return i<a.length?(s=a[i],[5,A(s)]):[3,4];case 2:u.sent(),u.label=3;case 3:return i++,[3,1];case 4:return[2]}})})},t.prototype.renderSolidBorder=function(n,r,A){return Mt(this,void 0,void 0,function(){return It(this,function(o){return this.path(Tw(A,r)),this.ctx.fillStyle=ht(n),this.ctx.fill(),[2]})})},t.prototype.renderDoubleBorder=function(n,r,A,o){return Mt(this,void 0,void 0,function(){var i,a;return It(this,function(s){switch(s.label){case 0:return r<3?[4,this.renderSolidBorder(n,A,o)]:[3,2];case 1:return s.sent(),[2];case 2:return i=bN(o,A),this.path(i),this.ctx.fillStyle=ht(n),this.ctx.fill(),a=EN(o,A),this.path(a),this.ctx.fill(),[2]}})})},t.prototype.renderNodeBackgroundAndBorders=function(n){return Mt(this,void 0,void 0,function(){var r,A,o,i,a,s,u,l,c=this;return It(this,function(f){switch(f.label){case 0:return this.applyEffects(n.getEffects(2)),r=n.container.styles,A=!wA(r.backgroundColor)||r.backgroundImage.length,o=[{style:r.borderTopStyle,color:r.borderTopColor,width:r.borderTopWidth},{style:r.borderRightStyle,color:r.borderRightColor,width:r.borderRightWidth},{style:r.borderBottomStyle,color:r.borderBottomColor,width:r.borderBottomWidth},{style:r.borderLeftStyle,color:r.borderLeftColor,width:r.borderLeftWidth}],i=NN(So(r.backgroundClip,0),n.curves),A||r.boxShadow.length?(this.ctx.save(),this.path(i),this.ctx.clip(),wA(r.backgroundColor)||(this.ctx.fillStyle=ht(r.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(n.container)]):[3,2];case 1:f.sent(),this.ctx.restore(),r.boxShadow.slice(0).reverse().forEach(function(h){c.ctx.save();var d=Bl(n.curves),g=h.inset?0:RN,m=xN(d,-g+(h.inset?1:-1)*h.spread.number,(h.inset?1:-1)*h.spread.number,h.spread.number*(h.inset?-2:2),h.spread.number*(h.inset?-2:2));h.inset?(c.path(d),c.ctx.clip(),c.mask(m)):(c.mask(d),c.ctx.clip(),c.path(m)),c.ctx.shadowOffsetX=h.offsetX.number+g,c.ctx.shadowOffsetY=h.offsetY.number,c.ctx.shadowColor=ht(h.color),c.ctx.shadowBlur=h.blur.number,c.ctx.fillStyle=h.inset?ht(h.color):"rgba(0,0,0,1)",c.ctx.fill(),c.ctx.restore()}),f.label=2;case 2:a=0,s=0,u=o,f.label=3;case 3:return s<u.length?(l=u[s],l.style!==0&&!wA(l.color)&&l.width>0?l.style!==2?[3,5]:[4,this.renderDashedDottedBorder(l.color,l.width,a,n.curves,2)]:[3,11]):[3,13];case 4:return f.sent(),[3,11];case 5:return l.style!==3?[3,7]:[4,this.renderDashedDottedBorder(l.color,l.width,a,n.curves,3)];case 6:return f.sent(),[3,11];case 7:return l.style!==4?[3,9]:[4,this.renderDoubleBorder(l.color,l.width,a,n.curves)];case 8:return f.sent(),[3,11];case 9:return[4,this.renderSolidBorder(l.color,a,n.curves)];case 10:f.sent(),f.label=11;case 11:a++,f.label=12;case 12:return s++,[3,3];case 13:return[2]}})})},t.prototype.renderDashedDottedBorder=function(n,r,A,o,i){return Mt(this,void 0,void 0,function(){var a,s,u,l,c,f,h,d,g,m,p,v,w,B,y,C,y,C;return It(this,function(b){return this.ctx.save(),a=QN(o,A),s=Tw(o,A),i===2&&(this.path(s),this.ctx.clip()),Cn(s[0])?(u=s[0].start.x,l=s[0].start.y):(u=s[0].x,l=s[0].y),Cn(s[1])?(c=s[1].end.x,f=s[1].end.y):(c=s[1].x,f=s[1].y),A===0||A===2?h=Math.abs(u-c):h=Math.abs(l-f),this.ctx.beginPath(),i===3?this.formatPath(a):this.formatPath(s.slice(0,2)),d=r<3?r*3:r*2,g=r<3?r*2:r,i===3&&(d=r,g=r),m=!0,h<=d*2?m=!1:h<=d*2+g?(p=h/(2*d+g),d*=p,g*=p):(v=Math.floor((h+g)/(d+g)),w=(h-v*d)/(v-1),B=(h-(v+1)*d)/v,g=B<=0||Math.abs(g-w)<Math.abs(g-B)?w:B),m&&(i===3?this.ctx.setLineDash([0,d+g]):this.ctx.setLineDash([d,g])),i===3?(this.ctx.lineCap="round",this.ctx.lineWidth=r):this.ctx.lineWidth=r*2+1.1,this.ctx.strokeStyle=ht(n),this.ctx.stroke(),this.ctx.setLineDash([]),i===2&&(Cn(s[0])&&(y=s[3],C=s[0],this.ctx.beginPath(),this.formatPath([new j(y.end.x,y.end.y),new j(C.start.x,C.start.y)]),this.ctx.stroke()),Cn(s[1])&&(y=s[1],C=s[2],this.ctx.beginPath(),this.formatPath([new j(y.end.x,y.end.y),new j(C.start.x,C.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},t.prototype.render=function(n){return Mt(this,void 0,void 0,function(){var r;return It(this,function(A){switch(A.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=ht(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),r=FN(n),[4,this.renderStack(r)];case 1:return A.sent(),this.applyEffects([]),[2,this.canvas]}})})},t}(Bx),HN=function(e){return e instanceof rx||e instanceof nx?!0:e instanceof Eg&&e.type!==vl&&e.type!==gl},NN=function(e,t){switch(e){case 0:return Bl(t);case 2:return mN(t);case 1:default:return yl(t)}},LN=function(e){switch(e){case 1:return"center";case 2:return"right";case 0:default:return"left"}},MN=["-apple-system","system-ui"],ON=function(e){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?e.filter(function(t){return MN.indexOf(t)===-1}):e},PN=function(e){Gn(t,e);function t(n,r){var A=e.call(this,n,r)||this;return A.canvas=r.canvas?r.canvas:document.createElement("canvas"),A.ctx=A.canvas.getContext("2d"),A.options=r,A.canvas.width=Math.floor(r.width*r.scale),A.canvas.height=Math.floor(r.height*r.scale),A.canvas.style.width=r.width+"px",A.canvas.style.height=r.height+"px",A.ctx.scale(A.options.scale,A.options.scale),A.ctx.translate(-r.x,-r.y),A.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+r.width+"x"+r.height+" at "+r.x+","+r.y+") with scale "+r.scale),A}return t.prototype.render=function(n){return Mt(this,void 0,void 0,function(){var r,A;return It(this,function(o){switch(o.label){case 0:return r=vd(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,n),[4,KN(r)];case 1:return A=o.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=ht(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(A,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},t}(Bx),KN=function(e){return new Promise(function(t,n){var r=new Image;r.onload=function(){t(r)},r.onerror=n,r.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(e))})},VN=function(){function e(t){var n=t.id,r=t.enabled;this.id=n,this.enabled=r,this.start=Date.now()}return e.prototype.debug=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,Rs([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},e.prototype.getTime=function(){return Date.now()-this.start},e.prototype.info=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,Rs([this.id,this.getTime()+"ms"],t))},e.prototype.warn=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,Rs([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},e.prototype.error=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,Rs([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},e.instances={},e}(),WN=function(){function e(t,n){var r;this.windowBounds=n,this.instanceName="#"+e.instanceCount++,this.logger=new VN({id:this.instanceName,enabled:t.logging}),this.cache=(r=t.cache)!==null&&r!==void 0?r:new lN(this,t)}return e.instanceCount=1,e}(),Nf=function(e,t){return t===void 0&&(t={}),GN(e,t)};typeof window<"u"&&dx.setContext(window);var GN=function(e,t){return Mt(void 0,void 0,void 0,function(){var n,r,A,o,i,a,s,u,l,c,f,h,d,g,m,p,v,w,B,y,b,C,b,x,F,E,I,S,T,N,O,K,P,D,R,L,G,X,q,ie;return It(this,function(ae){switch(ae.label){case 0:if(!e||typeof e!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(n=e.ownerDocument,!n)throw new Error("Element is not attached to a Document");if(r=n.defaultView,!r)throw new Error("Document is not attached to a Window");return A={allowTaint:(x=t.allowTaint)!==null&&x!==void 0?x:!1,imageTimeout:(F=t.imageTimeout)!==null&&F!==void 0?F:15e3,proxy:t.proxy,useCORS:(E=t.useCORS)!==null&&E!==void 0?E:!1},o=nd({logging:(I=t.logging)!==null&&I!==void 0?I:!0,cache:t.cache},A),i={windowWidth:(S=t.windowWidth)!==null&&S!==void 0?S:r.innerWidth,windowHeight:(T=t.windowHeight)!==null&&T!==void 0?T:r.innerHeight,scrollX:(N=t.scrollX)!==null&&N!==void 0?N:r.pageXOffset,scrollY:(O=t.scrollY)!==null&&O!==void 0?O:r.pageYOffset},a=new Tr(i.scrollX,i.scrollY,i.windowWidth,i.windowHeight),s=new WN(o,a),u=(K=t.foreignObjectRendering)!==null&&K!==void 0?K:!1,l={allowTaint:(P=t.allowTaint)!==null&&P!==void 0?P:!1,onclone:t.onclone,ignoreElements:t.ignoreElements,inlineImages:u,copyStyles:u},s.logger.debug("Starting document clone with size "+a.width+"x"+a.height+" scrolled to "+-a.left+","+-a.top),c=new kw(s,e,l),f=c.clonedReferenceElement,f?[4,c.toIFrame(n,a)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return h=ae.sent(),d=Qg(f)||XH(f)?xk(f.ownerDocument):tc(s,f),g=d.width,m=d.height,p=d.left,v=d.top,w=zN(s,f,t.backgroundColor),B={canvas:t.canvas,backgroundColor:w,scale:(R=(D=t.scale)!==null&&D!==void 0?D:r.devicePixelRatio)!==null&&R!==void 0?R:1,x:((L=t.x)!==null&&L!==void 0?L:0)+p,y:((G=t.y)!==null&&G!==void 0?G:0)+v,width:(X=t.width)!==null&&X!==void 0?X:Math.ceil(g),height:(q=t.height)!==null&&q!==void 0?q:Math.ceil(m)},u?(s.logger.debug("Document cloned, using foreign object rendering"),b=new PN(s,B),[4,b.render(f)]):[3,3];case 2:return y=ae.sent(),[3,5];case 3:return s.logger.debug("Document cloned, element located at "+p+","+v+" with size "+g+"x"+m+" using computed rendering"),s.logger.debug("Starting DOM parsing"),C=ix(s,f),w===C.styles.backgroundColor&&(C.styles.backgroundColor=Sr.TRANSPARENT),s.logger.debug("Starting renderer for element at "+B.x+","+B.y+" with size "+B.width+"x"+B.height),b=new TN(s,B),[4,b.render(C)];case 4:y=ae.sent(),ae.label=5;case 5:return(!((ie=t.removeContainer)!==null&&ie!==void 0)||ie)&&(kw.destroy(h)||s.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),s.logger.debug("Finished rendering"),[2,y]}})})},zN=function(e,t,n){var r=t.ownerDocument,A=r.documentElement?ua(e,getComputedStyle(r.documentElement).backgroundColor):Sr.TRANSPARENT,o=r.body?ua(e,getComputedStyle(r.body).backgroundColor):Sr.TRANSPARENT,i=typeof n=="string"?ua(e,n):n===null?Sr.TRANSPARENT:4294967295;return t===r.documentElement?wA(A)?wA(o)?i:o:A:i};const XN=new Set,$N=new Set,jN={happy:new Set,sad:new Set,angry:new Set,fearful:new Set,disgusted:new Set,surprised:new Set,neutral:new Set},Lf=(e,t)=>{e.size>=t&&e.clear();let n=Math.floor(Math.random()*t);for(;e.has(n);)n=Math.floor(Math.random()*t);return e.add(n),n},YN=e=>e==="male"?{subject:"He",object:"him",possessive:"his"}:{subject:"She",object:"her",possessive:"her"},qN=()=>{const e=new Date,t=e.getMonth(),n=e.getDate(),r=e.getFullYear();if(t===11&&n>=20&&n<=26)return"Wishing you a joyful Christmas season!";if(t===11&&n>=27||t===0&&n<=3)return`Happy New Year ${r+(t===11?1:0)}!`;if((t===2||t===3)&&n>=20&&n<=25)return"Happy Easter!";if(t===1&&n===14)return"Happy Valentine's Day!";if(t===5){const A=new Date(r,5,1);let o=0;for(let i=1;i<=30;i++)if(A.setDate(i),A.getDay()===0&&o++,o===3){if(n===i)return"Happy Father's Day!";break}}if(t===4){const A=new Date(r,4,1);let o=0;for(let i=1;i<=31;i++)if(A.setDate(i),A.getDay()===0&&o++,o===2){if(n===i)return"Happy Mother's Day!";break}}return t===9&&n===31?"Happy Halloween!":t===6&&n===4?"Happy Independence Day!":""},Nw=["creative dreamers","loyal companions","adventurous spirits","deep thinkers","free souls","optimists","quiet listeners","bold leaders","gentle healers","curious minds","fun seekers","old souls","visionaries","mischief makers","book lovers","music fans","nature lovers","foodies","sports fans","artists","inventors","storytellers","explorers","philosophers","jokers","romantics","builders","helpers","trendsetters","peacekeepers","dancers","singers","travelers","animal lovers","gardeners","movie buffs","techies","gamers","collectors","fashionistas","chefs","poets","writers","painters","sculptors","photographers","bloggers","vloggers","yogis","meditators","runners","cyclists","swimmers","climbers","campers","fishermen","skaters","surfers","skiers","snowboarders","pilots","sailors","astronomers","historians","scientists","engineers","mathematicians","doctors","nurses","therapists","counselors","teachers","professors","students","mentors","coaches","trainers","volunteers","activists","organizers","planners","hosts","guests","neighbors","colleagues","bosses","employees","entrepreneurs","investors","designers","developers","producers","directors","actors","comedians","magicians","illusionists","cartoonists","animators","editors","publishers","critics","reviewers","curators","guides"],Lw=["gardening","movies","hiking","jazz music","baking","painting","reading","writing","dancing","singing","traveling","photography","cycling","swimming","yoga","meditation","cooking","fishing","camping","surfing","skiing","snowboarding","climbing","running","skating","sailing","birdwatching","collecting stamps","collecting coins","playing chess","playing cards","solving puzzles","playing video games","watching documentaries","attending concerts","going to museums","visiting art galleries","exploring new cities","trying new foods","learning languages","volunteering","helping others","organizing events","hosting parties","decorating","fashion","shopping","blogging","vlogging","podcasting","making crafts","knitting","sewing","woodworking","pottery","sculpting","drawing","cartooning","comedy","magic tricks","theater","acting","directing","producing","editing","publishing","reviewing","critiquing","curating","guiding tours","mentoring","coaching","training","teaching","studying","researching","inventing","designing","developing","engineering","building","fixing things","restoring antiques","antique shopping","thrifting","gardening","landscaping","interior design","architecture","astronomy","astrology","history","science","math","philosophy","psychology","sociology","politics","economics","business","investing"],Mw=["rebel","fighter","visionary","maverick","dreamer","thinker","joker","romantic","leader","helper","builder","explorer","philosopher","artist","musician","poet","writer","inventor","organizer","planner","host","guest","neighbor","colleague","boss","employee","entrepreneur","investor","designer","developer","producer","director","actor","comedian","magician","illusionist","cartoonist","animator","editor","publisher","critic","reviewer","curator","guide","mentor","coach","trainer","volunteer","activist","organizer","peacekeeper","trendsetter","fashionista","chef","foodie","gardener","movie buff","book lover","music fan","nature lover","sports fan","animal lover","traveler","yogi","meditator","runner","cyclist","swimmer","climber","camper","fisherman","skater","surfer","skier","snowboarder","pilot","sailor","astronomer","historian","scientist","engineer","mathematician","doctor","nurse","therapist","counselor","teacher","professor","student","planner","organizer","host","guest","neighbor","colleague","boss","employee"],Ow=["stormy day","blue moon","sunny morning","misty dawn","rainy afternoon","starry night","windy evening","crisp autumn day","snowy night","foggy morning","golden sunset","chilly winter day","breezy spring morning","hot summer afternoon","cool fall evening","frosty night","thunderous day","peaceful dawn","colorful sunrise","quiet dusk","sparkling twilight","rainbow day","eclipse night","harvest moon","solstice morning","equinox evening","meteor shower night","aurora-lit night","sun-drenched day","moonlit evening","cloudless sky","drizzly afternoon","hazy morning","humid day","icy night","balmy evening","sun-kissed morning","dew-covered dawn","blooming spring day","leafy autumn afternoon","festive holiday","firework night","gentle breeze day","stormy sunset","sunrise after rain","first snow day","last leaf fall","crisp new year","midnight hour","early morning light","late summer night","harvest festival","spring equinox","summer solstice","autumn equinox","winter solstice","full moon","new moon","waning crescent","waxing gibbous","supermoon","blood moon","lunar eclipse","solar eclipse","shooting star night","comet sighting","starlit sky","cloudburst day","gentle rain","sunbeam morning","frosty window day","warm hearth night","picnic day","beach day","mountain morning","valley dusk","riverbank afternoon","forest walk day","desert sunrise","ocean breeze evening","city lights night","country road morning","island sunset","harbor dawn","garden bloom day","orchard harvest","vineyard dusk","meadow morning","prairie wind day","canyon echo night","lake reflection evening","hilltop sunrise","clifftop sunset","lighthouse night","carnival day","circus night","storybook morning","legendary dusk"],Pw=["troublemaker","cool kid","one of the rat pack","misfit","bookworm","class clown","teacher's pet","star athlete","quiet observer","science whiz","mathlete","debate champ","artsy type","band geek","choir star","drama queen","drama king","hall monitor","lunchroom legend","rebel","rule breaker","overachiever","underachiever","late bloomer","early riser","night owl","daydreamer","go-getter","slacker","fashion icon","trendsetter","gossip","secret keeper","advice giver","peacemaker","instigator","organizer","planner","party starter","wallflower","social butterfly","loner","group leader","sidekick","best friend","frenemy","rival","mentor","protege","new kid","old timer","transfer student","exchange student","sports captain","cheerleader","mascot","techie","gamer","comic collector","skater","biker","car enthusiast","environmentalist","animal lover","gardener","chef","baker","poet","writer","journalist","photographer","videographer","blogger","vlogger","podcaster","public speaker","volunteer","activist","fundraiser","club president","club member","committee chair","treasurer","secretary","historian","yearbook editor","prom king","prom queen","homecoming king","homecoming queen","valedictorian","salutatorian","honor roll student","detention regular","library dweller","cafeteria favorite","bus buddy","carpooler","bike commuter","walker","runner","sprinter","jumper","thrower","swimmer","diver","lifeguard"],Kw=["carries a sense of wonder","radiates quiet confidence","embodies joyful energy","carries a spark of curiosity","radiates warmth and kindness","embodies a playful spirit","carries a gentle wisdom","radiates creative energy","embodies a peaceful calm","carries a vibrant optimism","radiates thoughtful insight","embodies a bold vision","carries a hopeful outlook","radiates a sense of adventure","embodies a nurturing presence","carries a contagious enthusiasm","radiates a calm assurance","embodies a resilient heart","carries a lighthearted joy","radiates a magnetic charm","embodies a generous soul","carries a quiet strength","radiates a loving nature","embodies a determined will","carries a playful mischief","radiates a gentle humor","embodies a passionate drive","carries a poetic grace","radiates a thoughtful calm","embodies a spirited energy","carries a sense of mystery","radiates a classic elegance","embodies a modern edge","carries a timeless style","radiates a youthful exuberance","embodies a wise perspective","carries a soulful depth","radiates a cheerful glow","embodies a fearless heart","carries a creative spark","radiates a peaceful aura","embodies a loyal spirit","carries a sense of belonging","radiates a friendly openness","embodies a curious mind","carries a sense of purpose","radiates a gentle resilience","embodies a thoughtful presence","carries a radiant smile","radiates a sense of fun","embodies a loving heart"],JN=(e,t,n)=>{const r=YN(t),A=Object.entries(n).sort((F,E)=>E[1]-F[1])[0][0];n[A];const i={happy:["radiates positive energy","has a contagious smile","brings sunshine to the room","looks genuinely joyful","is beaming with happiness","has a twinkle in their eye","is glowing with delight","spreads joy wherever they go","has a heartwarming grin","is the life of the party","exudes cheerful vibes","is in high spirits","has a playful sparkle","is full of laughter","is a ray of sunshine","has a jubilant expression","is radiating warmth","is in a celebratory mood","is clearly enjoying the moment","has a blissful aura","is smiling from within","is in a state of pure joy","is delightfully upbeat","is positively glowing","has a spring in their step","is the embodiment of cheerfulness","has a lighthearted spirit","is a beacon of happiness","is always ready to celebrate","has a sparkling personality","is a source of inspiration","is a joy to be around","has a magnetic smile","is a bundle of joy","is a fountain of positivity","is a delight to everyone","is a happiness magnet","is a cheerful companion","is a bringer of good vibes","is a laughter enthusiast","is a mood lifter","is a joy spreader","is a happiness ambassador","is a positivity powerhouse","is a smile generator","is a sunshine soul","is a happiness spark","is a joy igniter","is a cheerful soul","is a radiant friend","is a happiness catalyst","is a joy creator","is a positive force","is a cheerful leader","is a happiness influencer","is a joy architect","is a radiant being","is a cheerful motivator","is a happiness seeker","is a joy explorer","is a radiant presence","is a cheerful visionary"],sad:["seems to be having a thoughtful moment","has a contemplative expression","looks like they could use a hug","has a gentle, melancholic aura","is lost in deep thought","has a wistful gaze","is quietly reflective","shows a touch of sorrow","has a pensive look","is feeling blue","is in a somber mood","has a soft sadness","is experiencing a tender moment","is quietly introspective","has a downcast glance","is feeling sentimental","is in a moment of vulnerability","is showing gentle emotion","is in a subdued state","is feeling a bit low","is quietly yearning","is in a mellow mood","is feeling nostalgic","is in a gentle lull","is in a reflective state","is quietly pondering","is in a moment of longing","is feeling a gentle ache","is in a state of reminiscence","is quietly mourning","is in a moment of solitude","is feeling a quiet ache","is in a state of pensiveness","is quietly grieving","is in a moment of silence","is feeling a gentle loss","is in a state of yearning","is quietly lamenting","is in a moment of quietude","is feeling a gentle sorrow","is in a state of reflection","is quietly brooding","is in a moment of sadness","is feeling a gentle melancholy","is in a state of wistfulness","is quietly sighing","is in a moment of regret","is feeling a gentle disappointment","is in a state of longing","is quietly hoping","is in a moment of patience","is feeling a gentle yearning","is in a state of acceptance","is quietly enduring","is in a moment of waiting","is feeling a gentle patience","is in a state of hope","is quietly wishing","is in a moment of anticipation","is feeling a gentle anticipation"],angry:["shows strong determination","has an intense, focused look","displays powerful emotions","seems passionate about something","is fiercely motivated","has a fiery gaze","is brimming with resolve","is not to be trifled with","is channeling their energy","is standing their ground","is full of conviction","is ready to take action","is showing boldness","is in a defiant mood","is fiercely expressive","is unyielding","is showing a strong will","is in a combative spirit","is not backing down","is in a stormy mood","is radiating intensity","is showing a forceful presence","is in a passionate state","is exuding strength","is a force to be reckoned with","is a powerhouse of emotion","is a determined spirit","is a bold challenger","is a fierce competitor","is a passionate advocate","is a strong-willed individual","is a relentless pursuer","is a fiery leader","is a courageous fighter","is a spirited debater","is a tenacious achiever","is a bold visionary","is a fearless trailblazer","is a passionate creator","is a determined innovator","is a strong-minded thinker","is a relentless doer","is a fiery motivator","is a courageous inspirer","is a spirited influencer","is a tenacious builder","is a bold explorer","is a fearless dreamer","is a passionate seeker","is a determined solver","is a strong-hearted friend","is a relentless supporter","is a fiery protector","is a courageous defender","is a spirited challenger","is a tenacious survivor","is a bold risk-taker","is a fearless leader","is a passionate driver","is a determined winner"],fearful:["looks a bit surprised","seems to be in a moment of wonder","has an alert expression","shows cautious awareness","is slightly apprehensive","is on edge","is in a state of anticipation","is feeling uncertain","is showing a hint of worry","is in a moment of suspense","is feeling a bit tense","is in a watchful state","is showing nervous energy","is in a guarded mood","is feeling a bit anxious","is in a state of alertness","is showing a wary glance","is in a moment of hesitation","is feeling a bit startled","is in a cautious frame of mind","is in a tentative mood","is showing a flicker of fear","is in a vigilant state","is feeling a bit uneasy","is a cautious observer","is a watchful guardian","is a careful planner","is a thoughtful protector","is a vigilant thinker","is a wary traveler","is a tentative explorer","is a careful dreamer","is a cautious friend","is a watchful companion","is a careful listener","is a thoughtful advisor","is a vigilant supporter","is a wary innovator","is a tentative creator","is a careful builder","is a cautious leader","is a watchful motivator","is a careful inspirer","is a thoughtful challenger","is a vigilant survivor","is a wary risk-taker","is a tentative achiever","is a careful winner","is a cautious solver","is a watchful dreamer","is a careful seeker","is a thoughtful doer","is a vigilant friend","is a wary supporter","is a tentative builder","is a careful protector","is a cautious defender"],disgusted:["has a skeptical expression","shows discerning judgment","looks like they've seen something interesting","has a critical eye","is unimpressed","is showing a hint of distaste","is in a judgmental mood","is feeling a bit put off","is showing a look of disapproval","is in a picky mood","is not easily pleased","is showing a scrupulous glance","is in a selective state","is feeling a bit grossed out","is in a discriminating mood","is showing a look of aversion","is in a fastidious frame of mind","is feeling a bit repulsed","is in a critical state","is showing a look of skepticism","is in a scrutinizing mood","is feeling a bit dismissive","is in a rejecting state","is showing a look of distaste","is a discerning critic","is a selective thinker","is a picky chooser","is a fastidious friend","is a critical observer","is a scrupulous judge","is a discriminating advisor","is a selective supporter","is a picky innovator","is a fastidious creator","is a critical builder","is a scrupulous leader","is a discriminating motivator","is a selective inspirer","is a picky challenger","is a fastidious survivor","is a critical risk-taker","is a scrupulous achiever","is a discriminating winner","is a selective solver","is a picky dreamer","is a fastidious seeker","is a critical doer","is a scrupulous friend","is a discriminating supporter","is a selective builder","is a picky protector","is a fastidious defender"],surprised:["looks pleasantly surprised","has an expression of wonder","seems to be in a moment of discovery","shows delightful astonishment","is wide-eyed with amazement","is in awe of something","is caught off guard","is in a state of marvel","is showing a look of revelation","is in a moment of realization","is feeling a rush of excitement","is in a state of disbelief","is showing a look of shock","is in a moment of surprise","is feeling a jolt of wonder","is in a state of fascination","is showing a look of amazement","is in a moment of awe","is feeling a spark of curiosity","is in a state of intrigue","is showing a look of astonishment","is in a moment of delight","is feeling a burst of surprise","is in a state of glee","is a marveling observer","is a curious explorer","is a fascinated thinker","is a surprised dreamer","is a delighted friend","is a shocked companion","is a wondering innovator","is a amazed creator","is a marveling builder","is a curious leader","is a fascinated motivator","is a surprised inspirer","is a delighted challenger","is a shocked survivor","is a wondering risk-taker","is a amazed achiever","is a marveling winner","is a curious solver","is a fascinated dreamer","is a surprised seeker","is a delighted doer","is a shocked friend","is a wondering supporter","is a amazed builder","is a marveling protector","is a curious defender"],neutral:["has a calm, composed presence","shows quiet confidence","has a peaceful demeanor","displays natural elegance","is in a balanced state","is feeling centered","is showing poise","is in a tranquil mood","is feeling at ease","is in a serene state","is showing a relaxed attitude","is in a composed frame of mind","is feeling steady","is in a harmonious mood","is showing a placid expression","is in a restful state","is feeling unruffled","is in a peaceful frame of mind","is showing a gentle presence","is in a mellow mood","is feeling content","is in a state of equanimity","is showing a neutral expression","is in a composed state","is feeling balanced","is a calm observer","is a composed thinker","is a peaceful dreamer","is a tranquil friend","is a steady companion","is a harmonious innovator","is a placid creator","is a restful builder","is a unruffled leader","is a peaceful motivator","is a gentle inspirer","is a mellow challenger","is a content survivor","is a equanimous risk-taker","is a neutral achiever","is a composed winner","is a balanced solver","is a calm dreamer","is a composed seeker","is a peaceful doer","is a tranquil friend","is a steady supporter","is a harmonious builder","is a placid protector","is a restful defender"]}[A],a=2+Math.floor(Math.random()*2),s=[];for(let F=0;F<a;F++){const E=Lf(jN[A],i.length);s.push(i[E])}let u="";s.length===2?u=`${r.subject} ${s[0]} and ${s[1]}`:s.length===3?u=`${r.subject} ${s[0]}, ${s[1]}, and ${s[2]}`:u=`${r.subject} ${s[0]}`;const l=["a bustling city on the coast","a quiet mountain village","a vibrant artistic community","a small town with big dreams","a tech hub in a major metropolis","a peaceful countryside estate","a lively university campus","a creative studio downtown","a family of travelers","a community of innovators","a multicultural neighborhood","a historic district","a scenic lakeside town","a dynamic urban center","a close-knit rural community","a city known for its music scene","a region famous for its cuisine","a place where tradition meets modernity","a town surrounded by nature","a city that never sleeps"],c=["to make a positive impact on the world","to create something truly unique","to inspire others through their actions","to travel and experience new cultures","to master their craft","to build meaningful connections","to achieve personal growth","to bring joy to those around them","to lead by example","to explore the unknown","to turn dreams into reality","to help others succeed","to leave a lasting legacy","to innovate and push boundaries","to find balance and harmony","to share their story with the world","to make every moment count","to learn and evolve","to bring people together","to live life to the fullest"],f=["creative pursuits and new ideas","quiet moments of reflection","adventure and spontaneity","deep conversations","helping others","exploring the outdoors","music and the arts","technology and innovation","spending time with loved ones","learning and discovery","expressing themselves","trying new foods","staying active","reading and storytelling","building things from scratch","solving puzzles","making people laugh","capturing memories","finding beauty in the everyday","embracing change"],h=l[Math.floor(Math.random()*l.length)],d=c[Math.floor(Math.random()*c.length)],g=f[Math.floor(Math.random()*f.length)],m=["free-spirited artist who loves midnight adventures","thoughtful scientist with a passion for jazz and philosophy","world-traveling chef who collects rare spices","gentle poet who finds beauty in the everyday","ambitious entrepreneur with a heart of gold","adventurous photographer who chases sunsets","kind-hearted teacher who inspires everyone","mysterious novelist with a love for old libraries","playful musician who writes love songs","dedicated doctor who volunteers abroad","charming architect who dreams in blueprints","witty comedian who always brings laughter","passionate activist who stands for justice","quiet philosopher who ponders the stars","energetic athlete who loves a challenge","creative designer with a flair for color","curious historian who brings the past to life","compassionate veterinarian who rescues animals","brilliant engineer who builds the future","soulful dancer who moves with grace","loyal firefighter with a brave spirit","gentle gardener who grows rare flowers","visionary filmmaker who tells powerful stories","resourceful pilot who loves the clouds","dedicated coach who motivates greatness","inventive scientist who dreams big","humble craftsman who works with his hands","cheerful barista who knows every customer's name","wise mentor who gives the best advice","playful magician who loves surprises","caring nurse who brings comfort","fearless explorer who seeks the unknown","chill surfer who lives for the waves","meticulous tailor who creates timeless fashion","friendly librarian who loves mysteries","optimistic farmer who loves the land","dedicated park ranger who protects nature","inventive game developer with wild ideas","thoughtful therapist who listens deeply","passionate chef who creates culinary art","gentle yoga instructor who radiates calm","fun-loving DJ who lives for the beat","brave mountain climber who seeks new heights","curious astronomer who maps the stars","generous philanthropist who gives back","quirky inventor who loves gadgets","sincere journalist who tells real stories","adventurous sailor who loves the sea","dedicated scientist who solves mysteries","imaginative animator who brings dreams to life","jazz-loving botanist with a green thumb","mountain guide with a gentle laugh","urban beekeeper who makes wild honey","street artist who paints city walls","vintage car restorer with a love for history","craft beer brewer with a taste for adventure","wildlife photographer who travels the world","salsa dancer who brings energy to every room","comic book writer with a vivid imagination","glassblower who creates shimmering art","marathon runner with endless stamina","puzzle master who loves a challenge","folk singer with a soulful voice","robotics engineer who dreams of the future","urban gardener who grows rooftop jungles","muralist who colors the city","kite surfer who rides the wind","opera singer with a powerful presence","potter who shapes beauty from clay","calligrapher with elegant handwriting","mountain biker who conquers trails","sushi chef with precise skills","antique collector with a story for every piece","parkour athlete who leaps over obstacles","cinematographer who captures magic on film","stand-up paddleboarder who loves the water","urban explorer who finds hidden gems","craft chocolate maker with a sweet touch","digital nomad who works from anywhere","improv actor who lives in the moment","swing dancer with infectious joy","birdwatcher with a keen eye","tattoo artist with a creative soul","rock climber who scales new heights","fashion stylist with a bold vision","street food vendor with global flavors","bonsai cultivator with patience","spoken word poet with a message","surfboard shaper who crafts the perfect ride","urban cyclist who zips through the city","guitar maker with a love for music","hot air balloon pilot with a sense of wonder","mosaic artist who pieces together beauty","sailing instructor who loves the open sea","ice sculptor with a cool touch","park designer who creates green spaces","vinyl record collector with a classic taste","drone pilot who sees the world from above","escape room designer with a clever mind"],p=["free-spirited artist who loves midnight adventures","thoughtful scientist with a passion for jazz and philosophy","world-traveling chef who collects rare spices","gentle poet who finds beauty in the everyday","ambitious entrepreneur with a heart of gold","adventurous photographer who chases sunsets","kind-hearted teacher who inspires everyone","mysterious novelist with a love for old libraries","playful musician who writes love songs","dedicated doctor who volunteers abroad","charming architect who dreams in blueprints","witty comedian who always brings laughter","passionate activist who stands for justice","quiet philosopher who ponders the stars","energetic athlete who loves a challenge","creative designer with a flair for color","curious historian who brings the past to life","compassionate veterinarian who rescues animals","brilliant engineer who builds the future","soulful dancer who moves with grace","loyal firefighter with a brave spirit","gentle gardener who grows rare flowers","visionary filmmaker who tells powerful stories","resourceful pilot who loves the clouds","dedicated coach who motivates greatness","inventive scientist who dreams big","humble craftswoman who works with her hands","cheerful barista who knows every customer's name","wise mentor who gives the best advice","playful magician who loves surprises","caring nurse who brings comfort","fearless explorer who seeks the unknown","chill surfer who lives for the waves","meticulous tailor who creates timeless fashion","friendly librarian who loves mysteries","optimistic farmer who loves the land","dedicated park ranger who protects nature","inventive game developer with wild ideas","thoughtful therapist who listens deeply","passionate chef who creates culinary art","gentle yoga instructor who radiates calm","fun-loving DJ who lives for the beat","brave mountain climber who seeks new heights","curious astronomer who maps the stars","generous philanthropist who gives back","quirky inventor who loves gadgets","sincere journalist who tells real stories","adventurous sailor who loves the sea","dedicated scientist who solves mysteries","imaginative animator who brings dreams to life","jazz-loving botanist with a green thumb","mountain guide with a gentle laugh","urban beekeeper who makes wild honey","street artist who paints city walls","vintage car restorer with a love for history","craft beer brewer with a taste for adventure","wildlife photographer who travels the world","salsa dancer who brings energy to every room","comic book writer with a vivid imagination","glassblower who creates shimmering art","marathon runner with endless stamina","puzzle master who loves a challenge","folk singer with a soulful voice","robotics engineer who dreams of the future","urban gardener who grows rooftop jungles","muralist who colors the city","kite surfer who rides the wind","opera singer with a powerful presence","potter who shapes beauty from clay","calligrapher with elegant handwriting","mountain biker who conquers trails","sushi chef with precise skills","antique collector with a story for every piece","parkour athlete who leaps over obstacles","cinematographer who captures magic on film","stand-up paddleboarder who loves the water","urban explorer who finds hidden gems","craft chocolate maker with a sweet touch","digital nomad who works from anywhere","improv actor who lives in the moment","swing dancer with infectious joy","birdwatcher with a keen eye","tattoo artist with a creative soul","rock climber who scales new heights","fashion stylist with a bold vision","street food vendor with global flavors","bonsai cultivator with patience","spoken word poet with a message","surfboard shaper who crafts the perfect ride","urban cyclist who zips through the city","guitar maker with a love for music","hot air balloon pilot with a sense of wonder","mosaic artist who pieces together beauty","sailing instructor who loves the open sea","ice sculptor with a cool touch","park designer who creates green spaces","vinyl record collector with a classic taste","drone pilot who sees the world from above","escape room designer with a clever mind"];let v,w,B;t==="male"?(w=p,B="His",v=Lf(XN,w.length)):(w=m,B="Her",v=Lf($N,w.length));const y=w[v],C=`${r.subject} attracts ${Nw[Math.floor(Math.random()*Nw.length)]}, loves ${Lw[Math.floor(Math.random()*Lw.length)]}, is often called a ${Mw[Math.floor(Math.random()*Mw.length)]}, and was born on a ${Ow[Math.floor(Math.random()*Ow.length)]}. At school, ${r.subject.toLowerCase()} was called a ${Pw[Math.floor(Math.random()*Pw.length)]}.`,b=[`${u}, and ${Kw[Math.floor(Math.random()*Kw.length)]}.`,`${r.subject} also appears to be around ${Math.round(e)} years old.`,`${r.subject} seems to come from ${h}, with ambitions to ${d.replace("their",r.possessive)}.`,`${r.subject} appears to favour ${g}.`,`${B} perfect partner is a ${y}.`,C],x=qN();return x&&b.push(x),b.join(`

`)};function ZN(){const e=Gt.useRef(null),[t,n]=Gt.useState(""),[r,A]=Gt.useState(!1),[o,i]=Gt.useState(!1),[a,s]=Gt.useState(""),[u,l]=Gt.useState(!1),[c,f]=Gt.useState(""),[h,d]=Gt.useState(null),g=Gt.useRef(null),[m,p]=Gt.useState("");Gt.useEffect(()=>{(async()=>{try{s(""),f("Loading face detection model..."),await Pt.tinyFaceDetector.loadFromUri("/models"),f("Loading age and gender model..."),await Pt.ageGenderNet.loadFromUri("/models"),f("Loading expression model..."),await Pt.faceExpressionNet.loadFromUri("/models"),f(""),i(!0),console.log("All models loaded successfully")}catch(F){console.error("Error loading models:",F),s("Failed to load face detection models. Please make sure the models are in the public/models directory."),f("")}})()},[]);const v=x=>{if(x.target.files&&x.target.files[0]){A(!1),n("Loading image...");const F=x.target.files[0],E=new FileReader;E.onload=I=>{var S;d((S=I.target)==null?void 0:S.result)},E.readAsDataURL(F)}},w=async()=>{if(!o){console.log("Models not loaded yet"),n("Models are still loading...");return}if(!e.current){console.log("No image reference found");return}if(!e.current.complete){console.log("Image not fully loaded yet");return}l(!0),n("Analyzing...");try{console.log("Starting face detection..."),console.log("Image dimensions:",e.current.width,"x",e.current.height);const x=await yk(e.current,new l1).withAgeAndGender().withFaceExpressions();if(console.log("Detection result:",x),!x){console.log("No face detected in image"),n("No face detected. Please try a different image or angle.");return}const{age:F,gender:E,expressions:I}=x;console.log("Age:",F),console.log("Gender:",E),console.log("Expressions:",I),n(JN(F,E,I))}catch(x){console.error("Error analyzing face:",x),n("Error analyzing face. Please try again.")}finally{l(!1)}},B=async()=>{if(p(""),!g.current)return;const x=await Nf(g.current);if(x.width===0||x.height===0){p("Could not capture the image. Please make sure the selfie is visible and fully loaded.");return}const F=x.toDataURL("image/jpeg"),E=await(await fetch(F)).blob(),I=new File([E],"viberater.jpg",{type:"image/jpeg"});if(navigator.canShare&&navigator.canShare({files:[I]}))await navigator.share({files:[I],title:"VibeRater",text:"Check out my VibeRater result!"});else{const S=document.createElement("a");S.href=F,S.download="viberater.jpg",S.click()}},y=async()=>{if(p(""),!g.current)return;const x=await Nf(g.current);if(x.width===0||x.height===0){p("Could not capture the image. Please make sure the selfie is visible and fully loaded.");return}const F=x.toDataURL("image/jpeg"),E=document.createElement("a");E.href=F,E.download="viberater.jpg",E.click()},C=async()=>{if(p(""),!g.current)return;const x=await Nf(g.current);if(x.width===0||x.height===0){p("Could not capture the image. Please make sure the selfie is visible and fully loaded.");return}x.toBlob(async F=>{if(F)try{await navigator.clipboard.write([new window.ClipboardItem({"image/jpeg":F})]),alert("Image copied to clipboard!")}catch{alert("Copying images to clipboard is not supported in your browser. Please use Download instead.")}},"image/jpeg")},b=async()=>{alert("To share on Facebook: 1) Download the image, 2) Go to Facebook, 3) Create a post and upload the image. Facebook does not allow direct image sharing from web apps."),window.open("https://www.facebook.com/","_blank")};return Ce.jsxs("div",{className:"h-screen w-screen flex flex-col bg-gradient-to-br from-pink-100 via-blue-100 to-teal-100",children:[Ce.jsxs("div",{className:"flex-none p-4 text-center",children:[Ce.jsx("h1",{className:"text-4xl sm:text-5xl md:text-6xl lg:text-7xl font-extrabold bg-gradient-to-r from-pink-400 via-purple-400 to-blue-400 text-transparent bg-clip-text drop-shadow-lg",children:"VibeRater"}),Ce.jsx("div",{className:"mt-2 flex justify-center",children:Ce.jsx("span",{className:"text-base md:text-lg lg:text-xl font-medium text-blue-700/80 drop-shadow-sm px-4 py-2 rounded-xl",children:"Upload a selfie to learn what others think of you."})})]}),Ce.jsx("div",{className:"flex-1 flex flex-col items-center justify-start p-4 lg:p-12 w-full",children:Ce.jsx("div",{className:"w-full max-w-6xl",children:Ce.jsxs("div",{className:"flex flex-col space-y-8 w-full",children:[Ce.jsx("div",{className:"flex-none",children:Ce.jsxs("div",{className:"relative group",children:[Ce.jsx("input",{type:"file",accept:"image/*",onChange:v,className:"hidden",id:"file-upload"}),Ce.jsx("label",{htmlFor:"file-upload",className:"block w-full px-8 py-5 text-center bg-gradient-to-r from-pink-300 to-blue-300 text-blue-900 font-semibold rounded-2xl cursor-pointer hover:from-pink-400 hover:to-blue-400 transition-all duration-300 shadow-md hover:shadow-xl border border-white/60 backdrop-blur-md",children:"Choose a Selfie"})]})}),h&&t&&Ce.jsxs("div",{ref:g,className:"flex flex-col lg:flex-row w-full h-auto items-stretch justify-center mt-8 gap-0 lg:gap-8",children:[Ce.jsx("div",{className:"w-full lg:w-1/2 flex items-center justify-center min-w-0",children:Ce.jsx("div",{className:"relative rounded-none overflow-hidden shadow-xl border-none bg-white/60 backdrop-blur-lg flex items-center justify-center w-full h-full",children:Ce.jsx("img",{ref:e,src:h,alt:"Selfie",crossOrigin:"anonymous",className:"w-full h-full object-contain transition-all duration-500 bg-white/80 max-h-[60vh]",onLoad:()=>{A(!0),setTimeout(()=>{w()},100)}})})}),Ce.jsx("div",{className:"w-full lg:w-1/2 flex items-center justify-center min-w-0",children:Ce.jsx("div",{className:"bg-white/70 backdrop-blur-lg rounded-none p-8 border-none shadow-xl w-full h-full flex items-center",children:Ce.jsx("p",{className:"text-blue-900 text-lg md:text-xl lg:text-2xl leading-relaxed font-medium drop-shadow-sm whitespace-pre-line w-full",children:t})})})]})]})})}),Ce.jsxs("div",{className:"flex-1 flex flex-col space-y-8 h-full",children:[c&&Ce.jsx("div",{className:"bg-blue-200/60 border border-blue-300 text-blue-800 px-4 py-3 rounded-xl shadow-sm",children:c}),a&&Ce.jsx("div",{className:"bg-red-200/60 border border-red-300 text-red-800 px-4 py-3 rounded-xl shadow-sm",children:a})]}),h&&t&&r&&Ce.jsx("div",{className:"w-full flex justify-center mt-4",children:Ce.jsxs("div",{className:"flex flex-wrap gap-4 justify-center",children:[Ce.jsx("button",{onClick:B,className:"px-6 py-3 bg-gradient-to-r from-pink-400 to-blue-400 text-white rounded-xl font-bold shadow-lg hover:from-pink-500 hover:to-blue-500 transition-all",children:"Share as JPG"}),Ce.jsx("button",{onClick:y,className:"px-6 py-3 bg-gradient-to-r from-green-400 to-blue-400 text-white rounded-xl font-bold shadow-lg hover:from-green-500 hover:to-blue-500 transition-all",children:"Download JPG"}),Ce.jsx("button",{onClick:C,className:"px-6 py-3 bg-gradient-to-r from-yellow-400 to-pink-400 text-white rounded-xl font-bold shadow-lg hover:from-yellow-500 hover:to-pink-500 transition-all",children:"Copy JPG to Clipboard"}),Ce.jsx("button",{onClick:b,className:"px-6 py-3 bg-gradient-to-r from-blue-600 to-blue-400 text-white rounded-xl font-bold shadow-lg hover:from-blue-700 hover:to-blue-500 transition-all",children:"Share on Facebook"})]})}),m&&Ce.jsx("div",{className:"mt-2 text-red-600 font-semibold",children:m}),Ce.jsx("footer",{className:"w-full text-center py-4 text-blue-900/60 text-sm font-medium select-none",children:"Copyright (c) Lou Schillaci"})]})}function eL(){return Ce.jsx(ZN,{})}Mf.createRoot(document.getElementById("root")).render(Ce.jsx(Kx.StrictMode,{children:Ce.jsx(eL,{})}))});export default tL();
